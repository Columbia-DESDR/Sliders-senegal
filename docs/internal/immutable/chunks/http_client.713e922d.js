import{D as Yo,S as We,i as Ve,U as J,s as He,e as ot,c as st,b as ct,d as H,h as j,k as pt,l as et,n as It,x as Nr,$ as uu,a0 as Gp,a as Gt,f as Zt,a1 as at,R as vt,T as An,r as Nt,a2 as so,a3 as fo,t as Vt,g as Ht,C as ue,J as co,a4 as lu,v as Kr,G as Zp,w as ga,E as Jp,a5 as Kp,y as od,z as sd,A as fd,B as cd,Y as Pn,V as Qp,W as tb,X as eb,o as ge,m as ud,P as nb,a6 as hu,a7 as rb,Q as du}from"./index.ff7e3b01.js";import{c as Mt,n as gu,o as ld,_ as pi,p as Bn,q as uo,r as gr,k as vn,s as Us,t as ib,u as hd,h as Ln,w as zs,x as ab,y as ob,j as sb,z as dd,l as Dt,A as fb,C as cb,D as gd,i as qs,E as ub,F as ma,S as mu,G as lb,H as Vf,I as Hf,R as lo,J as Yf,K as md,L as pu,N as bu,P as hb,T as Mn,U as yu,V as ii,W as db,X as _u,Y as te,Z as Xf,$ as gb,a0 as wu,a1 as mb,a2 as pa,a3 as pd,a4 as ba,d as Jt,f as tn,e as Kt,a5 as pb,m as bb,g as vu,a6 as yb,a7 as _b}from"./index.f220ea68.js";import{w as ee}from"./paths.00543b89.js";var wb=Mt(function(e,n){return Number(e)+Number(n)});function bd(t,e,n){return function(){for(var r=[],i=0,a=t,s=0;s<e.length||i<arguments.length;){var f;s<e.length&&(!gu(e[s])||i>=arguments.length)?f=e[s]:(f=arguments[i],i+=1),r[s]=f,gu(f)||(a-=1),s+=1}return a<=0?n.apply(this,r):ld(a,bd(t,r,n))}}var mr=Mt(function(e,n){return e===1?pi(n):ld(e,bd(e,[],n))});function vb(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var Mb=Mt(function(e,n){return n>e?n:e});function fa(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}var Sb=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=Bn.init,t.prototype["@@transducer/result"]=Bn.result,t.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},t}(),xb=Mt(function(e,n){return new Sb(e,n)}),Tb=Mt(uo(["fantasy-land/map","map"],xb,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return mr(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return gr(function(r,i){return r[i]=e(n[i]),r},{},vn(n));default:return fa(e,n)}}));const Sn=Tb,Ab=Number.isInteger||function(e){return e<<0===e};var kb=Mt(function(e,n){var r=e<0?n.length+e:e;return Us(n)?n.charAt(r):n[r]});const yd=kb;var Eb=Mt(function(e,n){if(n!=null)return Ab(e)?yd(e,n):n[e]});const js=Eb;var Cb=Mt(function(e,n){return Sn(js(e),n)});const Gf=Cb;var Nb=function(){function t(e,n){this.xf=n,this.f=e,this.any=!1}return t.prototype["@@transducer/init"]=Bn.init,t.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,n){return this.f(n)&&(this.any=!0,e=vb(this.xf["@@transducer/step"](e,!0))),e},t}(),Db=Mt(function(e,n){return new Nb(e,n)}),Ib=Mt(uo(["any"],Db,function(e,n){for(var r=0;r<n.length;){if(e(n[r]))return!0;r+=1}return!1}));const _d=Ib;var Lb=Mt(function(e,n){return typeof n["fantasy-land/ap"]=="function"?n["fantasy-land/ap"](e):typeof e.ap=="function"?e.ap(n):typeof e=="function"?function(r){return e(r)(n(r))}:gr(function(r,i){return ib(r,Sn(i,n))},[],e)}),Fb=Mt(function(e,n){return e.apply(this,n)});function Mu(t,e){return zs(e)?e.map(t):vn(e).reduce(function(n,r){return n[r]=t(e[r]),n},{})}var Ob=pi(function t(e){return e=Mu(function(n){return typeof n=="function"?n:t(n)},e),mr(hd(Mb,0,Gf("length",Ln(e))),function(){var n=arguments;return Mu(function(r){return Fb(r,n)},e)})});const Su=Ob;function Ws(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var Pb=Mt(function(e,n){var r=mr(e,n);return mr(e,function(){return gr(Lb,Sn(r,arguments[0]),Array.prototype.slice.call(arguments,1))})}),$b=pi(function(e){return Pb(e.length,e)});function Rb(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var Bb=function(t){return{"@@transducer/init":Bn.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?Rb(r):r}}},Ub=function(e){var n=Bb(e);return{"@@transducer/init":Bn.init,"@@transducer/result":function(r){return n["@@transducer/result"](r)},"@@transducer/step":function(r,i){return ab(i)?gr(n,r,i):gr(n,r,[i])}}},zb=Mt(function(e,n){return Sn(e,Ub(n))}),qb=Mt(uo(["fantasy-land/chain","chain"],zb,function(e,n){return typeof n=="function"?function(r){return e(n(r))(r)}:ob(!1)(Sn(e,n))}));const wd=qb;function Xo(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var $r=function(e){return(e<10?"0":"")+e},jb=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+$r(e.getUTCMonth()+1)+"-"+$r(e.getUTCDate())+"T"+$r(e.getUTCHours())+":"+$r(e.getUTCMinutes())+":"+$r(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Wb(t){return function(){return!t.apply(this,arguments)}}var Vb=Mt(function(e,n){return sb(Wb(e),n)});const Hb=Vb;function vd(t,e){var n=function(s){var f=e.concat([t]);return dd(s,f)?"<Circular>":vd(s,f)},r=function(a,s){return fa(function(f){return Xo(f)+": "+n(a[f])},s.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+fa(n,t).join(", ")+"))";case"[object Array]":return"["+fa(n,t).concat(r(t,Hb(function(a){return/^\d+$/.test(a)},vn(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):Xo(jb(t)))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+n(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object String]":return typeof t=="object"?"new String("+n(t.valueOf())+")":Xo(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var i=t.toString();if(i!=="[object Object]")return i}return"{"+r(t,vn(t)).join(", ")+"}"}}var Go=pi(function(e){return vd(e,[])}),Yb=Mt(function(e,n){if(zs(e)){if(zs(n))return e.concat(n);throw new TypeError(Go(n)+" is not an array")}if(Us(e)){if(Us(n))return e+n;throw new TypeError(Go(n)+" is not a string")}if(e!=null&&Ws(e["fantasy-land/concat"]))return e["fantasy-land/concat"](n);if(e!=null&&Ws(e.concat))return e.concat(n);throw new TypeError(Go(e)+' does not have a method named "concat" or "fantasy-land/concat"')});const ya=Yb;var Xb=yd(-1);const Zo=Xb;var Gb=Mt(function(e,n){return e||n}),Zb=Mt(function(e,n){return Ws(e)?function(){return e.apply(this,arguments)||n.apply(this,arguments)}:$b(Gb)(e,n)});const Jb=Zb;var Kb=pi(function(e){return mr(e.length,function(n,r){var i=Array.prototype.slice.call(arguments,0);return i[0]=r,i[1]=n,e.apply(this,i)})}),Qb=Mt(function(e,n){if(e.length===0||Dt(n))return!1;for(var r=n,i=0;i<e.length;)if(!Dt(r)&&fb(e[i],r))r=r[e[i]],i+=1;else return!1;return!0}),t2=Mt(function(e,n){return Qb([e],n)});const _a=t2;var e2=cb(function(e,n,r){return mr(Math.max(e.length,n.length,r.length),function(){return e.apply(this,arguments)?n.apply(this,arguments):r.apply(this,arguments)})});const xu=e2;var n2=function(){function t(e,n){this.xf=n,this.f=e,this.set=new gd}return t.prototype["@@transducer/init"]=Bn.init,t.prototype["@@transducer/result"]=Bn.result,t.prototype["@@transducer/step"]=function(e,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](e,n):e},t}(),r2=Mt(function(e,n){return new n2(e,n)}),i2=Mt(uo([],r2,function(t,e){for(var n=new gd,r=[],i=0,a,s;i<e.length;)s=e[i],a=t(s),n.add(a)&&r.push(s),i+=1;return r})),a2=i2(qs),o2=Mt(function(e,n){var r,i;return e.length>n.length?(r=e,i=n):(r=n,i=e),a2(ub(Kb(dd)(r),i))});const s2=o2;var f2=Mt(function(e,n){return gr(function(r,i){return r[i]=e(n[i],i,n),r},{},vn(n))});const c2=f2;var u2=hd(wb,0);const l2=u2;var h2=Mt(function(e,n){for(var r={},i=0;i<e.length;)e[i]in n&&(r[e[i]]=n[e[i]]),i+=1;return r});const d2=h2;var g2=Mt(function(e,n){return Array.prototype.slice.call(n,0).sort(e)});const m2=g2;var p2=Mt(function(e,n){return ya(ma(e,n),ma(n,e))});const b2=p2;function ne(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ho(t){let e,n,r;t.length!==2?(e=ne,n=(f,c)=>ne(t(f),c),r=(f,c)=>t(f)-c):(e=t===ne||t===bi?t:y2,n=t,r=t);function i(f,c,u=0,l=f.length){if(u<l){if(e(c,c)!==0)return l;do{const d=u+l>>>1;n(f[d],c)<0?u=d+1:l=d}while(u<l)}return u}function a(f,c,u=0,l=f.length){if(u<l){if(e(c,c)!==0)return l;do{const d=u+l>>>1;n(f[d],c)<=0?u=d+1:l=d}while(u<l)}return u}function s(f,c,u=0,l=f.length){const d=i(f,c,u,l-1);return d>u&&r(f[d-1],c)>-r(f[d],c)?d-1:d}return{left:i,center:s,right:a}}function y2(){return 0}function Md(t){return t===null?NaN:+t}function*_2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const w2=ho(ne),v2=w2.right;ho(Md).center;const Zf=v2;function M2(t){return t.length|0}function S2(t){return!(t>0)}function x2(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function T2(t){return e=>t(...e)}function A2(...t){const e=typeof t[t.length-1]=="function"&&T2(t.pop());t=t.map(x2);const n=t.map(M2),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(S2))return a;for(;;){a.push(i.map((f,c)=>t[c][f]));let s=r;for(;++i[s]===n[s];){if(s===0)return e?a.map(e):a;i[s--]=0}}}function k2(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function Sd(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let s of t)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i));else{let s=-1;for(let f of t)(f=e(f,++s,t))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,a+=r*(f-i))}if(n>1)return a/(n-1)}function E2(t,e){const n=Sd(t,e);return n&&Math.sqrt(n)}function _n(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Un{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],s=e+a,f=Math.abs(e)<Math.abs(a)?e-(s-a):a-(s-e);f&&(n[r++]=f),e=s}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,s=0;if(n>0){for(s=e[--n];n>0&&(r=s,i=e[--n],s=r+i,a=i-(s-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=s+i,i==r-s&&(s=r))}return s}}class zn extends Map{constructor(e,n=Ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Vs(this,e))}has(e){return super.has(Vs(this,e))}set(e,n){return super.set(xd(this,e),n)}delete(e){return super.delete(Td(this,e))}}class go extends Set{constructor(e,n=Ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Vs(this,e))}add(e){return super.add(xd(this,e))}delete(e){return super.delete(Td(this,e))}}function Vs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function xd({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Td({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ad(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Hs(t){return t}function Jf(t,...e){return Kf(t,Hs,Hs,e)}function Qr(t,e,...n){return Kf(t,Hs,e,n)}function C2(t,e,...n){return Kf(t,Array.from,e,n)}function Kf(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const f=new zn,c=r[s++];let u=-1;for(const l of a){const d=c(l,++u,a),h=f.get(d);h?h.push(l):f.set(d,[l])}for(const[l,d]of f)f.set(l,i(d,s));return e(f)}(t,0)}function N2(t,e){return Array.from(e,n=>t[n])}function Ys(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const s of e){const f=wa(s[i],s[a]);if(f)return f}})):(n=t.map(n),r.sort((i,a)=>wa(n[i],n[a]))),N2(t,r)}return t.sort(kd(n))}function kd(t=ne){if(t===ne)return wa;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function wa(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Qf(t,e,n){return(e.length!==2?Ys(Qr(t,e,n),([r,i],[a,s])=>ne(i,s)||ne(r,a)):Ys(Jf(t,n),([r,i],[a,s])=>e(i,s)||ne(r,a))).map(([r])=>r)}const D2=Math.sqrt(50),I2=Math.sqrt(10),L2=Math.sqrt(2);function va(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=D2?10:a>=I2?5:a>=L2?2:1;let f,c,u;return i<0?(u=Math.pow(10,-i)/s,f=Math.round(t*u),c=Math.round(e*u),f/u<t&&++f,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,f=Math.round(t/u),c=Math.round(e/u),f*u<t&&++f,c*u>e&&--c),c<f&&.5<=n&&n<2?va(t,e,n*2):[f,c,u]}function Ma(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?va(e,t,n):va(t,e,n);if(!(a>=i))return[];const f=a-i+1,c=new Array(f);if(r)if(s<0)for(let u=0;u<f;++u)c[u]=(a-u)/-s;else for(let u=0;u<f;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<f;++u)c[u]=(i+u)/-s;else for(let u=0;u<f;++u)c[u]=(i+u)*s;return c}function Xs(t,e,n){return e=+e,t=+t,n=+n,va(t,e,n)[2]}function Gs(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Xs(e,t,n):Xs(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function se(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function F2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Ue(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function O2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Ed(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?wa:kd(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,l=Math.log(c),d=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*d*(c-d)/c)*(u-c/2<0?-1:1),g=Math.max(n,Math.floor(e-u*d/c+h)),p=Math.min(r,Math.floor(e+(c-u)*d/c+h));Ed(t,e,g,p,i)}const a=t[e];let s=n,f=r;for(Rr(t,n,e),i(t[r],a)>0&&Rr(t,n,r);s<f;){for(Rr(t,s,f),++s,--f;i(t[s],a)<0;)++s;for(;i(t[f],a)>0;)--f}i(t[n],a)===0?Rr(t,n,f):(++f,Rr(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Rr(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Cd(t,e=ne){let n,r=!1;if(e.length===1){let i;for(const a of t){const s=e(a);(r?ne(s,i)>0:ne(s,s)===0)&&(n=a,i=s,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Sa(t,e,n){if(t=Float64Array.from(_2(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ue(t);if(e>=1)return se(t);var r,i=(r-1)*e,a=Math.floor(i),s=se(Ed(t,a).subarray(0,a+1)),f=Ue(t.subarray(a+1));return s+(f-s)*(i-a)}}function P2(t,e,n=Md){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),f=+n(t[a+1],a+1,t);return s+(f-s)*(i-a)}}function $2(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function Zs(t,e){return Sa(t,.5,e)}function*R2(t){for(const e of t)yield*e}function Nd(t){return Array.from(R2(t))}function B2(t,e){const n=new zn;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&s>=s&&n.set(s,(n.get(s)||0)+1)}let r,i=0;for(const[a,s]of n)s>i&&(i=s,r=a);return r}function U2(t,e=z2){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function z2(t,e){return[t,e]}function Js(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function qn(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function xa(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function q2(t){return t}var Jo=1,Ko=2,Ks=3,Bi=4,Tu=1e-6;function j2(t){return"translate("+t+",0)"}function W2(t){return"translate(0,"+t+")"}function V2(t){return e=>+t(e)}function H2(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Y2(){return!this.__axis}function X2(t,e){var n=[],r=null,i=null,a=6,s=6,f=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Jo||t===Bi?-1:1,l=t===Bi||t===Ko?"x":"y",d=t===Jo||t===Ks?j2:W2;function h(g){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):q2),b=Math.max(a,0)+f,y=e.range(),_=+y[0]+c,M=+y[y.length-1]+c,w=(e.bandwidth?H2:V2)(e.copy(),c),v=g.selection?g.selection():g,S=v.selectAll(".domain").data([null]),A=v.selectAll(".tick").data(p,e).order(),x=A.exit(),E=A.enter().append("g").attr("class","tick"),I=A.select("line"),k=A.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(E),I=I.merge(E.append("line").attr("stroke","currentColor").attr(l+"2",u*a)),k=k.merge(E.append("text").attr("fill","currentColor").attr(l,u*b).attr("dy",t===Jo?"0em":t===Ks?"0.71em":"0.32em")),g!==v&&(S=S.transition(g),A=A.transition(g),I=I.transition(g),k=k.transition(g),x=x.transition(g).attr("opacity",Tu).attr("transform",function(N){return isFinite(N=w(N))?d(N+c):this.getAttribute("transform")}),E.attr("opacity",Tu).attr("transform",function(N){var $=this.parentNode.__axis;return d(($&&isFinite($=$(N))?$:w(N))+c)})),x.remove(),S.attr("d",t===Bi||t===Ko?s?"M"+u*s+","+_+"H"+c+"V"+M+"H"+u*s:"M"+c+","+_+"V"+M:s?"M"+_+","+u*s+"V"+c+"H"+M+"V"+u*s:"M"+_+","+c+"H"+M),A.attr("opacity",1).attr("transform",function(N){return d(w(N)+c)}),I.attr(l+"2",u*a),k.attr(l,u*b).text(m),v.filter(Y2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ko?"start":t===Bi?"end":"middle"),v.each(function(){this.__axis=w})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(a=s=+g,h):a},h.tickSizeInner=function(g){return arguments.length?(a=+g,h):a},h.tickSizeOuter=function(g){return arguments.length?(s=+g,h):s},h.tickPadding=function(g){return arguments.length?(f=+g,h):f},h.offset=function(g){return arguments.length?(c=+g,h):c},h}function G2(t){return X2(Ks,t)}function qt(t){return typeof t=="string"?new mu([[document.querySelector(t)]],[document.documentElement]):new mu([[t]],lb)}function Z2(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qs(t,e){if(t=Z2(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const tf={capture:!0,passive:!1};function ef(t){t.preventDefault(),t.stopImmediatePropagation()}function J2(t){var e=t.document.documentElement,n=qt(t).on("dragstart.drag",ef,tf);"onselectstart"in e?n.on("selectstart.drag",ef,tf):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function K2(t,e){var n=t.document.documentElement,r=qt(t).on("dragstart.drag",null);e&&(r.on("click.drag",ef,tf),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dd=Math.PI/180,Id=180/Math.PI,Ta=18,Ld=.96422,Fd=1,Od=.82521,Pd=4/29,ur=6/29,$d=3*ur*ur,Q2=ur*ur*ur;function Rd(t){if(t instanceof Be)return new Be(t.l,t.a,t.b,t.opacity);if(t instanceof nn)return Bd(t);t instanceof lo||(t=md(t));var e=ns(t.r),n=ns(t.g),r=ns(t.b),i=Qo((.2225045*e+.7168786*n+.0606169*r)/Fd),a,s;return e===n&&n===r?a=s=i:(a=Qo((.4360747*e+.3850649*n+.1430804*r)/Ld),s=Qo((.0139322*e+.0971045*n+.7141733*r)/Od)),new Be(116*i-16,500*(a-i),200*(i-s),t.opacity)}function nf(t,e,n,r){return arguments.length===1?Rd(t):new Be(t,e,n,r??1)}function Be(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Vf(Be,nf,Hf(Yf,{brighter(t){return new Be(this.l+Ta*(t??1),this.a,this.b,this.opacity)},darker(t){return new Be(this.l-Ta*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Ld*ts(e),t=Fd*ts(t),n=Od*ts(n),new lo(es(3.1338561*e-1.6168667*t-.4906146*n),es(-.9787684*e+1.9161415*t+.033454*n),es(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Qo(t){return t>Q2?Math.pow(t,1/3):t/$d+Pd}function ts(t){return t>ur?t*t*t:$d*(t-Pd)}function es(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ns(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ty(t){if(t instanceof nn)return new nn(t.h,t.c,t.l,t.opacity);if(t instanceof Be||(t=Rd(t)),t.a===0&&t.b===0)return new nn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Id;return new nn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Aa(t,e,n,r){return arguments.length===1?ty(t):new nn(t,e,n,r??1)}function nn(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Bd(t){if(isNaN(t.h))return new Be(t.l,0,0,t.opacity);var e=t.h*Dd;return new Be(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Vf(nn,Aa,Hf(Yf,{brighter(t){return new nn(this.h,this.c,this.l+Ta*(t??1),this.opacity)},darker(t){return new nn(this.h,this.c,this.l-Ta*(t??1),this.opacity)},rgb(){return Bd(this).rgb()}}));var Ud=-.14861,tc=1.78277,ec=-.29227,mo=-.90649,ai=1.97294,Au=ai*mo,ku=ai*tc,Eu=tc*ec-mo*Ud;function ey(t){if(t instanceof $n)return new $n(t.h,t.s,t.l,t.opacity);t instanceof lo||(t=md(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Eu*r+Au*e-ku*n)/(Eu+Au-ku),a=r-i,s=(ai*(n-i)-ec*a)/mo,f=Math.sqrt(s*s+a*a)/(ai*i*(1-i)),c=f?Math.atan2(s,a)*Id-120:NaN;return new $n(c<0?c+360:c,f,i,t.opacity)}function ze(t,e,n,r){return arguments.length===1?ey(t):new $n(t,e,n,r??1)}function $n(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Vf($n,ze,Hf(Yf,{brighter(t){return t=t==null?pu:Math.pow(pu,t),new $n(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bu:Math.pow(bu,t),new $n(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Dd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new lo(255*(e+n*(Ud*r+tc*i)),255*(e+n*(ec*r+mo*i)),255*(e+n*(ai*r)),this.opacity)}}));function ny(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function ry(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function iy(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Dr(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(f){for(s=0;s<r;++s)a[s]=i[s](f);return a}}function ay(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function oy(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Dr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}function Dr(t,e){var n=typeof e,r;return e==null||n==="boolean"?hb(e):(n==="number"?Mn:n==="string"?(r=yu(e))?(e=r,ii):db:e instanceof yu?ii:e instanceof Date?ay:ry(e)?ny:Array.isArray(e)?iy:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?oy:Mn)(t,e)}function nc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function sy(t){return function(e,n){var r=t((e=_u(e)).h,(n=_u(n)).h),i=te(e.s,n.s),a=te(e.l,n.l),s=te(e.opacity,n.opacity);return function(f){return e.h=r(f),e.s=i(f),e.l=a(f),e.opacity=s(f),e+""}}}const fy=sy(Xf);function cy(t,e){var n=te((t=nf(t)).l,(e=nf(e)).l),r=te(t.a,e.a),i=te(t.b,e.b),a=te(t.opacity,e.opacity);return function(s){return t.l=n(s),t.a=r(s),t.b=i(s),t.opacity=a(s),t+""}}function uy(t){return function(e,n){var r=t((e=Aa(e)).h,(n=Aa(n)).h),i=te(e.c,n.c),a=te(e.l,n.l),s=te(e.opacity,n.opacity);return function(f){return e.h=r(f),e.c=i(f),e.l=a(f),e.opacity=s(f),e+""}}}const ly=uy(Xf);function zd(t){return function e(n){n=+n;function r(i,a){var s=t((i=ze(i)).h,(a=ze(a)).h),f=te(i.s,a.s),c=te(i.l,a.l),u=te(i.opacity,a.opacity);return function(l){return i.h=s(l),i.s=f(l),i.l=c(Math.pow(l,n)),i.opacity=u(l),i+""}}return r.gamma=e,r}(1)}zd(Xf);var rc=zd(te);function po(t,e){e===void 0&&(e=t,t=Dr);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var f=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[f](s-f)}}function Ae(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}const rs=t=>()=>t;function hy(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function dy(t){t.stopImmediatePropagation()}function is(t){t.preventDefault(),t.stopImmediatePropagation()}var Cu={name:"drag"},as={name:"space"},er={name:"handle"},nr={name:"center"};const{abs:Nu,max:Ut,min:zt}=Math;function Du(t){return[+t[0],+t[1]]}function Iu(t){return[Du(t[0]),Du(t[1])]}var ca={name:"x",handles:["w","e"].map(ka),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},os={name:"y",handles:["n","s"].map(ka),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ge={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lu={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Fu={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},gy={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},my={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ka(t){return{type:t}}function py(t){return!t.ctrlKey&&!t.button}function by(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function yy(){return navigator.maxTouchPoints||"ontouchstart"in this}function ss(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function _y(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function wy(){return vy(ca)}function vy(t){var e=by,n=py,r=yy,i=!0,a=gb("start","brush","end"),s=6,f;function c(b){var y=b.property("__brush",m).selectAll(".overlay").data([ka("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ge.overlay).merge(y).each(function(){var M=ss(this).extent;qt(this).attr("x",M[0][0]).attr("y",M[0][1]).attr("width",M[1][0]-M[0][0]).attr("height",M[1][1]-M[0][1])}),b.selectAll(".selection").data([ka("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ge.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=b.selectAll(".handle").data(t.handles,function(M){return M.type});_.exit().remove(),_.enter().append("rect").attr("class",function(M){return"handle handle--"+M.type}).attr("cursor",function(M){return Ge[M.type]}),b.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(b,y,_){b.tween?b.on("start.brush",function(M){l(this,arguments).beforestart().start(M)}).on("interrupt.brush end.brush",function(M){l(this,arguments).end(M)}).tween("brush",function(){var M=this,w=M.__brush,v=l(M,arguments),S=w.selection,A=t.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),x=Dr(S,A);function E(I){w.selection=I===1&&A===null?null:x(I),u.call(M),v.brush()}return S!==null&&A!==null?E:E(1)}):b.each(function(){var M=this,w=arguments,v=M.__brush,S=t.input(typeof y=="function"?y.apply(M,w):y,v.extent),A=l(M,w).beforestart();wu(M),v.selection=S===null?null:S,u.call(M),A.start(_).brush(_).end(_)})},c.clear=function(b,y){c.move(b,null,y)};function u(){var b=qt(this),y=ss(this).selection;y?(b.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),b.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?y[1][0]-s/2:y[0][0]-s/2}).attr("y",function(_){return _.type[0]==="s"?y[1][1]-s/2:y[0][1]-s/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?y[1][0]-y[0][0]+s:s}).attr("height",function(_){return _.type==="e"||_.type==="w"?y[1][1]-y[0][1]+s:s})):b.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(b,y,_){var M=b.__brush.emitter;return M&&(!_||!M.clean)?M:new d(b,y,_)}function d(b,y,_){this.that=b,this.args=y,this.state=b.__brush,this.active=0,this.clean=_}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(b,y){return this.starting?(this.starting=!1,this.emit("start",b,y)):this.emit("brush",b),this},brush:function(b,y){return this.emit("brush",b,y),this},end:function(b,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",b,y)),this},emit:function(b,y,_){var M=qt(this.that).datum();a.call(b,this.that,new hy(b,{sourceEvent:y,target:c,selection:t.output(this.state.selection),mode:_,dispatch:a}),M)}};function h(b){if(f&&!b.touches||!n.apply(this,arguments))return;var y=this,_=b.target.__data__.type,M=(i&&b.metaKey?_="overlay":_)==="selection"?Cu:i&&b.altKey?nr:er,w=t===os?null:gy[_],v=t===ca?null:my[_],S=ss(y),A=S.extent,x=S.selection,E=A[0][0],I,k,N=A[0][1],$,R,T=A[1][0],O,L,z=A[1][1],X,B,U=0,V=0,W,D=w&&v&&i&&b.shiftKey,tt,nt,q=Array.from(b.touches||[b],Z=>{const wt=Z.identifier;return Z=Qs(Z,y),Z.point0=Z.slice(),Z.identifier=wt,Z});wu(y);var Q=l(y,arguments,!0).beforestart();if(_==="overlay"){x&&(W=!0);const Z=[q[0],q[1]||q[0]];S.selection=x=[[I=t===os?E:zt(Z[0][0],Z[1][0]),$=t===ca?N:zt(Z[0][1],Z[1][1])],[O=t===os?T:Ut(Z[0][0],Z[1][0]),X=t===ca?z:Ut(Z[0][1],Z[1][1])]],q.length>1&&mt(b)}else I=x[0][0],$=x[0][1],O=x[1][0],X=x[1][1];k=I,R=$,L=O,B=X;var P=qt(y).attr("pointer-events","none"),Y=P.selectAll(".overlay").attr("cursor",Ge[_]);if(b.touches)Q.moved=F,Q.ended=rt;else{var G=qt(b.view).on("mousemove.brush",F,!0).on("mouseup.brush",rt,!0);i&&G.on("keydown.brush",yt,!0).on("keyup.brush",St,!0),J2(b.view)}u.call(y),Q.start(b,M.name);function F(Z){for(const wt of Z.changedTouches||[Z])for(const ae of q)ae.identifier===wt.identifier&&(ae.cur=Qs(wt,y));if(D&&!tt&&!nt&&q.length===1){const wt=q[0];Nu(wt.cur[0]-wt[0])>Nu(wt.cur[1]-wt[1])?nt=!0:tt=!0}for(const wt of q)wt.cur&&(wt[0]=wt.cur[0],wt[1]=wt.cur[1]);W=!0,is(Z),mt(Z)}function mt(Z){const wt=q[0],ae=wt.point0;var Le;switch(U=wt[0]-ae[0],V=wt[1]-ae[1],M){case as:case Cu:{w&&(U=Ut(E-I,zt(T-O,U)),k=I+U,L=O+U),v&&(V=Ut(N-$,zt(z-X,V)),R=$+V,B=X+V);break}case er:{q[1]?(w&&(k=Ut(E,zt(T,q[0][0])),L=Ut(E,zt(T,q[1][0])),w=1),v&&(R=Ut(N,zt(z,q[0][1])),B=Ut(N,zt(z,q[1][1])),v=1)):(w<0?(U=Ut(E-I,zt(T-I,U)),k=I+U,L=O):w>0&&(U=Ut(E-O,zt(T-O,U)),k=I,L=O+U),v<0?(V=Ut(N-$,zt(z-$,V)),R=$+V,B=X):v>0&&(V=Ut(N-X,zt(z-X,V)),R=$,B=X+V));break}case nr:{w&&(k=Ut(E,zt(T,I-U*w)),L=Ut(E,zt(T,O+U*w))),v&&(R=Ut(N,zt(z,$-V*v)),B=Ut(N,zt(z,X+V*v)));break}}L<k&&(w*=-1,Le=I,I=O,O=Le,Le=k,k=L,L=Le,_ in Lu&&Y.attr("cursor",Ge[_=Lu[_]])),B<R&&(v*=-1,Le=$,$=X,X=Le,Le=R,R=B,B=Le,_ in Fu&&Y.attr("cursor",Ge[_=Fu[_]])),S.selection&&(x=S.selection),tt&&(k=x[0][0],L=x[1][0]),nt&&(R=x[0][1],B=x[1][1]),(x[0][0]!==k||x[0][1]!==R||x[1][0]!==L||x[1][1]!==B)&&(S.selection=[[k,R],[L,B]],u.call(y),Q.brush(Z,M.name))}function rt(Z){if(dy(Z),Z.touches){if(Z.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500)}else K2(Z.view,W),G.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);P.attr("pointer-events","all"),Y.attr("cursor",Ge.overlay),S.selection&&(x=S.selection),_y(x)&&(S.selection=null,u.call(y)),Q.end(Z,M.name)}function yt(Z){switch(Z.keyCode){case 16:{D=w&&v;break}case 18:{M===er&&(w&&(O=L-U*w,I=k+U*w),v&&(X=B-V*v,$=R+V*v),M=nr,mt(Z));break}case 32:{(M===er||M===nr)&&(w<0?O=L-U:w>0&&(I=k-U),v<0?X=B-V:v>0&&($=R-V),M=as,Y.attr("cursor",Ge.selection),mt(Z));break}default:return}is(Z)}function St(Z){switch(Z.keyCode){case 16:{D&&(tt=nt=D=!1,mt(Z));break}case 18:{M===nr&&(w<0?O=L:w>0&&(I=k),v<0?X=B:v>0&&($=R),M=er,mt(Z));break}case 32:{M===as&&(Z.altKey?(w&&(O=L-U*w,I=k+U*w),v&&(X=B-V*v,$=R+V*v),M=nr):(w<0?O=L:w>0&&(I=k),v<0?X=B:v>0&&($=R),M=er),Y.attr("cursor",Ge[_]),mt(Z));break}default:return}is(Z)}}function g(b){l(this,arguments).moved(b)}function p(b){l(this,arguments).ended(b)}function m(){var b=this.__brush||{selection:null};return b.extent=Iu(e.apply(this,arguments)),b.dim=t,b}return c.extent=function(b){return arguments.length?(e=typeof b=="function"?b:rs(Iu(b)),c):e},c.filter=function(b){return arguments.length?(n=typeof b=="function"?b:rs(!!b),c):n},c.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:rs(!!b),c):r},c.handleSize=function(b){return arguments.length?(s=+b,c):s},c.keyModifiers=function(b){return arguments.length?(i=!!b,c):i},c.on=function(){var b=a.on.apply(a,arguments);return b===a?c:b},c}const rf=Math.PI,af=2*rf,In=1e-6,My=af-In;function qd(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Sy(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qd;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class jd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?qd:Sy(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,f=this._y1,c=r-e,u=i-n,l=s-e,d=f-n,h=l*l+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>In)if(!(Math.abs(d*c-u*l)>In)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,p=i-f,m=c*c+u*u,b=g*g+p*p,y=Math.sqrt(m),_=Math.sqrt(h),M=a*Math.tan((rf-Math.acos((m+h-b)/(2*y*_)))/2),w=M/_,v=M/y;Math.abs(w-1)>In&&this._append`L${e+w*l},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*g>l*p)},${this._x1=e+v*c},${this._y1=n+v*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),c=r*Math.sin(i),u=e+f,l=n+c,d=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>In||Math.abs(this._y1-l)>In)&&this._append`L${u},${l}`,r&&(h<0&&(h=h%af+af),h>My?this._append`A${r},${r},0,1,${d},${e-f},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=l}`:h>In&&this._append`A${r},${r},0,${+(h>=rf)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function mn(t=3){return new jd(+t)}function xy(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ea(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pr(t){return t=Ea(Math.abs(t)),t?t[1]:NaN}function Ty(t,e){return function(n,r){for(var i=n.length,a=[],s=0,f=t[0],c=0;i>0&&f>0&&(c+f+1>r&&(f=Math.max(1,r-c)),a.push(n.substring(i-=f,i+f)),!((c+=f+1)>r));)f=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Ay(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ky=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oi(t){if(!(e=ky.exec(t)))throw new Error("invalid format: "+t);var e;return new ic({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}oi.prototype=ic.prototype;function ic(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ic.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ey(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Wd;function Cy(t,e){var n=Ea(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Wd=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ea(t,Math.max(0,e+a-1))[0]}function Ou(t,e){var n=Ea(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pu={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xy,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ou(t*100,e),r:Ou,s:Cy,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $u(t){return t}var Ru=Array.prototype.map,Bu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ny(t){var e=t.grouping===void 0||t.thousands===void 0?$u:Ty(Ru.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?$u:Ay(Ru.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(d){d=oi(d);var h=d.fill,g=d.align,p=d.sign,m=d.symbol,b=d.zero,y=d.width,_=d.comma,M=d.precision,w=d.trim,v=d.type;v==="n"?(_=!0,v="g"):Pu[v]||(M===void 0&&(M=12),w=!0,v="g"),(b||h==="0"&&g==="=")&&(b=!0,h="0",g="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",A=m==="$"?r:/[%p]/.test(v)?s:"",x=Pu[v],E=/[defgprs%]/.test(v);M=M===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function I(k){var N=S,$=A,R,T,O;if(v==="c")$=x(k)+$,k="";else{k=+k;var L=k<0||1/k<0;if(k=isNaN(k)?c:x(Math.abs(k),M),w&&(k=Ey(k)),L&&+k==0&&p!=="+"&&(L=!1),N=(L?p==="("?p:f:p==="-"||p==="("?"":p)+N,$=(v==="s"?Bu[8+Wd/3]:"")+$+(L&&p==="("?")":""),E){for(R=-1,T=k.length;++R<T;)if(O=k.charCodeAt(R),48>O||O>57){$=(O===46?i+k.slice(R+1):k.slice(R))+$,k=k.slice(0,R);break}}}_&&!b&&(k=e(k,1/0));var z=N.length+k.length+$.length,X=z<y?new Array(y-z+1).join(h):"";switch(_&&b&&(k=e(X+k,X.length?y-$.length:1/0),X=""),g){case"<":k=N+k+$+X;break;case"=":k=N+X+k+$;break;case"^":k=X.slice(0,z=X.length>>1)+N+k+$+X.slice(z);break;default:k=X+N+k+$;break}return a(k)}return I.toString=function(){return d+""},I}function l(d,h){var g=u((d=oi(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(pr(h)/3)))*3,m=Math.pow(10,-p),b=Bu[8+p/3];return function(y){return g(m*y)+b}}return{format:u,formatPrefix:l}}var Ui,Ir,Vd;Dy({thousands:",",grouping:[3],currency:["$",""]});function Dy(t){return Ui=Ny(t),Ir=Ui.format,Vd=Ui.formatPrefix,Ui}function Iy(t){return Math.max(0,-pr(Math.abs(t)))}function Ly(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pr(e)/3)))*3-pr(Math.abs(t)))}function Fy(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pr(e)-pr(t))+1}var ht=1e-6,Hd=1e-12,gt=Math.PI,Ct=gt/2,Uu=gt/4,fe=gt*2,Yt=180/gt,Et=gt/180,_t=Math.abs,Lr=Math.atan,fn=Math.atan2,dt=Math.cos,Yd=Math.exp,Ca=Math.log,fs=Math.pow,ut=Math.sin,me=Math.sign||function(t){return t>0?1:t<0?-1:0},re=Math.sqrt,ac=Math.tan;function Xd(t){return t>1?0:t<-1?gt:Math.acos(t)}function we(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function pe(){}function Na(t,e){t&&qu.hasOwnProperty(t.type)&&qu[t.type](t,e)}var zu={Feature:function(t,e){Na(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Na(n[r].geometry,e)}},qu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){of(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)of(n[r],e,0)},Polygon:function(t,e){ju(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ju(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Na(n[r],e)}};function of(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function ju(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)of(t[n],e,1);e.polygonEnd()}function Fn(t,e){t&&zu.hasOwnProperty(t.type)?zu[t.type](t,e):Na(t,e)}function sf(t){return[fn(t[1],t[0]),we(t[2])]}function br(t){var e=t[0],n=t[1],r=dt(n);return[r*dt(e),r*ut(e),ut(n)]}function zi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Da(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function cs(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function qi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ff(t){var e=re(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function cf(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function uf(t,e){return _t(t)>gt&&(t-=Math.round(t/fe)*fe),[t,e]}uf.invert=uf;function Gd(t,e,n){return(t%=fe)?e||n?cf(Vu(t),Hu(e,n)):Vu(t):e||n?Hu(e,n):uf}function Wu(t){return function(e,n){return e+=t,_t(e)>gt&&(e-=Math.round(e/fe)*fe),[e,n]}}function Vu(t){var e=Wu(t);return e.invert=Wu(-t),e}function Hu(t,e){var n=dt(t),r=ut(t),i=dt(e),a=ut(e);function s(f,c){var u=dt(c),l=dt(f)*u,d=ut(f)*u,h=ut(c),g=h*n+l*r;return[fn(d*i-g*a,l*n-h*r),we(g*i+d*a)]}return s.invert=function(f,c){var u=dt(c),l=dt(f)*u,d=ut(f)*u,h=ut(c),g=h*i-d*a;return[fn(d*i+h*a,l*n+g*r),we(g*n-l*r)]},s}function Oy(t){t=Gd(t[0]*Et,t[1]*Et,t.length>2?t[2]*Et:0);function e(n){return n=t(n[0]*Et,n[1]*Et),n[0]*=Yt,n[1]*=Yt,n}return e.invert=function(n){return n=t.invert(n[0]*Et,n[1]*Et),n[0]*=Yt,n[1]*=Yt,n},e}function Py(t,e,n,r,i,a){if(n){var s=dt(e),f=ut(e),c=r*n;i==null?(i=e+r*fe,a=e-c/2):(i=Yu(s,i),a=Yu(s,a),(r>0?i<a:i>a)&&(i+=r*fe));for(var u,l=i;r>0?l>a:l<a;l-=c)u=sf([s,-f*dt(l),-f*ut(l)]),t.point(u[0],u[1])}}function Yu(t,e){e=br(e),e[0]-=t,ff(e);var n=Xd(-e[1]);return((-e[2]<0?-n:n)+fe-ht)%fe}function Zd(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:pe,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ua(t,e){return _t(t[0]-e[0])<ht&&_t(t[1]-e[1])<ht}function ji(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Jd(t,e,n,r,i){var a=[],s=[],f,c;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,b=p[0],y=p[m],_;if(ua(b,y)){if(!b[2]&&!y[2]){for(i.lineStart(),f=0;f<m;++f)i.point((b=p[f])[0],b[1]);i.lineEnd();return}y[0]+=2*ht}a.push(_=new ji(b,p,null,!0)),s.push(_.o=new ji(b,null,_,!1)),a.push(_=new ji(y,p,null,!1)),s.push(_.o=new ji(y,null,_,!0))}}),!!a.length){for(s.sort(e),Xu(a),Xu(s),f=0,c=s.length;f<c;++f)s[f].e=n=!n;for(var u=a[0],l,d;;){for(var h=u,g=!0;h.v;)if((h=h.n)===u)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(f=0,c=l.length;f<c;++f)i.point((d=l[f])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(g)for(l=h.p.z,f=l.length-1;f>=0;--f)i.point((d=l[f])[0],d[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,g=!g}while(!h.v);i.lineEnd()}}}function Xu(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function us(t){return _t(t[0])<=gt?t[0]:me(t[0])*((_t(t[0])+gt)%fe-gt)}function $y(t,e){var n=us(e),r=e[1],i=ut(r),a=[ut(n),-dt(n),0],s=0,f=0,c=new Un;i===1?r=Ct+ht:i===-1&&(r=-Ct-ht);for(var u=0,l=t.length;u<l;++u)if(h=(d=t[u]).length)for(var d,h,g=d[h-1],p=us(g),m=g[1]/2+Uu,b=ut(m),y=dt(m),_=0;_<h;++_,p=w,b=S,y=A,g=M){var M=d[_],w=us(M),v=M[1]/2+Uu,S=ut(v),A=dt(v),x=w-p,E=x>=0?1:-1,I=E*x,k=I>gt,N=b*S;if(c.add(fn(N*E*ut(I),y*A+N*dt(I))),s+=k?x+E*fe:x,k^p>=n^w>=n){var $=Da(br(g),br(M));ff($);var R=Da(a,$);ff(R);var T=(k^x>=0?-1:1)*we(R[2]);(r>T||r===T&&($[0]||$[1]))&&(f+=k^x>=0?1:-1)}}return(s<-ht||s<ht&&c<-Hd)^f&1}function Kd(t,e,n,r){return function(i){var a=e(i),s=Zd(),f=e(s),c=!1,u,l,d,h={point:g,lineStart:m,lineEnd:b,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=M,l=[],u=[]},polygonEnd:function(){h.point=g,h.lineStart=m,h.lineEnd=b,l=Nd(l);var w=$y(u,r);l.length?(c||(i.polygonStart(),c=!0),Jd(l,By,w,n,i)):w&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),l=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(w,v){t(w,v)&&i.point(w,v)}function p(w,v){a.point(w,v)}function m(){h.point=p,a.lineStart()}function b(){h.point=g,a.lineEnd()}function y(w,v){d.push([w,v]),f.point(w,v)}function _(){f.lineStart(),d=[]}function M(){y(d[0][0],d[0][1]),f.lineEnd();var w=f.clean(),v=s.result(),S,A=v.length,x,E,I;if(d.pop(),u.push(d),d=null,!!A){if(w&1){if(E=v[0],(x=E.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<x;++S)i.point((I=E[S])[0],I[1]);i.lineEnd()}return}A>1&&w&2&&v.push(v.pop().concat(v.shift())),l.push(v.filter(Ry))}}return h}}function Ry(t){return t.length>1}function By(t,e){return((t=t.x)[0]<0?t[1]-Ct-ht:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-ht:Ct-e[1])}const Gu=Kd(function(){return!0},Uy,qy,[-gt,-Ct]);function Uy(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,s){var f=a>0?gt:-gt,c=_t(a-e);_t(c-gt)<ht?(t.point(e,n=(n+s)/2>0?Ct:-Ct),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(a,n),i=0):r!==f&&c>=gt&&(_t(e-r)<ht&&(e-=r*ht),_t(a-f)<ht&&(a-=f*ht),n=zy(e,n,a,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),i=0),t.point(e=a,n=s),r=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function zy(t,e,n,r){var i,a,s=ut(t-n);return _t(s)>ht?Lr((ut(e)*(a=dt(r))*ut(n)-ut(r)*(i=dt(e))*ut(t))/(i*a*s)):(e+r)/2}function qy(t,e,n,r){var i;if(t==null)i=n*Ct,r.point(-gt,i),r.point(0,i),r.point(gt,i),r.point(gt,0),r.point(gt,-i),r.point(0,-i),r.point(-gt,-i),r.point(-gt,0),r.point(-gt,i);else if(_t(t[0]-e[0])>ht){var a=t[0]<e[0]?gt:-gt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function jy(t){var e=dt(t),n=2*Et,r=e>0,i=_t(e)>ht;function a(l,d,h,g){Py(g,t,n,h,l,d)}function s(l,d){return dt(l)*dt(d)>e}function f(l){var d,h,g,p,m;return{lineStart:function(){p=g=!1,m=1},point:function(b,y){var _=[b,y],M,w=s(b,y),v=r?w?0:u(b,y):w?u(b+(b<0?gt:-gt),y):0;if(!d&&(p=g=w)&&l.lineStart(),w!==g&&(M=c(d,_),(!M||ua(d,M)||ua(_,M))&&(_[2]=1)),w!==g)m=0,w?(l.lineStart(),M=c(_,d),l.point(M[0],M[1])):(M=c(d,_),l.point(M[0],M[1],2),l.lineEnd()),d=M;else if(i&&d&&r^w){var S;!(v&h)&&(S=c(_,d,!0))&&(m=0,r?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1],3)))}w&&(!d||!ua(d,_))&&l.point(_[0],_[1]),d=_,g=w,h=v},lineEnd:function(){g&&l.lineEnd(),d=null},clean:function(){return m|(p&&g)<<1}}}function c(l,d,h){var g=br(l),p=br(d),m=[1,0,0],b=Da(g,p),y=zi(b,b),_=b[0],M=y-_*_;if(!M)return!h&&l;var w=e*y/M,v=-e*_/M,S=Da(m,b),A=qi(m,w),x=qi(b,v);cs(A,x);var E=S,I=zi(A,E),k=zi(E,E),N=I*I-k*(zi(A,A)-1);if(!(N<0)){var $=re(N),R=qi(E,(-I-$)/k);if(cs(R,A),R=sf(R),!h)return R;var T=l[0],O=d[0],L=l[1],z=d[1],X;O<T&&(X=T,T=O,O=X);var B=O-T,U=_t(B-gt)<ht,V=U||B<ht;if(!U&&z<L&&(X=L,L=z,z=X),V?U?L+z>0^R[1]<(_t(R[0]-T)<ht?L:z):L<=R[1]&&R[1]<=z:B>gt^(T<=R[0]&&R[0]<=O)){var W=qi(E,(-I+$)/k);return cs(W,A),[R,sf(W)]}}}function u(l,d){var h=r?t:gt-t,g=0;return l<-h?g|=1:l>h&&(g|=2),d<-h?g|=4:d>h&&(g|=8),g}return Kd(s,f,a,r?[0,-t]:[-gt,t-gt])}function Wy(t,e,n,r,i,a){var s=t[0],f=t[1],c=e[0],u=e[1],l=0,d=1,h=c-s,g=u-f,p;if(p=n-s,!(!h&&p>0)){if(p/=h,h<0){if(p<l)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>l&&(l=p)}if(p=i-s,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>l&&(l=p)}else if(h>0){if(p<l)return;p<d&&(d=p)}if(p=r-f,!(!g&&p>0)){if(p/=g,g<0){if(p<l)return;p<d&&(d=p)}else if(g>0){if(p>d)return;p>l&&(l=p)}if(p=a-f,!(!g&&p<0)){if(p/=g,g<0){if(p>d)return;p>l&&(l=p)}else if(g>0){if(p<l)return;p<d&&(d=p)}return l>0&&(t[0]=s+l*h,t[1]=f+l*g),d<1&&(e[0]=s+d*h,e[1]=f+d*g),!0}}}}}var Hr=1e9,Wi=-Hr;function Qd(t,e,n,r){function i(u,l){return t<=u&&u<=n&&e<=l&&l<=r}function a(u,l,d,h){var g=0,p=0;if(u==null||(g=s(u,d))!==(p=s(l,d))||c(u,l)<0^d>0)do h.point(g===0||g===3?t:n,g>1?r:e);while((g=(g+d+4)%4)!==p);else h.point(l[0],l[1])}function s(u,l){return _t(u[0]-t)<ht?l>0?0:3:_t(u[0]-n)<ht?l>0?2:1:_t(u[1]-e)<ht?l>0?1:0:l>0?3:2}function f(u,l){return c(u.x,l.x)}function c(u,l){var d=s(u,1),h=s(l,1);return d!==h?d-h:d===0?l[1]-u[1]:d===1?u[0]-l[0]:d===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,d=Zd(),h,g,p,m,b,y,_,M,w,v,S,A={point:x,lineStart:N,lineEnd:$,polygonStart:I,polygonEnd:k};function x(T,O){i(T,O)&&l.point(T,O)}function E(){for(var T=0,O=0,L=g.length;O<L;++O)for(var z=g[O],X=1,B=z.length,U=z[0],V,W,D=U[0],tt=U[1];X<B;++X)V=D,W=tt,U=z[X],D=U[0],tt=U[1],W<=r?tt>r&&(D-V)*(r-W)>(tt-W)*(t-V)&&++T:tt<=r&&(D-V)*(r-W)<(tt-W)*(t-V)&&--T;return T}function I(){l=d,h=[],g=[],S=!0}function k(){var T=E(),O=S&&T,L=(h=Nd(h)).length;(O||L)&&(u.polygonStart(),O&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),L&&Jd(h,f,T,a,u),u.polygonEnd()),l=u,h=g=p=null}function N(){A.point=R,g&&g.push(p=[]),v=!0,w=!1,_=M=NaN}function $(){h&&(R(m,b),y&&w&&d.rejoin(),h.push(d.result())),A.point=x,w&&l.lineEnd()}function R(T,O){var L=i(T,O);if(g&&p.push([T,O]),v)m=T,b=O,y=L,v=!1,L&&(l.lineStart(),l.point(T,O));else if(L&&w)l.point(T,O);else{var z=[_=Math.max(Wi,Math.min(Hr,_)),M=Math.max(Wi,Math.min(Hr,M))],X=[T=Math.max(Wi,Math.min(Hr,T)),O=Math.max(Wi,Math.min(Hr,O))];Wy(z,X,t,e,n,r)?(w||(l.lineStart(),l.point(z[0],z[1])),l.point(X[0],X[1]),L||l.lineEnd(),S=!1):L&&(l.lineStart(),l.point(T,O),S=!1)}_=T,M=O,w=L}return A}}const lf=t=>t;var ls=new Un,hf=new Un,t0,e0,df,gf,dn={point:pe,lineStart:pe,lineEnd:pe,polygonStart:function(){dn.lineStart=Vy,dn.lineEnd=Yy},polygonEnd:function(){dn.lineStart=dn.lineEnd=dn.point=pe,ls.add(_t(hf)),hf=new Un},result:function(){var t=ls/2;return ls=new Un,t}};function Vy(){dn.point=Hy}function Hy(t,e){dn.point=n0,t0=df=t,e0=gf=e}function n0(t,e){hf.add(gf*t-df*e),df=t,gf=e}function Yy(){n0(t0,e0)}const Zu=dn;var yr=1/0,Ia=yr,si=-yr,La=si,Xy={point:Gy,lineStart:pe,lineEnd:pe,polygonStart:pe,polygonEnd:pe,result:function(){var t=[[yr,Ia],[si,La]];return si=La=-(Ia=yr=1/0),t}};function Gy(t,e){t<yr&&(yr=t),t>si&&(si=t),e<Ia&&(Ia=e),e>La&&(La=e)}const Fa=Xy;var mf=0,pf=0,Yr=0,Oa=0,Pa=0,fr=0,bf=0,yf=0,Xr=0,r0,i0,Oe,Pe,xe={point:jn,lineStart:Ju,lineEnd:Ku,polygonStart:function(){xe.lineStart=Ky,xe.lineEnd=Qy},polygonEnd:function(){xe.point=jn,xe.lineStart=Ju,xe.lineEnd=Ku},result:function(){var t=Xr?[bf/Xr,yf/Xr]:fr?[Oa/fr,Pa/fr]:Yr?[mf/Yr,pf/Yr]:[NaN,NaN];return mf=pf=Yr=Oa=Pa=fr=bf=yf=Xr=0,t}};function jn(t,e){mf+=t,pf+=e,++Yr}function Ju(){xe.point=Zy}function Zy(t,e){xe.point=Jy,jn(Oe=t,Pe=e)}function Jy(t,e){var n=t-Oe,r=e-Pe,i=re(n*n+r*r);Oa+=i*(Oe+t)/2,Pa+=i*(Pe+e)/2,fr+=i,jn(Oe=t,Pe=e)}function Ku(){xe.point=jn}function Ky(){xe.point=t_}function Qy(){a0(r0,i0)}function t_(t,e){xe.point=a0,jn(r0=Oe=t,i0=Pe=e)}function a0(t,e){var n=t-Oe,r=e-Pe,i=re(n*n+r*r);Oa+=i*(Oe+t)/2,Pa+=i*(Pe+e)/2,fr+=i,i=Pe*t-Oe*e,bf+=i*(Oe+t),yf+=i*(Pe+e),Xr+=i*3,jn(Oe=t,Pe=e)}const Qu=xe;function o0(t){this._context=t}o0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,fe);break}}},result:pe};var _f=new Un,hs,s0,f0,Gr,Zr,$a={point:pe,lineStart:function(){$a.point=e_},lineEnd:function(){hs&&c0(s0,f0),$a.point=pe},polygonStart:function(){hs=!0},polygonEnd:function(){hs=null},result:function(){var t=+_f;return _f=new Un,t}};function e_(t,e){$a.point=c0,s0=Gr=t,f0=Zr=e}function c0(t,e){Gr-=t,Zr-=e,_f.add(re(Gr*Gr+Zr*Zr)),Gr=t,Zr=e}const tl=$a;let el,Ra,nl,rl;class il{constructor(e){this._append=e==null?u0:n_(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==nl||this._append!==Ra){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,nl=r,Ra=this._append,rl=this._,this._=i}this._+=rl;break}}}result(){const e=this._;return this._="",e.length?e:null}}function u0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function n_(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return u0;if(e!==el){const n=10**e;el=e,Ra=function(i){let a=1;this._+=i[0];for(const s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return Ra}function oc(t,e){let n=3,r=4.5,i,a;function s(f){return f&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),Fn(f,i(a))),a.result()}return s.area=function(f){return Fn(f,i(Zu)),Zu.result()},s.measure=function(f){return Fn(f,i(tl)),tl.result()},s.bounds=function(f){return Fn(f,i(Fa)),Fa.result()},s.centroid=function(f){return Fn(f,i(Qu)),Qu.result()},s.projection=function(f){return arguments.length?(i=f==null?(t=null,lf):(t=f).stream,s):t},s.context=function(f){return arguments.length?(a=f==null?(e=null,new il(n)):new o0(e=f),typeof r!="function"&&a.pointRadius(r),s):e},s.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(a.pointRadius(+f),+f),s):r},s.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const c=Math.floor(f);if(!(c>=0))throw new RangeError(`invalid digits: ${f}`);n=c}return e===null&&(a=new il(n)),s},s.projection(t).digits(n).context(e)}function Ba(t){return{stream:bo(t)}}function bo(t){return function(e){var n=new wf;for(var r in t)n[r]=t[r];return n.stream=e,n}}function wf(){}wf.prototype={constructor:wf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function sc(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Fn(n,t.stream(Fa)),e(Fa.result()),r!=null&&t.clipExtent(r),t}function fc(t,e,n){return sc(t,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),f=+e[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(a-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([f,c])},n)}function l0(t,e,n){return fc(t,[[0,0],e],n)}function h0(t,e,n){return sc(t,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),s=(i-a*(r[1][0]+r[0][0]))/2,f=-a*r[0][1];t.scale(150*a).translate([s,f])},n)}function d0(t,e,n){return sc(t,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),s=-a*r[0][0],f=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,f])},n)}var al=16,r_=dt(30*Et);function ol(t,e){return+e?a_(t,e):i_(t)}function i_(t){return bo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function a_(t,e){function n(r,i,a,s,f,c,u,l,d,h,g,p,m,b){var y=u-r,_=l-i,M=y*y+_*_;if(M>4*e&&m--){var w=s+h,v=f+g,S=c+p,A=re(w*w+v*v+S*S),x=we(S/=A),E=_t(_t(S)-1)<ht||_t(a-d)<ht?(a+d)/2:fn(v,w),I=t(E,x),k=I[0],N=I[1],$=k-r,R=N-i,T=_*$-y*R;(T*T/M>e||_t((y*$+_*R)/M-.5)>.3||s*h+f*g+c*p<r_)&&(n(r,i,a,s,f,c,k,N,E,w/=A,v/=A,S,m,b),b.point(k,N),n(k,N,E,w,v,S,u,l,d,h,g,p,m,b))}}return function(r){var i,a,s,f,c,u,l,d,h,g,p,m,b={point:y,lineStart:_,lineEnd:w,polygonStart:function(){r.polygonStart(),b.lineStart=v},polygonEnd:function(){r.polygonEnd(),b.lineStart=_}};function y(x,E){x=t(x,E),r.point(x[0],x[1])}function _(){d=NaN,b.point=M,r.lineStart()}function M(x,E){var I=br([x,E]),k=t(x,E);n(d,h,l,g,p,m,d=k[0],h=k[1],l=x,g=I[0],p=I[1],m=I[2],al,r),r.point(d,h)}function w(){b.point=y,r.lineEnd()}function v(){_(),b.point=S,b.lineEnd=A}function S(x,E){M(i=x,E),a=d,s=h,f=g,c=p,u=m,b.point=M}function A(){n(d,h,l,g,p,m,a,s,i,f,c,u,al,r),b.lineEnd=w,w()}return b}}var o_=bo({point:function(t,e){this.stream.point(t*Et,e*Et)}});function s_(t){return bo({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function f_(t,e,n,r,i){function a(s,f){return s*=r,f*=i,[e+t*s,n-t*f]}return a.invert=function(s,f){return[(s-e)/t*r,(n-f)/t*i]},a}function sl(t,e,n,r,i,a){if(!a)return f_(t,e,n,r,i);var s=dt(a),f=ut(a),c=s*t,u=f*t,l=s/t,d=f/t,h=(f*n-s*e)/t,g=(f*e+s*n)/t;function p(m,b){return m*=r,b*=i,[c*m-u*b+e,n-u*m-c*b]}return p.invert=function(m,b){return[r*(l*m-d*b+h),i*(g-d*m-l*b)]},p}function kn(t){return g0(function(){return t})()}function g0(t){var e,n=150,r=480,i=250,a=0,s=0,f=0,c=0,u=0,l,d=0,h=1,g=1,p=null,m=Gu,b=null,y,_,M,w=lf,v=.5,S,A,x,E,I;function k(T){return x(T[0]*Et,T[1]*Et)}function N(T){return T=x.invert(T[0],T[1]),T&&[T[0]*Yt,T[1]*Yt]}k.stream=function(T){return E&&I===T?E:E=o_(s_(l)(m(S(w(I=T)))))},k.preclip=function(T){return arguments.length?(m=T,p=void 0,R()):m},k.postclip=function(T){return arguments.length?(w=T,b=y=_=M=null,R()):w},k.clipAngle=function(T){return arguments.length?(m=+T?jy(p=T*Et):(p=null,Gu),R()):p*Yt},k.clipExtent=function(T){return arguments.length?(w=T==null?(b=y=_=M=null,lf):Qd(b=+T[0][0],y=+T[0][1],_=+T[1][0],M=+T[1][1]),R()):b==null?null:[[b,y],[_,M]]},k.scale=function(T){return arguments.length?(n=+T,$()):n},k.translate=function(T){return arguments.length?(r=+T[0],i=+T[1],$()):[r,i]},k.center=function(T){return arguments.length?(a=T[0]%360*Et,s=T[1]%360*Et,$()):[a*Yt,s*Yt]},k.rotate=function(T){return arguments.length?(f=T[0]%360*Et,c=T[1]%360*Et,u=T.length>2?T[2]%360*Et:0,$()):[f*Yt,c*Yt,u*Yt]},k.angle=function(T){return arguments.length?(d=T%360*Et,$()):d*Yt},k.reflectX=function(T){return arguments.length?(h=T?-1:1,$()):h<0},k.reflectY=function(T){return arguments.length?(g=T?-1:1,$()):g<0},k.precision=function(T){return arguments.length?(S=ol(A,v=T*T),R()):re(v)},k.fitExtent=function(T,O){return fc(k,T,O)},k.fitSize=function(T,O){return l0(k,T,O)},k.fitWidth=function(T,O){return h0(k,T,O)},k.fitHeight=function(T,O){return d0(k,T,O)};function $(){var T=sl(n,0,0,h,g,d).apply(null,e(a,s)),O=sl(n,r-T[0],i-T[1],h,g,d);return l=Gd(f,c,u),A=cf(e,O),x=cf(l,A),S=ol(A,v),R()}function R(){return E=I=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&N,$()}}function cc(t){var e=0,n=gt/3,r=g0(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*Et,n=a[1]*Et):[e*Yt,n*Yt]},i}function c_(t){var e=dt(t);function n(r,i){return[r*e,ut(i)/e]}return n.invert=function(r,i){return[r/e,we(i*e)]},n}function u_(t,e){var n=ut(t),r=(n+ut(e))/2;if(_t(r)<ht)return c_(t);var i=1+n*(2*r-n),a=re(i)/r;function s(f,c){var u=re(i-2*r*ut(c))/r;return[u*ut(f*=r),a-u*dt(f)]}return s.invert=function(f,c){var u=a-c,l=fn(f,_t(u))*me(u);return u*r<0&&(l-=gt*me(f)*me(u)),[l/r,we((i-(f*f+u*u)*r*r)/(2*r))]},s}function Ua(){return cc(u_).scale(155.424).center([0,33.6442])}function m0(){return Ua().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function l_(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function h_(){var t,e,n=m0(),r,i=Ua().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Ua().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,c,u={point:function(h,g){c=[h,g]}};function l(h){var g=h[0],p=h[1];return c=null,r.point(g,p),c||(a.point(g,p),c)||(f.point(g,p),c)}l.invert=function(h){var g=n.scale(),p=n.translate(),m=(h[0]-p[0])/g,b=(h[1]-p[1])/g;return(b>=.12&&b<.234&&m>=-.425&&m<-.214?i:b>=.166&&b<.234&&m>=-.214&&m<-.115?s:n).invert(h)},l.stream=function(h){return t&&e===h?t:t=l_([n.stream(e=h),i.stream(h),s.stream(h)])},l.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),s.precision(h),d()):n.precision()},l.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),s.scale(h),l.translate(n.translate())):n.scale()},l.translate=function(h){if(!arguments.length)return n.translate();var g=n.scale(),p=+h[0],m=+h[1];return r=n.translate(h).clipExtent([[p-.455*g,m-.238*g],[p+.455*g,m+.238*g]]).stream(u),a=i.translate([p-.307*g,m+.201*g]).clipExtent([[p-.425*g+ht,m+.12*g+ht],[p-.214*g-ht,m+.234*g-ht]]).stream(u),f=s.translate([p-.205*g,m+.212*g]).clipExtent([[p-.214*g+ht,m+.166*g+ht],[p-.115*g-ht,m+.234*g-ht]]).stream(u),d()},l.fitExtent=function(h,g){return fc(l,h,g)},l.fitSize=function(h,g){return l0(l,h,g)},l.fitWidth=function(h,g){return h0(l,h,g)},l.fitHeight=function(h,g){return d0(l,h,g)};function d(){return t=e=null,l}return l.scale(1070)}function p0(t){return function(e,n){var r=dt(e),i=dt(n),a=t(r*i);return a===1/0?[2,0]:[a*i*ut(e),a*ut(n)]}}function yi(t){return function(e,n){var r=re(e*e+n*n),i=t(r),a=ut(i),s=dt(i);return[fn(e*a,r*s),we(r&&n*a/r)]}}var b0=p0(function(t){return re(2/(1+t))});b0.invert=yi(function(t){return 2*we(t/2)});function d_(){return kn(b0).scale(124.75).clipAngle(180-.001)}var y0=p0(function(t){return(t=Xd(t))&&t/ut(t)});y0.invert=yi(function(t){return t});function g_(){return kn(y0).scale(79.4188).clipAngle(180-.001)}function yo(t,e){return[t,Ca(ac((Ct+e)/2))]}yo.invert=function(t,e){return[t,2*Lr(Yd(e))-Ct]};function m_(){return _0(yo).scale(961/fe)}function _0(t){var e=kn(t),n=e.center,r=e.scale,i=e.translate,a=e.clipExtent,s=null,f,c,u;e.scale=function(d){return arguments.length?(r(d),l()):r()},e.translate=function(d){return arguments.length?(i(d),l()):i()},e.center=function(d){return arguments.length?(n(d),l()):n()},e.clipExtent=function(d){return arguments.length?(d==null?s=f=c=u=null:(s=+d[0][0],f=+d[0][1],c=+d[1][0],u=+d[1][1]),l()):s==null?null:[[s,f],[c,u]]};function l(){var d=gt*r(),h=e(Oy(e.rotate()).invert([0,0]));return a(s==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:t===yo?[[Math.max(h[0]-d,s),f],[Math.min(h[0]+d,c),u]]:[[s,Math.max(h[1]-d,f)],[c,Math.min(h[1]+d,u)]])}return l()}function Vi(t){return ac((Ct+t)/2)}function p_(t,e){var n=dt(t),r=t===e?ut(t):Ca(n/dt(e))/Ca(Vi(e)/Vi(t)),i=n*fs(Vi(t),r)/r;if(!r)return yo;function a(s,f){i>0?f<-Ct+ht&&(f=-Ct+ht):f>Ct-ht&&(f=Ct-ht);var c=i/fs(Vi(f),r);return[c*ut(r*s),i-c*dt(r*s)]}return a.invert=function(s,f){var c=i-f,u=me(r)*re(s*s+c*c),l=fn(s,_t(c))*me(c);return c*r<0&&(l-=gt*me(s)*me(c)),[l/r,2*Lr(fs(i/u,1/r))-Ct]},a}function b_(){return cc(p_).scale(109.5).parallels([30,30])}function za(t,e){return[t,e]}za.invert=za;function y_(){return kn(za).scale(152.63)}function __(t,e){var n=dt(t),r=t===e?ut(t):(n-dt(e))/(e-t),i=n/r+t;if(_t(r)<ht)return za;function a(s,f){var c=i-f,u=r*s;return[c*ut(u),i-c*dt(u)]}return a.invert=function(s,f){var c=i-f,u=fn(s,_t(c))*me(c);return c*r<0&&(u-=gt*me(s)*me(c)),[u/r,i-me(r)*re(s*s+c*c)]},a}function w_(){return cc(__).scale(131.154).center([0,13.9389])}var ti=1.340264,ei=-.081106,ni=893e-6,ri=.003796,qa=re(3)/2,v_=12;function w0(t,e){var n=we(qa*ut(e)),r=n*n,i=r*r*r;return[t*dt(n)/(qa*(ti+3*ei*r+i*(7*ni+9*ri*r))),n*(ti+ei*r+i*(ni+ri*r))]}w0.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,a=0,s,f,c;a<v_&&(f=n*(ti+ei*r+i*(ni+ri*r))-e,c=ti+3*ei*r+i*(7*ni+9*ri*r),n-=s=f/c,r=n*n,i=r*r*r,!(_t(s)<Hd));++a);return[qa*t*(ti+3*ei*r+i*(7*ni+9*ri*r))/dt(n),we(ut(n)/qa)]};function M_(){return kn(w0).scale(177.158)}function v0(t,e){var n=dt(e),r=dt(t)*n;return[n*ut(t)/r,ut(e)/r]}v0.invert=yi(Lr);function S_(){return kn(v0).scale(144.049).clipAngle(60)}function M0(t,e){return[dt(e)*ut(t),ut(e)]}M0.invert=yi(we);function x_(){return kn(M0).scale(249.5).clipAngle(90+ht)}function S0(t,e){var n=dt(e),r=1+dt(t)*n;return[n*ut(t)/r,ut(e)/r]}S0.invert=yi(function(t){return 2*Lr(t)});function T_(){return kn(S0).scale(250).clipAngle(142)}function x0(t,e){return[Ca(ac((Ct+e)/2)),-t]}x0.invert=function(t,e){return[-e,2*Lr(Yd(t))-Ct]};function A_(){var t=_0(x0),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ye(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _o(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vf=Symbol("implicit");function uc(){var t=new zn,e=[],n=[],r=vf;function i(a){let s=t.get(a);if(s===void 0){if(r!==vf)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new zn;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return uc(e,n).unknown(r)},Ye.apply(i,arguments),i}function wo(){var t=uc().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,f=!1,c=0,u=0,l=.5;delete t.unknown;function d(){var h=e().length,g=i<r,p=g?i:r,m=g?r:i;a=(m-p)/Math.max(1,h-c+u*2),f&&(a=Math.floor(a)),p+=(m-p-a*(h-c))*l,s=a*(1-c),f&&(p=Math.round(p),s=Math.round(s));var b=Js(h).map(function(y){return p+a*y});return n(g?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,f=!0,d()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(f=!!h,d()):f},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},t.copy=function(){return wo(e(),[r,i]).round(f).paddingInner(c).paddingOuter(u).align(l)},Ye.apply(d(),arguments)}function T0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return T0(e())},t}function k_(){return T0(wo.apply(null,arguments).paddingInner(1))}function E_(t){return function(){return t}}function Mf(t){return+t}var fl=[0,1];function be(t){return t}function Sf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:E_(isNaN(e)?NaN:.5)}function C_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function N_(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Sf(i,r),a=n(s,a)):(r=Sf(r,i),a=n(a,s)),function(f){return a(r(f))}}function D_(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Sf(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(f){var c=Zf(t,f,1,r)-1;return a[c](i[c](f))}}function _i(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vo(){var t=fl,e=fl,n=Dr,r,i,a,s=be,f,c,u;function l(){var h=Math.min(t.length,e.length);return s!==be&&(s=C_(t[0],t[h-1])),f=h>2?D_:N_,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?a:(c||(c=f(t.map(r),e,n)))(r(s(h)))}return d.invert=function(h){return s(i((u||(u=f(e,t.map(r),Mn)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,Mf),l()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=nc,l()},d.clamp=function(h){return arguments.length?(s=h?!0:be,l()):s!==be},d.interpolate=function(h){return arguments.length?(n=h,l()):n},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,g){return r=h,i=g,l()}}function A0(){return vo()(be,be)}function I_(t,e,n,r){var i=Gs(t,e,n),a;switch(r=oi(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Ly(i,s))&&(r.precision=a),Vd(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Fy(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Iy(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ir(r)}function wi(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ma(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return I_(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],f=r[a],c,u,l=10;for(f<s&&(u=s,s=f,f=u,u=i,i=a,a=u);l-- >0;){if(u=Xs(s,f,n),u===c)return r[i]=s,r[a]=f,e(r);if(u>0)s=Math.floor(s/u)*u,f=Math.ceil(f/u)*u;else if(u<0)s=Math.ceil(s*u)/u,f=Math.floor(f*u)/u;else break;c=u}return t},t}function lc(){var t=A0();return t.copy=function(){return _i(t,lc())},Ye.apply(t,arguments),wi(t)}function k0(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Mf),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return k0(t).unknown(e)},t=arguments.length?Array.from(t,Mf):[0,1],wi(n)}function E0(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function cl(t){return Math.log(t)}function ul(t){return Math.exp(t)}function L_(t){return-Math.log(-t)}function F_(t){return-Math.exp(-t)}function O_(t){return isFinite(t)?+("1e"+t):t<0?0:t}function P_(t){return t===10?O_:t===Math.E?Math.exp:e=>Math.pow(t,e)}function $_(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ll(t){return(e,n)=>-t(-e,n)}function C0(t){const e=t(cl,ul),n=e.domain;let r=10,i,a;function s(){return i=$_(r),a=P_(r),n()[0]<0?(i=ll(i),a=ll(a),t(L_,F_)):t(cl,ul),e}return e.base=function(f){return arguments.length?(r=+f,s()):r},e.domain=function(f){return arguments.length?(n(f),s()):n()},e.ticks=f=>{const c=n();let u=c[0],l=c[c.length-1];const d=l<u;d&&([u,l]=[l,u]);let h=i(u),g=i(l),p,m;const b=f==null?10:+f;let y=[];if(!(r%1)&&g-h<b){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(p=1;p<r;++p)if(m=h<0?p/a(-h):p*a(h),!(m<u)){if(m>l)break;y.push(m)}}else for(;h<=g;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/a(-h):p*a(h),!(m<u)){if(m>l)break;y.push(m)}y.length*2<b&&(y=Ma(u,l,b))}else y=Ma(h,g,Math.min(g-h,b)).map(a);return d?y.reverse():y},e.tickFormat=(f,c)=>{if(f==null&&(f=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=oi(c)).precision==null&&(c.trim=!0),c=Ir(c)),f===1/0)return c;const u=Math.max(1,r*f/e.ticks().length);return l=>{let d=l/a(Math.round(i(l)));return d*r<r-.5&&(d*=r),d<=u?c(l):""}},e.nice=()=>n(E0(n(),{floor:f=>a(Math.floor(i(f))),ceil:f=>a(Math.ceil(i(f)))})),e}function N0(){const t=C0(vo()).domain([1,10]);return t.copy=()=>_i(t,N0()).base(t.base()),Ye.apply(t,arguments),t}function hl(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dl(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function D0(t){var e=1,n=t(hl(e),dl(e));return n.constant=function(r){return arguments.length?t(hl(e=+r),dl(e)):e},wi(n)}function I0(){var t=D0(vo());return t.copy=function(){return _i(t,I0()).constant(t.constant())},Ye.apply(t,arguments)}function gl(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function R_(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function B_(t){return t<0?-t*t:t*t}function L0(t){var e=t(be,be),n=1;function r(){return n===1?t(be,be):n===.5?t(R_,B_):t(gl(n),gl(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},wi(e)}function F0(){var t=L0(vo());return t.copy=function(){return _i(t,F0()).exponent(t.exponent())},Ye.apply(t,arguments),t}function O0(){var t=[],e=[],n=[],r;function i(){var s=0,f=Math.max(1,e.length);for(n=new Array(f-1);++s<f;)n[s-1]=P2(t,s/f);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Zf(n,s)]}return a.invertExtent=function(s){var f=e.indexOf(s);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let f of s)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(ne),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return O0().domain(t).range(e).unknown(r)},Ye.apply(a,arguments)}function P0(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Zf(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return P0().domain(t).range(e).unknown(n)},Ye.apply(i,arguments)}const ds=new Date,gs=new Date;function Ft(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),f=i.ceil(a);return a-s<f-a?s:f},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,f)=>{const c=[];if(a=i.ceil(a),f=f==null?1:Math.floor(f),!(a<s)||!(f>0))return c;let u;do c.push(u=new Date(+a)),e(a,f),t(a);while(u<a&&a<s);return c},i.filter=a=>Ft(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,f)=>{if(s>=s)if(f<0)for(;++f<=0;)for(;e(s,-1),!a(s););else for(;--f>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(ds.setTime(+a),gs.setTime(+s),t(ds),t(gs),Math.floor(n(ds,gs))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ja=Ft(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ja.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ft(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ja);ja.range;const rn=1e3,ye=rn*60,an=ye*60,cn=an*24,hc=cn*7,ml=cn*30,ms=cn*365,Te=Ft(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*rn)},(t,e)=>(e-t)/rn,t=>t.getUTCSeconds());Te.range;const vi=Ft(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getMinutes());vi.range;const Mi=Ft(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getUTCMinutes());Mi.range;const Si=Ft(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn-t.getMinutes()*ye)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getHours());Si.range;const xi=Ft(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getUTCHours());xi.range;const Yn=Ft(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ye)/cn,t=>t.getDate()-1);Yn.range;const Mo=Ft(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cn,t=>t.getUTCDate()-1);Mo.range;const So=Ft(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cn,t=>Math.floor(t/cn));So.range;function Xn(t){return Ft(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ye)/hc)}const _r=Xn(0),fi=Xn(1),$0=Xn(2),R0=Xn(3),Wn=Xn(4),B0=Xn(5),U0=Xn(6);_r.range;fi.range;$0.range;R0.range;Wn.range;B0.range;U0.range;function Gn(t){return Ft(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/hc)}const wr=Gn(0),ci=Gn(1),z0=Gn(2),q0=Gn(3),Vn=Gn(4),j0=Gn(5),W0=Gn(6);wr.range;ci.range;z0.range;q0.range;Vn.range;j0.range;W0.range;const Ti=Ft(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Ti.range;const Ai=Ft(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ai.range;const ke=Ft(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ke.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ft(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ke.range;const Ee=Ft(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ee.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ft(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ee.range;function V0(t,e,n,r,i,a){const s=[[Te,1,rn],[Te,5,5*rn],[Te,15,15*rn],[Te,30,30*rn],[a,1,ye],[a,5,5*ye],[a,15,15*ye],[a,30,30*ye],[i,1,an],[i,3,3*an],[i,6,6*an],[i,12,12*an],[r,1,cn],[r,2,2*cn],[n,1,hc],[e,1,ml],[e,3,3*ml],[t,1,ms]];function f(u,l,d){const h=l<u;h&&([u,l]=[l,u]);const g=d&&typeof d.range=="function"?d:c(u,l,d),p=g?g.range(u,+l+1):[];return h?p.reverse():p}function c(u,l,d){const h=Math.abs(l-u)/d,g=ho(([,,b])=>b).right(s,h);if(g===s.length)return t.every(Gs(u/ms,l/ms,d));if(g===0)return ja.every(Math.max(Gs(u,l,d),1));const[p,m]=s[h/s[g-1][2]<s[g][2]/h?g-1:g];return p.every(m)}return[f,c]}const[U_,z_]=V0(Ee,Ai,wr,So,xi,Mi),[q_,j_]=V0(ke,Ti,_r,Yn,Si,vi);function ps(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bs(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Br(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function W_(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,f=t.months,c=t.shortMonths,u=Ur(i),l=zr(i),d=Ur(a),h=zr(a),g=Ur(s),p=zr(s),m=Ur(f),b=zr(f),y=Ur(c),_=zr(c),M={a:L,A:z,b:X,B,c:null,d:vl,e:vl,f:d6,g:S6,G:T6,H:u6,I:l6,j:h6,L:H0,m:g6,M:m6,p:U,q:V,Q:xl,s:Tl,S:p6,u:b6,U:y6,V:_6,w:w6,W:v6,x:null,X:null,y:M6,Y:x6,Z:A6,"%":Sl},w={a:W,A:D,b:tt,B:nt,c:null,d:Ml,e:Ml,f:N6,g:U6,G:q6,H:k6,I:E6,j:C6,L:X0,m:D6,M:I6,p:q,q:Q,Q:xl,s:Tl,S:L6,u:F6,U:O6,V:P6,w:$6,W:R6,x:null,X:null,y:B6,Y:z6,Z:j6,"%":Sl},v={a:I,A:k,b:N,B:$,c:R,d:_l,e:_l,f:o6,g:yl,G:bl,H:wl,I:wl,j:n6,L:a6,m:e6,M:r6,p:E,q:t6,Q:f6,s:c6,S:i6,u:G_,U:Z_,V:J_,w:X_,W:K_,x:T,X:O,y:yl,Y:bl,Z:Q_,"%":s6};M.x=S(n,M),M.X=S(r,M),M.c=S(e,M),w.x=S(n,w),w.X=S(r,w),w.c=S(e,w);function S(P,Y){return function(G){var F=[],mt=-1,rt=0,yt=P.length,St,Z,wt;for(G instanceof Date||(G=new Date(+G));++mt<yt;)P.charCodeAt(mt)===37&&(F.push(P.slice(rt,mt)),(Z=pl[St=P.charAt(++mt)])!=null?St=P.charAt(++mt):Z=St==="e"?" ":"0",(wt=Y[St])&&(St=wt(G,Z)),F.push(St),rt=mt+1);return F.push(P.slice(rt,mt)),F.join("")}}function A(P,Y){return function(G){var F=Br(1900,void 0,1),mt=x(F,P,G+="",0),rt,yt;if(mt!=G.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(Y&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(rt=bs(Br(F.y,0,1)),yt=rt.getUTCDay(),rt=yt>4||yt===0?ci.ceil(rt):ci(rt),rt=Mo.offset(rt,(F.V-1)*7),F.y=rt.getUTCFullYear(),F.m=rt.getUTCMonth(),F.d=rt.getUTCDate()+(F.w+6)%7):(rt=ps(Br(F.y,0,1)),yt=rt.getDay(),rt=yt>4||yt===0?fi.ceil(rt):fi(rt),rt=Yn.offset(rt,(F.V-1)*7),F.y=rt.getFullYear(),F.m=rt.getMonth(),F.d=rt.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),yt="Z"in F?bs(Br(F.y,0,1)).getUTCDay():ps(Br(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(yt+5)%7:F.w+F.U*7-(yt+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,bs(F)):ps(F)}}function x(P,Y,G,F){for(var mt=0,rt=Y.length,yt=G.length,St,Z;mt<rt;){if(F>=yt)return-1;if(St=Y.charCodeAt(mt++),St===37){if(St=Y.charAt(mt++),Z=v[St in pl?Y.charAt(mt++):St],!Z||(F=Z(P,G,F))<0)return-1}else if(St!=G.charCodeAt(F++))return-1}return F}function E(P,Y,G){var F=u.exec(Y.slice(G));return F?(P.p=l.get(F[0].toLowerCase()),G+F[0].length):-1}function I(P,Y,G){var F=g.exec(Y.slice(G));return F?(P.w=p.get(F[0].toLowerCase()),G+F[0].length):-1}function k(P,Y,G){var F=d.exec(Y.slice(G));return F?(P.w=h.get(F[0].toLowerCase()),G+F[0].length):-1}function N(P,Y,G){var F=y.exec(Y.slice(G));return F?(P.m=_.get(F[0].toLowerCase()),G+F[0].length):-1}function $(P,Y,G){var F=m.exec(Y.slice(G));return F?(P.m=b.get(F[0].toLowerCase()),G+F[0].length):-1}function R(P,Y,G){return x(P,e,Y,G)}function T(P,Y,G){return x(P,n,Y,G)}function O(P,Y,G){return x(P,r,Y,G)}function L(P){return s[P.getDay()]}function z(P){return a[P.getDay()]}function X(P){return c[P.getMonth()]}function B(P){return f[P.getMonth()]}function U(P){return i[+(P.getHours()>=12)]}function V(P){return 1+~~(P.getMonth()/3)}function W(P){return s[P.getUTCDay()]}function D(P){return a[P.getUTCDay()]}function tt(P){return c[P.getUTCMonth()]}function nt(P){return f[P.getUTCMonth()]}function q(P){return i[+(P.getUTCHours()>=12)]}function Q(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var Y=S(P+="",M);return Y.toString=function(){return P},Y},parse:function(P){var Y=A(P+="",!1);return Y.toString=function(){return P},Y},utcFormat:function(P){var Y=S(P+="",w);return Y.toString=function(){return P},Y},utcParse:function(P){var Y=A(P+="",!0);return Y.toString=function(){return P},Y}}}var pl={"-":"",_:" ",0:"0"},Rt=/^\s*\d+/,V_=/^%/,H_=/[\\^$*+?|[\]().{}]/g;function bt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Y_(t){return t.replace(H_,"\\$&")}function Ur(t){return new RegExp("^(?:"+t.map(Y_).join("|")+")","i")}function zr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function X_(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function G_(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Z_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function J_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function K_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function bl(t,e,n){var r=Rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function yl(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q_(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function t6(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function e6(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _l(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function n6(t,e,n){var r=Rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wl(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function r6(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function i6(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function a6(t,e,n){var r=Rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function o6(t,e,n){var r=Rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function s6(t,e,n){var r=V_.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function f6(t,e,n){var r=Rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function c6(t,e,n){var r=Rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function vl(t,e){return bt(t.getDate(),e,2)}function u6(t,e){return bt(t.getHours(),e,2)}function l6(t,e){return bt(t.getHours()%12||12,e,2)}function h6(t,e){return bt(1+Yn.count(ke(t),t),e,3)}function H0(t,e){return bt(t.getMilliseconds(),e,3)}function d6(t,e){return H0(t,e)+"000"}function g6(t,e){return bt(t.getMonth()+1,e,2)}function m6(t,e){return bt(t.getMinutes(),e,2)}function p6(t,e){return bt(t.getSeconds(),e,2)}function b6(t){var e=t.getDay();return e===0?7:e}function y6(t,e){return bt(_r.count(ke(t)-1,t),e,2)}function Y0(t){var e=t.getDay();return e>=4||e===0?Wn(t):Wn.ceil(t)}function _6(t,e){return t=Y0(t),bt(Wn.count(ke(t),t)+(ke(t).getDay()===4),e,2)}function w6(t){return t.getDay()}function v6(t,e){return bt(fi.count(ke(t)-1,t),e,2)}function M6(t,e){return bt(t.getFullYear()%100,e,2)}function S6(t,e){return t=Y0(t),bt(t.getFullYear()%100,e,2)}function x6(t,e){return bt(t.getFullYear()%1e4,e,4)}function T6(t,e){var n=t.getDay();return t=n>=4||n===0?Wn(t):Wn.ceil(t),bt(t.getFullYear()%1e4,e,4)}function A6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+bt(e/60|0,"0",2)+bt(e%60,"0",2)}function Ml(t,e){return bt(t.getUTCDate(),e,2)}function k6(t,e){return bt(t.getUTCHours(),e,2)}function E6(t,e){return bt(t.getUTCHours()%12||12,e,2)}function C6(t,e){return bt(1+Mo.count(Ee(t),t),e,3)}function X0(t,e){return bt(t.getUTCMilliseconds(),e,3)}function N6(t,e){return X0(t,e)+"000"}function D6(t,e){return bt(t.getUTCMonth()+1,e,2)}function I6(t,e){return bt(t.getUTCMinutes(),e,2)}function L6(t,e){return bt(t.getUTCSeconds(),e,2)}function F6(t){var e=t.getUTCDay();return e===0?7:e}function O6(t,e){return bt(wr.count(Ee(t)-1,t),e,2)}function G0(t){var e=t.getUTCDay();return e>=4||e===0?Vn(t):Vn.ceil(t)}function P6(t,e){return t=G0(t),bt(Vn.count(Ee(t),t)+(Ee(t).getUTCDay()===4),e,2)}function $6(t){return t.getUTCDay()}function R6(t,e){return bt(ci.count(Ee(t)-1,t),e,2)}function B6(t,e){return bt(t.getUTCFullYear()%100,e,2)}function U6(t,e){return t=G0(t),bt(t.getUTCFullYear()%100,e,2)}function z6(t,e){return bt(t.getUTCFullYear()%1e4,e,4)}function q6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vn(t):Vn.ceil(t),bt(t.getUTCFullYear()%1e4,e,4)}function j6(){return"+0000"}function Sl(){return"%"}function xl(t){return+t}function Tl(t){return Math.floor(+t/1e3)}var rr,dc,ki;W6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function W6(t){return rr=W_(t),dc=rr.format,rr.parse,ki=rr.utcFormat,rr.utcParse,rr}function V6(t){return new Date(t)}function H6(t){return t instanceof Date?+t:+new Date(+t)}function gc(t,e,n,r,i,a,s,f,c,u){var l=A0(),d=l.invert,h=l.domain,g=u(".%L"),p=u(":%S"),m=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),_=u("%b %d"),M=u("%B"),w=u("%Y");function v(S){return(c(S)<S?g:f(S)<S?p:s(S)<S?m:a(S)<S?b:r(S)<S?i(S)<S?y:_:n(S)<S?M:w)(S)}return l.invert=function(S){return new Date(d(S))},l.domain=function(S){return arguments.length?h(Array.from(S,H6)):h().map(V6)},l.ticks=function(S){var A=h();return t(A[0],A[A.length-1],S??10)},l.tickFormat=function(S,A){return A==null?v:u(A)},l.nice=function(S){var A=h();return(!S||typeof S.range!="function")&&(S=e(A[0],A[A.length-1],S??10)),S?h(E0(A,S)):l},l.copy=function(){return _i(l,gc(t,e,n,r,i,a,s,f,c,u))},l}function Y6(){return Ye.apply(gc(q_,j_,ke,Ti,_r,Yn,Si,vi,Te,dc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function X6(){return Ye.apply(gc(U_,z_,Ee,Ai,wr,Mo,xi,Mi,Te,ki).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function To(){var t=0,e=.5,n=1,r=1,i,a,s,f,c,u=be,l,d=!1,h;function g(m){return isNaN(m=+m)?h:(m=.5+((m=+l(m))-a)*(r*m<r*a?f:c),u(d?Math.max(0,Math.min(1,m)):m))}g.domain=function(m){return arguments.length?([t,e,n]=m,i=l(t=+t),a=l(e=+e),s=l(n=+n),f=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,g):[t,e,n]},g.clamp=function(m){return arguments.length?(d=!!m,g):d},g.interpolator=function(m){return arguments.length?(u=m,g):u};function p(m){return function(b){var y,_,M;return arguments.length?([y,_,M]=b,u=po(m,[y,_,M]),g):[u(0),u(.5),u(1)]}}return g.range=p(Dr),g.rangeRound=p(nc),g.unknown=function(m){return arguments.length?(h=m,g):h},function(m){return l=m,i=m(t),a=m(e),s=m(n),f=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,g}}function Z0(){var t=wi(To()(be));return t.copy=function(){return xo(t,Z0())},_o.apply(t,arguments)}function J0(){var t=C0(To()).domain([.1,1,10]);return t.copy=function(){return xo(t,J0()).base(t.base())},_o.apply(t,arguments)}function K0(){var t=D0(To());return t.copy=function(){return xo(t,K0()).constant(t.constant())},_o.apply(t,arguments)}function Q0(){var t=L0(To());return t.copy=function(){return xo(t,Q0()).exponent(t.exponent())},_o.apply(t,arguments)}function lt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const G6=lt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Z6=lt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),J6=lt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),K6=lt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Q6=lt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),t3=lt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),e3=lt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),n3=lt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),r3=lt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),i3=lt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),a3=lt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),At=t=>mb(t[t.length-1]);var t1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(lt);const e1=At(t1);var n1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(lt);const r1=At(n1);var i1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(lt);const a1=At(i1);var o1=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(lt);const s1=At(o1);var xf=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(lt);const Wa=At(xf);var f1=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(lt);const c1=At(f1);var Tf=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(lt);const Va=At(Tf);var u1=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(lt);const l1=At(u1);var h1=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(lt);const d1=At(h1);var g1=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(lt);const m1=At(g1);var p1=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(lt);const b1=At(p1);var y1=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(lt);const _1=At(y1);var w1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(lt);const v1=At(w1);var M1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(lt);const S1=At(M1);var x1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(lt);const T1=At(x1);var A1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(lt);const k1=At(A1);var E1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(lt);const C1=At(E1);var N1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(lt);const D1=At(N1);var I1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(lt);const L1=At(I1);var F1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(lt);const O1=At(F1);var P1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(lt);const $1=At(P1);var R1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(lt);const B1=At(R1);var U1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(lt);const z1=At(U1);var q1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(lt);const j1=At(q1);var W1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(lt);const V1=At(W1);var H1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(lt);const Y1=At(H1);var X1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(lt);const G1=At(X1);function Z1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const J1=rc(ze(300,.5,0),ze(-240,.5,1));var K1=rc(ze(-100,.75,.35),ze(80,1.5,.8)),Q1=rc(ze(260,.75,.35),ze(80,1.5,.8)),Hi=ze();function tg(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Hi.h=360*t-100,Hi.s=1.5-1.5*e,Hi.l=.8-.9*e,Hi+""}var Yi=pa(),o3=Math.PI/3,s3=Math.PI*2/3;function eg(t){var e;return t=(.5-t)*Math.PI,Yi.r=255*(e=Math.sin(t))*e,Yi.g=255*(e=Math.sin(t+o3))*e,Yi.b=255*(e=Math.sin(t+s3))*e,Yi+""}function ng(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Ao(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const rg=Ao(lt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var ig=Ao(lt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ag=Ao(lt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),og=Ao(lt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ir(t){return function(){return t}}const sg=Math.cos,mc=Math.min,Ha=Math.sin,Ot=Math.sqrt,Al=1e-12,Ya=Math.PI,ko=2*Ya;function f3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new jd(e)}function c3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fg(t){this._context=t}fg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Eo(t){return new fg(t)}function u3(t){return t[0]}function l3(t){return t[1]}function h3(t,e){var n=ir(!0),r=null,i=Eo,a=null,s=f3(f);t=typeof t=="function"?t:t===void 0?u3:ir(t),e=typeof e=="function"?e:e===void 0?l3:ir(e);function f(c){var u,l=(c=c3(c)).length,d,h=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=l;++u)!(u<l&&n(d=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(d,u,c),+e(d,u,c));if(g)return a=null,g+""||null}return f.x=function(c){return arguments.length?(t=typeof c=="function"?c:ir(+c),f):t},f.y=function(c){return arguments.length?(e=typeof c=="function"?c:ir(+c),f):e},f.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ir(!!c),f):n},f.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),f):i},f.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),f):r},f}class cg{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function d3(t){return new cg(t,!0)}function g3(t){return new cg(t,!1)}const m3=Ot(3),ug={draw(t,e){const n=Ot(e+mc(e/28,.75))*.59436,r=n/2,i=r*m3;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},ui={draw(t,e){const n=Ot(e/Ya);t.moveTo(n,0),t.arc(0,0,n,0,ko)}},lg={draw(t,e){const n=Ot(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},hg=Ot(1/3),p3=hg*2,dg={draw(t,e){const n=Ot(e/p3),r=n*hg;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},gg={draw(t,e){const n=Ot(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},mg={draw(t,e){const n=Ot(e-mc(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},pg={draw(t,e){const n=Ot(e),r=-n/2;t.rect(r,r,n,n)}},bg={draw(t,e){const n=Ot(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},b3=.8908130915292852,yg=Ha(Ya/10)/Ha(7*Ya/10),y3=Ha(ko/10)*yg,_3=-sg(ko/10)*yg,_g={draw(t,e){const n=Ot(e*b3),r=y3*n,i=_3*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=ko*a/5,f=sg(s),c=Ha(s);t.lineTo(c*n,-f*n),t.lineTo(f*r-c*i,c*r+f*i)}t.closePath()}},ys=Ot(3),wg={draw(t,e){const n=-Ot(e/(ys*3));t.moveTo(0,n*2),t.lineTo(-ys*n,-n),t.lineTo(ys*n,-n),t.closePath()}},w3=Ot(3),vg={draw(t,e){const n=Ot(e)*.6824,r=n/2,i=n*w3/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},le=-.5,he=Ot(3)/2,Af=1/Ot(12),v3=(Af/2+1)*3,Mg={draw(t,e){const n=Ot(e/v3),r=n/2,i=n*Af,a=r,s=n*Af+n,f=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(f,c),t.lineTo(le*r-he*i,he*r+le*i),t.lineTo(le*a-he*s,he*a+le*s),t.lineTo(le*f-he*c,he*f+le*c),t.lineTo(le*r+he*i,le*i-he*r),t.lineTo(le*a+he*s,le*s-he*a),t.lineTo(le*f+he*c,le*c-he*f),t.closePath()}},Sg={draw(t,e){const n=Ot(e-mc(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},M3=[ui,lg,dg,pg,_g,wg,Mg],S3=[ui,mg,Sg,vg,ug,bg,gg];function xn(){}function Xa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Co(t){this._context=t}Co.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function x3(t){return new Co(t)}function xg(t){this._context=t}xg.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function T3(t){return new xg(t)}function Tg(t){this._context=t}Tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function A3(t){return new Tg(t)}function Ag(t,e){this._basis=new Co(t),this._beta=e}Ag.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,s=e[n]-i,f=-1,c;++f<=n;)c=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(r+c*a),this._beta*e[f]+(1-this._beta)*(i+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const k3=function t(e){function n(r){return e===1?new Co(r):new Ag(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function Ga(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function pc(t,e){this._context=t,this._k=(1-e)/6}pc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ga(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const E3=function t(e){function n(r){return new pc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function bc(t,e){this._context=t,this._k=(1-e)/6}bc.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const C3=function t(e){function n(r){return new bc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function yc(t,e){this._context=t,this._k=(1-e)/6}yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const N3=function t(e){function n(r){return new yc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function _c(t,e,n){var r=t._x1,i=t._y1,a=t._x2,s=t._y2;if(t._l01_a>Al){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Al){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/l,s=(s*u+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,s,t._x2,t._y2)}function kg(t,e){this._context=t,this._alpha=e}kg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:_c(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const D3=function t(e){function n(r){return e?new kg(r,e):new pc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Eg(t,e){this._context=t,this._alpha=e}Eg.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_c(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const I3=function t(e){function n(r){return e?new Eg(r,e):new bc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Cg(t,e){this._context=t,this._alpha=e}Cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_c(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const L3=function t(e){function n(r){return e?new Cg(r,e):new yc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Ng(t){this._context=t}Ng.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function F3(t){return new Ng(t)}function kl(t){return t<0?-1:1}function El(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),f=(a*i+s*r)/(r+i);return(kl(a)+kl(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(f))||0}function Cl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _s(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,f=(a-r)/3;t._context.bezierCurveTo(r+f,i+f*e,a-f,s-f*n,a,s)}function Za(t){this._context=t}Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_s(this,this._t0,Cl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_s(this,Cl(this,n=El(this,t,e)),n);break;default:_s(this,this._t0,n=El(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Dg(t){this._context=new Ig(t)}(Dg.prototype=Object.create(Za.prototype)).point=function(t,e){Za.prototype.point.call(this,e,t)};function Ig(t){this._context=t}Ig.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function O3(t){return new Za(t)}function P3(t){return new Dg(t)}function Lg(t){this._context=t}Lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Nl(t),i=Nl(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Nl(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function $3(t){return new Lg(t)}function No(t,e){this._context=t,this._t=e}No.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function R3(t){return new No(t,.5)}function B3(t){return new No(t,0)}function U3(t){return new No(t,1)}function Tn(t){return t!=null&&!Number.isNaN(t)}function qe(t,e){return+Tn(e)-+Tn(t)||ne(t,e)}function Ja(t,e){return+Tn(e)-+Tn(t)||bi(t,e)}function wc(t){return t!=null&&`${t}`!=""}function Fg(t){return isFinite(t)?t:NaN}function Do(t){return t>0&&isFinite(t)?t:NaN}function vc(t){return t<0&&isFinite(t)?t:NaN}function z3(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return`${q3(t.getUTCFullYear())}-${en(t.getUTCMonth()+1,2)}-${en(t.getUTCDate(),2)}${n||r||i||a?`T${en(n,2)}:${en(r,2)}${i||a?`:${en(i,2)}${a?`.${en(a,3)}`:""}`:""}Z`:""}`}function q3(t){return t<0?`-${en(-t,6)}`:t>9999?`+${en(t,6)}`:en(t,4)}function en(t,e){return`${t}`.padStart(e,"0")}const j3=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Og(t,e){return j3.test(t+="")?new Date(t):typeof e=="function"?e(t):e}function vr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return bi(e,n)}const cr=1e3,pn=cr*60,bn=pn*60,je=bn*24,Fe=je*7,Rn=je*30,ln=je*365,ws=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",cr],["5 seconds",5*cr],["15 seconds",15*cr],["30 seconds",30*cr],["minute",pn],["5 minutes",5*pn],["15 minutes",15*pn],["30 minutes",30*pn],["hour",bn],["3 hours",3*bn],["6 hours",6*bn],["12 hours",12*bn],["day",je],["2 days",2*je],["week",Fe],["2 weeks",2*Fe],["month",Rn],["3 months",3*Rn],["6 months",6*Rn],["year",ln],["2 years",2*ln],["5 years",5*ln],["10 years",10*ln],["20 years",20*ln],["50 years",50*ln],["100 years",100*ln]],Mc=new Map([["second",cr],["minute",pn],["hour",bn],["day",je],["monday",Fe],["tuesday",Fe],["wednesday",Fe],["thursday",Fe],["friday",Fe],["saturday",Fe],["sunday",Fe],["week",Fe],["month",Rn],["year",ln]]),Pg=new Map([["second",Te],["minute",vi],["hour",Si],["day",Yn],["monday",fi],["tuesday",$0],["wednesday",R0],["thursday",Wn],["friday",B0],["saturday",U0],["sunday",_r],["week",_r],["month",Ti],["year",ke]]),Sc=new Map([["second",Te],["minute",Mi],["hour",xi],["day",So],["monday",ci],["tuesday",z0],["wednesday",q0],["thursday",Vn],["friday",j0],["saturday",W0],["sunday",wr],["week",wr],["month",Ai],["year",Ee]]),Ei=Symbol("intervalDuration"),Io=Symbol("intervalType");for(const[t,e]of Pg)e[Ei]=Mc.get(t),e[Io]="time";for(const[t,e]of Sc)e[Ei]=Mc.get(t),e[Io]="utc";const Jr=[["year",Ee,"utc"],["month",Ai,"utc"],["day",So,"utc",6*Rn],["hour",xi,"utc",3*je],["minute",Mi,"utc",6*bn],["second",Te,"utc",30*pn]],la=[["year",ke,"time"],["month",Ti,"time"],["day",Yn,"time",6*Rn],["hour",Si,"time",3*je],["minute",vi,"time",6*bn],["second",Te,"time",30*pn]],W3=[Jr[0],la[0],Jr[1],la[1],Jr[2],la[2],...Jr.slice(3)];function $g(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(e);switch(r&&(e=e.slice(r[0].length),n=+r[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let i=Sc.get(e);if(!i)throw new Error(`unknown interval: ${t}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function Rg(t){return Ug($g(t),"time")}function Bg(t){return Ug($g(t),"utc")}function Ug([t,e],n){let r=(n==="time"?Pg:Sc).get(t);return e>1&&(r=r.every(e),r[Ei]=Mc.get(t)*e,r[Io]=n),r}function Dl(t,e){if(!(e>1))return;const n=t[Ei];if(!ws.some(([,i])=>i===n)||n%je===0&&je<n&&n<Rn)return;const[r]=ws[ho(([,i])=>Math.log(i)).center(ws,Math.log(n*e))];return(t[Io]==="time"?Rg:Bg)(r)}function Il(t,e,n){const r=e==="time"?dc:ki;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=V3(n);switch(t){case"millisecond":return ar(r(".%L"),r(":%M:%S"),i);case"second":return ar(r(":%S"),r("%-I:%M"),i);case"minute":return ar(r("%-I:%M"),r("%p"),i);case"hour":return ar(r("%-I %p"),r("%b %-d"),i);case"day":return ar(r("%-d"),r("%b"),i);case"month":return ar(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function V3(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function H3(t){return t==="time"?la:t==="utc"?Jr:W3}function Y3(t,e,n){const r=se(U2(e,(i,a)=>Math.abs(a-i)));if(r<1e3)return Il("millisecond","utc",n);for(const[i,a,s,f]of H3(t)){if(r>f||i==="hour"&&!r)break;if(e.every(c=>a.floor(c)>=c))return Il(i,s,n)}}function ar(t,e,n){return(r,i,a)=>{const s=t(r,i),f=e(r,i),c=i-vr(a);return i!==c&&a[c]!==void 0&&f===e(a[c],c)?s:n(s,f)}}const xc=Object.getPrototypeOf(Uint8Array),X3=Object.prototype.toString;function Zn(t){return t instanceof Array||t instanceof xc}function zg(t){return t instanceof xc&&!G3(t)}function qg(t){return(t==null?void 0:t.prototype)instanceof xc&&!Z3(t)}function G3(t){return t instanceof BigInt64Array||t instanceof BigUint64Array}function Z3(t){return t===BigInt64Array||t===BigUint64Array}const jg=Symbol("reindex");function _e(t,e,n){const r=typeof e;return r==="string"?nm(t)?Tc(t.getChild(e),n):Ll(t,Wg(e),n):r==="function"?Ll(t,e,n):r==="number"||e instanceof Date||r==="boolean"?Lt(t,on(e),n):typeof(e==null?void 0:e.transform)=="function"?kf(e.transform(t),n):J3(kf(e,n),t==null?void 0:t[jg])}function J3(t,e){return t!=null&&e?kc(t,e):t}function Ll(t,e,n){return Lt(t,qg(n)?(r,i)=>Ac(e(r,i)):e,n)}function kf(t,e){return e===void 0?Jn(t):rm(t)?Tc(t,e):t instanceof e?t:e.from(t,qg(e)&&!zg(t)?Ac:void 0)}function Tc(t,e){return t==null?t:(e===void 0||e===Array)&&Mw(t.type)?Yg(Fl(t)):kf(Fl(t),e)}function Fl(t){return t.nullCount?t.toJSON():t.toArray()}const ha=[null],Wg=t=>e=>{var r;const n=e[t];return n===void 0&&e.type==="Feature"?(r=e.properties)==null?void 0:r[t]:n},Vg={transform:En},Me={transform:t=>t},K3=()=>1,Q3=()=>!0,jt=t=>t==null?t:`${t}`,Wt=t=>t==null?t:+t,Hg=t=>t?t[0]:void 0,tw=t=>t?t[1]:void 0,on=t=>()=>t;function ew(t){const e=+`${t}`.slice(1)/100;return(n,r)=>Sa(n,e,r)}function yn(t){return zg(t)?t:Lt(t,Ac,Float64Array)}function Ac(t){return t==null?NaN:Number(t)}function Yg(t){return Lt(t,nw)}function nw(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?Og(t):t==null||isNaN(t=Number(t))?void 0:new Date(t)}function Hn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Oo(t)?[void 0,t]:[t,void 0]}function Xt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function Xg(t,e,n){if(t!=null)return Ne(t,e,n)}function Ne(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function Mr(t){return nm(t)?t:Jn(t)}function Jn(t){if(t==null||Zn(t))return t;if(rm(t))return Tc(t);if(Gg(t))switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;default:return[t]}return Array.from(t)}function Gg(t){switch(t==null?void 0:t.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function Lt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function li(t,e=Array){return t instanceof e?t.slice():e.from(t)}function Zg({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function rw({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function iw(t){return Zg(t)||rw(t)||t.interval!==void 0}function Kn(t){return(t==null?void 0:t.toString)===X3}function Ka(t){return Kn(t)&&(t.type!==void 0||t.domain!==void 0)}function Lo(t){return Kn(t)&&typeof t.transform!="function"}function Sr(t){return Lo(t)&&t.value===void 0&&t.channel===void 0}function aw(t,e,n,r=Me){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function Ci(t,e){return t===void 0&&e===void 0?[Hg,tw]:[t,e]}function Jg({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Hn(e)),t===void 0&&([t]=Hn(n)),t}function hi(t){return Zn(t)?t.length:t==null?void 0:t.numRows}function En(t){const e=hi(t),n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function kc(t,e){return Zn(t)?Lt(e,n=>t[n],t.constructor):Lt(e,n=>t.at(n))}function ow(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function sn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ef(t){let e;return[{transform:()=>e,label:Ni(t)},n=>e=n]}function sw(t){return t==null?[t]:Ef(t)}function Ni(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function fw(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return ve(r)||ve(i)?Lt(r,(a,s)=>new Date((+r[s]+ +i[s])/2)):Lt(r,(a,s)=>(+r[s]+ +i[s])/2,Float64Array)},label:t.label}}function cw(t,e){const n=Kg(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Lt(t,n):t}function Kg(t,e){const n=Ec(t,e);return n&&(r=>Tn(r)?n.floor(r):r)}function Ec(t,e){if(t!=null){if(typeof t=="number")return uw(t);if(typeof t=="string")return(e==="time"?Rg:Bg)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function uw(t){t=+t,0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:n=>Math.floor(n*e)/e,offset:(n,r=1)=>(n*e+Math.floor(r))/e,range:(n,r)=>Js(Math.ceil(n*e),r*e).map(i=>i/e)}:{floor:n=>Math.floor(n/e)*e,offset:(n,r=1)=>n+e*Math.floor(r),range:(n,r)=>Js(Math.ceil(n/e),r/e).map(i=>i*e)}}function Di(t,e){if(t=Ec(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function lw(t,e){if(t=Di(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function hw(t){return typeof(t==null?void 0:t.range)=="function"}function Fo(t){return t===void 0||Lo(t)?t:{value:t}}function dw(t){return t==null?null:{transform:e=>_e(e,t,Float64Array),label:Ni(t)}}function Qn(t){return t&&typeof t[Symbol.iterator]=="function"}function Qg(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Ol(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function ve(t){for(const e of t)if(e!=null)return e instanceof Date}function gw(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&Og(e)}function mw(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function pw(t){for(const e of t)if(e!=null)return typeof e=="number"}function vs(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const bw=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Oo(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||bw.has(t))}function yw(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Qt(t){return t==null||di(t)}function di(t){return/^\s*none\s*$/i.test(t)}function _w(t){return/^\s*round\s*$/i.test(t)}function Cf(t,e){return Xg(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Po(t="middle"){return Cf(t,"frameAnchor")}function ww(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const a=r[i];n===t?n={...n,[i]:a}:n[i]=a}return n}function vw(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function tm(t){return Qn(t)?vw(t):t}function em(t){return t===!0?t="frame":t===!1?t=null:!Gg(t)&&t!=null&&(t=Ne(t,"clip",["frame","sphere"]),t==="sphere"&&(t={type:"Sphere"})),t}function nm(t){return t&&typeof t.getChild=="function"&&typeof t.toArray=="function"&&t.schema&&Array.isArray(t.schema.fields)}function rm(t){return t&&typeof t.toArray=="function"&&t.type}function Mw(t){return t&&(t.typeId===8||t.typeId===10)&&t.unit===1}const Re=Symbol("position"),un=Symbol("color"),Ii=Symbol("radius"),Li=Symbol("length"),Fi=Symbol("opacity"),$o=Symbol("symbol"),im=Symbol("projection"),kt=new Map([["x",Re],["y",Re],["fx",Re],["fy",Re],["r",Ii],["color",un],["opacity",Fi],["symbol",$o],["length",Li],["projection",im]]);function Sw(t){return t===Re||t===im}function xw(t){return t===Re||t===Ii||t===Li||t===Fi}const Tw=Math.sqrt(3),Aw=2/Tw,kw={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*Aw,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},Cc=new Map([["asterisk",ug],["circle",ui],["cross",lg],["diamond",dg],["diamond2",gg],["hexagon",kw],["plus",mg],["square",pg],["square2",bg],["star",_g],["times",Sg],["triangle",wg],["triangle2",vg],["wye",Mg]]);function Nc(t){return t&&typeof t.draw=="function"}function Ew(t){return Nc(t)?!0:typeof t!="string"?!1:Cc.has(t.toLowerCase())}function Dc(t){if(t==null||Nc(t))return t;const e=Cc.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function Cw(t){if(t==null||Nc(t))return[void 0,t];if(typeof t=="string"){const e=Cc.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Ic({filter:t,sort:e,reverse:n,transform:r,initializer:i,...a}={},s){if(r===void 0&&(t!=null&&(r=am(t)),e!=null&&!Sr(e)&&(r=Ms(r,Lc(e))),n&&(r=Ms(r,om))),s!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(e===null||Sr(e))&&{sort:e},transform:Ms(r,s)}}function xr({filter:t,sort:e,reverse:n,initializer:r,...i}={},a){return r===void 0&&(t!=null&&(r=am(t)),e!=null&&!Sr(e)&&(r=Ss(r,Lc(e))),n&&(r=Ss(r,om))),{...i,...(e===null||Sr(e))&&{sort:e},initializer:Ss(r,a)}}function Ms(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,Mr(n),r,i)}}function Ss(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...a){let s,f,c,u,l,d;return{data:f=n,facets:c=r,channels:s}=t.call(this,n,r,i,...a),{data:l=f,facets:d=c,channels:u}=e.call(this,f,c,{...i,...s},...a),{data:l,facets:d,channels:{...s,...u}}}}function Nw(t,e){return(t.initializer!=null?xr:Ic)(t,e)}function am(t){return(e,n)=>{const r=_e(e,t);return{data:e,facets:n.map(i=>i.filter(a=>r[a]))}}}function om(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function Dw(t,{sort:e,...n}={}){return{...(Lo(t)&&t.channel!==void 0?xr:Nw)(n,Lc(t)),sort:Sr(e)?e:null}}function Lc(t){return(typeof t=="function"&&t.length!==1?Iw:Lw)(t)}function Iw(t){return(e,n)=>{const r=Zn(e)?(i,a)=>t(e[i],e[a]):(i,a)=>t(e.get(i),e.get(a));return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function Lw(t){let e,n;({channel:e,value:t,order:n}={...Fo(t)});const r=e==null?void 0:e.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?Ja:qe),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=qe;break;case"descending":n=Ja;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,s)=>{let f;if(e===void 0)f=_e(i,t);else{if(s===void 0)throw new Error("channel sort requires an initializer");if(f=s[e],!f)return{};f=f.value}const c=(u,l)=>n(f[u],f[l]);return{data:i,facets:a.map(u=>u.slice().sort(c))}}}function Fw(t,e,n=Ow){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&Kn(t))return Pw(t);if(typeof t=="function")return $w(t);if(/^p\d{2}$/i.test(t))return Qe(ew(t));switch(`${t}`.toLowerCase()){case"first":return Bw;case"last":return Uw;case"identity":return Rw;case"count":return $l;case"distinct":return zw;case"sum":return e==null?$l:qw;case"proportion":return Rl(e,"data");case"proportion-facet":return Rl(e,"facet");case"deviation":return Qe(E2);case"min":return Qe(Ue);case"min-index":return Qe(O2);case"max":return Qe(se);case"max-index":return Qe(F2);case"mean":return Pl($2);case"median":return Pl(Zs);case"variance":return Qe(Sd);case"mode":return Qe(B2)}return n(t)}function Ow(t){throw new Error(`invalid reduce: ${t}`)}function Pw(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function $w(t){return{reduceIndex(e,n,r){return t(kc(n,e),r)}}}function Qe(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function Pl(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return ve(n)?new Date(r):r}}}const Rw={reduceIndex(t,e){return kc(e,t)}},Bw={reduceIndex(t,e){return e[t[0]]}},Uw={reduceIndex(t,e){return e[t[t.length-1]]}},$l={label:"Frequency",reduceIndex(t){return t.length}},zw={label:"Distinct",reduceIndex(t,e){const n=new go;for(const r of t)n.add(e[r]);return n.size}},qw=Qe(qn);function Rl(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>qn(n,a=>r[a])/i}}function gi(t,{scale:e,type:n,value:r,filter:i,hint:a,label:s=Ni(r)},f){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),sm(f,{scale:e,type:n,value:_e(t,r),label:s,filter:i,hint:a})}function jw(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,gi(e,r,n)]))}function Ww(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:a}])=>{const s=i==null?null:e[i];return[r,s==null?a:Lt(a,s)]}));return n.channels=t,n}function sm(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&vs(r,Oo)?null:"color",e.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&vs(r,yw)?null:"opacity",e.defaultScale="opacity";break;case"symbol":n!==!0&&vs(r,Ew)?(e.scale=null,e.value=Lt(r,Dc)):e.scale="symbol",e.defaultScale="symbol";break;default:e.scale=kt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!kt.has(n))throw new Error(`unknown scale: ${n}`);return e}function Vw(t,e,n,r,i){const{order:a,reverse:s,reduce:f=!0,limit:c}=i;for(const u in i){if(!kt.has(u))continue;let{value:l,order:d=a,reverse:h=s,reduce:g=f,limit:p=c}=Fo(i[u]);const m=l==null?void 0:l.startsWith("-");if(m&&(l=l.slice(1)),d=d===void 0?m!==(l==="width"||l==="height")?cm:fm:Xw(d),g==null||g===!1)continue;const b=u==="fx"||u==="fy"?Yw(e,r[u]):Hw(n,u);if(!b)throw new Error(`missing channel for scale: ${u}`);const y=b.value,[_=0,M=1/0]=Qn(p)?p:p<0?[p]:[0,p];if(l==null)b.domain=()=>{let w=Array.from(new go(y));return h&&(w=w.reverse()),(_!==0||M!==1/0)&&(w=w.slice(_,M)),w};else{const w=l==="data"?t:l==="height"?Bl(n,"y1","y2"):l==="width"?Bl(n,"x1","x2"):Nf(n,l,l==="y"?"y2":l==="x"?"x2":void 0),v=Fw(g===!0?"max":g,w);b.domain=()=>{let S=C2(En(y),A=>v.reduceIndex(A,w),A=>y[A]);return d&&S.sort(d),h&&S.reverse(),(_!==0||M!==1/0)&&(S=S.slice(_,M)),S.map(Hg)}}}}function Hw(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function Yw(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let a=0;a<n.length;++a){const s=r[n[a][0]];for(const f of t[a])i[f]=s}return e}function Bl(t,e,n){const r=Nf(t,e),i=Nf(t,n);return Lt(i,(a,s)=>Math.abs(a-r[s]),Float64Array)}function Nf(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function Xw(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return fm;case"descending":return cm}throw new Error(`invalid order: ${t}`)}function fm([t,e],[n,r]){return qe(e,r)||qe(t,n)}function cm([t,e],[n,r]){return Ja(e,r)||qe(t,n)}function Ul(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const um=new Map([["accent",Z6],["category10",G6],["dark2",J6],["observable10",K6],["paired",Q6],["pastel1",t3],["pastel2",e3],["set1",n3],["set2",r3],["set3",i3],["tableau10",a3]]);function Gw(t){return t!=null&&um.has(`${t}`.toLowerCase())}const zl=new Map([...um,["brbg",Ze(t1,e1)],["prgn",Ze(n1,r1)],["piyg",Ze(i1,a1)],["puor",Ze(o1,s1)],["rdbu",Ze(xf,Wa)],["rdgy",Ze(f1,c1)],["rdylbu",Ze(Tf,Va)],["rdylgn",Ze(u1,l1)],["spectral",Ze(h1,d1)],["burd",ql(xf,Wa)],["buylrd",ql(Tf,Va)],["blues",$t(R1,B1)],["greens",$t(U1,z1)],["greys",$t(q1,j1)],["oranges",$t(X1,G1)],["purples",$t(W1,V1)],["reds",$t(H1,Y1)],["turbo",Je(ng)],["viridis",Je(rg)],["magma",Je(ig)],["inferno",Je(ag)],["plasma",Je(og)],["cividis",Je(Z1)],["cubehelix",Je(J1)],["warm",Je(K1)],["cool",Je(Q1)],["bugn",$t(g1,m1)],["bupu",$t(p1,b1)],["gnbu",$t(y1,_1)],["orrd",$t(w1,v1)],["pubu",$t(x1,T1)],["pubugn",$t(M1,S1)],["purd",$t(A1,k1)],["rdpu",$t(E1,C1)],["ylgn",$t(I1,L1)],["ylgnbu",$t(N1,D1)],["ylorbr",$t(F1,O1)],["ylorrd",$t(P1,$1)],["rainbow",jl(tg)],["sinebow",jl(eg)]]);function $t(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ae(e,n):t[n])}function Ze(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ae(e,n):t[n])}function ql(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ae(r=>e(1-r),n):t[n].slice().reverse())}function Je(t){return({length:e})=>Ae(t,Math.max(2,Math.floor(e)))}function jl(t){return({length:e})=>Ae(t,Math.floor(e)+1).slice(0,-1)}function lm(t){const e=`${t}`.toLowerCase();if(!zl.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return zl.get(e)}function Ro(t,e){const n=lm(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function Zw(t,e="greys"){const n=new Set,[r,i]=Ro(e,2);for(const a of t)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Wl=new Map([["brbg",e1],["prgn",r1],["piyg",a1],["puor",s1],["rdbu",Wa],["rdgy",c1],["rdylbu",Va],["rdylgn",l1],["spectral",d1],["burd",t=>Wa(1-t)],["buylrd",t=>Va(1-t)],["blues",B1],["greens",z1],["greys",j1],["purples",V1],["reds",Y1],["oranges",G1],["turbo",ng],["viridis",rg],["magma",ig],["inferno",ag],["plasma",og],["cividis",Z1],["cubehelix",J1],["warm",K1],["cool",Q1],["bugn",m1],["bupu",b1],["gnbu",_1],["orrd",v1],["pubugn",S1],["pubu",T1],["purd",k1],["rdpu",C1],["ylgnbu",D1],["ylgn",L1],["ylorbr",O1],["ylorrd",$1],["rainbow",tg],["sinebow",eg]]);function Fc(t){const e=`${t}`.toLowerCase();if(!Wl.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Wl.get(e)}const Jw=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Kw(t){return t!=null&&Jw.has(`${t}`.toLowerCase())}const hm=t=>e=>t(1-e),xs=[0,1],Vl=new Map([["number",Mn],["rgb",ii],["hsl",fy],["hcl",ly],["lab",cy]]);function dm(t){const e=`${t}`.toLowerCase();if(!Vl.has(e))throw new Error(`unknown interpolator: ${e}`);return Vl.get(e)}function Oi(t,e,n,{type:r,nice:i,clamp:a,zero:s,domain:f=mm(t,n),unknown:c,round:u,scheme:l,interval:d,range:h=kt.get(t)===Ii?c5(n,f):kt.get(t)===Li?u5(n,f):kt.get(t)===Fi?xs:void 0,interpolate:g=kt.get(t)===un?l==null&&h!==void 0?ii:Fc(l!==void 0?l:r==="cyclical"?"rainbow":"turbo"):u?nc:Mn,reverse:p}){if(f=Hl(f),d=Di(d,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof g!="function"&&(g=dm(g)),p=!!p,h!==void 0){const m=f.length,b=(h=Hl(h)).length;if(m!==b){if(g.length===1)throw new Error("invalid piecewise interpolator");g=po(g,h),h=void 0}}if(g.length===1?(p&&(g=hm(g),p=!1),h===void 0&&(h=Float64Array.from(f,(m,b)=>b/(f.length-1)),h.length===2&&(h=xs)),e.interpolate((h===xs?on:Pc)(g))):e.interpolate(g),s){const[m,b]=_n(f);(m>0||b<0)&&(f=li(f),(vr(f)||1)===Math.sign(m)?f[0]=0:f[f.length-1]=0)}return p&&(f=xa(f)),e.domain(f).unknown(c),i&&(e.nice(Qw(i,r)),f=e.domain()),h!==void 0&&e.range(h),a&&e.clamp(a),{type:r,domain:f,range:h,scale:e,interpolate:g,interval:d}}function Hl(t){return t=Jn(t),t.length>=2?t:[t[0],t[0]]}function Qw(t,e){return t===!0?void 0:typeof t=="number"?t:lw(t,e)}function t5(t,e,n){return Oi(t,lc(),e,n)}function e5(t,e,n){return gm(t,e,{...n,exponent:.5})}function gm(t,e,{exponent:n=1,...r}){return Oi(t,F0().exponent(n),e,{...r,type:"pow"})}function n5(t,e,{base:n=10,domain:r=l5(e),...i}){return Oi(t,N0().base(n),e,{...i,domain:r})}function r5(t,e,{constant:n=1,...r}){return Oi(t,I0().constant(n),e,r)}function i5(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:s=h5(e),unknown:f,interpolate:c,reverse:u}){return n===void 0&&(n=c!==void 0?Ae(c,i):kt.get(t)===un?Ro(a,i):void 0),s.length>0&&(s=O0(s,n===void 0?{length:i}:n).quantiles()),Oc(t,e,{domain:s,range:n,reverse:u,unknown:f})}function a5(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=mm(t,e),unknown:s,interpolate:f,reverse:c}){const[u,l]=_n(a);let d;return n===void 0?(d=Ma(u,l,r),d[0]<=u&&d.splice(0,1),d[d.length-1]>=l&&d.pop(),r=d.length+1,n=f!==void 0?Ae(f,r):kt.get(t)===un?Ro(i,r):void 0):(d=Ae(Mn(u,l),r+1).slice(1,-1),u instanceof Date&&(d=d.map(h=>new Date(h)))),vr(Jn(a))<0&&d.reverse(),Oc(t,e,{domain:d,range:n,reverse:c,unknown:s})}function Oc(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:s=a!==void 0?Ae(a,n.length+1):kt.get(t)===un?Ro(i,n.length+1):void 0,reverse:f}){n=Jn(n);const c=vr(n);if(!isNaN(c)&&!o5(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(s=xa(s)),{type:"threshold",scale:P0(c<0?xa(n):n,s===void 0?[]:s).unknown(r),domain:n,range:s}}function o5(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const a=bi(i,i=t[n]);if(a!==0&&a!==e)return!1}return!0}function s5(t){return{type:"identity",scale:xw(kt.get(t))?k0():e=>e}}function mi(t,e=Fg){return t.length?[Ue(t,({value:n})=>n===void 0?n:Ue(n,e)),se(t,({value:n})=>n===void 0?n:se(n,e))]:[0,1]}function mm(t,e){const n=kt.get(t);return(n===Ii||n===Fi||n===Li?f5:mi)(e)}function f5(t){return[0,t.length?se(t,({value:e})=>e===void 0?e:se(e,Fg)):1]}function c5(t,e){const n=t.find(({radius:s})=>s!==void 0);if(n!==void 0)return[0,n.radius];const r=Sa(t,.5,({value:s})=>s===void 0?NaN:Sa(s,.25,Do)),i=e.map(s=>3*Math.sqrt(s/r)),a=30/se(i);return a<1?i.map(s=>s*a):i}function u5(t,e){const n=Zs(t,({value:a})=>a===void 0?NaN:Zs(a,Math.abs)),r=e.map(a=>12*a/n),i=60/se(r);return i<1?r.map(a=>a*i):r}function l5(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return mi(t,Do);if(n<0)return mi(t,vc)}return[1,10]}function h5(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function Pc(t){return(e,n)=>r=>t(e+r*(n-e))}let Df=0,If;function d5(){const t=Df;return Df=0,If=void 0,t}function wn(t){t!==If&&(If=t,console.warn(t),++Df)}function Bo(t,e,n,r,{type:i,nice:a,clamp:s,domain:f=mi(r),unknown:c,pivot:u=0,scheme:l,range:d,symmetric:h=!0,interpolate:g=kt.get(t)===un?l==null&&d!==void 0?ii:Fc(l!==void 0?l:"rdbu"):Mn,reverse:p}){u=+u,f=Jn(f);let[m,b]=f;if(f.length>2&&wn(`Warning: the diverging ${t} scale domain contains extra elements.`),bi(m,b)<0&&([m,b]=[b,m],p=!p),m=Math.min(m,u),b=Math.max(b,u),typeof g!="function"&&(g=dm(g)),d!==void 0&&(g=g.length===1?Pc(g)(...d):po(g,d)),p&&(g=hm(g)),h){const y=n.apply(u),_=y-n.apply(m),M=n.apply(b)-y;_<M?m=n.invert(y-M):_>M&&(b=n.invert(y+_))}return e.domain([m,u,b]).unknown(c).interpolator(g),s&&e.clamp(s),a&&e.nice(a),{type:i,domain:[m,b],pivot:u,interpolate:g,scale:e}}function g5(t,e,n){return Bo(t,Z0(),y5,e,n)}function m5(t,e,n){return pm(t,e,{...n,exponent:.5})}function pm(t,e,{exponent:n=1,...r}){return Bo(t,Q0().exponent(n=+n),v5(n),e,{...r,type:"diverging-pow"})}function p5(t,e,{base:n=10,pivot:r=1,domain:i=mi(e,r<0?vc:Do),...a}){return Bo(t,J0().base(n=+n),_5,e,{domain:i,pivot:r,...a})}function b5(t,e,{constant:n=1,...r}){return Bo(t,K0().constant(n=+n),M5(n),e,r)}const y5={apply(t){return t},invert(t){return t}},_5={apply:Math.log,invert:Math.exp},w5={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function v5(t){return t===.5?w5:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function M5(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function bm(t,e,n,r){return Oi(t,e,n,r)}function S5(t,e,n){return bm(t,Y6(),e,n)}function x5(t,e,n){return bm(t,X6(),e,n)}const Pi=Symbol("ordinal");function ym(t,e,n,{type:r,interval:i,domain:a,range:s,reverse:f,hint:c}){return i=Di(i,r),a===void 0&&(a=wm(n,i,t)),(r==="categorical"||r===Pi)&&(r="ordinal"),f&&(a=xa(a)),a=e.domain(a).domain(),s!==void 0&&(typeof s=="function"&&(s=s(a)),e.range(s)),{type:r,domain:a,range:s,scale:e,hint:c,interval:i}}function T5(t,e,{type:n,interval:r,domain:i,range:a,scheme:s,unknown:f,...c}){r=Di(r,n),i===void 0&&(i=wm(e,r,t));let u;if(kt.get(t)===$o)u=E5(e),a=a===void 0?C5(u):Lt(a,Dc);else if(kt.get(t)===un&&(a===void 0&&(n==="ordinal"||n===Pi)&&(a=Zw(i,s),a!==void 0&&(s=void 0)),s===void 0&&a===void 0&&(s=n==="ordinal"?"turbo":"observable10"),s!==void 0))if(a!==void 0){const l=Fc(s),d=a[0],h=a[1]-a[0];a=({length:g})=>Ae(p=>l(d+h*p),g)}else a=lm(s);if(f===vf)throw new Error(`implicit unknown on ${t} scale is not supported`);return ym(t,uc().unknown(f),e,{...c,type:n,domain:i,range:a,hint:u})}function A5(t,e,{align:n=.5,padding:r=.5,...i}){return _m(k_().align(n).padding(r),e,i,t)}function k5(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=t==="fx"||t==="fy"?0:r,...s}){return _m(wo().align(n).paddingInner(i).paddingOuter(a),e,s,t)}function _m(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=ym(r,t,e,n),t.round=i,t}function wm(t,e,n){const r=new go;for(const{value:i,domain:a}of t){if(a!==void 0)return a();if(i!==void 0)for(const s of i)r.add(s)}if(e!==void 0){const[i,a]=_n(r).map(e.floor,e);return e.range(i,e.offset(a))}if(r.size>1e4&&kt.get(n)===Re)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ys(r,qe)}function Yl(t,e){let n;for(const{hint:r}of t){const i=r==null?void 0:r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function E5(t){return{fill:Yl(t,"fill"),stroke:Yl(t,"stroke")}}function C5(t){return Qt(t.fill)?S3:M3}function Lf(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:s=n,round:f,nice:c,clamp:u,zero:l,align:d,padding:h,projection:g,facet:{label:p=e}={},...m}={}){const b={};for(const[y,_]of t){const M=m[y],w=xm(y,_,{round:kt.get(y)===Re?f:void 0,nice:c,clamp:u,zero:l,align:d,padding:h,projection:g,...M});if(w){let{label:v=y==="fx"||y==="fy"?p:e,percent:S,transform:A,inset:x,insetTop:E=x!==void 0?x:y==="y"?r:0,insetRight:I=x!==void 0?x:y==="x"?i:0,insetBottom:k=x!==void 0?x:y==="y"?a:0,insetLeft:N=x!==void 0?x:y==="x"?s:0}=M||{};if(A==null)A=void 0;else if(typeof A!="function")throw new Error("invalid scale transform; not a function");w.percent=!!S,w.label=v===void 0?D5(_,w):v,w.transform=A,y==="x"||y==="fx"?(w.insetLeft=+N,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+E,w.insetBottom=+k),b[y]=w}}return b}function Xl(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:a,type:s,interval:f,label:c}=i;e[r]=Am(i),n[r]=a,a.type=s,f!=null&&(a.interval=f),c!=null&&(a.label=c)}return n}function N5(t,e){const{x:n,y:r,fx:i,fy:a}=t,s=i||a?$c(e):e;i&&Gl(i,s),a&&Zl(a,s);const f=i||a?vm(t,e):e;n&&Gl(n,f),r&&Zl(r,f)}function D5(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!tr(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function I5(t){return Math.sign(vr(t.domain()))*Math.sign(vr(t.range()))}function $c(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:s,facet:{marginTop:f,marginRight:c,marginBottom:u,marginLeft:l}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,c),marginBottom:Math.max(r,u),marginLeft:Math.max(i,l),width:a,height:s}}function vm({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:f,height:c}=$c(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:t?t.scale.bandwidth()+s+i:f,height:e?e.scale.bandwidth()+r+a:c,facet:{width:f,height:c}}}function Gl(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:a=0,marginRight:s=0}=e,f=a+n,c=i-s-r;t.range=[f,Math.max(f,c)],tr(t)||(t.range=Sm(t)),t.scale.range(t.range)}Mm(t)}function Zl(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:a=0,marginBottom:s=0}=e,f=a+n,c=i-s-r;t.range=[Math.max(f,c),f],tr(t)?t.range.reverse():t.range=Sm(t),t.scale.range(t.range)}Mm(t)}function Mm(t){t.round===void 0&&P5(t)&&L5(t)<=30&&t.scale.round(!0)}function L5({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,a=t.paddingOuter?t.paddingOuter():t.padding(),s=e-i,f=Math.abs(r-n)/Math.max(1,s+a*2);return(f-Math.floor(f))*s}function Sm(t){const e=t.scale.domain().length+Tm(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,a)=>n+a/(e-1)*(r-n))}function F5(t,e,n){return xm(t,n===void 0?void 0:[{hint:n}],{...e})}function xm(t,e=[],n={}){const r=O5(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&tr({type:r})){const i=e.map(({value:a})=>a).filter(a=>a!==void 0);i.some(ve)?wn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${or(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${or(r)}".`):i.some(gw)?wn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${or(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${or(r)}".`):i.some(mw)&&wn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${or(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${or(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Xi(e,n,yn);break;case"identity":switch(kt.get(t)){case Re:n=Xi(e,n,yn);break;case $o:n=Xi(e,n,$5);break}break;case"utc":case"time":n=Xi(e,n,Yg);break}switch(r){case"diverging":return g5(t,e,n);case"diverging-sqrt":return m5(t,e,n);case"diverging-pow":return pm(t,e,n);case"diverging-log":return p5(t,e,n);case"diverging-symlog":return b5(t,e,n);case"categorical":case"ordinal":case Pi:return T5(t,e,n);case"cyclical":case"sequential":case"linear":return t5(t,e,n);case"sqrt":return e5(t,e,n);case"threshold":return Oc(t,e,n);case"quantile":return i5(t,e,n);case"quantize":return a5(t,e,n);case"pow":return gm(t,e,n);case"log":return n5(t,e,n);case"symlog":return r5(t,e,n);case"utc":return x5(t,e,n);case"time":return S5(t,e,n);case"point":return A5(t,e,n);case"band":return k5(t,e,n);case"identity":return s5(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function or(t){return typeof t=="symbol"?t.description:t}function Jl(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Kl={toString:()=>"projection"};function O5(t,e,{type:n,domain:r,range:i,scheme:a,pivot:s,projection:f}){var l;if(n=Jl(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=Kl);for(const d of e){const h=Jl(d.type);if(h!==void 0){if(n===void 0)n=h;else if(n!==h)throw new Error(`scale incompatible with channel: ${n} !== ${h}`)}}if(n===Kl)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:d})=>d!==void 0))return;const c=kt.get(t);if(c===Ii)return"sqrt";if(c===Fi||c===Li)return"linear";if(c===$o)return"ordinal";const u=(l=r??i)==null?void 0:l.length;if(u<2||u>2)return Ts(c);if(r!==void 0){if(Ol(r))return Ts(c);if(ve(r))return"utc"}else{const d=e.map(({value:h})=>h).filter(h=>h!==void 0);if(d.some(Ol))return Ts(c);if(d.some(ve))return"utc"}if(c===un){if(s!=null||Kw(a))return"diverging";if(Gw(a))return"categorical"}return"linear"}function Ts(t){switch(t){case Re:return"point";case un:return Pi;default:return"ordinal"}}function tr({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Pi}function Tm({type:t}){return t==="threshold"}function P5({type:t}){return t==="point"||t==="band"}function Tr(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function Xi(t,{domain:e,...n},r){var i;for(const a of t)a.value!==void 0&&(e===void 0&&(e=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:e===void 0?e:r(e),...n}}function $5(t){return Lt(t,Dc)}function Ff(t={}){let e;for(const n in t)if(kt.has(n)&&Ka(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=Am(F5(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function R5(t){return e=>{if(!kt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function Am({scale:t,type:e,domain:n,range:r,interpolate:i,interval:a,transform:s,percent:f,pivot:c}){if(e==="identity")return{type:"identity",apply:l=>l,invert:l=>l};const u=t.unknown?t.unknown():void 0;return{type:e,domain:li(n),...r!==void 0&&{range:li(r)},...s!==void 0&&{transform:s},...f&&{percent:f},...u!==void 0&&{unknown:u},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:l=>t(l),...t.invert&&{invert:l=>t.invert(l)}}}function B5(t,e){const{fx:n,fy:r}=Lf(t,e),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?A2(i,a).map(([s,f],c)=>({x:s,y:f,i:c})):i?i.map((s,f)=>({x:s,i:f})):a?a.map((s,f)=>({y:s,i:f})):void 0}function U5(t,{x:e,y:n}){return e&&(e=Of(e)),n&&(n=Of(n)),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Rc(t,{fx:e,fy:n}){const r=En(t),i=e==null?void 0:e.value,a=n==null?void 0:n.value;return e&&n?Qr(r,s=>(s.fx=i[s[0]],s.fy=a[s[0]],s),s=>i[s],s=>a[s]):e?Qr(r,s=>(s.fx=i[s[0]],s),s=>i[s]):Qr(r,s=>(s.fy=a[s[0]],s),s=>a[s])}function z5(t,e,{marginTop:n,marginLeft:r}){const i=t?({x:s})=>t(s)-r:()=>0,a=e?({y:s})=>e(s)-n:()=>0;return function(s){this.tagName==="svg"?(this.setAttribute("x",i(s)),this.setAttribute("y",a(s))):this.setAttribute("transform",`translate(${i(s)},${a(s)})`)}}function q5(t){const e=[],n=new Uint32Array(qn(t,r=>r.length));for(const r of t){let i=0;for(const a of t)r!==a&&(n.set(a,i),i+=a.length);e.push(n.slice(0,i))}return e}const j5=new Map([["top",As],["right",Cs],["bottom",ks],["left",Es],["top-left",Gi(As,Es)],["top-right",Gi(As,Cs)],["bottom-left",Gi(ks,Es)],["bottom-right",Gi(ks,Cs)],["top-empty",H5],["right-empty",G5],["bottom-empty",Y5],["left-empty",X5],["empty",Z5]]);function W5(t){if(t==null)return null;const e=j5.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Ql=new WeakMap;function Of(t){let e=Ql.get(t);return e||Ql.set(t,e=new zn(Lt(t,(n,r)=>[n,r]))),e}function Cn(t,e){return Of(t).get(e)}function V5(t,e,n){return e=sn(e),n=sn(n),t.find(r=>Object.is(sn(r.x),e)&&Object.is(sn(r.y),n))}function Uo(t,e,n){var r;return(r=V5(t,e,n))==null?void 0:r.empty}function As(t,{y:e},{y:n}){return e?Cn(e,n)===0:!0}function ks(t,{y:e},{y:n}){return e?Cn(e,n)===e.length-1:!0}function Es(t,{x:e},{x:n}){return e?Cn(e,n)===0:!0}function Cs(t,{x:e},{x:n}){return e?Cn(e,n)===e.length-1:!0}function H5(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,r);if(a>0)return Uo(t,n,e[a-1])}function Y5(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,r);if(a<e.length-1)return Uo(t,n,e[a+1])}function X5(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,n);if(a>0)return Uo(t,e[a-1],r)}function G5(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,n);if(a<e.length-1)return Uo(t,e[a+1],r)}function Z5(t,e,{empty:n}){return n}function Gi(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Ns(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:a})=>{var s;return((s=r.get(i))==null?void 0:s.get(a))??[]}):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}const km=Math.PI,Ke=2*km,Ds=.618;function J5({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:a=e}={},s){if(t==null)return;if(typeof t.stream=="function")return t;let f,c,u="frame";if(Kn(t)){let v;if({type:t,domain:c,inset:v,insetTop:n=v!==void 0?v:n,insetRight:r=v!==void 0?v:r,insetBottom:i=v!==void 0?v:i,insetLeft:a=v!==void 0?v:a,clip:u=u,...f}=t,t==null)return}typeof t!="function"&&({type:t}=Pf(t));const{width:l,height:d,marginLeft:h,marginRight:g,marginTop:p,marginBottom:m}=s,b=l-h-g-a-r,y=d-p-m-n-i;if(t=t==null?void 0:t({width:b,height:y,clip:u,...f}),t==null)return;u=K5(u,h,p,l-g,d-m);let _=h+a,M=p+n,w;if(c!=null){const[[v,S],[A,x]]=oc(t).bounds(c),E=Math.min(b/(A-v),y/(x-S));E>0?(_-=(E*(v+A)-b)/2,M-=(E*(S+x)-y)/2,w=Ba({point(I,k){this.stream.point(I*E+_,k*E+M)}})):wn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=_===0&&M===0?Em():Ba({point(v,S){this.stream.point(v+_,S+M)}})),{stream:v=>t.stream(w.stream(u(v)))}}function Pf(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Se(h_,.7463,.4673);case"albers":return Zi(m0,.7463,.4673);case"azimuthal-equal-area":return Se(d_,4,4);case"azimuthal-equidistant":return Se(g_,Ke,Ke);case"conic-conformal":return Zi(b_,Ke,Ke);case"conic-equal-area":return Zi(Ua,6.1702,2.9781);case"conic-equidistant":return Zi(w_,7.312,3.6282);case"equal-earth":return Se(M_,5.4133,2.6347);case"equirectangular":return Se(y_,Ke,km);case"gnomonic":return Se(S_,3.4641,3.4641);case"identity":return{type:Em};case"reflect-y":return{type:Q5};case"mercator":return Se(m_,Ke,Ke);case"orthographic":return Se(x_,2,2);case"stereographic":return Se(T_,2,2);case"transverse-mercator":return Se(A_,Ke,Ke);default:throw new Error(`unknown projection type: ${t}`)}}function K5(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return a=>a;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return Qd(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function Se(t,e,n){return{type:({width:r,height:i,rotate:a,precision:s=.15,clip:f})=>{var u,l,d;const c=t();return s!=null&&((u=c.precision)==null||u.call(c,s)),a!=null&&((l=c.rotate)==null||l.call(c,a)),typeof f=="number"&&((d=c.clipAngle)==null||d.call(c,f)),r!=null&&(c.scale(Math.min(r/e,i/n)),c.translate([r/2,i/2])),c},aspectRatio:n/e}}function Zi(t,e,n){const{type:r,aspectRatio:i}=Se(t,e,n);return{type:a=>{const{parallels:s,domain:f,width:c,height:u}=a,l=r(a);return s!=null&&(l.parallels(s),f===void 0&&c!=null&&l.fitSize([c,u],{type:"Sphere"})),l},aspectRatio:i}}const Em=on({stream:t=>t}),Q5=on(Ba({point(t,e){this.stream.point(t,-e)}}));function t4(t,e,n,r){const i=n[t],a=n[e],s=i.length,f=n[t]=new Float64Array(s).fill(NaN),c=n[e]=new Float64Array(s).fill(NaN);let u;const l=r.stream({point(d,h){f[u]=d,c[u]=h}});for(u=0;u<s;++u)l.point(i[u],a[u])}function e4({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(Kn(t)&&(t=t.type),t!=null)}function n4(t){if(typeof(t==null?void 0:t.stream)=="function")return Ds;if(Kn(t)){let e,n;if({domain:e,type:t,...n}=t,e!=null&&t!=null){const r=typeof t=="string"?Pf(t).type:t,[[i,a],[s,f]]=oc(r({...n,width:100,height:100})).bounds(e),c=(f-a)/(s-i);return c&&isFinite(c)?c<.2?.2:c>5?5:c:Ds}}if(t!=null){if(typeof t!="function"){const{aspectRatio:e}=Pf(t);if(e)return e}return Ds}}function r4(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},a={point(s,f){e.push(s),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const s of t.value)Fn(s,a);return[r,i]}function i4({x:t,y:e}){if(t||e)return t??(t=n=>n),e??(e=n=>n),Ba({point(n,r){this.stream.point(t(n),e(r))}})}function Bc(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:em(n)}}function Pt(t,{document:e}){return qt(pd(t).call(e.documentElement))}const $f=Symbol("unset");function Uc(t){return(t.length===1?a4:o4)(t)}function a4(t){let e,n=$f;return r=>(Object.is(n,r)||(n=r,e=t(r)),e)}function o4(t){let e,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>!Object.is(i,r[a])))&&(n=r,e=t(...r)),e)}const s4=Uc(t=>new Intl.NumberFormat(t));Uc((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}}));Uc((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function f4(t="en-US"){const e=s4(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function c4(t){return z3(t,"Invalid Date")}function u4(t="en-US"){const e=f4(t);return n=>(n instanceof Date?c4:typeof n=="number"?e:jt)(n)}const Ar=u4(),oe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let l4=0;function Cm(){return`plot-clip-${++l4}`}function h4(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:s,fill:f,fillOpacity:c,stroke:u,strokeWidth:l,strokeOpacity:d,strokeLinejoin:h,strokeLinecap:g,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:b,opacity:y,mixBlendMode:_,imageFilter:M,paintOrder:w,pointerEvents:v,shapeRendering:S,channels:A},{ariaLabel:x,fill:E="currentColor",fillOpacity:I,stroke:k="none",strokeOpacity:N,strokeWidth:$,strokeLinecap:R,strokeLinejoin:T,strokeMiterlimit:O,paintOrder:L}){E===null&&(f=null,c=null),k===null&&(u=null,d=null),Qt(E)?!Qt(k)&&(!Qt(f)||A!=null&&A.fill)&&(k="none"):Qt(k)&&(!Qt(u)||A!=null&&A.stroke)&&(E="none");const[z,X]=Hn(f,E),[B,U]=Xt(c,I),[V,W]=Hn(u,k),[D,tt]=Xt(d,N),[nt,q]=Xt(y);di(W)||(l===void 0&&(l=$),g===void 0&&(g=R),h===void 0&&(h=T),p===void 0&&!_w(h)&&(p=O),!di(X)&&w===void 0&&(w=L));const[Q,P]=Xt(l);return E!==null&&(t.fill=Bt(X,"currentColor"),t.fillOpacity=qr(U,1)),k!==null&&(t.stroke=Bt(W,"none"),t.strokeWidth=qr(P,1),t.strokeOpacity=qr(tt,1),t.strokeLinejoin=Bt(h,"miter"),t.strokeLinecap=Bt(g,"butt"),t.strokeMiterlimit=qr(p,4),t.strokeDasharray=Bt(m,"none"),t.strokeDashoffset=Bt(b,"0")),t.target=jt(s),t.ariaLabel=jt(x),t.ariaDescription=jt(i),t.ariaHidden=jt(a),t.opacity=qr(q,1),t.mixBlendMode=Bt(_,"normal"),t.imageFilter=Bt(M,"none"),t.paintOrder=Bt(w,"normal"),t.pointerEvents=Bt(v,"auto"),t.shapeRendering=Bt(S,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:z,scale:"auto",optional:!0},fillOpacity:{value:B,scale:"auto",optional:!0},stroke:{value:V,scale:"auto",optional:!0},strokeOpacity:{value:D,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:nt,scale:"auto",optional:!0}}}function d4(t,e){e&&t.filter(n=>wc(e[n])).append("title").call(m4,e)}function g4(t,e){e&&t.filter(([n])=>wc(e[n])).append("title").call(p4,e)}function m4(t,e){e&&t.text(n=>Ar(e[n]))}function p4(t,e){e&&t.text(([n])=>Ar(e[n]))}function Ce(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:s,stroke:f,strokeOpacity:c,strokeWidth:u,opacity:l,href:d}){r&&ft(t,"aria-label",h=>r[h]),a&&ft(t,"fill",h=>a[h]),s&&ft(t,"fill-opacity",h=>s[h]),f&&ft(t,"stroke",h=>f[h]),c&&ft(t,"stroke-opacity",h=>c[h]),u&&ft(t,"stroke-width",h=>u[h]),l&&ft(t,"opacity",h=>l[h]),d&&Nm(t,h=>d[h],e),n||d4(t,i)}function b4(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:s,stroke:f,strokeOpacity:c,strokeWidth:u,opacity:l,href:d}){r&&ft(t,"aria-label",([h])=>r[h]),a&&ft(t,"fill",([h])=>a[h]),s&&ft(t,"fill-opacity",([h])=>s[h]),f&&ft(t,"stroke",([h])=>f[h]),c&&ft(t,"stroke-opacity",([h])=>c[h]),u&&ft(t,"stroke-width",([h])=>u[h]),l&&ft(t,"opacity",([h])=>l[h]),d&&Nm(t,([h])=>d[h],e),n||g4(t,i)}function y4({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:s,opacity:f,href:c},{tip:u}){return[t,u?void 0:e,n,r,i,a,s,f,c].filter(l=>l!==void 0)}function _4(t,e,n){const r=Jf(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&wn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*w4(t,e,n,r){const{z:i}=n,{z:a}=r,s=y4(r,n),f=[...e,...s];for(const c of a?_4(t,a,i):[t]){let u,l;t:for(const d of c){for(const h of f)if(!Tn(h[d])){l&&l.push(-1);continue t}if(u===void 0){l&&(yield l),u=s.map(h=>sn(h[d])),l=[d];continue}l.push(d);for(let h=0;h<s.length;++h)if(sn(s[h][d])!==u[h]){yield l,u=s.map(p=>sn(p[d])),l=[d];continue t}}l&&(yield l)}}function v4(t,e,n,r){let i;const{clip:a=r.clip}=e;a==="frame"?(t=Pt("svg:g",r).each(function(){this.appendChild(t.node()),t.node=()=>this}),i=S4(r,n)):a&&(i=T4(a,r)),ft(t,"aria-label",e.ariaLabel),ft(t,"aria-description",e.ariaDescription),ft(t,"aria-hidden",e.ariaHidden),ft(t,"clip-path",i)}function M4(t){const e=new WeakMap;return(n,r)=>{let i=e.get(n);if(!i){const a=Cm();qt(n.ownerSVGElement).append("clipPath").attr("id",a).call(t,n,r),e.set(n,i=`url(#${a})`)}return i}}const S4=M4((t,e,n)=>{const{width:r,height:i,marginLeft:a,marginRight:s,marginTop:f,marginBottom:c}=n;t.append("rect").attr("x",a).attr("y",f).attr("width",r-s-a).attr("height",i-f-c)}),th=new WeakMap,x4={type:"Sphere"};function T4(t,e){let n,r;if((n=th.get(e))||th.set(e,n=new WeakMap),t.type==="Sphere"&&(t=x4),!(r=n.get(t))){const i=Cm();qt(e.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",e.path()(t)),n.set(t,r=`url(#${i})`)}return r}function De(t,e,n,r){v4(t,e,n,r),ft(t,"class",e.className),ft(t,"fill",e.fill),ft(t,"fill-opacity",e.fillOpacity),ft(t,"stroke",e.stroke),ft(t,"stroke-width",e.strokeWidth),ft(t,"stroke-opacity",e.strokeOpacity),ft(t,"stroke-linejoin",e.strokeLinejoin),ft(t,"stroke-linecap",e.strokeLinecap),ft(t,"stroke-miterlimit",e.strokeMiterlimit),ft(t,"stroke-dasharray",e.strokeDasharray),ft(t,"stroke-dashoffset",e.strokeDashoffset),ft(t,"shape-rendering",e.shapeRendering),ft(t,"filter",e.imageFilter),ft(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;ft(t,"pointer-events",i)}function ce(t,e){A4(t,"mix-blend-mode",e.mixBlendMode),ft(t,"opacity",e.opacity)}function Nm(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const a=this.ownerDocument.createElementNS(ba.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(ba.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function ft(t,e,n){n!=null&&t.attr(e,n)}function A4(t,e,n){n!=null&&t.style(e,n)}function Ie(t,e,{x:n,y:r},i=oe,a=oe){i+=e.dx,a+=e.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&t.attr("transform",`translate(${i},${a})`)}function Bt(t,e){if((t=jt(t))!==e)return t}function qr(t,e){if((t=Wt(t))!==e)return t}const k4=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function zc(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!k4.test(t))throw new Error(`invalid class name: ${t}`);return t}function qc(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function $i({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:s}){return[/left$/.test(t)?s:/right$/.test(t)?e-i:(s+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-a:(r+n-a)/2]}class ie{constructor(e,n={},r={},i){const{facet:a="auto",facetAnchor:s,fx:f,fy:c,sort:u,dx:l=0,dy:d=0,margin:h=0,marginTop:g=h,marginRight:p=h,marginBottom:m=h,marginLeft:b=h,className:y,clip:_=i==null?void 0:i.clip,channels:M,tip:w,render:v}=r;if(this.data=e,this.sort=Sr(u)?u:null,this.initializer=xr(r).initializer,this.transform=this.initializer?r.transform:Ic(r).transform,a===null||a===!1?this.facet=null:(this.facet=Ne(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=e===ha&&typeof f=="string"?[f]:f,this.fy=e===ha&&typeof c=="string"?[c]:c),this.facetAnchor=W5(s),n=tm(n),M!==void 0&&(n={...E4(M),...n}),i!==void 0&&(n={...h4(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,A])=>{if(Lo(A.value)){const{value:x,label:E=A.label,scale:I=A.scale}=A.value;A={...A,label:E,scale:I,value:x}}if(e===ha&&typeof A.value=="string"){const{value:x}=A;A={...A,value:[x]}}return[S,A]}).filter(([S,{value:A,optional:x}])=>{if(A!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+l,this.dy=+d,this.marginTop=+g,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+b,this.clip=em(_),this.tip=C4(w),this.className=jt(y),this.facet==="super"){if(f||c)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:A}=n[S];if(!(A!=="x"&&A!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=Im(v,this.render))}initialize(e,n,r){let i=Mr(this.data);e===void 0&&i!=null&&(e=[En(i)]);const a=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=Mr(i)),e!==void 0&&(e.original=a);const s=jw(this.channels,i);return this.sort!=null&&Vw(i,e,s,n,this.sort),{data:i,facets:e,channels:s}}filter(e,n,r){for(const i in n){const{filter:a=Tn}=n[i];if(a!==null){const s=r[i];e=e.filter(f=>a(s[f]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in e&&e[a].scale==="y"&&t4(i,a,n,r.projection)}}scale(e,n,r){const i=Ww(e,n);return r.projection&&this.project(e,i,r),i}}function Dm(...t){return t.plot=ie.prototype.plot,t}function Im(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,a,s,f){return t.call(this,n,r,i,a,s,(c,u,l,d,h)=>e.call(this,c,u,l,d,h,f))}}function E4(t){return Object.fromEntries(Object.entries(tm(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Fo(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function C4(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Ne(t,"tip",["x","y","xy"]):t}function jc(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:Kn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}function N4(t,e,n={}){let r=.5-oe,i=.5+oe,a=.5+oe,s=.5-oe;for(const{marginTop:m,marginRight:b,marginBottom:y,marginLeft:_}of e)m>r&&(r=m),b>i&&(i=b),y>a&&(a=y),_>s&&(s=_);let{margin:f,marginTop:c=f!==void 0?f:r,marginRight:u=f!==void 0?f:i,marginBottom:l=f!==void 0?f:a,marginLeft:d=f!==void 0?f:s}=n;c=+c,u=+u,l=+l,d=+d;let{width:h=640,height:g=D4(t,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:s})+Math.max(0,c-r+l-a)}=n;h=+h,g=+g;const p={width:h,height:g,marginTop:c,marginRight:u,marginBottom:l,marginLeft:d};if(t.fx||t.fy){let{margin:m,marginTop:b=m!==void 0?m:c,marginRight:y=m!==void 0?m:u,marginBottom:_=m!==void 0?m:l,marginLeft:M=m!==void 0?m:d}=n.facet??{};b=+b,y=+y,_=+_,M=+M,p.facet={marginTop:b,marginRight:y,marginBottom:_,marginLeft:M}}return p}function D4({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:a},{width:s,marginTopDefault:f,marginRightDefault:c,marginBottomDefault:u,marginLeftDefault:l}){const d=n&&n.scale.domain().length||1,h=n4(i);if(h){const p=r?r.scale.domain().length:1,m=(1.1*d-.1)/(1.1*p-.1)*h,b=Math.max(.1,Math.min(10,m));return Math.round((s-l-c)*b+f+u)}const g=e?tr(e)?e.scale.domain().length||1:Math.max(7,17/d):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const p=eh("y",e)/(eh("x",t)*a),m=r?r.scale.bandwidth():1,b=n?n.scale.bandwidth():1,y=m*(s-l-c)-t.insetLeft-t.insetRight;return(p*y+e.insetTop+e.insetBottom)/b+f+u}return!!(e||n)*Math.max(1,Math.min(60,g*d))*20+!!r*30+60}function eh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=e.scale.exponent();i=c=>Math.pow(c,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[a,s]=_n(r);return Math.abs(i(s)-i(a))}const nh=new WeakMap;function Wc(t,e,{x:n,y:r,px:i,py:a,maxRadius:s=40,channels:f,render:c,...u}={}){return s=+s,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),f={...f,py:{value:a,scale:"y"}}),{x:n,y:r,channels:f,...u,render:Im(function(l,d,h,g,p,m){p={...p,pointerSticky:!1};const b=p.ownerSVGElement,{data:y}=p.getMarkState(this);let _=nh.get(b);_||nh.set(b,_={sticky:!1,roots:[],renders:[]});let M=_.renders.push(W)-1;const{x:w,y:v,fx:S,fy:A}=d;let x=S?S(l.fx)-g.marginLeft:0,E=A?A(l.fy)-g.marginTop:0;w!=null&&w.bandwidth&&(x+=w.bandwidth()/2),v!=null&&v.bandwidth&&(E+=v.bandwidth()/2);const I=l.fi!=null;let k;if(I){let q=_.facetStates;q||(_.facetStates=q=new Map),k=q.get(this),k||q.set(this,k=new Map)}const[N,$]=$i(this,g),{px:R,py:T}=h,O=R?q=>R[q]:Lm(h,N),L=T?q=>T[q]:Fm(h,$);let z,X,B,U;function V(q,Q){if(I)if(U&&(U=cancelAnimationFrame(U)),q==null)k.delete(l.fi);else{k.set(l.fi,Q),U=requestAnimationFrame(()=>{U=null;for(const[P,Y]of k)if(Y<Q||Y===Q&&P<l.fi){q=null;break}W(q)});return}W(q)}function W(q){if(z===q&&B===_.sticky)return;z=q,B=p.pointerSticky=_.sticky;const Q=z==null?[]:[z];I&&(Q.fx=l.fx,Q.fy=l.fy,Q.fi=l.fi);const P=m(Q,d,h,g,p);if(X){if(I){const Y=X.parentNode,G=X.getAttribute("transform"),F=P.getAttribute("transform");G?P.setAttribute("transform",G):P.removeAttribute("transform"),F?Y.setAttribute("transform",F):Y.removeAttribute("transform"),P.removeAttribute("aria-label"),P.removeAttribute("aria-description"),P.removeAttribute("aria-hidden")}X.replaceWith(P)}if(_.roots[M]=X=P,!(z==null&&(k==null?void 0:k.size)>1)){const Y=z==null?null:Zn(y)?y[z]:y.get(z);p.dispatchValue(Y)}return P}function D(q){if(_.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[Q,P]=Qs(q);Q-=x,P-=E;const Y=Q<g.marginLeft||Q>g.width-g.marginRight?1:t,G=P<g.marginTop||P>g.height-g.marginBottom?1:e;let F=null,mt=s*s;for(const rt of l){const yt=Y*(O(rt)-Q),St=G*(L(rt)-P),Z=yt*yt+St*St;Z<=mt&&(F=rt,mt=Z)}if(F!=null&&(t!==1||e!==1)){const rt=O(F)-Q,yt=L(F)-P;mt=rt*rt+yt*yt}V(F,mt)}function tt(q){q.pointerType==="mouse"&&z!=null&&(_.sticky&&_.roots.some(Q=>Q==null?void 0:Q.contains(q.target))||(_.sticky?(_.sticky=!1,_.renders.forEach(Q=>Q(null))):(_.sticky=!0,W(z)),q.stopImmediatePropagation()))}function nt(q){q.pointerType==="mouse"&&(_.sticky||V(null))}return b.addEventListener("pointerenter",D),b.addEventListener("pointermove",D),b.addEventListener("pointerdown",tt),b.addEventListener("pointerleave",nt),W(null)},c)}}function I4(t){return Wc(1,1,t)}function L4(t){return Wc(1,.01,t)}function rh(t){return Wc(.01,1,t)}function Lm({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Fm({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Om(t){return tr(t)&&t.interval===void 0?void 0:"tabular-nums"}function F4(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:s=18,marginRight:f=0,marginBottom:c=16+r,marginLeft:u=0,style:l,ticks:d=(i-u-f)/64,tickFormat:h,fontVariant:g=Om(t),round:p=!0,opacity:m,className:b}=e;const y=Bc(e);b=zc(b),m=Xt(m)[1],h===null&&(h=()=>null);const _=Pt("svg",y).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(N=>N.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call(qc,l);let M=N=>N.selectAll(".tick line").attr("y1",s+c-a),w;const v=p?(N,$)=>N.rangeRound($):(N,$)=>N.range($),{type:S,domain:A,range:x,interpolate:E,scale:I,pivot:k}=t;if(E){const N=x===void 0?E:po(E.length===1?Pc(E):E,x);w=v(I.copy(),Ae(Mn(u,i-f),Math.min(A.length+(k!==void 0),x===void 0?1/0:x.length)));const $=256,R=y.document.createElement("canvas");R.width=$,R.height=1;const T=R.getContext("2d");for(let O=0,L=$-1;O<$;++O)T.fillStyle=N(O/L),T.fillRect(O,0,1,1);_.append("image").attr("opacity",m).attr("x",u).attr("y",s).attr("width",i-u-f).attr("height",a-s-c).attr("preserveAspectRatio","none").attr("xlink:href",R.toDataURL())}else if(S==="threshold"){const N=A,$=h===void 0?R=>R:typeof h=="string"?Ir(h):h;w=v(lc().domain([-1,x.length-1]),[u,i-f]),_.append("g").attr("fill-opacity",m).selectAll().data(x).enter().append("rect").attr("x",(R,T)=>w(T-1)).attr("y",s).attr("width",(R,T)=>w(T)-w(T-1)).attr("height",a-s-c).attr("fill",R=>R),d=Lt(N,(R,T)=>T),h=R=>$(N[R],R)}else w=v(wo().domain(A),[u,i-f]),_.append("g").attr("fill-opacity",m).selectAll().data(A).enter().append("rect").attr("x",w).attr("y",s).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",a-s-c).attr("fill",I),M=()=>{};return _.append("g").attr("transform",`translate(0,${a-c})`).call(G2(w).ticks(Array.isArray(d)?null:d,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(d)?d:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Bt(g,"normal")).call(M).call(N=>N.select(".domain").remove()),n!==void 0&&_.append("text").attr("x",u).attr("y",s-6).attr("fill","currentColor").attr("font-weight","bold").text(n),_.node()}const Pm=Math.PI/180;function zo(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=Is(n),t.markerMid=Is(r),t.markerEnd=Is(i)}function Is(t){if(t==null||t===!1)return null;if(t===!0)return ah;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return ih("auto");case"arrow-reverse":return ih("auto-start-reverse");case"dot":return O4;case"circle":case"circle-fill":return ah;case"circle-stroke":return P4;case"tick":return Ls("auto");case"tick-x":return Ls(90);case"tick-y":return Ls(0)}throw new Error(`invalid marker: ${t}`)}function ih(t){return(e,n)=>Pt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function O4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function ah(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function P4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Ls(t){return(e,n)=>Pt("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let $4=0;function Vc(t,e,{stroke:n},r){return Rm(t,e,n&&(i=>n[i]),null,r)}function R4(t,e,{stroke:n,z:r},i){return Rm(t,e,n&&(([a])=>n[a]),r,i)}const Rf=1,$m=2;function B4(t,e){const n=new Uint8Array(e.length),r=t.data().filter(a=>a.length>1),i=r.length;for(let a=0,s=$f;a<i;++a){const f=r[a];if(f.length>1){const c=f[0];s!==(s=sn(e[c]))&&(n[c]|=Rf)}}for(let a=i-1,s=$f;a>=0;--a){const f=r[a];if(f.length>1){const c=f[0];s!==(s=sn(e[c]))&&(n[c]|=$m)}}return([a])=>n[a]}function Rm(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},a=()=>i,s,f){if(!e&&!n&&!r)return;const c=new Map,u=s&&B4(t,s);function l(d,h,g){return function(p){if(g&&!g(p))return;const m=a(p);let b=c.get(h);b||c.set(h,b=new Map);let y=b.get(m);if(!y){const _=this.parentNode.insertBefore(h(m,f),this),M=`plot-marker-${++$4}`;_.setAttribute("id",M),b.set(m,y=`url(#${M})`)}this.setAttribute(d,y)}}e&&t.each(l("marker-start",e,u&&(d=>u(d)&Rf))),n&&u&&t.each(l("marker-start",n,d=>!(u(d)&Rf))),n&&t.each(l("marker-mid",n)),r&&t.each(l("marker-end",r,u&&(d=>u(d)&$m)))}function Hc({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Bm(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Yc({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Bm(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Bm(t,e,n){return t===void 0&&e===void 0&&n===void 0?oe?[1,0]:[.5,.5]:[e,n]}function Um(t,{interval:e}){return t={...Fo(t)},t.interval=Ec(t.interval===void 0?e:t.interval),t}function qo(t,e,n,r){const{[t]:i,[`${t}1`]:a,[`${t}2`]:s}=n,{value:f,interval:c}=Um(i,n);if(f==null||c==null&&!r)return n;const u=Ni(i);if(c==null){let g;const p={transform:m=>g||(g=_e(m,f)),label:u};return{...n,[t]:void 0,[`${t}1`]:a===void 0?p:a,[`${t}2`]:s===void 0&&!(a===s&&r)?p:s}}let l,d;function h(g){return d!==void 0&&g===l?d:d=Lt(_e(l=g,f),p=>c.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:a===void 0?{transform:h,label:u}:a,[`${t}2`]:s===void 0?{transform:g=>h(g).map(p=>c.offset(p)),label:u}:s})}function zm(t,e,n){const{[t]:r}=n,{value:i,interval:a}=Um(r,n);return i==null||a==null?n:e({...n,[t]:{label:Ni(r),transform:s=>{const f=Lt(_e(s,i),u=>a.floor(u)),c=f.map(u=>a.offset(u));return f.map(ve(f)?(u,l)=>u==null||isNaN(u=+u)||(l=c[l],l==null)||isNaN(l=+l)?void 0:new Date((u+l)/2):(u,l)=>u==null||(l=c[l],l==null)?NaN:(+u+ +l)/2)}}})}function U4(t={}){return qo("x",Hc,t,!0)}function qm(t={}){return qo("y",Yc,t,!0)}function z4(t={}){return qo("x",Hc,t)}function q4(t={}){return qo("y",Yc,t)}function j4(t={}){return zm("x",Hc,t)}function W4(t={}){return zm("y",Yc,t)}const jm={ariaLabel:"rule",fill:null,stroke:"currentColor"};class V4 extends ie{constructor(e,n={}){const{x:r,y1:i,y2:a,inset:s=0,insetTop:f=s,insetBottom:c=s}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},jc(n,"x"),jm),this.insetTop=Wt(f),this.insetBottom=Wt(c),zo(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y1:u,y2:l}=r,{width:d,height:h,marginTop:g,marginRight:p,marginLeft:m,marginBottom:b}=i,{insetTop:y,insetBottom:_}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s},oe,0).call(M=>M.selectAll().data(e).enter().append("line").call(ce,this).attr("x1",c?w=>c[w]:(m+d-p)/2).attr("x2",c?w=>c[w]:(m+d-p)/2).attr("y1",u&&!Tr(f)?w=>u[w]+y:g+y).attr("y2",l&&!Tr(f)?f.bandwidth?w=>l[w]+f.bandwidth()-_:w=>l[w]-_:h-b-_).call(Ce,this,r).call(Vc,this,r,a)).node()}}class H4 extends ie{constructor(e,n={}){const{x1:r,x2:i,y:a,inset:s=0,insetRight:f=s,insetLeft:c=s}=n;super(e,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},jc(n,"y"),jm),this.insetRight=Wt(f),this.insetLeft=Wt(c),zo(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n,{y:c,x1:u,x2:l}=r,{width:d,height:h,marginTop:g,marginRight:p,marginLeft:m,marginBottom:b}=i,{insetLeft:y,insetRight:_}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{y:c&&f},0,oe).call(M=>M.selectAll().data(e).enter().append("line").call(ce,this).attr("x1",u&&!Tr(s)?w=>u[w]+y:m+y).attr("x2",l&&!Tr(s)?s.bandwidth?w=>l[w]+s.bandwidth()-_:w=>l[w]-_:d-p-_).attr("y1",c?w=>c[w]:(g+h-b)/2).attr("y2",c?w=>c[w]:(g+h-b)/2).call(Ce,this,r).call(Vc,this,r,a)).node()}}function Xc(t,e){let{x:n=Me,y:r,y1:i,y2:a,...s}=q4(e);return[i,a]=Wm(r,i,a),new V4(t,{...s,x:n,y1:i,y2:a})}function Gc(t,e){let{y:n=Me,x:r,x1:i,x2:a,...s}=z4(e);return[i,a]=Wm(r,i,a),new H4(t,{...s,y:n,x1:i,x2:a})}function Wm(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Zc(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let a=0;a<n;++a)i+=e[a](r)+t[a+1];return i}}const Y4={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Vm="­";class Jc extends ie{constructor(e,n={}){const{x:r,y:i,text:a=Qn(e)&&Qg(e)?Me:Vg,frameAnchor:s,textAnchor:f=/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle",lineAnchor:c=/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle",lineHeight:u=1,lineWidth:l=1/0,textOverflow:d,monospace:h,fontFamily:g=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:b,fontWeight:y,rotate:_}=n,[M,w]=Xt(_,0),[v,S]=Q4(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:v,optional:!0},rotate:{value:dw(M),optional:!0},text:{value:a,filter:wc,optional:!0}},n,Y4),this.rotate=w,this.textAnchor=Bt(f,"middle"),this.lineAnchor=Ne(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+l,this.textOverflow=Hm(d),this.monospace=!!h,this.fontFamily=jt(g),this.fontSize=S,this.fontStyle=jt(m),this.fontVariant=jt(b),this.fontWeight=jt(y),this.frameAnchor=Po(s),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=Xm(this),this.clipLine=Gm(this)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,rotate:l,text:d,title:h,fontSize:g}=r,{rotate:p}=this,[m,b]=$i(this,i);return Pt("svg:g",a).call(De,this,i,a).call(Ym,this,d,i).call(Ie,this,{x:c&&s,y:u&&f}).call(y=>y.selectAll().data(e).enter().append("text").call(ce,this).call(X4,this,d,h).attr("transform",Zc`translate(${c?_=>c[_]:m},${u?_=>u[_]:b})${l?_=>` rotate(${l[_]})`:p?` rotate(${p})`:""}`).call(ft,"font-size",g&&(_=>g[_])).call(Ce,this,r)).node()}}function Hm(t){return t==null?null:Ne(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function X4(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:s,splitLines:f,clipLine:c}=e;t.each(function(u){const l=f(Ar(n[u])??"").map(c),d=l.length,h=i==="top"?.71:i==="bottom"?1-d:(164-d*100)/200;if(d>1){let g=0;for(let p=0;p<d;++p){if(++g,!l[p])continue;const m=this.ownerDocument.createElementNS(ba.svg,"tspan");m.setAttribute("x",0),p===g-1?m.setAttribute("y",`${(h+p)*a}em`):m.setAttribute("dy",`${g*a}em`),m.textContent=l[p],this.appendChild(m),g=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=l[0];if(s&&!r&&l[0]!==n[u]){const g=this.ownerDocument.createElementNS(ba.svg,"title");g.textContent=n[u],this.appendChild(g)}})}function jo(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ci(e,n)),new Jc(t,{...r,x:e,y:n})}function G4(t,{x:e=Me,...n}={}){return new Jc(t,W4({...n,x:e}))}function Z4(t,{y:e=Me,...n}={}){return new Jc(t,j4({...n,y:e}))}function Ym(t,e,n){ft(t,"text-anchor",e.textAnchor),ft(t,"font-family",e.fontFamily),ft(t,"font-size",e.fontSize),ft(t,"font-style",e.fontStyle),ft(t,"font-variant",e.fontVariant===void 0?J4(n):e.fontVariant),ft(t,"font-weight",e.fontWeight)}function J4(t){return t&&(pw(t)||ve(t))?"tabular-nums":void 0}const K4=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Q4(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),K4.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function t8(t,e,n){const r=[];let i,a=0;for(const[s,f,c]of e8(t)){if(i===void 0&&(i=s),a>i&&n(t,i,f)>e&&(r.push(t.slice(i,a)+(t[a-1]===Vm?"-":"")),i=s),c){r.push(t.slice(i,f)),i=void 0;continue}a=f}return r}function*e8(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case Vm:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const oh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Kc(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Fr(t,i))r+=oh[t[i]]??(Jm(t,i)?120:oh.e);return r}function Qc(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Fr(t,i))r+=Jm(t,i)?126:63;return r}function Xm({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return a=>a.split(/\r\n?|\n/g);const r=t?Qc:Kc,i=e*100;return a=>t8(a,i,r)}function Gm({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return a=>a;const r=t?Qc:Kc,i=e*100;switch(n){case"clip-start":return a=>fh(a,i,r,"");case"clip-end":return a=>sh(a,i,r,"");case"ellipsis-start":return a=>fh(a,i,r,lr);case"ellipsis-middle":return a=>n8(a,i,r,lr);case"ellipsis-end":return a=>sh(a,i,r,lr)}}const lr="…";function kr(t,e,n,r){const i=[];let a=0;for(let s=0,f=0,c=t.length;s<c;s=f){f=Fr(t,s);const u=n(t,s,f);if(a+u>e){for(a+=r;a>e&&s>0;)f=s,s=i.pop(),a-=n(t,s,f);return[s,e-a]}a+=u,i.push(s)}return[-1,0]}function sh(t,e,n,r){t=t.trim();const i=n(r),[a]=kr(t,e,n,i);return a<0?t:t.slice(0,a).trimEnd()+r}function n8(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const a=n(r)/2,[s,f]=kr(t,e/2,n,a),[c]=kr(t,i-e/2-f+a,n,-a);return c<0?r:t.slice(0,s).trimEnd()+r+t.slice(Fr(t,c)).trimStart()}function fh(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const a=n(r),[s]=kr(t,i-e+a,n,-a);return s<0?r:r+t.slice(Fr(t,s)).trimStart()}const Bf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,ch=/\p{Extended_Pictographic}/uy;function Fr(t,e){return e+=r8(t,e)?2:1,a8(t,e)&&(e=Bf.lastIndex),i8(t,e)?Fr(t,e+1):e}function Zm(t,e){return t.charCodeAt(e)<128}function r8(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function i8(t,e){return t.charCodeAt(e)===8205}function a8(t,e){return Zm(t,e)?!1:(Bf.lastIndex=e,Bf.test(t))}function Jm(t,e){return Zm(t,e)?!1:(ch.lastIndex=e,ch.test(t))}const o8={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Km=3.5,s8=Km*5,Qm={draw(t,e,n){const r=e*n/s8;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},f8={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},c8=new Map([["arrow",Qm],["spike",f8]]);function u8(t){return t&&typeof t.draw=="function"}function l8(t){if(u8(t))return t;const e=c8.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}let tp=class extends ie{constructor(e,n={}){const{x:r,y:i,r:a=Km,length:s,rotate:f,shape:c=Qm,anchor:u="middle",frameAnchor:l}=n,[d,h]=Xt(s,12),[g,p]=Xt(f,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:d,scale:"length",optional:!0},rotate:{value:g,optional:!0}},n,o8),this.r=+a,this.length=h,this.rotate=p,this.shape=l8(c),this.anchor=Ne(u,"anchor",["start","middle","end"]),this.frameAnchor=Po(l)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,length:l,rotate:d}=r,{length:h,rotate:g,anchor:p,shape:m,r:b}=this,[y,_]=$i(this,i);return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s,y:u&&f}).call(M=>M.selectAll().data(e).enter().append("path").call(ce,this).attr("transform",Zc`translate(${c?w=>c[w]:y},${u?w=>u[w]:_})${d?w=>` rotate(${d[w]})`:g?` rotate(${g})`:""}${p==="start"?"":p==="end"?l?w=>` translate(0,${l[w]})`:` translate(0,${h})`:l?w=>` translate(0,${l[w]/2})`:` translate(0,${h/2})`}`).attr("d",l?w=>{const v=mn();return m.draw(v,l[w],b),v}:(()=>{const w=mn();return m.draw(w,h,b),w})()).call(Ce,this,r)).node()}};function h8(t,e={}){const{x:n=Me,...r}=e;return new tp(t,{...r,x:n})}function d8(t,e={}){const{y:n=Me,...r}=e;return new tp(t,{...r,y:n})}function Nn(t,e){return arguments.length<2&&!Qn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Wo({anchor:t}={},e){return t===void 0?e[0]:Ne(t,"anchor",e)}function ep(t){return Wo(t,["left","right"])}function np(t){return Wo(t,["right","left"])}function rp(t){return Wo(t,["bottom","top"])}function ip(t){return Wo(t,["top","bottom"])}function Ri(){const[t,e]=Nn(...arguments);return ap("y",ep(e),t,e)}function g8(){const[t,e]=Nn(...arguments);return ap("fy",np(e),t,e)}function Or(){const[t,e]=Nn(...arguments);return op("x",rp(e),t,e)}function m8(){const[t,e]=Nn(...arguments);return op("fx",ip(e),t,e)}function ap(t,e,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:s=i,strokeWidth:f=1,fill:c=r,fillOpacity:u=i,textAnchor:l,textStroke:d,textStrokeOpacity:h,textStrokeWidth:g,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:b,x:y,margin:_,marginTop:M=_===void 0?20:_,marginRight:w=_===void 0?e==="right"?40:0:_,marginBottom:v=_===void 0?20:_,marginLeft:S=_===void 0?e==="left"?40:0:_,label:A,labelAnchor:x,labelArrow:E,labelOffset:I,ariaLabel:k=`${t}-axis`,...N}){return p=Wt(p),m=Wt(m),b=Wt(b),x!==void 0&&(x=Ne(x,"labelAnchor",["center","top","bottom"])),E=gp(E),Dm(p&&!Qt(a)?p8(t,e,n,{stroke:a,strokeOpacity:s,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:b,x:y,ariaLabel:k,...N}):null,Qt(c)?null:y8(t,e,n,{fill:c,fillOpacity:u,stroke:d,strokeOpacity:h,strokeWidth:g,textAnchor:l,tickSize:p,tickPadding:m,tickRotate:b,x:y,marginTop:M,marginRight:w,marginBottom:v,marginLeft:S,ariaLabel:k,...N}),!Qt(c)&&A!==null?jo([],up({fill:c,fillOpacity:u,...N},function($,R,T,O,L){const z=O[t],{marginTop:X,marginRight:B,marginBottom:U,marginLeft:V}=t==="y"&&L.inset||L,W=x??(z.bandwidth?"center":"top"),D=I??(e==="right"?B:V)-3;return W==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=W,this.frameAnchor=`${W}-${e}`,this.rotate=0),this.dy=W==="top"?3-X:W==="bottom"?U-3:0,this.dx=e==="right"?D:-D,this.ariaLabel=`${k} label`,{facets:[[0]],channels:{text:{value:[dp(t,z,{anchor:e,label:A,labelAnchor:W,labelArrow:E})]}}}})):null)}function op(t,e,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:s=i,strokeWidth:f=1,fill:c=r,fillOpacity:u=i,textAnchor:l,textStroke:d,textStrokeOpacity:h,textStrokeWidth:g,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:b,y,margin:_,marginTop:M=_===void 0?e==="top"?30:0:_,marginRight:w=_===void 0?20:_,marginBottom:v=_===void 0?e==="bottom"?30:0:_,marginLeft:S=_===void 0?20:_,label:A,labelAnchor:x,labelArrow:E,labelOffset:I,ariaLabel:k=`${t}-axis`,...N}){return p=Wt(p),m=Wt(m),b=Wt(b),x!==void 0&&(x=Ne(x,"labelAnchor",["center","left","right"])),E=gp(E),Dm(p&&!Qt(a)?b8(t,e,n,{stroke:a,strokeOpacity:s,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:b,y,ariaLabel:k,...N}):null,Qt(c)?null:_8(t,e,n,{fill:c,fillOpacity:u,stroke:d,strokeOpacity:h,strokeWidth:g,textAnchor:l,tickSize:p,tickPadding:m,tickRotate:b,y,marginTop:M,marginRight:w,marginBottom:v,marginLeft:S,ariaLabel:k,...N}),!Qt(c)&&A!==null?jo([],up({fill:c,fillOpacity:u,...N},function($,R,T,O,L){const z=O[t],{marginTop:X,marginRight:B,marginBottom:U,marginLeft:V}=t==="x"&&L.inset||L,W=x??(z.bandwidth?"center":"right"),D=I??(e==="top"?X:U)-3;return W==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${W}`,this.textAnchor=W==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-D:D,this.dx=W==="right"?B-3:W==="left"?3-V:0,this.ariaLabel=`${k} label`,{facets:[[0]],channels:{text:{value:[dp(t,z,{anchor:e,label:A,labelAnchor:W,labelArrow:E})]}}}})):null)}function p8(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:s=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:u=0,insetLeft:l=u,insetRight:d=u,dx:h=0,y:g=t==="y"?void 0:null,ariaLabel:p,...m}){return Pr(d8,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:s,frameAnchor:f,y:g,...m,dx:e==="left"?+h-oe+ +l:+h+oe-d,anchor:"start",length:c,shape:e==="left"?k8:E8})}function b8(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:s=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:u=0,insetTop:l=u,insetBottom:d=u,dy:h=0,x:g=t==="x"?void 0:null,ariaLabel:p,...m}){return Pr(h8,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:s,frameAnchor:f,x:g,...m,dy:e==="bottom"?+h-oe-d:+h+oe+ +l,anchor:"start",length:c,shape:e==="bottom"?T8:A8})}function y8(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:a,tickRotate:s=0,tickPadding:f=Math.max(3,9-a)+(Math.abs(s)>60?4*Math.cos(s*Pm):0),text:c,textAnchor:u=Math.abs(s)>60?"middle":e==="left"?"end":"start",lineAnchor:l=s>60?"top":s<-60?"bottom":"middle",fontVariant:d,inset:h=0,insetLeft:g=h,insetRight:p=h,dx:m=0,ariaLabel:b,y=t==="y"?void 0:null,..._}){return Pr(Z4,t,n,{ariaLabel:`${b} tick label`},{facetAnchor:r,frameAnchor:i,text:c,textAnchor:u,lineAnchor:l,fontVariant:d,rotate:s,y,..._,dx:e==="left"?+m-a-f+ +g:+m+ +a+ +f-p},function(M,w,v,S,A){d===void 0&&(this.fontVariant=hp(M)),c===void 0&&(A.text=lp(M,w,v,S,e))})}function _8(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:a,tickRotate:s=0,tickPadding:f=Math.max(3,9-a)+(Math.abs(s)>=10?4*Math.cos(s*Pm):0),text:c,textAnchor:u=Math.abs(s)>=10?s<0^e==="bottom"?"start":"end":"middle",lineAnchor:l=Math.abs(s)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:d,inset:h=0,insetTop:g=h,insetBottom:p=h,dy:m=0,x:b=t==="x"?void 0:null,ariaLabel:y,..._}){return Pr(G4,t,n,{ariaLabel:`${y} tick label`},{facetAnchor:r,frameAnchor:i,text:c===void 0?null:c,textAnchor:u,lineAnchor:l,fontVariant:d,rotate:s,x:b,..._,dy:e==="bottom"?+m+ +a+ +f-p:+m-a-f+ +g},function(M,w,v,S,A){d===void 0&&(this.fontVariant=hp(M)),c===void 0&&(A.text=lp(M,w,v,S,e))})}function w8(){const[t,e]=Nn(...arguments);return sp("y",ep(e),t,e)}function v8(){const[t,e]=Nn(...arguments);return sp("fy",np(e),t,e)}function M8(){const[t,e]=Nn(...arguments);return fp("x",rp(e),t,e)}function S8(){const[t,e]=Nn(...arguments);return fp("fx",ip(e),t,e)}function sp(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:a=e==="left"?i:null,x2:s=e==="right"?i:null,ariaLabel:f=`${t}-grid`,ariaHidden:c=!0,...u}){return Pr(Gc,t,n,{ariaLabel:f,ariaHidden:c},{y:r,x1:a,x2:s,...cp(u)})}function fp(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:a=e==="top"?i:null,y2:s=e==="bottom"?i:null,ariaLabel:f=`${t}-grid`,ariaHidden:c=!0,...u}){return Pr(Xc,t,n,{ariaLabel:f,ariaHidden:c},{x:r,y1:a,y2:s,...cp(u)})}function cp({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function up({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:s,monospace:f,pointerEvents:c,shapeRendering:u,clip:l=!1},d){return[,t]=Hn(t),[,e]=Xt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:s,monospace:f,pointerEvents:c,shapeRendering:u,clip:l,initializer:d}}function Pr(t,e,n,r,i,a){let s;function f(l,d,h,g,p,m){const b=l==null&&(e==="fx"||e==="fy"),{[e]:y}=g;if(!y)throw new Error(`missing scale: ${e}`);const _=y.domain();let{interval:M,ticks:w,tickFormat:v,tickSpacing:S=e==="x"?80:35}=i;if(typeof w=="string"&&mp(y)&&(M=w,w=void 0),w===void 0&&(w=Di(M,y.type)??x8(y,S)),l==null){if(Qn(w))l=Jn(w);else if(hw(w))l=Fs(w,..._n(_));else if(y.interval){let x=y.interval;if(y.ticks){const[E,I]=_n(_),k=(I-E)/x[Ei];x=Dl(x,k/w)??x,l=Fs(x,E,I)}else{l=_;const E=l.length;x=Dl(x,E/w)??x,x!==y.interval&&(l=Fs(x,..._n(l)))}if(x===y.interval){const E=Math.round(l.length/w);E>1&&(l=l.filter((I,k)=>k%E===0))}}else y.ticks?l=y.ticks(w):l=_;if(!y.ticks&&l.length&&l!==_){const x=new go(_);l=l.filter(E=>x.has(E)),l.length||wn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?d=[En(l)]:s[e]={scale:e,value:Me}}a==null||a.call(this,y,l,w,v,s);const A=Object.fromEntries(Object.entries(s).map(([x,E])=>[x,{...E,value:_e(l,E.value)}]));return b&&(d=m.filterFacets(l,A)),{data:l,facets:d,channels:A}}const c=xr(i).initializer,u=t(n,xr({...i,initializer:f},c));return n==null?(s=u.channels,u.channels={}):s={},r!==void 0&&Object.assign(u,r),u.clip===void 0&&(u.clip=!1),u}function x8(t,e){const[n,r]=_n(t.range());return(r-n)/e}function lp(t,e,n,r,i){return{value:tu(t,e,n,r,i)}}function tu(t,e,n,r,i){return typeof r=="function"&&!(t.type==="log"&&t.tickFormat)?r:r===void 0&&e&&ve(e)?Y3(t.type,e,i)??Ar:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):typeof r=="string"&&t.domain().length>0?(ve(t.domain())?ki:Ir)(r):r===void 0?Ar:on(r)}function Fs(t,e,n){return t.range(e,t.offset(t.floor(n)))}const T8={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},A8={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},k8={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},E8={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function hp(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function dp(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&mp(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(r)),!a)return r;if(a===!0){const s=I5(e);s&&(a=/x$/.test(t)||i==="center"?/x$/.test(t)===s<0?"left":"right":s<0?"up":"down")}switch(a){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function gp(t="auto"){return Qt(t)?!1:typeof t=="boolean"?t:Ne(t,"labelArrow",["auto","up","right","down","left"])}function mp(t){return ve(t.domain())}function uh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function C8(t,{opacity:e,...n}={}){if(!tr(t)&&!Tm(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return pp(t,n,(r,i,a,s)=>r.append("svg").attr("width",a).attr("height",s).attr("fill",i.scale).attr("fill-opacity",Xt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function N8(t,{fill:e=(u=>(u=t.hint)==null?void 0:u.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=(l=>(l=t.hint)==null?void 0:l.stroke)()!==void 0?t.hint.stroke:Qt(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:s=4.5,...f}={},c){const[d,h]=Hn(e),[g,p]=Hn(r),m=uh(c,d),b=uh(c,g),y=s*s*Math.PI;return n=Xt(n)[1],i=Xt(i)[1],a=Xt(a)[1],pp(t,f,(_,M,w,v)=>_.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",v).attr("fill",d==="color"?S=>m.scale(S):h).attr("fill-opacity",n).attr("stroke",g==="color"?S=>b.scale(S):p).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",S=>{const A=mn();return t.scale(S).draw(A,y),A}))}function pp(t,e={},n){let{columns:r,tickFormat:i,fontVariant:a=Om(t),swatchSize:s=15,swatchWidth:f=s,swatchHeight:c=s,marginLeft:u=0,className:l,style:d,width:h}=e;const g=Bc(e);l=zc(l),i=tu(t.scale,t.domain,void 0,i);const p=Pt("div",g).attr("class",`${l}-swatches ${l}-swatches-${r!=null?"columns":"wrap"}`);let m;return r!=null?(m=`:where(.${l}-swatches-columns .${l}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${l}-swatches-columns .${l}-swatch::before) {
  flex-shrink: 0;
}
:where(.${l}-swatches-columns .${l}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${l}-swatch`).call(n,t,f,c).call(b=>b.append("div").attr("class",`${l}-swatch-label`).attr("title",i).text(i))):(m=`:where(.${l}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${l}-swatches-wrap .${l}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${l}-swatch`).call(n,t,f,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(b=>b.insert("style","*").text(`:where(.${l}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${l}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",Bt(a,"normal")).call(qc,d).node()}const Uf=new Map([["symbol",N8],["color",yp],["opacity",I8]]);function D8(t,e,n={}){return(r,i)=>{if(!Uf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return Uf.get(r)(t[r],bp(e,n[r],i),a=>t[a])}}function bp({className:t,...e},{label:n,ticks:r,tickFormat:i}={},a){return ww(a,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function yp(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return C8(t,n);case"ramp":return F4(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function I8({type:t,interpolate:e,...n},{legend:r=!0,color:i=pa(0,0,0),...a}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return yp({type:t,...n,interpolate:L8(i)},{legend:r,...a})}function L8(t){const{r:e,g:n,b:r}=pa(t)||pa(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function F8(t,e,n){const r=[];for(const[i,a]of Uf){const s=n[i];if(s!=null&&s.legend&&i in t){const f=a(t[i],bp(e,t[i],s),c=>t[c]);f!=null&&r.push(f)}}return r}function O8(t={},e="x"){return Zg(t)?t:{...t,[e]:Me}}function P8(t,e){if(e.length===1)return{data:t,facets:e};const n=hi(t),r=new Uint8Array(n);let i=0;for(const f of e)for(const c of f)r[c]&&++i,r[c]=1;if(i===0)return{data:t,facets:e};t=li(t);const a=t[jg]=new Uint32Array(n+i);e=e.map(f=>li(f,Uint32Array));let s=n;r.fill(0);for(const f of e)for(let c=0,u=f.length;c<u;++c){const l=f[c];r[l]?(f[c]=s,t[s]=t[l],a[s]=l,++s):a[l]=l,r[l]=1}return{data:t,facets:e}}function $8(t={},e={}){arguments.length===1&&([t,e]=B8(t));const{y1:n,y:r=n,x:i,...a}=e,[s,f,c,u]=z8(r,i,"y","x",t,a);return{...s,y1:n,y:f,x1:c,x2:u,x:fw(c,u)}}function R8({x:t,x1:e,x2:n,...r}={}){return r=jc(r,"y"),e===void 0&&n===void 0?$8({x:t,...r}):([e,n]=aw(t,e,n),{...r,x1:e,x2:n})}function B8(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const U8={length:!0};function z8(t,e=K3,n,r,{offset:i,order:a,reverse:s},f){if(e===null)throw new Error(`stack requires ${r}`);const c=Jg(f),[u,l]=sw(t),[d,h]=Ef(e),[g,p]=Ef(e);return d.hint=g.hint=U8,i=q8(i),a=V8(a,i,r),[Ic(f,(m,b,y)=>{({data:m,facets:b}=P8(m,b));const _=t==null?void 0:l(cw(_e(m,t),y==null?void 0:y[n])),M=_e(m,e,Float64Array),w=_e(m,c),v=a&&a(m,_,M,w),S=hi(m),A=h(new Float64Array(S)),x=p(new Float64Array(S)),E=[];for(const I of b){const k=_?Array.from(Jf(I,N=>_[N]).values()):[I];if(v)for(const N of k)N.sort(v);for(const N of k){let $=0,R=0;s&&N.reverse();for(const T of N){const O=M[T];O<0?$=x[T]=(A[T]=$)+O:O>0?R=x[T]=(A[T]=R)+O:x[T]=A[T]=R}}E.push(k)}return i&&i(E,A,x,w),{data:m,facets:b}}),u,d,g]}function q8(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return j8;case"center":case"silhouette":return W8;case"wiggle":return wp}throw new Error(`unknown offset: ${t}`)}}function _p(t,e){let n=0,r=0;for(const i of t){const a=e[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function j8(t,e,n){for(const r of t)for(const i of r){const[a,s]=_p(i,n);for(const f of i){const c=1/(s-a||1);e[f]=c*(e[f]-a),n[f]=c*(n[f]-a)}}}function W8(t,e,n){for(const r of t){for(const i of r){const[a,s]=_p(i,n);for(const f of i){const c=(s+a)/2;e[f]-=c,n[f]-=c}}vp(r,e,n)}Mp(t,e,n)}function wp(t,e,n,r){for(const i of t){const a=new zn;let s=0;for(const f of i){let c=-1;const u=f.map(g=>Math.abs(n[g]-e[g])),l=f.map(g=>{c=r?r[g]:++c;const p=n[g]-e[g],m=a.has(c)?p-a.get(c):0;return a.set(c,p),m}),d=[0,...k2(l)];for(const g of f)e[g]+=s,n[g]+=s;const h=qn(u);h&&(s-=qn(u,(g,p)=>(l[p]/2+d[p])*g)/h)}vp(i,e,n)}Mp(t,e,n)}function vp(t,e,n){const r=Ue(t,i=>Ue(i,a=>e[a]));for(const i of t)for(const a of i)e[a]-=r,n[a]-=r}function Mp(t,e,n){const r=t.length;if(r===1)return;const i=t.map(f=>f.flat()),a=i.map(f=>(Ue(f,c=>e[c])+se(f,c=>n[c]))/2),s=Ue(a);for(let f=0;f<r;f++){const c=s-a[f];for(const u of i[f])e[u]+=c,n[u]+=c}}function V8(t,e,n){if(t===void 0&&e===wp)return lh(qe);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?Ja:qe;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return H8(i);case"z":return Y8(i);case"sum":return X8(i);case"appearance":return G8(i);case"inside-out":return lh(i)}return hh(Wg(t))}if(typeof t=="function")return(t.length===1?hh:Z8)(t);if(Zn(t))return J8(t);throw new Error(`invalid order: ${t}`)}}function H8(t){return(e,n,r)=>(i,a)=>t(r[i],r[a])}function Y8(t){return(e,n,r,i)=>(a,s)=>t(i[a],i[s])}function X8(t){return Vo(t,(e,n,r,i)=>Qf(En(e),a=>qn(a,s=>r[s]),a=>i[a]))}function G8(t){return Vo(t,(e,n,r,i)=>Qf(En(e),a=>n[Cd(a,s=>r[s])],a=>i[a]))}function lh(t){return Vo(t,(e,n,r,i)=>{const a=En(e),s=Qf(a,d=>n[Cd(d,h=>r[h])],d=>i[d]),f=Qr(a,d=>qn(d,h=>r[h]),d=>i[d]),c=[],u=[];let l=0;for(const d of s)l<0?(l+=f.get(d),c.push(d)):(l-=f.get(d),u.push(d));return u.reverse().concat(c)})}function hh(t){return e=>{const n=_e(e,t);return(r,i)=>qe(n[r],n[i])}}function Z8(t){return e=>Zn(e)?(n,r)=>t(e[n],e[r]):(n,r)=>t(e.get(n),e.get(r))}function J8(t){return Vo(qe,()=>t)}function Vo(t,e){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const s=new zn(e(n,r,i,a).map((f,c)=>[f,c]));return(f,c)=>t(s.get(a[f]),s.get(a[c]))}}const K8={ariaLabel:"rect"};class Sp extends ie{constructor(e,n={}){const{x1:r,y1:i,x2:a,y2:s}=n;super(e,{x1:{value:r,scale:"x",type:r!=null&&a==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&s==null?"band":void 0,optional:!0},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,K8),eu(this,n),nu(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n;let{x1:c,y1:u,x2:l,y2:d}=r;const{marginTop:h,marginRight:g,marginBottom:p,marginLeft:m,width:b,height:y}=i,{projection:_}=a,{insetTop:M,insetRight:w,insetBottom:v,insetLeft:S}=this,{rx:A,ry:x,rx1y1:E,rx1y2:I,rx2y1:k,rx2y2:N}=this;(c||l)&&!_&&Tr(s)&&(c=l=null),(u||d)&&!_&&Tr(f)&&(u=d=null);const $=s!=null&&s.bandwidth?s.bandwidth():0,R=f!=null&&f.bandwidth?f.bandwidth():0;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{},0,0).call(T=>T.selectAll().data(e).enter().call(E||I||k||N?O=>O.append("path").call(ce,this).call(ru,c&&l?L=>c[L]+(l[L]<c[L]?-w:S):c?L=>c[L]+S:m+S,u&&d?L=>u[L]+(d[L]<u[L]?-v:M):u?L=>u[L]+M:h+M,c&&l?L=>l[L]-(l[L]<c[L]?-S:w):c?L=>c[L]+$-w:b-g-w,u&&d?L=>d[L]-(d[L]<u[L]?-M:v):u?L=>u[L]+R-v:y-p-v,this).call(Ce,this,r):O=>O.append("rect").call(ce,this).attr("x",c?l?L=>Math.min(c[L],l[L])+S:L=>c[L]+S:m+S).attr("y",u?d?L=>Math.min(u[L],d[L])+M:L=>u[L]+M:h+M).attr("width",c?l?L=>Math.max(0,Math.abs(l[L]-c[L])+$-S-w):$-S-w:b-g-m-w-S).attr("height",u?d?L=>Math.max(0,Math.abs(u[L]-d[L])+R-M-v):R-M-v:y-h-p-M-v).call(ft,"rx",A).call(ft,"ry",x).call(Ce,this,r))).node()}}function eu(t,{inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:a=e}={}){t.insetTop=Wt(n),t.insetRight=Wt(r),t.insetBottom=Wt(i),t.insetLeft=Wt(a)}function nu(t,{r:e,rx:n,ry:r,rx1:i=e,ry1:a=e,rx2:s=e,ry2:f=e,rx1y1:c=i!==void 0?+i:a!==void 0?+a:0,rx1y2:u=i!==void 0?+i:f!==void 0?+f:0,rx2y1:l=s!==void 0?+s:a!==void 0?+a:0,rx2y2:d=s!==void 0?+s:f!==void 0?+f:0}={}){c||u||l||d?(t.rx1y1=c,t.rx1y2=u,t.rx2y1=l,t.rx2y2=d):(t.rx=Bt(n,"auto"),t.ry=Bt(r,"auto"))}function ru(t,e,n,r,i,a){const{rx1y1:s,rx1y2:f,rx2y1:c,rx2y2:u}=a;typeof e!="function"&&(e=on(e)),typeof n!="function"&&(n=on(n)),typeof r!="function"&&(r=on(r)),typeof i!="function"&&(i=on(i));const l=Math.max(Math.abs(s+c),Math.abs(f+u)),d=Math.max(Math.abs(s+f),Math.abs(c+u));t.attr("d",h=>{const g=e(h),p=n(h),m=r(h),b=i(h),y=g>m,_=p>b,M=y?m:g,w=y?g:m,v=_?b:p,S=_?p:b,A=Math.min(1,(w-M)/l,(S-v)/d),x=A*(y?_?u:c:_?f:s),E=A*(y?_?f:s:_?u:c),I=A*(y?_?s:f:_?c:u),k=A*(y?_?c:u:_?s:f);return`M${M},${v+Ki(x,k)}A${x},${x} 0 0 ${x<0?0:1} ${M+Ji(x,k)},${v}H${w-Ji(E,I)}A${E},${E} 0 0 ${E<0?0:1} ${w},${v+Ki(E,I)}V${S-Ki(I,E)}A${I},${I} 0 0 ${I<0?0:1} ${w-Ji(I,E)},${S}H${M+Ji(k,x)}A${k},${k} 0 0 ${k<0?0:1} ${M},${S-Ki(k,x)}Z`})}function Ji(t,e){return e<0?t:Math.abs(t)}function Ki(t,e){return e<0?Math.abs(t):t}function Q8(t,e){return new Sp(t,U4(qm(e)))}function iu(t,e={}){return iw(e)||(e={...e,y:Vg,x2:Me,interval:1}),new Sp(t,R8(qm(O8(e))))}const t7={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},e7={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class n7 extends ie{constructor(e={}){const{anchor:n=null}=e;super(ha,void 0,e,n==null?t7:e7),this.anchor=Xg(n,"anchor",["top","right","bottom","left"]),eu(this,e),n||nu(this,e)}render(e,n,r,i,a){const{marginTop:s,marginRight:f,marginBottom:c,marginLeft:u,width:l,height:d}=i,{anchor:h,insetTop:g,insetRight:p,insetBottom:m,insetLeft:b}=this,{rx:y,ry:_,rx1y1:M,rx1y2:w,rx2y1:v,rx2y2:S}=this,A=u+b,x=l-f-p,E=s+g,I=d-c-m;return Pt(h?"svg:line":M||w||v||S?"svg:path":"svg:rect",a).datum(0).call(De,this,i,a).call(ce,this).call(Ce,this,r).call(Ie,this,{}).call(h==="left"?k=>k.attr("x1",A).attr("x2",A).attr("y1",E).attr("y2",I):h==="right"?k=>k.attr("x1",x).attr("x2",x).attr("y1",E).attr("y2",I):h==="top"?k=>k.attr("x1",A).attr("x2",x).attr("y1",E).attr("y2",E):h==="bottom"?k=>k.attr("x1",A).attr("x2",x).attr("y1",I).attr("y2",I):M||w||v||S?k=>k.call(ru,A,E,x,I,this):k=>k.attr("x",A).attr("y",E).attr("width",x-A).attr("height",I-E).attr("rx",y).attr("ry",_)).node()}}function xp(t){return new n7(t)}const Os={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},r7=new Set(["geometry","href","src","ariaLabel","scales"]);class i7 extends ie{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Qn(e)&&Qg(e)&&(n={...n,title:Me});const{x:r,y:i,x1:a,x2:s,y1:f,y2:c,anchor:u,preferredAnchor:l="bottom",monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:p,fontVariant:m,fontWeight:b,lineHeight:y=1,lineWidth:_=20,frameAnchor:M,format:w,textAnchor:v="start",textOverflow:S,textPadding:A=8,title:x,pointerSize:E=12,pathFilter:I="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:a!=null&&s!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:s==null},y1:{value:f,scale:"y",optional:c==null},x2:{value:s,scale:"x",optional:a==null},y2:{value:c,scale:"y",optional:f==null},title:{value:x,optional:!0}},n,Os),this.anchor=Cf(u,"anchor"),this.preferredAnchor=Cf(l,"preferredAnchor"),this.frameAnchor=Po(M),this.textAnchor=Bt(v,"middle"),this.textPadding=+A,this.pointerSize=+E,this.pathFilter=jt(I),this.lineHeight=+y,this.lineWidth=+_,this.textOverflow=Hm(S),this.monospace=!!d,this.fontFamily=jt(h),this.fontSize=Wt(g),this.fontStyle=jt(p),this.fontVariant=jt(m),this.fontWeight=jt(b);for(const k in Os)k in this.channels&&(this[k]=Os[k]);this.splitLines=Xm(this),this.clipLine=Gm(this),this.format=typeof w=="string"||typeof w=="function"?{title:w}:{...w}}render(e,n,r,i,a){const s=this,{x:f,y:c,fx:u,fy:l}=n,{ownerSVGElement:d,document:h}=a,{anchor:g,monospace:p,lineHeight:m,lineWidth:b}=this,{textPadding:y,pointerSize:_,pathFilter:M}=this,{marginTop:w,marginLeft:v}=i,{x1:S,y1:A,x2:x,y2:E,x:I=S??x,y:k=A??E}=r,N=u?u(e.fx)-v:0,$=l?l(e.fy)-w:0,[R,T]=$i(this,i),O=Lm(r,R),L=Fm(r,T),z=p?Qc:Kc,X=z(lr);let B,U;"title"in r?(B=dh.call(this,{title:r.channels.title},n),U=c7):(B=dh.call(this,r.channels,n),U=u7);const V=Pt("svg:g",a).call(De,this,i,a).call(Ym,this).call(Ie,this,{x:I&&f,y:k&&c}).call(tt=>tt.selectAll().data(e).enter().append("g").attr("transform",nt=>`translate(${Math.round(O(nt))},${Math.round(L(nt))})`).call(ce,this).call(nt=>nt.append("path").attr("filter",M)).call(nt=>nt.append("text").each(function(q){const Q=qt(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const P=U.call(s,q,e,B,n,r);if(typeof P=="string")for(const Y of s.splitLines(P))W(Q,{value:s.clipLine(Y)});else{const Y=new Set;for(const G of P){const{label:F=""}=G;F&&Y.has(F)||(Y.add(F),W(Q,G))}}})));function W(tt,{label:nt,value:q,color:Q,opacity:P}){nt??(nt=""),q??(q="");const Y=Q!=null||P!=null;let G,F=b*100;const[mt]=kr(nt,F,z,X);if(mt>=0)nt=nt.slice(0,mt).trimEnd()+lr,G=q.trim(),q="";else{(nt||!q&&!Y)&&(q=" "+q);const[yt]=kr(q,F-z(nt),z,X);yt>=0&&(G=q.trim(),q=q.slice(0,yt).trimEnd()+lr)}const rt=tt.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");nt&&rt.append("tspan").attr("font-weight","bold").text(nt),q&&rt.append(()=>h.createTextNode(q)),Y&&rt.append("tspan").text(" ■").attr("fill",Q).attr("fill-opacity",P).style("user-select","none"),G&&rt.append("title").text(G)}function D(){const{width:tt,height:nt}=i.facet??i;V.selectChildren().each(function(q){let{x:Q,width:P,height:Y}=this.getBBox();P=Math.round(P),Y=Math.round(Y);let G=g;if(G===void 0){const rt=O(q)+N,yt=L(q)+$,St=rt+P+_+y*2<tt,Z=rt-P-_-y*2>0,wt=yt+Y+_+y*2<nt,ae=yt-Y-_-y*2>0;G=St&&Z?wt&&ae?s.preferredAnchor:ae?"bottom":"top":wt&&ae?St?"left":"right":(St||Z)&&(wt||ae)?`${ae?"bottom":"top"}-${St?"left":"right"}`:s.preferredAnchor}const F=this.firstChild,mt=this.lastChild;if(F.setAttribute("d",f7(G,_,y,P,Y)),Q)for(const rt of mt.childNodes)rt.setAttribute("x",-Q);mt.setAttribute("y",`${+o7(G,mt.childNodes.length,m).toFixed(6)}em`),mt.setAttribute("transform",`translate(${s7(G,_,y,P,Y)})`)}),V.attr("visibility",null)}return e.length&&(V.attr("visibility","hidden"),d.isConnected?Promise.resolve().then(D):typeof requestAnimationFrame<"u"&&requestAnimationFrame(D)),V.node()}}function a7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ci(e,n)),new i7(t,{...r,x:e,y:n})}function o7(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function s7(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function f7(t,e,n,r,i){const a=r+n*2,s=i+n*2;switch(t){case"middle":return`M${-a/2},${-s/2}h${a}v${s}h${-a}z`;case"top-left":return`M0,0l${e},${e}h${a-e}v${s}h${-a}z`;case"top":return`M0,0l${e/2},${e/2}h${(a-e)/2}v${s}h${-a}v${-s}h${(a-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-a}v${s}h${a}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-s/2}h${-a}v${s}h${a}v${e/2-s/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${a-e}v${-s}h${-a}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(a-e)/2}v${-s}h${-a}v${s}h${(a-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-a}v${-s}h${a}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-s/2}h${a}v${s}h${-a}v${e/2-s/2}z`}}function dh(t,e){var i,a;const n={};let r=this.format;r=gh(r,t,"x"),r=gh(r,t,"y"),this.format=r;for(const s in r){const f=r[s];if(!(f===null||f===!1))if(s==="fx"||s==="fy")n[s]=!0;else{const c=Ul(t,s);c&&(n[s]=c)}}for(const s in t){if(s in n||s in r||r7.has(s)||(s==="x"||s==="y")&&t.geometry)continue;const f=Ul(t,s);if(f){if(f.scale==null&&f.defaultScale==="color")continue;n[s]=f}}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const s in n){const f=this.format[s];if(typeof f=="string"){const c=((i=n[s])==null?void 0:i.value)??((a=e[s])==null?void 0:a.domain())??[];this.format[s]=(ve(c)?ki:Ir)(f)}else if(f===void 0||f===!0){const c=e[s];this.format[s]=c!=null&&c.bandwidth?tu(c,c.domain()):Ar}}return n}function gh(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const a=Object.entries(t),s=t[n];return a.splice(a.findIndex(([f])=>f===n)+1,0,[r,s],[i,s]),Object.fromEntries(a)}function c7(t,e,{title:n}){return this.format.title(n.value[t],t)}function*u7(t,e,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:Qa(r,n,a),value:this.format[a](e[a],t)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const s=n[a];if(a==="x2"&&"x1"in n)yield{label:ph(r,n,"x"),value:mh(this.format.x2,n.x1,s,t)};else if(a==="y2"&&"y1"in n)yield{label:ph(r,n,"y"),value:mh(this.format.y2,n.y1,s,t)};else{const f=s.value[t],c=s.scale;if(!Tn(f)&&c==null)continue;yield{label:Qa(r,n,a),value:this.format[a](f,t),color:c==="color"?i[a][t]:null,opacity:c==="opacity"?i[a][t]:null}}}}function mh(t,e,n,r){var i;return(i=n.hint)!=null&&i.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}–${t(n.value[r],r)}`}function ph(t,e,n){const r=Qa(t,e,`${n}1`,n),i=Qa(t,e,`${n}2`,n);return r===i?r:`${r}–${i}`}function Qa(t,e,n,r=n){const i=e[n],a=t[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function Tp(t={}){var X;const{facet:e,style:n,title:r,subtitle:i,caption:a,ariaLabel:s,ariaDescription:f}=t,c=zc(t.className),u=t.marks===void 0?[]:yh(t.marks);u.push(...b7(u));const l=m7(e,t),d=new Map;for(const B of u){const U=_h(B,l,t);U&&d.set(B,U)}const h=new Map;l&&jr(h,[l],t),jr(h,d,t);const g=yh(y7(u,h,t));for(const B of g){const U=_h(B,l,t);U&&d.set(B,U)}u.unshift(...g);let p=B5(h,t);if(p!==void 0){const B=l?Ns(p,l):void 0;for(const V of u){if(V.facet===null||V.facet==="super")continue;const W=d.get(V);W!==void 0&&(W.facetsIndex=V.fx!=null||V.fy!=null?Ns(p,W):B)}const U=new Set;for(const{facetsIndex:V}of d.values())V==null||V.forEach((W,D)=>{(W==null?void 0:W.length)>0&&U.add(D)});p.forEach(0<U.size&&U.size<p.length?(V,W)=>V.empty=!U.has(W):V=>V.empty=!1);for(const V of u)if(V.facet==="exclude"){const W=d.get(V);W!==void 0&&(W.facetsIndex=q5(W.facetsIndex))}}for(const B of kt.keys())Ka(t[B])&&B!=="fx"&&B!=="fy"&&h.set(B,[]);const m=new Map;for(const B of u){if(m.has(B))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:U,channels:V}=d.get(B)??{},{data:W,facets:D,channels:tt}=B.initialize(U,V,t);au(tt,t),m.set(B,{data:W,facets:D,channels:tt})}const b=Lf(jr(h,m,t),t),y=N4(b,u,t);N5(b,y);const _=Xl(b),{fx:M,fy:w}=_,v=M||w?vm(b,y):y,S=M||w?T7(_,y):y,A=Bc(t),x=A.document,E=pd("svg").call(x.documentElement);let I=E;A.ownerSVGElement=E,A.className=c,A.projection=J5(t,v),A.path=function(){return oc(this.projection??i4(_))},A.filterFacets=(B,U)=>Ns(p,{channels:U,groups:Rc(B,U)}),A.getMarkState=B=>{const U=m.get(B),V=d.get(B);return{...U,channels:{...U.channels,...V==null?void 0:V.channels}}},A.dispatchValue=B=>{I.value!==B&&(I.value=B,I.dispatchEvent(new A.document.defaultView.Event("input",{bubbles:!0})))};const k=new Set;for(const[B,U]of m)if(B.initializer!=null){const V=B.facet==="super"?S:v,W=B.initializer(U.data,U.facets,U.channels,_,V,A);if(W.data!==void 0&&(U.data=W.data),W.facets!==void 0&&(U.facets=W.facets),W.channels!==void 0){const{fx:D,fy:tt,...nt}=W.channels;g7(nt),Object.assign(U.channels,nt);for(const q of Object.values(nt)){const{scale:Q}=q;Q!=null&&!Sw(kt.get(Q))&&(Ap(q,t),k.add(Q))}(D!=null||tt!=null)&&d.set(B,!0)}}if(k.size){const B=new Map;jr(B,m,t,D=>k.has(D)),jr(h,m,t,D=>k.has(D));const U=x7(Lf(B,t),b),{scales:V,...W}=Xl(U);Object.assign(b,U),Object.assign(_,W),Object.assign(_.scales,V)}let N,$;p!==void 0&&(N={x:M==null?void 0:M.domain(),y:w==null?void 0:w.domain()},p=U5(p,N),$=z5(M,w,y));for(const[B,U]of m)U.values=B.scale(U.channels,_,A);const{width:R,height:T}=y;qt(E).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",R).attr("height",T).attr("viewBox",`0 0 ${R} ${T}`).attr("aria-label",s).attr("aria-description",f).call(B=>B.append("style").text(`:where(.${c}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${c} text),
:where(.${c} tspan) {
  white-space: pre;
}`)).call(qc,n);for(const B of u){const{channels:U,values:V,facets:W}=m.get(B);if(p===void 0||B.facet==="super"){let D=null;if(W&&(D=W[0],D=B.filter(D,U,V),D.length===0))continue;const tt=B.render(D,_,V,S,A);if(tt==null)continue;E.appendChild(tt)}else{let D;for(const tt of p){if(!(((X=B.facetAnchor)==null?void 0:X.call(B,p,N,tt))??!tt.empty))continue;let nt=null;if(W){const Q=d.has(B);if(nt=W[Q?tt.i:0],nt=B.filter(nt,U,V),nt.length===0)continue;!Q&&nt===W[0]&&(nt=ow(nt)),nt.fx=tt.x,nt.fy=tt.y,nt.fi=tt.i}const q=B.render(nt,_,V,v,A);if(q!=null){(D??(D=qt(E).append("g"))).append(()=>q).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(Q)&&(D.attr(Q,q.getAttribute(Q)),q.removeAttribute(Q))}}D==null||D.selectChildren().each($)}}const O=F8(b,A,t),{figure:L=r!=null||i!=null||a!=null||O.length>0}=t;L&&(I=x.createElement("figure"),I.className=`${c}-figure`,I.style.maxWidth="initial",r!=null&&I.append(bh(x,r,"h2")),i!=null&&I.append(bh(x,i,"h3")),I.append(...O,E),a!=null&&I.append(l7(x,a)),"value"in E&&(I.value=E.value,delete E.value)),I.scale=R5(_.scales),I.legend=D8(b,A,t);const z=d5();return z>0&&qt(E).append("text").attr("x",R).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${z.toLocaleString("en-US")} warning${z===1?"":"s"}. Please check the console.`),I}function bh(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function l7(t,e){const n=t.createElement("figcaption");return n.append(e),n}function yh(t){return t.flat(1/0).filter(e=>e!=null).map(h7)}function h7(t){return typeof t.render=="function"?t:new d7(t)}class d7 extends ie{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function au(t,e){for(const n in t)Ap(t[n],e);return t}function Ap(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:a,interval:s,transform:f=a?c=>c==null?NaN:c*100:Kg(s,i)}=e[n]??{};f!=null&&(t.value=Lt(t.value,f),t.transform=!1)}function g7(t){for(const e in t)sm(e,t[e])}function jr(t,e,n,r=Q3){var i,a;for(const{channels:s}of e.values())for(const f in s){const c=s[f],{scale:u}=c;if(u!=null&&r(u))if(u==="projection"){if(!e4(n)){const l=((i=n.x)==null?void 0:i.domain)===void 0,d=((a=n.y)==null?void 0:a.domain)===void 0;if(l||d){const[h,g]=r4(c);l&&Ps(t,"x",h),d&&Ps(t,"y",g)}}}else Ps(t,u,c)}return t}function Ps(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function m7(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=Mr(t.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=gi(i,{value:n,scale:"fx"})),r!=null&&(a.fy=gi(i,{value:r,scale:"fy"})),au(a,e);const s=Rc(i,a);return{channels:a,groups:s,data:t.data}}function _h(t,e,n){if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const c=Mr(t.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=gi(c,{value:r,scale:"fx"})),i!=null&&(u.fy=gi(c,{value:i,scale:"fy"})),au(u,n),{channels:u,groups:Rc(c,u)}}if(e===void 0)return;const{channels:a,groups:s,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:a,groups:s};f.length>0&&(s.size>1||s.size===1&&a.fx&&a.fy&&[...s][0][1].size>1)&&hi(Mr(t.data))===hi(f)&&wn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function p7(t,e={}){return xr({...e,x:null,y:null},(n,r,i,a,s,f)=>f.getMarkState(t))}function b7(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?L4:/^y$/i.test(i)?rh:I4,r=i(p7(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===rh?"left":"bottom");const s=a7(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,e.push(s)}}return e}function y7(t,e,n){let{projection:r,x:i={},y:a={},fx:s={},fy:f={},axis:c,grid:u,facet:l={},facet:{axis:d=c,grid:h}=l,x:{axis:g=c,grid:p=g===null?null:u}=i,y:{axis:m=c,grid:b=m===null?null:u}=a,fx:{axis:y=d,grid:_=y===null?null:h}=s,fy:{axis:M=d,grid:w=M===null?null:h}=f}=n;(r||!Ka(i)&&!wh("x",t))&&(g=p=null),(r||!Ka(a)&&!wh("y",t))&&(m=b=null),e.has("fx")||(y=_=null),e.has("fy")||(M=w=null),g===void 0&&(g=!ea(t,"x")),m===void 0&&(m=!ea(t,"y")),y===void 0&&(y=!ea(t,"fx")),M===void 0&&(M=!ea(t,"fy")),g===!0&&(g="bottom"),m===!0&&(m="left"),y===!0&&(y=g==="top"||g===null?"bottom":"top"),M===!0&&(M=m==="right"||m===null?"left":"right");const v=[];return ta(v,w,v8,f),Qi(v,M,g8,"right","left",l,f),ta(v,_,S8,s),Qi(v,y,m8,"top","bottom",l,s),ta(v,b,w8,a),Qi(v,m,Ri,"left","right",n,a),ta(v,p,M8,i),Qi(v,g,Or,"bottom","top",n,i),v}function Qi(t,e,n,r,i,a,s){if(!e)return;const f=_7(e);s=w7(f?r:e,a,s);const{line:c}=s;(n===Ri||n===Or)&&c&&!di(c)&&t.push(xp(v7(s))),t.push(n(s)),f&&t.push(n({...s,anchor:i,label:null}))}function ta(t,e,n,r){!e||di(e)||t.push(n(M7(e,r)))}function _7(t){return/^\s*both\s*$/i.test(t)}function w7(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:s,tickFormat:f,tickRotate:c,fontVariant:u,ariaLabel:l,ariaDescription:d,label:h=e.label,labelAnchor:g,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:s,tickFormat:f,tickRotate:c,fontVariant:u,ariaLabel:l,ariaDescription:d,label:h,labelAnchor:g,labelArrow:p,labelOffset:m}}function v7(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function M7(t,{stroke:e=Oo(t)?t:void 0,ticks:n=S7(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function S7(t){switch(typeof t){case"number":return!0;case"string":return!Oo(t)}return Qn(t)||typeof(t==null?void 0:t.range)=="function"}function ea(t,e){const n=`${e}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function wh(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function x7(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function T7({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:f,height:c}=$c(n),u=t&&vh(t),l=e&&vh(e);return{marginTop:e?l[0]:r,marginRight:t?f-u[1]:i,marginBottom:e?c-l[1]:a,marginLeft:t?u[0]:s,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:c}}function vh(t){const e=t.domain();if(e.length===0)return[0,t.bandwidth()];let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const A7=new Map([["basis",x3],["basis-closed",T3],["basis-open",A3],["bundle",k3],["bump-x",d3],["bump-y",g3],["cardinal",E3],["cardinal-closed",C3],["cardinal-open",N3],["catmull-rom",D3],["catmull-rom-closed",I3],["catmull-rom-open",L3],["linear",Eo],["linear-closed",F3],["monotone-x",O3],["monotone-y",P3],["natural",$3],["step",R3],["step-after",U3],["step-before",B3]]);function k7(t=Eo,e){if(typeof t=="function")return t;const n=A7.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function kp(t=Er,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Er:k7(t,e)}function Er(t){return Eo(t)}const E7={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class C7 extends ie{constructor(e,n={}){const{x1:r,y1:i,x2:a,y2:s,curve:f,tension:c}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,E7),this.curve=kp(f,c),zo(this,n)}project(e,n,r){this.curve!==Er&&super.project(e,n,r)}render(e,n,r,i,a){const{x1:s,y1:f,x2:c=s,y2:u=f}=r,{curve:l}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,n).call(d=>d.selectAll().data(e).enter().append("path").call(ce,this).attr("d",l===Er&&a.projection?N7(a.path(),s,f,c,u):h=>{const g=mn(),p=l(g);return p.lineStart(),p.point(s[h],f[h]),p.point(c[h],u[h]),p.lineEnd(),g}).call(Ce,this,r).call(Vc,this,r,a)).node()}}function N7(t,e,n,r,i){return e=yn(e),n=yn(n),r=yn(r),i=yn(i),a=>t({type:"LineString",coordinates:[[e[a],n[a]],[r[a],i[a]]]})}function zf(t,{x:e,x1:n,x2:r,y:i,y1:a,y2:s,...f}={}){return[n,r]=Mh(e,n,r),[a,s]=Mh(i,a,s),new C7(t,{...f,x1:n,x2:r,y1:a,y2:s})}function Mh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}const D7={ariaLabel:"bar"};class I7 extends ie{constructor(e,n,r={},i=D7){super(e,n,r,i),eu(this,r),nu(this,r)}render(e,n,r,i,a){const{rx:s,ry:f,rx1y1:c,rx1y2:u,rx2y1:l,rx2y2:d}=this,h=this._x(n,r,i),g=this._y(n,r,i),p=this._width(n,r,i),m=this._height(n,r,i);return Pt("svg:g",a).call(De,this,i,a).call(this._transform,this,n).call(b=>b.selectAll().data(e).enter().call(c||u||l||d?y=>y.append("path").call(ce,this).call(ru,h,g,Sh(h,p),Sh(g,m),this).call(Ce,this,r):y=>y.append("rect").call(ce,this).attr("x",h).attr("width",p).attr("y",g).attr("height",m).call(ft,"rx",s).call(ft,"ry",f).call(Ce,this,r))).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:s,insetRight:f}=this,c=n&&e?e.bandwidth():a-r-i;return Math.max(0,c-s-f)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:s,insetBottom:f}=this,c=n&&e?e.bandwidth():a-r-i;return Math.max(0,c-s-f)}}function Sh(t,e){return typeof t=="function"&&typeof e=="function"?n=>t(n)+e(n):typeof t=="function"?n=>t(n)+e:typeof e=="function"?n=>t+e(n):t+e}const L7={ariaLabel:"cell"};class F7 extends I7{constructor(e,{x:n,y:r,...i}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,L7)}_transform(e,n){e.call(Ie,n,{},0,0)}}function O7(t,{x:e,y:n,...r}={}){return[e,n]=Ci(e,n),new F7(t,{...r,x:e,y:n})}const P7={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function $7(t){return t.sort===void 0&&t.reverse===void 0?Dw({channel:"-r"},t):t}class R7 extends ie{constructor(e,n={}){const{x:r,y:i,r:a,rotate:s,symbol:f=ui,frameAnchor:c}=n,[u,l]=Xt(s,0),[d,h]=Cw(f),[g,p]=Xt(a,d==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:g,scale:"r",filter:Do,optional:!0},rotate:{value:u,optional:!0},symbol:{value:d,scale:"auto",optional:!0}},$7(n),P7),this.r=p,this.rotate=l,this.symbol=h,this.frameAnchor=Po(c);const{channels:m}=this,{symbol:b}=m;if(b){const{fill:y,stroke:_}=m;b.hint={fill:y?y.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:_?_.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,r:l,rotate:d,symbol:h}=r,{r:g,rotate:p,symbol:m}=this,[b,y]=$i(this,i),_=m===ui,M=l?void 0:g*g*Math.PI;return vc(g)&&(e=[]),Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s,y:u&&f}).call(w=>w.selectAll().data(e).enter().append(_?"circle":"path").call(ce,this).call(_?v=>{v.attr("cx",c?S=>c[S]:b).attr("cy",u?S=>u[S]:y).attr("r",l?S=>l[S]:g)}:v=>{v.attr("transform",Zc`translate(${c?S=>c[S]:b},${u?S=>u[S]:y})${d?S=>` rotate(${d[S]})`:p?` rotate(${p})`:""}`).attr("d",l&&h?S=>{const A=mn();return h[S].draw(A,l[S]*l[S]*Math.PI),A}:l?S=>{const A=mn();return m.draw(A,l[S]*l[S]*Math.PI),A}:h?S=>{const A=mn();return h[S].draw(A,M),A}:(()=>{const S=mn();return m.draw(S,M),S})())}).call(Ce,this,r)).node()}}function B7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ci(e,n)),new R7(t,{...r,x:e,y:n})}function U7(t,e){return B7(t,{...e,symbol:"circle"})}const z7={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let q7=class extends ie{constructor(e,n={}){const{x:r,y:i,z:a,curve:s,tension:f}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:Jg(n),optional:!0}},n,z7),this.z=a,this.curve=kp(s,f),zo(this,n)}filter(e){return e}project(e,n,r){this.curve!==Er&&super.project(e,n,r)}render(e,n,r,i,a){const{x:s,y:f}=r,{curve:c}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,n).call(u=>u.selectAll().data(w4(e,[s,f],this,r)).enter().append("path").call(ce,this).call(b4,this,r).call(R4,this,r,a).attr("d",c===Er&&a.projection?j7(a.path(),s,f):h3().curve(c).defined(l=>l>=0).x(l=>s[l]).y(l=>f[l]))).node()}};function j7(t,e,n){return e=yn(e),n=yn(n),r=>{let i=[];const a=[i];for(const s of r)s===-1?(i=[],a.push(i)):i.push([e[s],n[s]]);return t({type:"MultiLineString",coordinates:a})}}function W7(t,{x:e,y:n,...r}={}){return[e,n]=Ci(e,n),new q7(t,{...r,x:e,y:n})}ie.prototype.plot=function({marks:t=[],...e}={}){return Tp({...e,marks:[...t,this]})};function V7(t,e={}){if(!t||t.length===0)return[];let n=vn(t[0]),r=e.include?e.include:n;r=ma(e.include||n,e.exclude||[]);let i=ma(n,r);return console.log(r,i),wd(a=>r.map(s=>{let f=d2(i,a);return f[e.key||"key"]=s,f[e.value||"value"]=a[s],f}),t)}class H7{add(e,n,r){let i=`${r.view.id}::${r.eventname}`;return Dt(this[i])?this[i]={iact:r,oldVal:e,newVal:n}:this[i].newVal=n,console.log("WriteSet.add",i,this[i]),this}forEach(e){Ln(this).forEach(e)}merge(e){if(Dt(e))return this;e.forEach(({iact:n,oldVal:r,newVal:i})=>{this.add(r,i,n)})}}const gn=Jt(Array),xh=()=>null;function hr(t,e,n){if(Jt(String,e))t[e]=n;else if(gn(e)){let[r,...i]=e;Dt(t[r])&&(t[r]={}),Kt(i)?hr(t,r,n):hr(t[r],i,n)}}function to(t,e,n){if(Jt(String,e))Dt(t[e])&&(t[e]=[]),t[e].push(n);else if(gn(e)){let[r,...i]=e;Dt(t[r])&&(t[r]=Kt(i)?[]:{}),Kt(i)?to(t,r,n):to(t[r],i,n)}}function hn(t,e,n){if(Jt(String,e))return t[e]||(Jt(Function,n)?n():n);if(gn(e)){let[r,...i]=e;return Dt(t[r])?Jt(Function,n)?n():n:Kt(i)?hn(t,r,n):hn(t[r],i,n)}}class Y7{constructor(){this.defaults={},this.dependencies={},this.view2iacts={},this.states={},this.viewData={}}add(e,n,r=xh,i){if(!e.attr)return this;let a=e.view.id,s=e.eventname;return to(this.dependencies,[a,s],{view:n,domainfunction:r}),to(this.view2iacts,n.id,e),this.setDefault(n,i),this}dependentViews(e){let n=e.eventname;return hn(this.dependencies,[e.view.id,n],[])}cmp(e,n){return this.isDependentOn(e.view,n)?1:this.isDependentOn(n.view,e)?-1:0}isDependentOn(e,n){let r=this.getAncestorIacts(e);return _d(i=>(i.store??i)==n,r)}setDefault(e,n){return Dt(n)||(this.defaults[e.id]=n),this}getDefault(e,n){return(hn(this.defaults,e.id)??xh)(n,this.getAncestorIacts(e))}getAncestorIacts(e){let n=[];return hn(this.view2iacts,e.id,[]).forEach(r=>{n.push(r),n=ya(n,this.getAncestorIacts(r.view))}),n}getStatesKey(e){let n=this.getAncestorIacts(e),r=ya([e.id],n.map(i=>[i.id,i.val()]));return console.debug("ancestorStates",r,JSON.stringify(r)),JSON.stringify(r)}saveState(e,n,r){let i=this.getStatesKey(n.view);!Dt(r)&&Dt(r.states[i])&&hr(r.states,[i,n.eventname],{old:hn(this.states,[i,n.eventname]),iact:n}),console.debug("saveState",i,n.eventname,hn(this.states,[i,n.eventname]),e),hr(this.states,[i,n.eventname],e)}restoreStates(e){tn((n,r)=>{tn(({iact:i,old:a},s)=>{console.debug("restoreState",r,i.eventname,a),hr(this.states,[r,i.eventname],a)},n)},e.states)}getState(e,n,r=!0){let i=this.getStatesKey(e);return Dt(n)?this.states[i]:hn(this.states,[i,n],()=>r?this.getDefault(e,n):void 0)}}class a9{constructor(e){this.interactions={},this.views={},this.backends={},this.i2b={},this.dependencies=new Y7,this.transactions=[],this._isaborting=!1,this.backends=e,this._iactid=0,this._xid=0;const n=r=>i=>this.backends.createBackend({...i,type:r});this.backend=r=>this.backends.createBackend(r),this.backend.array=n("array"),this.backend.duckdb=n("duckdb"),this.backend.identity=n("identity"),this.backend.overlay=n("overlay"),this.backend.query=n("query"),this.backend.matching=n("matching")}view(e){if(this.views[e.id]=e,gn(e)){e.forEach(n=>this.view(n));return}this.interactions[e.id]=this.interactions[e.id]??{_attrs:{}},e.magic=this,tn((n,r)=>{if(!Dt(this.interactions[e.id][r]))return;let i=a=>{e.load(o,event)};Object.assign(n,{start:(...a)=>this.start(n,...a),end:()=>this.end(n),abort:()=>this.abort(n),val:()=>Yo(n)??{},load:i,id:this._iactid++,view:e,eventname:r,isActive:!1}),n.get=(a,s=null)=>{if(!Dt(this.interactions[e.id]._attrs[a]))return this.interactions[e.id]._attrs[a];let f={store:n,attr:a,view:e,eventname:r,load:i,default:s,id:this._iactid++,val:()=>{let c=Yo(n);return _a(a)(c)?c[a]:(Kt(c)||console.error("could not find attr:",vn(Yo(n)).length),Jt(Function,s)?s():s)},start:()=>this.start(f),end:()=>this.end(f),abort:()=>this.abort(f)};return this.interactions[e.id]._attrs[a]=f,f},this.interactions[e.id][r]=n},e.interactions)}render(e,n,r,i={}){return e=gn(e)?e:[e],n=gn(n)?n:[n],e.map(s=>{if(Jt(pb,s))return s;let f=this.backend.identity();return this.connect(f,s),f}).forEach(s=>{n.forEach(f=>s.registerView(f,r,i))}),this}saveBackends(e){console.debug("save backends invoked on: ",e),e=gn(e)?e:[e],e.forEach(n=>{n.registerView((r,i)=>{console.debug("saveBackend",this,n,r,i),tn((a,s)=>{tn((f,c)=>{f.forEach(u=>{console.debug("saveBackend.DependencyLeaf.ViewIact",u.view.id,this.i2b[u.view.id]);let l=this.dependencies.getAncestorIacts(u.view),d=ya([n.id],l.map(h=>[h.id,h.val()]));Kt(s2(vn(this.i2b[u.view.id]),n.id))||(console.debug("saveBackend.View",n.id,u.view.id),this.dependencies.viewData[d]=r)})},a)},this.dependencies.dependencies)})})}connect(e,n,r){var s;if(gn(n)){n.forEach(f=>this.connect(e,f,r));return}let i=n,a=i.view;Dt(this.i2b[a.id])&&(i.subscribe(f=>{console.log("iact.subscribe.handleEvent",a.id,i.id),this.handleEvent(f,i)}),i.store?i.store.isActive=!0:i.isActive=!0,(s=a.registerInteraction)==null||s.call(a,i),this.i2b[a.id]={}),Dt(e)||hr(this.i2b,[a.id,e.id],this.processBindings(r))}processBindings(e){if(Dt(e)||Kt(e))return qs;if(Jt(Function,e))return e;let n=xu(Jb(Jt(Array),Jt(Object)),Sn(r=>this.processBindings(r)),xu(Jt(Function),qs,r=>()=>r))(e);return _a("*",e)?r=>bb(r,Su(n)(r)):Su(n)}saveIactState(e,n,r){this.dependencies.saveState(e,n,r),this.dependencies.dependentViews(n).forEach(({view:i,domainfunction:a})=>{if(a){let f=this.dependencies.getAncestorIacts(i);i.render(a(e,f))}let s=this.dependencies.getState(i);tn((f,c)=>{f=f??this.dependencies.getDefault(i,c),f&&(console.debug("saveIactState.load",i.id,c,f),i.load(f,c))},s),(Dt(s)||Kt(s))&&(console.debug("saveIactState.load.default",i.id),i.load(this.dependencies.getDefault(i)))})}handleEvent(e,n){if(!Dt(e))if(console.log("handleEvent",this._isaborting,n.view.id,e),this._isaborting)this.dependencies.saveState(e,n,null),this.sendEventToBackends(e,n);else if(this.transactions.length==0||Zo(this.transactions).iact!=n)n.start(),this.handleEvent(e,n),n.end();else{let r=Zo(this.transactions),i=this.dependencies.getState(n.view,n.eventname,!1);r.writeSet.add(i,e,n),r.visible&&this.sendEventToBackends(e,n)}}sendEventToBackends(e,n){tn((r,i)=>{let a=r(e);this.backends[i].execute(a,n)},this.i2b[n.view.id])}snapshot(){return c2(e=>e.snapshot(),this.backends)}restoreSnapshot(e){tn((n,r)=>{Dt(n)||this.backends[r].restoreSnapshot(n)},e.snapshot)}start(e,n=!0){this.transactions.push({xid:this._xid++,iact:e,visible:n,snapshot:this.snapshot(),states:{},writeSet:new H7}),console.log("magic.start",this.transactions)}end(e){if(!_d(a=>a.iact=e,this.transactions)){console.log("magic.end: can't find interaction",e);return}let n=this.transactions.pop();console.log("magic.end[",n.writeSet),n.writeSet.forEach(({newVal:a,iact:s})=>{this.saveIactState(a,s,n),n.visible||this.sendEventToBackends(a,s)});let r=Ln(n.writeSet).map(({iact:a})=>a.id),i=wd(a=>Ln(a).map(({iact:s})=>s.id),Ln(n.states));if(Kt(b2(r,i))||console.error("writeset != statesids",r,i),this.transactions.length>0){let a=Zo(this.transactions);a.snapshot=vu(a.snapshot,n.snapshot),a.states=vu(a.states,n.states),a.writeSet.merge(n.writeSet)}console.log("magic.end]",this.dependencies.states,this.transactions)}abort(e){try{this._isaborting=!0;let n=this.transactions.pop();console.log("magic.abort",n.states,n.writeSet),this.restoreSnapshot(n),console.log("magic.abort.restoredStates.before",yb(this.dependencies.states)),this.dependencies.restoreStates(n),console.log("magic.abort.restoredStates.after",this.dependencies.states),m2((i,a)=>this.dependencies.cmp(i.iact,a.iact),Ln(n.writeSet)).forEach(({iact:i})=>{let a=this.dependencies.getState(i.view,i.eventname);a&&i.view.load&&(console.log("magic.abort.load",a,i),i.view.load(a,i.eventname))})}finally{this._isaborting=!1}}importState(e){let n=JSON.parse(e);this.dependencies.states=n,tn((r,i)=>{let a=this.views[i];this.walkViews(a)},this.dependencies.dependencies)}walkViews(e){let n=this.dependencies.getStatesKey(e),r=this.dependencies.states[n],i=Ln(r);if(i.length>1){console.error("unexpected behavior, multiple values for state");return}e.load(i[0])}exportState(){return JSON.stringify(this.dependencies.states)}exportData(){return JSON.stringify(this.dependencies.viewData)}}const eo="_theplot_",X7={top:30,right:20,bottom:50,left:40};function Ho(t,e){t.className=t.className||eo,Dt(t.width);let n=Tp(t),r=null;return n.tagName=="svg"&&n.classList.contains(t.className)?r=n:r=n.querySelector(`svg.${t.className}`),r.classList.add(eo),t.width||r.setAttribute("width","100%"),t.height||r.setAttribute("height","100%"),e.innerHTML="",e.appendChild(n),n}class ou{constructor({iact:e,magic:n,plot:r=null}){this.x=null,this.y=null,this.defaultSelection,this.brush,this.el,this.iact=e,this.magic=n,this.plot=r,r&&this.init(r)}load(e){if(!(!this.el||!this.brush)&&this.iact.isActive){if(!e||Kt(e)){this.el.call(this.brush.clear);return}const{left:n,right:r}=e;this.el.call(this.brush.move,[this.x.apply(n),this.x.apply(r)])}}brushed({selection:e}){if(this.iact.isActive)if(!e)this.iact.set(this.defaultSelection);else{const[n,r]=e;this.iact.set({left:this.x.invert(n),right:this.x.invert(r)})}}brushstart({selection:e,sourceEvent:n}){this.iact.isActive&&n&&this.magic.start(this.iact)}brushended({selection:e,sourceEvent:n}){this.iact.isActive&&(e||this.iact.set({left:this.x.domain[0],right:this.x.domain[1]}),n&&this.magic.end(this.iact))}init(e){if(!this.iact.isActive)return;if(this.plot=e,this.x=e.scale("x"),this.y=e.scale("y"),this.y.range[0]<this.y.range[1]){let r=this.y.range[0];this.y.range[0]=this.y.range[1],this.y.range[1]=r}this.defaultSelection={left:this.x.domain[0],right:this.x.domain[1]};let n=e.classList.contains(eo)?qt(e):qt(e.querySelector(`.${eo}`));this.brush=wy().extent([[this.x.range[0],this.y.range[1]],[this.x.range[1],this.y.range[0]]]).on("brush",r=>this.brushed(r)).on("start",r=>this.brushstart(r)).on("end",r=>this.brushended(r)),this.el=n.append("g").attr("class","brush").call(this.brush)}}function G7(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(H),i.forEach(H),this.h()},h(){j(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[15](n)},p(r,[i]){i&1&&j(e,"id",r[0])},i:It,o:It,d(r){r&&H(e),t[15](null)}}}function Z7(t,e,n){let{id:r,name:i,magic:a,description:s,xAttr:f,yAttr:c,xDomainMin:u=null,xDomainMax:l=null,brushX:d=ee({}),interactions:h={brushX:d}}=e,g,p=null,m={},b=[],y;const _=["#93c1cf","#feb144","#9ee09e","#ff6663"];function M(x,E){return E==="overlay"?(m=x,!0):!1}function w(x,E){!x||x.length===0||typeof E=="object"||(M(x,E)?console.debug("overlays"):b=x,S())}let{load:v=x=>y==null?void 0:y.load(x)}=e;function S(){n(2,u=u??Ue(Sn(js(f),b))),n(3,l=l??se(Sn(js(f),b)));const x=Math.max(36,Math.min(b.length,20));let E={x:{domain:[+u,+l]},height:200,marginBottom:50,color:{range:_,legend:!0,style:{"font-size":10,"margin-left":"2rem"}},marks:[Or({ticks:x,fontSize:10}),Ri({fontSize:10}),Xc([u]),Gc([0]),iu(m,{x1:"left",x2:"right",y2:se(Gf(c,b)),fill:"key",color:"key"}),W7(b,{x:f,y:c,marker:!0,strokeWidth:3})]};p=Ho(E,g),d.isActive&&(y=y??new ou({iact:d,magic:a}),y.init(p))}function A(x){Nr[x?"unshift":"push"](()=>{g=x,n(1,g)})}return t.$$set=x=>{"id"in x&&n(4,r=x.id),"name"in x&&n(0,i=x.name),"magic"in x&&n(5,a=x.magic),"description"in x&&n(6,s=x.description),"xAttr"in x&&n(7,f=x.xAttr),"yAttr"in x&&n(8,c=x.yAttr),"xDomainMin"in x&&n(2,u=x.xDomainMin),"xDomainMax"in x&&n(3,l=x.xDomainMax),"brushX"in x&&n(9,d=x.brushX),"interactions"in x&&n(10,h=x.interactions),"load"in x&&n(13,v=x.load)},[i,g,u,l,r,a,s,f,c,d,h,M,w,v,S,A]}class o9 extends We{constructor(e){super(),Ve(this,e,Z7,G7,He,{id:4,name:0,magic:5,description:6,xAttr:7,yAttr:8,xDomainMin:2,xDomainMax:3,brushX:9,interactions:10,overlay:11,render:12,load:13,update:14})}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),J()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),J()}get description(){return this.$$.ctx[6]}set description(e){this.$$set({description:e}),J()}get xAttr(){return this.$$.ctx[7]}set xAttr(e){this.$$set({xAttr:e}),J()}get yAttr(){return this.$$.ctx[8]}set yAttr(e){this.$$set({yAttr:e}),J()}get xDomainMin(){return this.$$.ctx[2]}set xDomainMin(e){this.$$set({xDomainMin:e}),J()}get xDomainMax(){return this.$$.ctx[3]}set xDomainMax(e){this.$$set({xDomainMax:e}),J()}get brushX(){return this.$$.ctx[9]}set brushX(e){this.$$set({brushX:e}),J()}get interactions(){return this.$$.ctx[10]}set interactions(e){this.$$set({interactions:e}),J()}get overlay(){return this.$$.ctx[11]}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}set load(e){this.$$set({load:e}),J()}get update(){return this.$$.ctx[14]}}function Th(t){return Object.prototype.toString.call(t)==="[object Date]"}function qf(t,e,n,r){if(typeof n=="number"||Th(n)){const i=r-n,a=(n-e)/(t.dt||1/60),s=t.opts.stiffness*i,f=t.opts.damping*a,c=(s-f)*t.inv_mass,u=(a+c)*t.dt;return Math.abs(u)<t.opts.precision&&Math.abs(i)<t.opts.precision?r:(t.settled=!1,Th(n)?new Date(n.getTime()+u):n+u)}else{if(Array.isArray(n))return n.map((i,a)=>qf(t,e[a],n[a],r[a]));if(typeof n=="object"){const i={};for(const a in n)i[a]=qf(t,e[a],n[a],r[a]);return i}else throw new Error(`Cannot spring ${typeof n} values`)}}function J7(t,e={}){const n=ee(t),{stiffness:r=.15,damping:i=.8,precision:a=.01}=e;let s,f,c,u=t,l=t,d=1,h=0,g=!1;function p(b,y={}){l=b;const _=c={};return t==null||y.hard||m.stiffness>=1&&m.damping>=1?(g=!0,s=uu(),u=b,n.set(t=l),Promise.resolve()):(y.soft&&(h=1/((y.soft===!0?.5:+y.soft)*60),d=0),f||(s=uu(),g=!1,f=Gp(M=>{if(g)return g=!1,f=null,!1;d=Math.min(d+h,1);const w={inv_mass:d,opts:m,settled:!0,dt:(M-s)*60/1e3},v=qf(w,u,t,l);return s=M,u=t,n.set(t=v),w.settled&&(f=null),!w.settled})),new Promise(M=>{f.promise.then(()=>{_===c&&M()})}))}const m={set:p,update:(b,y)=>p(b(l,t),y),subscribe:n.subscribe,stiffness:r,damping:i,precision:a};return m}function Ah(t,e,n){const r=t.slice();return r[37]=e[n],r[39]=n,r}function kh(t){let e,n,r,i,a=(t[6]==="label"||t[7]==="label")&&Eh(t);return{c(){e=ot("span"),a&&a.c(),this.h()},l(s){e=st(s,"SPAN",{class:!0,style:!0});var f=ct(e);a&&a.l(f),f.forEach(H),this.h()},h(){j(e,"class","pip first"),j(e,"style",n=t[14]+": 0%;"),at(e,"selected",t[18](t[0])),at(e,"in-range",t[17](t[0]))},m(s,f){pt(s,e,f),a&&a.m(e,null),r||(i=[vt(e,"pointerdown",t[30]),vt(e,"pointerup",t[31])],r=!0)},p(s,f){s[6]==="label"||s[7]==="label"?a?a.p(s,f):(a=Eh(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f[0]&16384&&n!==(n=s[14]+": 0%;")&&j(e,"style",n),f[0]&262145&&at(e,"selected",s[18](s[0])),f[0]&131073&&at(e,"in-range",s[17](s[0]))},d(s){s&&H(e),a&&a.d(),r=!1,An(i)}}}function Eh(t){let e,n,r,i=t[12](t[16](t[0]),0,0)+"",a,s=t[10]&&Ch(t),f=t[11]&&Nh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,j(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Ch(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&69633&&i!==(i=c[12](c[16](c[0]),0,0)+"")&&r.p(i),c[11]?f?f.p(c,u):(f=Nh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function Ch(t){let e,n;return{c(){e=ot("span"),n=Vt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[10]),i.forEach(H),this.h()},h(){j(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&H(e)}}}function Nh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[11]),i.forEach(H),this.h()},h(){j(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&H(e)}}}function Dh(t){let e,n=Array(t[20]+1),r=[];for(let i=0;i<n.length;i+=1)r[i]=Ph(Ah(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Nt()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);e=Nt()},m(i,a){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,a);pt(i,e,a)},p(i,a){if(a[0]&8314435){n=Array(i[20]+1);let s;for(s=0;s<n.length;s+=1){const f=Ah(i,n,s);r[s]?r[s].p(f,a):(r[s]=Ph(f),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(i){co(r,i),i&&H(e)}}}function Ih(t){let e,n,r,i,a,s=(t[6]==="label"||t[9]==="label")&&Lh(t);function f(...c){return t[33](t[39],...c)}return{c(){e=ot("span"),s&&s.c(),n=Gt(),this.h()},l(c){e=st(c,"SPAN",{class:!0,style:!0});var u=ct(e);s&&s.l(u),n=Zt(u),u.forEach(H),this.h()},h(){j(e,"class","pip"),j(e,"style",r=t[14]+": "+t[15](t[19](t[39]))+"%;"),at(e,"selected",t[18](t[19](t[39]))),at(e,"in-range",t[17](t[19](t[39])))},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),i||(a=[vt(e,"pointerdown",t[32]),vt(e,"pointerup",f)],i=!0)},p(c,u){t=c,t[6]==="label"||t[9]==="label"?s?s.p(t,u):(s=Lh(t),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&573440&&r!==(r=t[14]+": "+t[15](t[19](t[39]))+"%;")&&j(e,"style",r),u[0]&786432&&at(e,"selected",t[18](t[19](t[39]))),u[0]&655360&&at(e,"in-range",t[17](t[19](t[39])))},d(c){c&&H(e),s&&s.d(),i=!1,An(a)}}}function Lh(t){let e,n,r,i=t[12](t[19](t[39]),t[39],t[15](t[19](t[39])))+"",a,s=t[10]&&Fh(t),f=t[11]&&Oh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,j(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Fh(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&561152&&i!==(i=c[12](c[19](c[39]),c[39],c[15](c[19](c[39])))+"")&&r.p(i),c[11]?f?f.p(c,u):(f=Oh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function Fh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[10]),i.forEach(H),this.h()},h(){j(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&H(e)}}}function Oh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[11]),i.forEach(H),this.h()},h(){j(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&H(e)}}}function Ph(t){let e=t[19](t[39])!==t[0]&&t[19](t[39])!==t[1],n,r=e&&Ih(t);return{c(){r&&r.c(),n=Nt()},l(i){r&&r.l(i),n=Nt()},m(i,a){r&&r.m(i,a),pt(i,n,a)},p(i,a){a[0]&524291&&(e=i[19](i[39])!==i[0]&&i[19](i[39])!==i[1]),e?r?r.p(i,a):(r=Ih(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&H(n)}}}function $h(t){let e,n,r,i,a=(t[6]==="label"||t[8]==="label")&&Rh(t);return{c(){e=ot("span"),a&&a.c(),this.h()},l(s){e=st(s,"SPAN",{class:!0,style:!0});var f=ct(e);a&&a.l(f),f.forEach(H),this.h()},h(){j(e,"class","pip last"),j(e,"style",n=t[14]+": 100%;"),at(e,"selected",t[18](t[1])),at(e,"in-range",t[17](t[1]))},m(s,f){pt(s,e,f),a&&a.m(e,null),r||(i=[vt(e,"pointerdown",t[34]),vt(e,"pointerup",t[35])],r=!0)},p(s,f){s[6]==="label"||s[8]==="label"?a?a.p(s,f):(a=Rh(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f[0]&16384&&n!==(n=s[14]+": 100%;")&&j(e,"style",n),f[0]&262146&&at(e,"selected",s[18](s[1])),f[0]&131074&&at(e,"in-range",s[17](s[1]))},d(s){s&&H(e),a&&a.d(),r=!1,An(i)}}}function Rh(t){let e,n,r,i=t[12](t[16](t[1]),t[20],100)+"",a,s=t[10]&&Bh(t),f=t[11]&&Uh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,j(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Bh(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&1118210&&i!==(i=c[12](c[16](c[1]),c[20],100)+"")&&r.p(i),c[11]?f?f.p(c,u):(f=Uh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function Bh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[10]),i.forEach(H),this.h()},h(){j(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&H(e)}}}function Uh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[11]),i.forEach(H),this.h()},h(){j(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&H(e)}}}function K7(t){let e,n,r,i=(t[6]&&t[7]!==!1||t[7])&&kh(t),a=(t[6]&&t[9]!==!1||t[9])&&Dh(t),s=(t[6]&&t[8]!==!1||t[8])&&$h(t);return{c(){e=ot("div"),i&&i.c(),n=Gt(),a&&a.c(),r=Gt(),s&&s.c(),this.h()},l(f){e=st(f,"DIV",{class:!0});var c=ct(e);i&&i.l(c),n=Zt(c),a&&a.l(c),r=Zt(c),s&&s.l(c),c.forEach(H),this.h()},h(){j(e,"class","rangePips"),at(e,"disabled",t[5]),at(e,"hoverable",t[4]),at(e,"vertical",t[2]),at(e,"reversed",t[3]),at(e,"focus",t[13])},m(f,c){pt(f,e,c),i&&i.m(e,null),et(e,n),a&&a.m(e,null),et(e,r),s&&s.m(e,null)},p(f,c){f[6]&&f[7]!==!1||f[7]?i?i.p(f,c):(i=kh(f),i.c(),i.m(e,n)):i&&(i.d(1),i=null),f[6]&&f[9]!==!1||f[9]?a?a.p(f,c):(a=Dh(f),a.c(),a.m(e,r)):a&&(a.d(1),a=null),f[6]&&f[8]!==!1||f[8]?s?s.p(f,c):(s=$h(f),s.c(),s.m(e,null)):s&&(s.d(1),s=null),c[0]&32&&at(e,"disabled",f[5]),c[0]&16&&at(e,"hoverable",f[4]),c[0]&4&&at(e,"vertical",f[2]),c[0]&8&&at(e,"reversed",f[3]),c[0]&8192&&at(e,"focus",f[13])},i:It,o:It,d(f){f&&H(e),i&&i.d(),a&&a.d(),s&&s.d()}}}function Q7(t,e,n){let r,i,a,s,f,{range:c=!1}=e,{min:u=0}=e,{max:l=100}=e,{step:d=1}=e,{values:h=[(l+u)/2]}=e,{vertical:g=!1}=e,{reversed:p=!1}=e,{hoverable:m=!0}=e,{disabled:b=!1}=e,{pipstep:y=void 0}=e,{all:_=!0}=e,{first:M=void 0}=e,{last:w=void 0}=e,{rest:v=void 0}=e,{prefix:S=""}=e,{suffix:A=""}=e,{formatter:x=(D,tt,nt)=>D}=e,{focus:E=void 0}=e,{orientationStart:I=void 0}=e,{percentOf:k=void 0}=e,{moveHandle:N=void 0}=e,{fixFloat:$=void 0}=e,{normalisedClient:R=void 0}=e,T;function O(D){D=R(D),T={x:D.clientX,y:D.clientY}}function L(D,tt){if(tt=R(tt),!b){const nt=Math.sqrt(Math.pow(T.x-tt.clientX,2)+Math.pow(T.y-tt.clientY,2));T&&nt<=5&&N(void 0,D)}}const z=D=>{O(D)},X=D=>{L(u,D)},B=D=>{O(D)},U=(D,tt)=>{L(a(D),tt)},V=D=>{O(D)},W=D=>{L(l,D)};return t.$$set=D=>{"range"in D&&n(23,c=D.range),"min"in D&&n(0,u=D.min),"max"in D&&n(1,l=D.max),"step"in D&&n(24,d=D.step),"values"in D&&n(25,h=D.values),"vertical"in D&&n(2,g=D.vertical),"reversed"in D&&n(3,p=D.reversed),"hoverable"in D&&n(4,m=D.hoverable),"disabled"in D&&n(5,b=D.disabled),"pipstep"in D&&n(26,y=D.pipstep),"all"in D&&n(6,_=D.all),"first"in D&&n(7,M=D.first),"last"in D&&n(8,w=D.last),"rest"in D&&n(9,v=D.rest),"prefix"in D&&n(10,S=D.prefix),"suffix"in D&&n(11,A=D.suffix),"formatter"in D&&n(12,x=D.formatter),"focus"in D&&n(13,E=D.focus),"orientationStart"in D&&n(14,I=D.orientationStart),"percentOf"in D&&n(15,k=D.percentOf),"moveHandle"in D&&n(27,N=D.moveHandle),"fixFloat"in D&&n(16,$=D.fixFloat),"normalisedClient"in D&&n(28,R=D.normalisedClient)},t.$$.update=()=>{t.$$.dirty[0]&83886087&&n(29,r=y||((l-u)/d>=(g?50:100)?(l-u)/(g?10:20):1)),t.$$.dirty[0]&553648131&&n(20,i=parseInt((l-u)/(d*r),10)),t.$$.dirty[0]&553713665&&n(19,a=function(D){return $(u+D*d*r)}),t.$$.dirty[0]&33619968&&n(18,s=function(D){return h.some(tt=>$(tt)===$(D))}),t.$$.dirty[0]&41943040&&n(17,f=function(D){if(c==="min")return h[0]>D;if(c==="max")return h[0]<D;if(c)return h[0]<D&&h[1]>D})},[u,l,g,p,m,b,_,M,w,v,S,A,x,E,I,k,$,f,s,a,i,O,L,c,d,h,y,N,R,r,z,X,B,U,V,W]}class tv extends We{constructor(e){super(),Ve(this,e,Q7,K7,He,{range:23,min:0,max:1,step:24,values:25,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:26,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:27,fixFloat:16,normalisedClient:28},null,[-1,-1])}}function zh(t,e,n){const r=t.slice();return r[65]=e[n],r[67]=n,r}function qh(t){let e,n,r,i=t[21](t[65],t[67],t[24](t[65]))+"",a,s=t[18]&&jh(t),f=t[19]&&Wh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,j(e,"class","rangeFloat")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[18]?s?s.p(c,u):(s=jh(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&18874369&&i!==(i=c[21](c[65],c[67],c[24](c[65]))+"")&&r.p(i),c[19]?f?f.p(c,u):(f=Wh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function jh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[18]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[18]),i.forEach(H),this.h()},h(){j(e,"class","rangeFloat-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&262144&&ue(n,r[18])},d(r){r&&H(e)}}}function Wh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[19]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[19]),i.forEach(H),this.h()},h(){j(e,"class","rangeFloat-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&524288&&ue(n,r[19])},d(r){r&&H(e)}}}function Vh(t){let e,n,r,i,a,s,f,c,u,l,d,h,g,p=t[7]&&qh(t);return{c(){e=ot("span"),n=ot("span"),r=Gt(),p&&p.c(),this.h()},l(m){e=st(m,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var b=ct(e);n=st(b,"SPAN",{class:!0}),ct(n).forEach(H),r=Zt(b),p&&p.l(b),b.forEach(H),this.h()},h(){j(n,"class","rangeNub"),j(e,"role","slider"),j(e,"class","rangeHandle"),j(e,"data-handle",t[67]),j(e,"style",i=t[29]+": "+t[30][t[67]]+"%; z-index: "+(t[27]===t[67]?3:2)+";"),j(e,"aria-label",a=t[22][t[67]]),j(e,"aria-valuemin",s=t[2]===!0&&t[67]===1?t[0][0]:t[3]),j(e,"aria-valuemax",f=t[2]===!0&&t[67]===0?t[0][1]:t[4]),j(e,"aria-valuenow",c=t[65]),j(e,"aria-valuetext",u=""+(t[18]+Gh(t[21](t[65],t[67],t[24](t[65])))+t[19])),j(e,"aria-orientation",l=t[6]?"vertical":"horizontal"),j(e,"aria-disabled",t[10]),j(e,"disabled",t[10]),j(e,"tabindex",d=t[10]?-1:0),at(e,"active",t[25]&&t[27]===t[67]),at(e,"press",t[26]&&t[27]===t[67])},m(m,b){pt(m,e,b),et(e,n),et(e,r),p&&p.m(e,null),h||(g=[vt(e,"blur",t[35]),vt(e,"focus",t[36]),vt(e,"keydown",t[37])],h=!0)},p(m,b){m[7]?p?p.p(m,b):(p=qh(m),p.c(),p.m(e,null)):p&&(p.d(1),p=null),b[0]&1744830464&&i!==(i=m[29]+": "+m[30][m[67]]+"%; z-index: "+(m[27]===m[67]?3:2)+";")&&j(e,"style",i),b[0]&4194304&&a!==(a=m[22][m[67]])&&j(e,"aria-label",a),b[0]&13&&s!==(s=m[2]===!0&&m[67]===1?m[0][0]:m[3])&&j(e,"aria-valuemin",s),b[0]&21&&f!==(f=m[2]===!0&&m[67]===0?m[0][1]:m[4])&&j(e,"aria-valuemax",f),b[0]&1&&c!==(c=m[65])&&j(e,"aria-valuenow",c),b[0]&19660801&&u!==(u=""+(m[18]+Gh(m[21](m[65],m[67],m[24](m[65])))+m[19]))&&j(e,"aria-valuetext",u),b[0]&64&&l!==(l=m[6]?"vertical":"horizontal")&&j(e,"aria-orientation",l),b[0]&1024&&j(e,"aria-disabled",m[10]),b[0]&1024&&j(e,"disabled",m[10]),b[0]&1024&&d!==(d=m[10]?-1:0)&&j(e,"tabindex",d),b[0]&167772160&&at(e,"active",m[25]&&m[27]===m[67]),b[0]&201326592&&at(e,"press",m[26]&&m[27]===m[67])},d(m){m&&H(e),p&&p.d(),h=!1,An(g)}}}function Hh(t){let e,n;return{c(){e=ot("span"),this.h()},l(r){e=st(r,"SPAN",{class:!0,style:!0}),ct(e).forEach(H),this.h()},h(){j(e,"class","rangeBar"),j(e,"style",n=t[29]+": "+t[33](t[30])+"%; "+t[28]+": "+t[34](t[30])+"%;")},m(r,i){pt(r,e,i)},p(r,i){i[0]&1879048192&&n!==(n=r[29]+": "+r[33](r[30])+"%; "+r[28]+": "+r[34](r[30])+"%;")&&j(e,"style",n)},d(r){r&&H(e)}}}function Yh(t){let e,n;return e=new tv({props:{values:t[0],min:t[3],max:t[4],step:t[5],range:t[2],vertical:t[6],reversed:t[8],orientationStart:t[29],hoverable:t[9],disabled:t[10],all:t[13],first:t[14],last:t[15],rest:t[16],pipstep:t[12],prefix:t[18],suffix:t[19],formatter:t[20],focus:t[25],percentOf:t[24],moveHandle:t[32],fixFloat:t[31],normalisedClient:da}}),{c(){od(e.$$.fragment)},l(r){sd(e.$$.fragment,r)},m(r,i){fd(e,r,i),n=!0},p(r,i){const a={};i[0]&1&&(a.values=r[0]),i[0]&8&&(a.min=r[3]),i[0]&16&&(a.max=r[4]),i[0]&32&&(a.step=r[5]),i[0]&4&&(a.range=r[2]),i[0]&64&&(a.vertical=r[6]),i[0]&256&&(a.reversed=r[8]),i[0]&536870912&&(a.orientationStart=r[29]),i[0]&512&&(a.hoverable=r[9]),i[0]&1024&&(a.disabled=r[10]),i[0]&8192&&(a.all=r[13]),i[0]&16384&&(a.first=r[14]),i[0]&32768&&(a.last=r[15]),i[0]&65536&&(a.rest=r[16]),i[0]&4096&&(a.pipstep=r[12]),i[0]&262144&&(a.prefix=r[18]),i[0]&524288&&(a.suffix=r[19]),i[0]&1048576&&(a.formatter=r[20]),i[0]&33554432&&(a.focus=r[25]),i[0]&16777216&&(a.percentOf=r[24]),e.$set(a)},i(r){n||(Kr(e.$$.fragment,r),n=!0)},o(r){ga(e.$$.fragment,r),n=!1},d(r){cd(e,r)}}}function ev(t){let e,n,r,i,a,s,f=t[0],c=[];for(let d=0;d<f.length;d+=1)c[d]=Vh(zh(t,f,d));let u=t[2]&&Hh(t),l=t[11]&&Yh(t);return{c(){e=ot("div");for(let d=0;d<c.length;d+=1)c[d].c();n=Gt(),u&&u.c(),r=Gt(),l&&l.c(),this.h()},l(d){e=st(d,"DIV",{id:!0,role:!0,class:!0});var h=ct(e);for(let g=0;g<c.length;g+=1)c[g].l(h);n=Zt(h),u&&u.l(h),r=Zt(h),l&&l.l(h),h.forEach(H),this.h()},h(){j(e,"id",t[17]),j(e,"role","none"),j(e,"class","rangeSlider"),at(e,"range",t[2]),at(e,"disabled",t[10]),at(e,"hoverable",t[9]),at(e,"vertical",t[6]),at(e,"reversed",t[8]),at(e,"focus",t[25]),at(e,"min",t[2]==="min"),at(e,"max",t[2]==="max"),at(e,"pips",t[11]),at(e,"pip-labels",t[13]==="label"||t[14]==="label"||t[15]==="label"||t[16]==="label")},m(d,h){pt(d,e,h);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(e,null);et(e,n),u&&u.m(e,null),et(e,r),l&&l.m(e,null),t[51](e),i=!0,a||(s=[vt(window,"mousedown",t[40]),vt(window,"touchstart",t[40]),vt(window,"mousemove",t[41]),vt(window,"touchmove",t[41]),vt(window,"mouseup",t[42]),vt(window,"touchend",t[43]),vt(window,"keydown",t[44]),vt(e,"mousedown",t[38]),vt(e,"mouseup",t[39]),vt(e,"touchstart",lu(t[38])),vt(e,"touchend",lu(t[39]))],a=!0)},p(d,h){if(h[0]&1869350109|h[1]&112){f=d[0];let g;for(g=0;g<f.length;g+=1){const p=zh(d,f,g);c[g]?c[g].p(p,h):(c[g]=Vh(p),c[g].c(),c[g].m(e,n))}for(;g<c.length;g+=1)c[g].d(1);c.length=f.length}d[2]?u?u.p(d,h):(u=Hh(d),u.c(),u.m(e,r)):u&&(u.d(1),u=null),d[11]?l?(l.p(d,h),h[0]&2048&&Kr(l,1)):(l=Yh(d),l.c(),Kr(l,1),l.m(e,null)):l&&(Zp(),ga(l,1,1,()=>{l=null}),Jp()),(!i||h[0]&131072)&&j(e,"id",d[17]),(!i||h[0]&4)&&at(e,"range",d[2]),(!i||h[0]&1024)&&at(e,"disabled",d[10]),(!i||h[0]&512)&&at(e,"hoverable",d[9]),(!i||h[0]&64)&&at(e,"vertical",d[6]),(!i||h[0]&256)&&at(e,"reversed",d[8]),(!i||h[0]&33554432)&&at(e,"focus",d[25]),(!i||h[0]&4)&&at(e,"min",d[2]==="min"),(!i||h[0]&4)&&at(e,"max",d[2]==="max"),(!i||h[0]&2048)&&at(e,"pips",d[11]),(!i||h[0]&122880)&&at(e,"pip-labels",d[13]==="label"||d[14]==="label"||d[15]==="label"||d[16]==="label")},i(d){i||(Kr(l),i=!0)},o(d){ga(l),i=!1},d(d){d&&H(e),co(c,d),u&&u.d(),l&&l.d(),t[51](null),a=!1,An(s)}}}function Xh(t){if(!t)return-1;for(var e=0;t=t.previousElementSibling;)e++;return e}function da(t){return t.type.includes("touch")?t.touches[0]||t.changedTouches[0]:t}function Gh(t){return`${t}`.replace(/<[^>]*>/g,"")}function nv(t,e,n){let r,i,a,s,f,c,u=It,l=()=>(u(),u=Pn(Y,C=>n(30,c=C)),Y);t.$$.on_destroy.push(()=>u());let{slider:d=void 0}=e,{range:h=!1}=e,{pushy:g=!1}=e,{min:p=0}=e,{max:m=100}=e,{step:b=1}=e,{values:y=[(m+p)/2]}=e,{vertical:_=!1}=e,{float:M=!1}=e,{reversed:w=!1}=e,{hoverable:v=!0}=e,{disabled:S=!1}=e,{pips:A=!1}=e,{pipstep:x=void 0}=e,{all:E=void 0}=e,{first:I=void 0}=e,{last:k=void 0}=e,{rest:N=void 0}=e,{id:$=void 0}=e,{prefix:R=""}=e,{suffix:T=""}=e,{formatter:O=(C,K,xt)=>C}=e,{handleFormatter:L=O}=e,{ariaLabels:z=[]}=e,{precision:X=2}=e,{springValues:B={stiffness:.15,damping:.4}}=e;const U=Kp();let V=0,W=!1,D=!1,tt=!1,nt=!1,q=y.length-1,Q,P,Y;const G=C=>parseFloat((+C).toFixed(X));function F(C){const K=d.querySelectorAll(".handle"),xt=Array.prototype.includes.call(K,C),Tt=Array.prototype.some.call(K,Xe=>Xe.contains(C));return xt||Tt}function mt(C){return h==="min"||h==="max"?C.slice(0,1):h?C.slice(0,2):C}function rt(){return d.getBoundingClientRect()}function yt(C){const K=rt();let xt=0,Tt=0,Xe=0;_?(xt=C.clientY-K.top,Tt=xt/K.height*100,Tt=w?Tt:100-Tt):(xt=C.clientX-K.left,Tt=xt/K.width*100,Tt=w?100-Tt:Tt),Xe=(m-p)/100*Tt+p;let cu;return h===!0&&y[0]===y[1]?Xe>y[1]?1:0:(cu=y.indexOf([...y].sort((Yp,Xp)=>Math.abs(Xe-Yp)-Math.abs(Xe-Xp))[0]),cu)}function St(C){const K=rt();let xt=0,Tt=0,Xe=0;_?(xt=C.clientY-K.top,Tt=xt/K.height*100,Tt=w?Tt:100-Tt):(xt=C.clientX-K.left,Tt=xt/K.width*100,Tt=w?100-Tt:Tt),Xe=(m-p)/100*Tt+p,Z(q,Xe)}function Z(C,K){return K=a(K),typeof C>"u"&&(C=q),h&&(C===0&&K>y[1]?g?n(0,y[1]=K,y):K=y[1]:C===1&&K<y[0]&&(g?n(0,y[0]=K,y):K=y[0])),y[C]!==K&&n(0,y[C]=K,y),P!==K&&(Vp(),P=K),K}function wt(C){return h==="min"?0:C[0]}function ae(C){return h==="max"?0:h==="min"?100-C[0]:100-C[1]}function Le(C){nt&&(n(25,W=!1),D=!1,n(26,tt=!1))}function Op(C){S||(n(27,q=Xh(C.target)),n(25,W=!0))}function Pp(C){if(!S){const K=Xh(C.target);let xt=C.ctrlKey||C.metaKey||C.shiftKey?b*10:b,Tt=!1;switch(C.key){case"PageDown":xt*=10;case"ArrowRight":case"ArrowUp":Z(K,y[K]+xt),Tt=!0;break;case"PageUp":xt*=10;case"ArrowLeft":case"ArrowDown":Z(K,y[K]-xt),Tt=!0;break;case"Home":Z(K,p),Tt=!0;break;case"End":Z(K,m),Tt=!0;break}Tt&&(C.preventDefault(),C.stopPropagation())}}function $p(C){if(!S){const K=C.target,xt=da(C);n(25,W=!0),D=!0,n(26,tt=!0),n(27,q=yt(xt)),Q=P=a(y[q]),Wp(),C.type==="touchstart"&&!K.matches(".pipVal")&&St(xt)}}function Rp(C){C.type==="touchend"&&fu(),n(26,tt=!1)}function Bp(C){nt=!1,W&&C.target!==d&&!d.contains(C.target)&&n(25,W=!1)}function Up(C){S||D&&St(da(C))}function zp(C){if(!S){const K=C.target;D&&((K===d||d.contains(K))&&(n(25,W=!0),!F(K)&&!K.matches(".pipVal")&&St(da(C))),fu())}D=!1,n(26,tt=!1)}function qp(C){D=!1,n(26,tt=!1)}function jp(C){S||(C.target===d||d.contains(C.target))&&(nt=!0)}function Wp(){!S&&U("start",{activeHandle:q,value:Q,values:y.map(C=>a(C))})}function fu(){!S&&U("stop",{activeHandle:q,startValue:Q,value:y[q],values:y.map(C=>a(C))})}function Vp(){!S&&U("change",{activeHandle:q,startValue:Q,previousValue:typeof P>"u"?Q:P,value:y[q],values:y.map(C=>a(C))})}function Hp(C){Nr[C?"unshift":"push"](()=>{d=C,n(1,d)})}return t.$$set=C=>{"slider"in C&&n(1,d=C.slider),"range"in C&&n(2,h=C.range),"pushy"in C&&n(45,g=C.pushy),"min"in C&&n(3,p=C.min),"max"in C&&n(4,m=C.max),"step"in C&&n(5,b=C.step),"values"in C&&n(0,y=C.values),"vertical"in C&&n(6,_=C.vertical),"float"in C&&n(7,M=C.float),"reversed"in C&&n(8,w=C.reversed),"hoverable"in C&&n(9,v=C.hoverable),"disabled"in C&&n(10,S=C.disabled),"pips"in C&&n(11,A=C.pips),"pipstep"in C&&n(12,x=C.pipstep),"all"in C&&n(13,E=C.all),"first"in C&&n(14,I=C.first),"last"in C&&n(15,k=C.last),"rest"in C&&n(16,N=C.rest),"id"in C&&n(17,$=C.id),"prefix"in C&&n(18,R=C.prefix),"suffix"in C&&n(19,T=C.suffix),"formatter"in C&&n(20,O=C.formatter),"handleFormatter"in C&&n(21,L=C.handleFormatter),"ariaLabels"in C&&n(22,z=C.ariaLabels),"precision"in C&&n(46,X=C.precision),"springValues"in C&&n(47,B=C.springValues)},t.$$.update=()=>{if(t.$$.dirty[0]&24&&n(50,i=function(C){return C<=p?p:C>=m?m:C}),t.$$.dirty[0]&56|t.$$.dirty[1]&524288&&n(49,a=function(C){if(C<=p)return G(p);if(C>=m)return G(m);C=G(C);let K=(C-p)%b,xt=C-K;return Math.abs(K)*2>=b&&(xt+=K>0?b:-b),xt=i(xt),G(xt)}),t.$$.dirty[0]&24&&n(24,r=function(C){let K=(C-p)/(m-p)*100;return isNaN(K)||K<=0?0:K>=100?100:G(K)}),t.$$.dirty[0]&29360153|t.$$.dirty[1]&458752){Array.isArray(y)||(n(0,y=[(m+p)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)"));const C=mt(y.map(K=>a(K)));(y.length!==C.length||!y.every((K,xt)=>G(K)===C[xt]))&&n(0,y=C),V!==y.length?l(n(23,Y=J7(y.map(K=>r(K)),B))):Y.set(y.map(K=>r(K))),n(48,V=y.length),y.length>1&&!Array.isArray(z)&&console.warn("'ariaLabels' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")}t.$$.dirty[0]&320&&n(29,s=_?w?"top":"bottom":w?"right":"left"),t.$$.dirty[0]&320&&n(28,f=_?w?"bottom":"top":w?"left":"right")},[y,d,h,p,m,b,_,M,w,v,S,A,x,E,I,k,N,$,R,T,O,L,z,Y,r,W,tt,q,f,s,c,G,Z,wt,ae,Le,Op,Pp,$p,Rp,Bp,Up,zp,qp,jp,g,X,B,V,a,i,Hp]}class rv extends We{constructor(e){super(),Ve(this,e,nv,ev,He,{slider:1,range:2,pushy:45,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,ariaLabels:22,precision:46,springValues:47},null,[-1,-1,-1])}}function Zh(t){let e,n,r,i=t[3]&&Jh(t);return{c(){e=ot("div"),n=Vt(t[2]),r=Gt(),i&&i.c(),this.h()},l(a){e=st(a,"DIV",{class:!0});var s=ct(e);n=Ht(s,t[2]),r=Zt(s),i&&i.l(s),s.forEach(H),this.h()},h(){j(e,"class","text-sm")},m(a,s){pt(a,e,s),et(e,n),et(e,r),i&&i.m(e,null)},p(a,s){s&4&&ue(n,a[2]),a[3]?i?i.p(a,s):(i=Jh(a),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(a){a&&H(e),i&&i.d()}}}function Jh(t){let e,n,r,i,a;return{c(){e=ot("div"),n=ot("i"),r=Gt(),i=ot("span"),a=Vt(t[3]),this.h()},l(s){e=st(s,"DIV",{class:!0});var f=ct(e);n=st(f,"I",{class:!0}),ct(n).forEach(H),r=Zt(f),i=st(f,"SPAN",{class:!0});var c=ct(i);a=Ht(c,t[3]),c.forEach(H),f.forEach(H),this.h()},h(){j(n,"class","bi bi-info-circle"),j(i,"class","tooltiptext"),j(e,"class","tooltip")},m(s,f){pt(s,e,f),et(e,n),et(e,r),et(e,i),et(i,a)},p(s,f){f&8&&ue(a,s[3])},d(s){s&&H(e)}}}function iv(t){let e,n,r,i,a,s=t[2]&&Zh(t);function f(u){t[15](u)}let c={min:+t[0],max:+t[1],pips:!0,range:!0,float:!0,first:"label",last:"label",springValues:!0,id:"slider"};return t[7]!==void 0&&(c.values=t[7]),r=new rv({props:c}),Nr.push(()=>Qp(r,"values",f)),r.$on("start",t[9]),r.$on("change",t[8]),r.$on("stop",t[10]),{c(){e=ot("div"),s&&s.c(),n=Gt(),od(r.$$.fragment),this.h()},l(u){e=st(u,"DIV",{class:!0,id:!0});var l=ct(e);s&&s.l(l),n=Zt(l),sd(r.$$.fragment,l),l.forEach(H),this.h()},h(){j(e,"class","px-[1%] py-[1%] ml-[2.1%]"),j(e,"id","slider")},m(u,l){pt(u,e,l),s&&s.m(e,null),et(e,n),fd(r,e,null),a=!0},p(u,[l]){u[2]?s?s.p(u,l):(s=Zh(u),s.c(),s.m(e,n)):s&&(s.d(1),s=null);const d={};l&1&&(d.min=+u[0]),l&2&&(d.max=+u[1]),!i&&l&128&&(i=!0,d.values=u[7],tb(()=>i=!1)),r.$set(d)},i(u){a||(Kr(r.$$.fragment,u),a=!0)},o(u){ga(r.$$.fragment,u),a=!1},d(u){u&&H(e),s&&s.d(),cd(r)}}}function av(t,e,n){let r,i=It,a=()=>(i(),i=Pn(M,N=>n(16,r=N)),M),s,f=It,c=()=>(f(),f=Pn(y,N=>n(17,s=N)),y),u,l=It,d=()=>(l(),l=Pn(_,N=>n(18,u=N)),_);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>l());let{min:h=0,max:g=100,id:p,description:m,tooltip:b}=e,{change:y=ee({})}=e;c();let{stop:_=ee({})}=e;d();let{drag:M=ee({})}=e;a();let{interactions:w={change:y,stop:_,drag:M}}=e;eb("dims");let v=[h,g];[...v];function S(N){console.log("Slider.render",N),N&&Jt(Array,N)&&Kt(N.filter($=>$===void 0))&&(n(7,v=[+N[0].min,+N[0].max]),n(0,[h,g]=v,h,n(1,g)),console.log("Slider.render.to",v)),v&&v.length>=2&&x()}function A(N,$){console.log("Slider.load",N,$),!(!_a("left")(N)||!_a("right")(N))&&(N=N??{left:h,right:g},n(7,v=[N.left??h,N.right??g]),x())}function x(){y.isActive&&ge(y,s={left:v[0],right:v[1]},s),M.isActive&&ge(M,r={left:v[0],right:v[1]},r)}function E(){M.isActive&&ge(M,r={left:v[0],right:v[1]},r)}function I(){_.isActive&&ge(_,u={left:v[0],right:v[1]},u),y.isActive&&ge(y,s={left:v[0],right:v[1]},s),M.isActive&&ge(M,r={left:v[0],right:v[1]},r)}function k(N){v=N,n(7,v)}return t.$$set=N=>{"min"in N&&n(0,h=N.min),"max"in N&&n(1,g=N.max),"id"in N&&n(11,p=N.id),"description"in N&&n(2,m=N.description),"tooltip"in N&&n(3,b=N.tooltip),"change"in N&&c(n(4,y=N.change)),"stop"in N&&d(n(5,_=N.stop)),"drag"in N&&a(n(6,M=N.drag)),"interactions"in N&&n(12,w=N.interactions)},[h,g,m,b,y,_,M,v,x,E,I,p,w,S,A,k]}class s9 extends We{constructor(e){super(),Ve(this,e,av,iv,He,{min:0,max:1,id:11,description:2,tooltip:3,change:4,stop:5,drag:6,interactions:12,render:13,load:14})}get min(){return this.$$.ctx[0]}set min(e){this.$$set({min:e}),J()}get max(){return this.$$.ctx[1]}set max(e){this.$$set({max:e}),J()}get id(){return this.$$.ctx[11]}set id(e){this.$$set({id:e}),J()}get description(){return this.$$.ctx[2]}set description(e){this.$$set({description:e}),J()}get tooltip(){return this.$$.ctx[3]}set tooltip(e){this.$$set({tooltip:e}),J()}get change(){return this.$$.ctx[4]}set change(e){this.$$set({change:e}),J()}get stop(){return this.$$.ctx[5]}set stop(e){this.$$set({stop:e}),J()}get drag(){return this.$$.ctx[6]}set drag(e){this.$$set({drag:e}),J()}get interactions(){return this.$$.ctx[12]}set interactions(e){this.$$set({interactions:e}),J()}get render(){return this.$$.ctx[13]}get load(){return this.$$.ctx[14]}}function Kh(t,e,n){const r=t.slice();return r[28]=e[n],r[29]=e,r[30]=n,r}function Qh(t){let e,n,r,i=t[28]+"",a,s,f,c;function u(){t[20].call(n,t[28])}return{c(){e=ot("label"),n=ot("input"),r=Gt(),a=Vt(i),s=Gt(),this.h()},l(l){e=st(l,"LABEL",{});var d=ct(e);n=st(d,"INPUT",{type:!0}),r=Zt(d),a=Ht(d,i),s=Zt(d),d.forEach(H),this.h()},h(){j(n,"type","checkbox")},m(l,d){pt(l,e,d),et(e,n),n.checked=t[4][t[28]],et(e,r),et(e,a),et(e,s),f||(c=[vt(n,"change",u),vt(n,"change",t[21])],f=!0)},p(l,d){t=l,d&18&&(n.checked=t[4][t[28]]),d&2&&i!==(i=t[28]+"")&&ue(a,i)},d(l){l&&H(e),f=!1,An(c)}}}function ov(t){let e,n,r,i,a=t[1],s=[];for(let f=0;f<a.length;f+=1)s[f]=Qh(Kh(t,a,f));return{c(){e=ot("div");for(let f=0;f<s.length;f+=1)s[f].c();n=Gt(),r=ot("div"),i=ot("div"),this.h()},l(f){e=st(f,"DIV",{});var c=ct(e);for(let l=0;l<s.length;l+=1)s[l].l(c);c.forEach(H),n=Zt(f),r=st(f,"DIV",{id:!0});var u=ct(r);i=st(u,"DIV",{}),ct(i).forEach(H),u.forEach(H),this.h()},h(){j(r,"id",t[0])},m(f,c){pt(f,e,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);pt(f,n,c),pt(f,r,c),et(r,i),t[22](i)},p(f,[c]){if(c&22){a=f[1];let u;for(u=0;u<a.length;u+=1){const l=Kh(f,a,u);s[u]?s[u].p(l,c):(s[u]=Qh(l),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}c&1&&j(r,"id",f[0])},i:It,o:It,d(f){f&&H(e),co(s,f),f&&H(n),f&&H(r),t[22](null)}}}function sv(t,e,n){let r,{id:i,name:a,groupNames:s=[],title:f="",xAttr:c,yAttr:u="val",yMax:l,magic:d,xDomainMin:h=null,xDomainMax:g=null,theplot:p=null}=e,m={};const b=["#93c1cf","#feb144","#9ee09e","#ff6663"],y=ee(s.reduce((T,O)=>(T[O]=!0,T),{}));ud(t,y,T=>n(4,r=T)),console.log("visibility: ",y);let{brushX:_=ee({}),interactions:M={brushX:_}}=e,w,v=null,S=[],A=[{},{}];function x(T,O){return O!="overlay"?!1:(m=T,!0)}function E(T,O){return O!="badyear"?!1:(T.forEach((L,z)=>{L.rank=z+1,L[c]=Number(L[c])}),A=T,!0)}function I(T,O){!T||T.length===0||typeof O=="object"||(E(T,O)||x(T,O)?console.debug("overlay or badyear"):(S=V7(T,{include:s}),S.forEach(L=>L[c]=Number(L[c]))),k())}function k(){n(6,h=+h),n(7,g=+g);let T=Ff({x:{type:"linear",domain:[h-1,g]}}),O=z=>(A.length-z.rank)*(.3/A.length)+.7,L={x:T,color:{domain:s,range:b,legend:!0,style:{"font-size":10,"margin-left":"2em"}},height:200,marginBottom:50,marks:[Or({ticks:_b(z=>z+h,g-h),tickRotate:-90,fontSize:10,tickFormat:z=>(z+"").slice(-2)}),Ri({fontSize:10,label:"Severity"}),Gc([0]),Xc([T.domain[0]]),zf(A,{x1:z=>z[c]-.5,x2:z=>z[c]+.5,y:O,stroke:"black",opacity:.8,strokeWidth:1}),Q8(A,{x1:z=>z[c]-.5,x2:z=>z[c]+.5,y1:0,y2:O,fill:"gray",opacity:.1}),iu(m,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2}),U7(S,{filter:z=>z.key==s[3]&&z[c]>=h&&z[c]<=g&&+z[u]==0,x:z=>+z[c],y:0,stroke:"red",strokeWidth:1})]};s.forEach((z,X)=>{let B=(1+X)/s.length*.7;r[z]&&L.marks.push(zf(S,{filter:U=>U.key==z&&U[c]>=h&&U[c]<=g,x:U=>+U[c]+B-.35,y1:0,y2:u,stroke:"key",strokeWidth:4}))}),n(8,p=Ho(L,v)),_.isActive&&(w=w??new ou({iact:_,magic:d}),w.init(p))}function N(T){r[T]=this.checked,y.set(r)}const $=()=>k();function R(T){Nr[T?"unshift":"push"](()=>{v=T,n(3,v)})}return t.$$set=T=>{"id"in T&&n(9,i=T.id),"name"in T&&n(0,a=T.name),"groupNames"in T&&n(1,s=T.groupNames),"title"in T&&n(10,f=T.title),"xAttr"in T&&n(11,c=T.xAttr),"yAttr"in T&&n(12,u=T.yAttr),"yMax"in T&&n(13,l=T.yMax),"magic"in T&&n(14,d=T.magic),"xDomainMin"in T&&n(6,h=T.xDomainMin),"xDomainMax"in T&&n(7,g=T.xDomainMax),"theplot"in T&&n(8,p=T.theplot),"brushX"in T&&n(15,_=T.brushX),"interactions"in T&&n(16,M=T.interactions)},[a,s,k,v,r,y,h,g,p,i,f,c,u,l,d,_,M,x,E,I,N,$,R]}class f9 extends We{constructor(e){super(),Ve(this,e,sv,ov,He,{id:9,name:0,groupNames:1,title:10,xAttr:11,yAttr:12,yMax:13,magic:14,xDomainMin:6,xDomainMax:7,theplot:8,brushX:15,interactions:16,overlay:17,badyear:18,render:19,update:2})}get id(){return this.$$.ctx[9]}set id(e){this.$$set({id:e}),J()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get groupNames(){return this.$$.ctx[1]}set groupNames(e){this.$$set({groupNames:e}),J()}get title(){return this.$$.ctx[10]}set title(e){this.$$set({title:e}),J()}get xAttr(){return this.$$.ctx[11]}set xAttr(e){this.$$set({xAttr:e}),J()}get yAttr(){return this.$$.ctx[12]}set yAttr(e){this.$$set({yAttr:e}),J()}get yMax(){return this.$$.ctx[13]}set yMax(e){this.$$set({yMax:e}),J()}get magic(){return this.$$.ctx[14]}set magic(e){this.$$set({magic:e}),J()}get xDomainMin(){return this.$$.ctx[6]}set xDomainMin(e){this.$$set({xDomainMin:e}),J()}get xDomainMax(){return this.$$.ctx[7]}set xDomainMax(e){this.$$set({xDomainMax:e}),J()}get theplot(){return this.$$.ctx[8]}set theplot(e){this.$$set({theplot:e}),J()}get brushX(){return this.$$.ctx[15]}set brushX(e){this.$$set({brushX:e}),J()}get interactions(){return this.$$.ctx[16]}set interactions(e){this.$$set({interactions:e}),J()}get overlay(){return this.$$.ctx[17]}get badyear(){return this.$$.ctx[18]}get render(){return this.$$.ctx[19]}get update(){return this.$$.ctx[2]}}function fv(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(H),i.forEach(H),this.h()},h(){j(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[11](n)},p(r,[i]){i&1&&j(e,"id",r[0])},i:It,o:It,d(r){r&&H(e),t[11](null)}}}function cv(t,e,n){let{id:r,name:i,xDomainMin:a,xDomainMax:s,magic:f}=e,{brushX:c=ee({})}=e,{interactions:u={brushX:c}}=e,l,d,h,g={},p=[];const m=["#93c1cf","#feb144","#9ee09e","#ff6663"];function b(w,v){return v!="overlay"?!1:(g=w,!0)}function y(w,v){!w||w.length===0||typeof v=="object"||(b(w,v)?console.debug("overlay"):p=w,_())}function _(){let w={x:{domain:[+a,+s],type:"linear"},y:{axis:null},marginBottom:50,height:300,fy:{label:null,tickRotate:-90,labelAnchor:"center"},color:{style:{"font-size":10,"margin-left":"2rem"},range:m,legend:!0},marks:[Or({ticks:36,fontSize:10}),xp(),iu(g,{x1:"left",x2:"right",y2:1,fill:"key",color:"key"}),zf(p,{x1:"start_time",x2:"end_time",y:"activity",strokeWidth:3,fy:"crop"}),jo(p,{x:v=>{let S=(v.end_time-v.start_time)/2+v.start_time;return console.log("yy",v,S),S},y:"activity",dy:3,lineAnchor:"top",fy:"crop",fontSize:10,color:"gray",text:"activity"})]};l=Ho(w,d),c.isActive&&(h=h??new ou({iact:c,magic:f}),h.init(l))}function M(w){Nr[w?"unshift":"push"](()=>{d=w,n(1,d)})}return t.$$set=w=>{"id"in w&&n(2,r=w.id),"name"in w&&n(0,i=w.name),"xDomainMin"in w&&n(3,a=w.xDomainMin),"xDomainMax"in w&&n(4,s=w.xDomainMax),"magic"in w&&n(5,f=w.magic),"brushX"in w&&n(6,c=w.brushX),"interactions"in w&&n(7,u=w.interactions)},[i,d,r,a,s,f,c,u,b,y,_,M]}class c9 extends We{constructor(e){super(),Ve(this,e,cv,fv,He,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,render:9,update:10})}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),J()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),J()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),J()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),J()}get brushX(){return this.$$.ctx[6]}set brushX(e){this.$$set({brushX:e}),J()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),J()}get overlay(){return this.$$.ctx[8]}get render(){return this.$$.ctx[9]}get update(){return this.$$.ctx[10]}}function uv(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(H),i.forEach(H),this.h()},h(){j(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[6](n)},p(r,[i]){i&1&&j(e,"id",r[0])},i:It,o:It,d(r){r&&H(e),t[6](null)}}}function lv(t,e,n){let{name:r,id:i,interactions:a={}}=e,s,f=[];function c(d,h){!d||d.length===0||(f=d,u())}function u(){let d=Ff({color:{type:"linear",scheme:"greens"}}),h=Ff({color:{type:"quantile",range:["#fff","#000"],domain:[0,60,100]}}),g=f.map(m=>h.apply(Aa(d.apply(+m.value)).l)),p={padding:0,marginLeft:150,height:300,color:d,marks:[Or({fontSize:10,label:null}),Ri({fontSize:10,label:null}),O7(f,{x:"x",y:"y",fill:m=>+m.value,stroke:"white"}),jo(f,{x:"x",y:"y",text:m=>m.value,fill:g,fontSize:10,fontWeight:"bold",textAnchor:"middle"})]};Ho(p,s)}function l(d){Nr[d?"unshift":"push"](()=>{s=d,n(1,s)})}return t.$$set=d=>{"name"in d&&n(0,r=d.name),"id"in d&&n(2,i=d.id),"interactions"in d&&n(3,a=d.interactions)},[r,s,i,a,c,u,l]}class u9 extends We{constructor(e){super(),Ve(this,e,lv,uv,He,{name:0,id:2,interactions:3,render:4,update:5})}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),J()}get interactions(){return this.$$.ctx[3]}set interactions(e){this.$$set({interactions:e}),J()}get render(){return this.$$.ctx[4]}get update(){return this.$$.ctx[5]}}const hv=ee({w:window.innerWidth*.8,h:window.innerHeight*.8,margin:X7}),l9=ee([]),h9=ee({});function td(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function dv(t){let e,n=t[15][t[2]]+"",r;return{c(){e=ot("option"),r=Vt(n),this.h()},l(i){e=st(i,"OPTION",{});var a=ct(e);r=Ht(a,n),a.forEach(H),this.h()},h(){e.__value=t[17],e.value=e.__value},m(i,a){pt(i,e,a),et(e,r)},p(i,a){a&36&&n!==(n=i[15][i[2]]+"")&&ue(r,n)},d(i){i&&H(e)}}}function gv(t){let e,n=t[15][t[2]]+"",r;return{c(){e=ot("option"),r=Vt(n),this.h()},l(i){e=st(i,"OPTION",{});var a=ct(e);r=Ht(a,n),a.forEach(H),this.h()},h(){e.__value=t[17],e.value=e.__value,e.selected=!0},m(i,a){pt(i,e,a),et(e,r)},p(i,a){a&36&&n!==(n=i[15][i[2]]+"")&&ue(r,n)},d(i){i&&H(e)}}}function ed(t){let e;function n(a,s){return a[17]===a[1]?gv:dv}let r=n(t),i=r(t);return{c(){i.c(),e=Nt()},l(a){i.l(a),e=Nt()},m(a,s){i.m(a,s),pt(a,e,s)},p(a,s){r===(r=n(a))&&i?i.p(a,s):(i.d(1),i=r(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){i.d(a),a&&H(e)}}}function mv(t){let e,n,r,i,a=t[5],s=[];for(let f=0;f<a.length;f+=1)s[f]=ed(td(t,a,f));return{c(){e=ot("div"),n=ot("select");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=st(f,"DIV",{class:!0,id:!0});var c=ct(e);n=st(c,"SELECT",{class:!0});var u=ct(n);for(let l=0;l<s.length;l+=1)s[l].l(u);u.forEach(H),c.forEach(H),this.h()},h(){j(n,"class","form-select block w-full px-2 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),t[4]===void 0&&nb(()=>t[10].call(n)),j(e,"class","px-[1%] py-[1%] container svelte-p4yrke"),j(e,"id",t[0])},m(f,c){pt(f,e,c),et(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(n,null);hu(n,t[4],!0),r||(i=[vt(n,"change",t[10]),vt(n,"change",t[6])],r=!0)},p(f,[c]){if(c&38){a=f[5];let u;for(u=0;u<a.length;u+=1){const l=td(f,a,u);s[u]?s[u].p(l,c):(s[u]=ed(l),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}c&16&&hu(n,f[4]),c&1&&j(e,"id",f[0])},i:It,o:It,d(f){f&&H(e),co(s,f),r=!1,An(i)}}}function pv(t,e,n){let r,i=It,a=()=>(i(),i=Pn(l,_=>n(11,r=_)),l),s;ud(t,hv,_=>n(12,s=_)),t.$$.on_destroy.push(()=>i());let{id:f,index:c,dropdown_key:u}=e,{change:l=ee({})}=e;a();let{interactions:d={change:l}}=e,h=null,g=[];s.margin;function p(_,M){n(5,g=_??g),n(4,h=h??c),console.log("Dropdown.render",g,h,M),b()}function m(_){console.log("Dropdown.load",_),n(4,h=_.idx),p()}function b(){l.isActive&&ge(l,r={...g[h],idx:h},r)}function y(){h=rb(this),n(4,h)}return t.$$set=_=>{"id"in _&&n(0,f=_.id),"index"in _&&n(1,c=_.index),"dropdown_key"in _&&n(2,u=_.dropdown_key),"change"in _&&a(n(3,l=_.change)),"interactions"in _&&n(7,d=_.interactions)},[f,c,u,l,h,g,b,d,p,m,y]}class d9 extends We{constructor(e){super(),Ve(this,e,pv,mv,He,{id:0,index:1,dropdown_key:2,change:3,interactions:7,render:8,load:9})}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),J()}get index(){return this.$$.ctx[1]}set index(e){this.$$set({index:e}),J()}get dropdown_key(){return this.$$.ctx[2]}set dropdown_key(e){this.$$set({dropdown_key:e}),J()}get change(){return this.$$.ctx[3]}set change(e){this.$$set({change:e}),J()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),J()}get render(){return this.$$.ctx[8]}get load(){return this.$$.ctx[9]}}function bv(t){let e,n,r,i,a,s,f,c,u,l,d,h,g,p;return{c(){e=ot("form"),n=ot("div"),r=ot("input"),i=Gt(),a=ot("button"),s=Vt("Login"),f=Gt(),c=ot("button"),u=Vt("Save"),l=Gt(),d=ot("button"),h=Vt("Logout"),this.h()},l(m){e=st(m,"FORM",{class:!0});var b=ct(e);n=st(b,"DIV",{class:!0});var y=ct(n);r=st(y,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0}),i=Zt(y),a=st(y,"BUTTON",{class:!0,type:!0});var _=ct(a);s=Ht(_,"Login"),_.forEach(H),f=Zt(y),c=st(y,"BUTTON",{class:!0,type:!0});var M=ct(c);u=Ht(M,"Save"),M.forEach(H),l=Zt(y),d=st(y,"BUTTON",{class:!0,type:!0});var w=ct(d);h=Ht(w,"Logout"),w.forEach(H),y.forEach(H),b.forEach(H),this.h()},h(){j(r,"class","appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"),j(r,"type","text"),j(r,"placeholder","Login..."),j(r,"aria-label","username"),j(a,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-700 border-slate-500 hover:border-slate-700 text-sm border-4 text-white py-1 px-2 rounded"),j(a,"type","button"),j(c,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),j(c,"type","button"),j(d,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),j(d,"type","button"),j(n,"class","flex items-center border-b border-slate-500 py-2 space-x-4"),j(e,"class","w-full max-w-sm mx-auto")},m(m,b){pt(m,e,b),et(e,n),et(n,r),du(r,t[1]),et(n,i),et(n,a),et(a,s),et(n,f),et(n,c),et(c,u),et(n,l),et(n,d),et(d,h),g||(p=[vt(r,"input",t[14]),vt(a,"click",t[2]),vt(c,"click",t[3]),vt(d,"click",t[4])],g=!0)},p(m,[b]){b&2&&r.value!==m[1]&&du(r,m[1])},i:It,o:It,d(m){m&&H(e),g=!1,An(p)}}}function Ep(t,e){console.debug("login invoked",t,e)}function yv(t,e,n){let r,i=It,a=()=>(i(),i=Pn(s,v=>n(16,r=v)),s);t.$$.on_destroy.push(()=>i());let{status:s=ee({}),interactions:f={status:s}}=e;a();let{id:c,magic:u,client:l,exportFunc:d,importFunc:h,dataTable:g,stateTable:p}=e,m,b;const y=async()=>{console.debug("login user: ",m),b=u.exportState();const v=await l.query(h,{table:p,user:m});if(!v){alert("there is no data for this user"),ge(s,r={user:m,loggedin:!0},r);return}ge(s,r={user:m,loggedin:!0},r),u.importState(v.data)},_=async()=>{let v=u.exportData();await l.mutation(d,{data:v,table:g,user:m}),v=u.exportState(),await l.mutation(d,{data:v,table:p,user:m}),alert("save function executed")},M=async()=>{u.importState(b),n(1,m=null)};function w(){m=this.value,n(1,m)}return t.$$set=v=>{"status"in v&&a(n(0,s=v.status)),"interactions"in v&&n(5,f=v.interactions),"id"in v&&n(6,c=v.id),"magic"in v&&n(7,u=v.magic),"client"in v&&n(8,l=v.client),"exportFunc"in v&&n(9,d=v.exportFunc),"importFunc"in v&&n(10,h=v.importFunc),"dataTable"in v&&n(11,g=v.dataTable),"stateTable"in v&&n(12,p=v.stateTable)},[s,m,y,_,M,f,c,u,l,d,h,g,p,Ep,w]}class g9 extends We{constructor(e){super(),Ve(this,e,yv,bv,He,{status:0,interactions:5,id:6,magic:7,client:8,exportFunc:9,importFunc:10,dataTable:11,stateTable:12,render:13})}get status(){return this.$$.ctx[0]}set status(e){this.$$set({status:e}),J()}get interactions(){return this.$$.ctx[5]}set interactions(e){this.$$set({interactions:e}),J()}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),J()}get magic(){return this.$$.ctx[7]}set magic(e){this.$$set({magic:e}),J()}get client(){return this.$$.ctx[8]}set client(e){this.$$set({client:e}),J()}get exportFunc(){return this.$$.ctx[9]}set exportFunc(e){this.$$set({exportFunc:e}),J()}get importFunc(){return this.$$.ctx[10]}set importFunc(e){this.$$set({importFunc:e}),J()}get dataTable(){return this.$$.ctx[11]}set dataTable(e){this.$$set({dataTable:e}),J()}get stateTable(){return this.$$.ctx[12]}set stateTable(e){this.$$set({stateTable:e}),J()}get render(){return Ep}}function _v(t,e,n){let r,i=It,a=()=>(i(),i=Pn(f,m=>n(8,r=m)),f);t.$$.on_destroy.push(()=>i());let{id:s,valid:f=ee({}),interactions:c={valid:f},key:u,threshold_string:l}=e;a();let d=[],h=Number(l);function g(m,b){if(console.debug("trigger alert render"),d=m??d,Kt(d)||!Jt(Array,d))return;const _=Gf(u)(d);if(Kt(_)){alert("warning, alert tried to find data for a key that returns an empty list, alert will not be used");return}l2(_)<h?(ge(f,r={valid:!1},r),alert("warning, slider selection has too low variance in rainfall,invalid results")):ge(f,r={valid:!0},r)}function p(m,b){Kt(m)||ge(f,r=m,r)}return t.$$set=m=>{"id"in m&&n(1,s=m.id),"valid"in m&&a(n(0,f=m.valid)),"interactions"in m&&n(2,c=m.interactions),"key"in m&&n(3,u=m.key),"threshold_string"in m&&n(4,l=m.threshold_string)},[f,s,c,u,l,g,p]}class m9 extends We{constructor(e){super(),Ve(this,e,_v,null,He,{id:1,valid:0,interactions:2,key:3,threshold_string:4,render:5,load:6})}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),J()}get valid(){return this.$$.ctx[0]}set valid(e){this.$$set({valid:e}),J()}get interactions(){return this.$$.ctx[2]}set interactions(e){this.$$set({interactions:e}),J()}get key(){return this.$$.ctx[3]}set key(e){this.$$set({key:e}),J()}get threshold_string(){return this.$$.ctx[4]}set threshold_string(e){this.$$set({threshold_string:e}),J()}get render(){return this.$$.ctx[5]}get load(){return this.$$.ctx[6]}}class no{constructor(e){this.compPos=function(n){for(var r=[],i=0;i<this._array.length;i++){let a=+(this._array[i]>0&&n[i]>0);r.push(a)}return r},this.isNegative=function(n){return n===0||n===null},this.compZero=function(n){for(var r=[],i=0;i<this._array.length;i++){let a=+(this.isNegative(this._array[i])&&this.isNegative(n[i]));r.push(a)}return r},this.getPos=function(){for(var n=[],r=0;r<this._array.length;r++)+(this._array[r]>0),n.push(+(this._array[r]>0));return n},this.getZero=function(){for(var n=[],r=0;r<this._array.length;r++)+this.isNegative(this._array[r]),n.push(+(this._array[r]===0));return n},this._array=e}get array(){return this._array}}const Cp=function(t,e,n,r){let i=e.map(Number),a=r.map(Number),s=new no(i),f=new no(a),c=s.compPos(f.array),u=f.getPos(),l=c.filter(g=>g>0).length,d=u.filter(g=>g>0).length;return(l/d).toFixed(2)},Np=function(t,e,n,r){let i=e.map(Number),a=r.map(Number),s=new no(i),f=new no(a),c=s.compZero(f.array),u=f.getZero(),l=c.filter(g=>g>0).length,d=u.filter(g=>g>0).length;return(l/d).toFixed(2)},wv=function(t,e,n,r){return Cp(t,e,n,r)},vv=function(t,e,n,r){return Np(t,e,n,r)},Mv=function(t,e,n,r){let i=Number(Cp(t,e,n,r)),a=Number(Np(t,e,n,r));return((i+a)/2).toFixed(2)};let p9=[{"true positive":wv,"true negative":vv,"average matching":Mv}];const Wr="1.22.0";var $e=[],de=[],Sv=Uint8Array,$s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var sr=0,xv=$s.length;sr<xv;++sr)$e[sr]=$s[sr],de[$s.charCodeAt(sr)]=sr;de["-".charCodeAt(0)]=62;de["_".charCodeAt(0)]=63;function Tv(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Av(t,e,n){return(e+n)*3/4-n}function ro(t){var e,n=Tv(t),r=n[0],i=n[1],a=new Sv(Av(t,r,i)),s=0,f=i>0?r-4:r,c;for(c=0;c<f;c+=4)e=de[t.charCodeAt(c)]<<18|de[t.charCodeAt(c+1)]<<12|de[t.charCodeAt(c+2)]<<6|de[t.charCodeAt(c+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=de[t.charCodeAt(c)]<<2|de[t.charCodeAt(c+1)]>>4,a[s++]=e&255),i===1&&(e=de[t.charCodeAt(c)]<<10|de[t.charCodeAt(c+1)]<<4|de[t.charCodeAt(c+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function kv(t){return $e[t>>18&63]+$e[t>>12&63]+$e[t>>6&63]+$e[t&63]}function Ev(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(kv(r));return i.join("")}function io(t){for(var e,n=t.length,r=n%3,i=[],a=16383,s=0,f=n-r;s<f;s+=a)i.push(Ev(t,s,s+a>f?f:s+a));return r===1?(e=t[n-1],i.push($e[e>>2]+$e[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push($e[e>>10]+$e[e>>4&63]+$e[e<<2&63]+"=")),i.join("")}function Vr(t){if(t===void 0)return{};if(!Dp(t))throw new Error(`The arguments to a Convex function must be an object. Received: ${t}`);return t}function Cv(t){if(typeof t>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof t!="string")throw new Error(`Invalid deployment address: found ${t}".`);if(!(t.startsWith("http:")||t.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${t}".`);try{new URL(t)}catch{throw new Error(`Invalid deployment address: "${t}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(t.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${t}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function Dp(t){var i;const e=typeof t=="object",n=Object.getPrototypeOf(t),r=n===null||n===Object.prototype||((i=n==null?void 0:n.constructor)==null?void 0:i.name)==="Object";return e&&r}const Ip=!0,Cr=BigInt("-9223372036854775808"),su=BigInt("9223372036854775807"),jf=BigInt("0"),Nv=BigInt("8"),Dv=BigInt("256");function Lp(t){return Number.isNaN(t)||!Number.isFinite(t)||Object.is(t,-0)}function Iv(t){t<jf&&(t-=Cr+Cr);let e=t.toString(16);e.length%2===1&&(e="0"+e);const n=new Uint8Array(new ArrayBuffer(8));let r=0;for(const i of e.match(/.{2}/g).reverse())n.set([parseInt(i,16)],r++),t>>=Nv;return io(n)}function Lv(t){const e=ro(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let n=jf,r=jf;for(const i of e)n+=BigInt(i)*Dv**r,r++;return n>su&&(n+=Cr+Cr),n}function Fv(t){if(t<Cr||su<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,t,!0),io(new Uint8Array(e))}function Ov(t){const e=ro(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Pv=DataView.prototype.setBigInt64?Fv:Iv,$v=DataView.prototype.getBigInt64?Ov:Lv,nd=1024;function Wf(t){if(t.length>nd)throw new Error(`Field name ${t} exceeds maximum field name length ${nd}.`);if(t.startsWith("$"))throw new Error(`Field name ${t} starts with a '$', which is reserved.`);for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<32||n>=127)throw new Error(`Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`)}}function On(t){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>On(r));if(typeof t!="object")throw new Error(`Unexpected type of ${t}`);const e=Object.entries(t);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof t.$bytes!="string")throw new Error(`Malformed $bytes field on ${t}`);return ro(t.$bytes).buffer}if(r==="$integer"){if(typeof t.$integer!="string")throw new Error(`Malformed $integer field on ${t}`);return $v(t.$integer)}if(r==="$float"){if(typeof t.$float!="string")throw new Error(`Malformed $float field on ${t}`);const i=ro(t.$float);if(i.byteLength!==8)throw new Error(`Received ${i.byteLength} bytes, expected 8 for $float`);const s=new DataView(i.buffer).getFloat64(0,Ip);if(!Lp(s))throw new Error(`Float ${s} should be encoded as a number`);return s}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const n={};for(const[r,i]of Object.entries(t))Wf(r),n[r]=On(i);return n}function dr(t){return JSON.stringify(t,(e,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function ao(t,e,n,r){var s;if(t===void 0){const f=n&&` (present at path ${n} in original object ${dr(e)})`;throw new Error(`undefined is not a valid Convex value${f}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(t===null)return t;if(typeof t=="bigint"){if(t<Cr||su<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);return{$integer:Pv(t)}}if(typeof t=="number")if(Lp(t)){const f=new ArrayBuffer(8);return new DataView(f).setFloat64(0,t,Ip),{$float:io(new Uint8Array(f))}}else return t;if(typeof t=="boolean"||typeof t=="string")return t;if(t instanceof ArrayBuffer)return{$bytes:io(new Uint8Array(t))};if(Array.isArray(t))return t.map((f,c)=>ao(f,e,n+`[${c}]`,!1));if(t instanceof Set)throw new Error(Rs(n,"Set",[...t],e));if(t instanceof Map)throw new Error(Rs(n,"Map",[...t],e));if(!Dp(t)){const f=(s=t==null?void 0:t.constructor)==null?void 0:s.name,c=f?`${f} `:"";throw new Error(Rs(n,c,t,e))}const i={},a=Object.entries(t);a.sort(([f,c],[u,l])=>f===u?0:f<u?-1:1);for(const[f,c]of a)c!==void 0?(Wf(f),i[f]=ao(c,e,n+`.${f}`,!1)):r&&(Wf(f),i[f]=Rv(c,e,n+`.${f}`));return i}function Rs(t,e,n,r){return t?`${e}${dr(n)} is not a supported Convex type (present at path ${t} in original object ${dr(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${dr(n)} is not a supported Convex type.`}function Rv(t,e,n){if(t===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${dr(t)} but original value is undefined`);return ao(t,e,n,!1)}function na(t){return ao(t,t,"",!1)}var Bv=Object.defineProperty,Uv=(t,e,n)=>e in t?Bv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bs=(t,e,n)=>Uv(t,typeof e!="symbol"?e+"":e,n),rd,id;const zv=Symbol.for("ConvexError");class ra extends(id=Error,rd=zv,id){constructor(e){super(typeof e=="string"?e:dr(e)),Bs(this,"name","ConvexError"),Bs(this,"data"),Bs(this,rd,!0),this.data=e}}var qv=Object.defineProperty,jv=(t,e,n)=>e in t?qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ad=(t,e,n)=>jv(t,typeof e!="symbol"?e+"":e,n);const Wv="color:rgb(0, 145, 255)";function Vv(t){switch(t){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class Hv{constructor(e){ad(this,"_onLogLineFuncs"),ad(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let n=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[n]!==void 0;r++)n=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[n]=e,()=>{delete this._onLogLineFuncs[n]}}logVerbose(...e){if(this._verbose)for(const n of Object.values(this._onLogLineFuncs))n("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const n of Object.values(this._onLogLineFuncs))n("info",...e)}warn(...e){for(const n of Object.values(this._onLogLineFuncs))n("warn",...e)}error(...e){for(const n of Object.values(this._onLogLineFuncs))n("error",...e)}}function Yv(t){const e=new Hv(t);return e.addLogLineListener((n,...r)=>{switch(n){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function ia(t,e,n,r,i){const a=Vv(n);if(typeof i=="object"&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`),e==="info"){const s=i.match(/^\[.*?\] /);if(s===null){t.error(`[CONVEX ${a}(${r})] Could not parse console.log`);return}const f=i.slice(1,s[0].length-2),c=i.slice(s[0].length);t.log(`%c[CONVEX ${a}(${r})] [${f}]`,Wv,c)}else t.error(`[CONVEX ${a}(${r})] ${i}`)}const oo=Symbol.for("functionName"),Xv=Symbol.for("toReferencePath");function Gv(t){return t[Xv]??null}function Zv(t){return t.startsWith("function://")}function Jv(t){let e;if(typeof t=="string")Zv(t)?e={functionHandle:t}:e={name:t};else if(t[oo])e={name:t[oo]};else{const n=Gv(t);if(!n)throw new Error(`${t} is not a functionReference`);e={reference:n}}return e}function aa(t){const e=Jv(t);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof t=="string")return t;const n=t[oo];if(!n)throw new Error(`${t} is not a functionReference`);return n}function Fp(t=[]){const e={get(n,r){if(typeof r=="string"){const i=[...t,r];return Fp(i)}else if(r===oo){if(t.length<2){const s=["api",...t].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${s}\``)}const i=t.slice(0,-1).join("/"),a=t[t.length-1];return a==="default"?i:i+":"+a}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}Fp();var Kv=Object.defineProperty,Qv=(t,e,n)=>e in t?Kv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dn=(t,e,n)=>Qv(t,typeof e!="symbol"?e+"":e,n);const oa=560;class b9{constructor(e,n){if(Dn(this,"address"),Dn(this,"auth"),Dn(this,"adminAuth"),Dn(this,"encodedTsPromise"),Dn(this,"debug"),Dn(this,"fetchOptions"),Dn(this,"logger"),typeof n=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");const r=n??{};r.skipConvexDeploymentUrlCheck!==!0&&Cv(e),this.logger=r.logger??Yv({verbose:!1}),this.address=e,this.debug=!0}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,n){if(this.clearAuth(),n!==void 0){const r=new TextEncoder().encode(JSON.stringify(n)),i=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${i}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...n){const r=Vr(n[0]),i=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:i})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,n={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:n});if(!r.ok)throw new Error(await r.text());const{ts:i}=await r.json();return i}async query(e,...n){const r=Vr(n[0]);return await this.queryInner(e,r,{})}async queryInner(e,n,r){const i=aa(e),a=[na(n)],s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const f=fetch,c=r.timestampPromise?await r.timestampPromise:void 0,u=JSON.stringify({path:i,format:"convex_encoded_json",args:a,...c?{ts:c}:{}}),l=c?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,d=await f(l,{...this.fetchOptions,body:u,method:"POST",headers:s});if(!d.ok&&d.status!==oa)throw new Error(await d.text());const h=await d.json();if(this.debug)for(const g of h.logLines??[])ia(this.logger,"info","query",i,g);switch(h.status){case"success":return On(h.value);case"error":throw h.errorData!==void 0?sa(h.errorData,new ra(h.errorMessage)):new Error(h.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(h)}`)}}async mutation(e,...n){const r=Vr(n[0]),i=aa(e),a=JSON.stringify({path:i,format:"convex_encoded_json",args:[na(r)]}),s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const c=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:a,method:"POST",headers:s});if(!c.ok&&c.status!==oa)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])ia(this.logger,"info","mutation",i,l);switch(u.status){case"success":return On(u.value);case"error":throw u.errorData!==void 0?sa(u.errorData,new ra(u.errorMessage)):new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async action(e,...n){const r=Vr(n[0]),i=aa(e),a=JSON.stringify({path:i,format:"convex_encoded_json",args:[na(r)]}),s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const c=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:a,method:"POST",headers:s});if(!c.ok&&c.status!==oa)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])ia(this.logger,"info","action",i,l);switch(u.status){case"success":return On(u.value);case"error":throw u.errorData!==void 0?sa(u.errorData,new ra(u.errorMessage)):new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async function(e,n,...r){const i=Vr(r[0]),a=typeof e=="string"?e:aa(e),s=JSON.stringify({componentPath:n,path:a,format:"convex_encoded_json",args:na(i)}),f={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?f.Authorization=`Convex ${this.adminAuth}`:this.auth&&(f.Authorization=`Bearer ${this.auth}`);const u=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:s,method:"POST",headers:f});if(!u.ok&&u.status!==oa)throw new Error(await u.text());const l=await u.json();if(this.debug)for(const d of l.logLines??[])ia(this.logger,"info","any",a,d);switch(l.status){case"success":return On(l.value);case"error":throw l.errorData!==void 0?sa(l.errorData,new ra(l.errorMessage)):new Error(l.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(l)}`)}}}function sa(t,e){return e.data=On(t),e}export{m9 as A,f9 as B,b9 as C,d9 as D,Hb as E,ya as F,_d as G,g9 as L,a9 as M,rv as R,s9 as S,o9 as a,c9 as b,u9 as c,mr as d,Me as e,p9 as f,ie as g,_a as h,xr as i,Xt as j,Pt as k,De as l,Uc as m,vc as n,Ie as o,Do as p,ce as q,Ce as r,h9 as s,l9 as t,Tp as u,_e as v,$7 as w,xu as x,Jb as y,Sn as z};
