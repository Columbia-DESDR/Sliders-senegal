import{w as mh,b as I1}from"./paths.76125d2a.js";import{D as x1}from"./index.ff7e3b01.js";function Nt(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function Wt(e){return function t(i){return arguments.length===0||Nt(i)?t:e.apply(this,arguments)}}function Pt(e){return function t(i,n){switch(arguments.length){case 0:return t;case 1:return Nt(i)?t:Wt(function(r){return e(i,r)});default:return Nt(i)&&Nt(n)?t:Nt(i)?Wt(function(r){return e(r,n)}):Nt(n)?Wt(function(r){return e(i,r)}):e(i,n)}}}function A1(e,t){e=e||[],t=t||[];var i,n=e.length,r=t.length,s=[];for(i=0;i<n;)s[s.length]=e[i],i+=1;for(i=0;i<r;)s[s.length]=t[i],i+=1;return s}function gh(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(i){return t.apply(this,arguments)};case 2:return function(i,n){return t.apply(this,arguments)};case 3:return function(i,n,r){return t.apply(this,arguments)};case 4:return function(i,n,r,s){return t.apply(this,arguments)};case 5:return function(i,n,r,s,a){return t.apply(this,arguments)};case 6:return function(i,n,r,s,a,o){return t.apply(this,arguments)};case 7:return function(i,n,r,s,a,o,c){return t.apply(this,arguments)};case 8:return function(i,n,r,s,a,o,c,u){return t.apply(this,arguments)};case 9:return function(i,n,r,s,a,o,c,u,l){return t.apply(this,arguments)};case 10:return function(i,n,r,s,a,o,c,u,l,h){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ou(e){return function t(i,n,r){switch(arguments.length){case 0:return t;case 1:return Nt(i)?t:Pt(function(s,a){return e(i,s,a)});case 2:return Nt(i)&&Nt(n)?t:Nt(i)?Pt(function(s,a){return e(s,n,a)}):Nt(n)?Pt(function(s,a){return e(i,s,a)}):Wt(function(s){return e(i,n,s)});default:return Nt(i)&&Nt(n)&&Nt(r)?t:Nt(i)&&Nt(n)?Pt(function(s,a){return e(s,a,r)}):Nt(i)&&Nt(r)?Pt(function(s,a){return e(s,n,a)}):Nt(n)&&Nt(r)?Pt(function(s,a){return e(i,s,a)}):Nt(i)?Wt(function(s){return e(s,n,r)}):Nt(n)?Wt(function(s){return e(i,s,r)}):Nt(r)?Wt(function(s){return e(i,n,s)}):e(i,n,r)}}}const cu=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function B1(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function E1(e,t,i){return function(){if(arguments.length===0)return i();var n=arguments[arguments.length-1];if(!cu(n)){for(var r=0;r<e.length;){if(typeof n[e[r]]=="function")return n[e[r]].apply(n,Array.prototype.slice.call(arguments,0,-1));r+=1}if(B1(n)){var s=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(n)}}return i.apply(this,arguments)}}const wd={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function Dy(e){return Object.prototype.toString.call(e)==="[object String]"}var Fy=Wt(function(t){return cu(t)?!0:!t||typeof t!="object"||Dy(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),O1=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,i){return this.f(t,i)},e}();function T1(e){return new O1(e)}var N1=Pt(function(t,i){return gh(t.length,function(){return t.apply(i,arguments)})});function D1(e,t,i){for(var n=0,r=i.length;n<r;){if(t=e["@@transducer/step"](t,i[n]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return e["@@transducer/result"](t)}function Sd(e,t,i){for(var n=i.next();!n.done;){if(t=e["@@transducer/step"](t,n.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=i.next()}return e["@@transducer/result"](t)}function Id(e,t,i,n){return e["@@transducer/result"](i[n](N1(e["@@transducer/step"],e),t))}var xd=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function ky(e,t,i){if(typeof e=="function"&&(e=T1(e)),Fy(i))return D1(e,t,i);if(typeof i["fantasy-land/reduce"]=="function")return Id(e,t,i,"fantasy-land/reduce");if(i[xd]!=null)return Sd(e,t,i[xd]());if(typeof i.next=="function")return Sd(e,t,i);if(typeof i.reduce=="function")return Id(e,t,i,"reduce");throw new TypeError("reduce: list must be array or iterable")}function cn(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var Ad=Object.prototype.toString,Cy=function(){return Ad.call(arguments)==="[object Arguments]"?function(t){return Ad.call(t)==="[object Arguments]"}:function(t){return cn("callee",t)}}(),F1=!{toString:null}.propertyIsEnumerable("toString"),Bd=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ed=function(){return arguments.propertyIsEnumerable("length")}(),k1=function(t,i){for(var n=0;n<t.length;){if(t[n]===i)return!0;n+=1}return!1},C1=Wt(typeof Object.keys=="function"&&!Ed?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var i,n,r=[],s=Ed&&Cy(t);for(i in t)cn(i,t)&&(!s||i!=="length")&&(r[r.length]=i);if(F1)for(n=Bd.length-1;n>=0;)i=Bd[n],cn(i,t)&&!k1(r,i)&&(r[r.length]=i),n-=1;return r});const xa=C1;var L1=ou(ky);const R1=L1;var M1=Wt(function(t){for(var i=xa(t),n=i.length,r=[],s=0;s<n;)r[s]=t[i[s]],s+=1;return r});const Ly=M1;var U1=Wt(function(t){return t==null});const Jo=U1;function P1(e){return function t(i){for(var n,r,s,a=[],o=0,c=i.length;o<c;){if(Fy(i[o]))for(n=e?t(i[o]):i[o],s=0,r=n.length;s<r;)a[a.length]=n[s],s+=1;else a[a.length]=i[o];o+=1}return a}}function $1(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var bl=Wt(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function Ry(e,t,i,n){var r=function(a){for(var o=t.length,c=0;c<o;){if(e===t[c])return i[c];c+=1}t[c]=e,i[c]=a;for(var u in e)e.hasOwnProperty(u)&&(a[u]=n?Ry(e[u],t,i,!0):e[u]);return a};switch(bl(e)){case"Object":return r(Object.create(Object.getPrototypeOf(e)));case"Array":return r([]);case"Date":return new Date(e.valueOf());case"RegExp":return $1(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var V1=Wt(function(t){return t!=null&&typeof t.clone=="function"?t.clone():Ry(t,[],[],!0)});const Qo=V1;function j1(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function My(e,t){return function(){var i=arguments.length;if(i===0)return t();var n=arguments[i-1];return cu(n)||typeof n[e]!="function"?t.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,i-1))}}var z1=ou(My("slice",function(t,i,n){return Array.prototype.slice.call(n,t,i)})),W1=Wt(My("tail",z1(1,1/0)));const q1=W1;function Y1(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return gh(arguments[0].length,R1(j1,arguments[0],q1(arguments)))}function H1(e){return e}var G1=Wt(H1);const K1=G1;function Od(e){for(var t=[],i;!(i=e.next()).done;)t.push(i.value);return t}function Td(e,t,i){for(var n=0,r=i.length;n<r;){if(e(t,i[n]))return!0;n+=1}return!1}function J1(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function Q1(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const Pu=typeof Object.is=="function"?Object.is:Q1;function Nd(e,t,i,n){var r=Od(e),s=Od(t);function a(o,c){return _h(o,c,i.slice(),n.slice())}return!Td(function(o,c){return!Td(a,c,o)},s,r)}function _h(e,t,i,n){if(Pu(e,t))return!0;var r=bl(e);if(r!==bl(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(r){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&J1(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Pu(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Pu(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var s=i.length-1;s>=0;){if(i[s]===e)return n[s]===t;s-=1}switch(r){case"Map":return e.size!==t.size?!1:Nd(e.entries(),t.entries(),i.concat([e]),n.concat([t]));case"Set":return e.size!==t.size?!1:Nd(e.values(),t.values(),i.concat([e]),n.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=xa(e);if(a.length!==xa(t).length)return!1;var o=i.concat([e]),c=n.concat([t]);for(s=a.length-1;s>=0;){var u=a[s];if(!(cn(u,t)&&_h(t[u],e[u],o,c)))return!1;s-=1}return!0}var Uy=Pt(function(t,i){return _h(t,i,[],[])});function X1(e,t,i){var n,r;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(n=1/t;i<e.length;){if(r=e[i],r===0&&1/r===n)return i;i+=1}return-1}else if(t!==t){for(;i<e.length;){if(r=e[i],typeof r=="number"&&r!==r)return i;i+=1}return-1}return e.indexOf(t,i);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,i);case"object":if(t===null)return e.indexOf(t,i)}for(;i<e.length;){if(Uy(e[i],t))return i;i+=1}return-1}function vl(e,t){return X1(t,e,0)>=0}function Z1(e,t){for(var i=0,n=t.length,r=[];i<n;)e(t[i])&&(r[r.length]=t[i]),i+=1;return r}function Xo(e){return Object.prototype.toString.call(e)==="[object Object]"}var tw=function(){function e(t,i){this.xf=i,this.f=t}return e.prototype["@@transducer/init"]=wd.init,e.prototype["@@transducer/result"]=wd.result,e.prototype["@@transducer/step"]=function(t,i){return this.f(i)?this.xf["@@transducer/step"](t,i):t},e}(),ew=Pt(function(t,i){return new tw(t,i)}),iw=Pt(E1(["fantasy-land/filter","filter"],ew,function(e,t){return Xo(t)?ky(function(i,n){return e(t[n])&&(i[n]=t[n]),i},{},xa(t)):Z1(e,t)}));const nw=iw;var rw=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!Dd(t,!0,this)},e.prototype.has=function(t){return Dd(t,!1,this)},e}();function Dd(e,t,i){var n=typeof e,r,s;switch(n){case"string":case"number":return e===0&&1/e===-1/0?i._items["-0"]?!0:(t&&(i._items["-0"]=!0),!1):i._nativeSet!==null?t?(r=i._nativeSet.size,i._nativeSet.add(e),s=i._nativeSet.size,s===r):i._nativeSet.has(e):n in i._items?e in i._items[n]?!0:(t&&(i._items[n][e]=!0),!1):(t&&(i._items[n]={},i._items[n][e]=!0),!1);case"boolean":if(n in i._items){var a=e?1:0;return i._items[n][a]?!0:(t&&(i._items[n][a]=!0),!1)}else return t&&(i._items[n]=e?[!1,!0]:[!0,!1]),!1;case"function":return i._nativeSet!==null?t?(r=i._nativeSet.size,i._nativeSet.add(e),s=i._nativeSet.size,s===r):i._nativeSet.has(e):n in i._items?vl(e,i._items[n])?!0:(t&&i._items[n].push(e),!1):(t&&(i._items[n]=[e]),!1);case"undefined":return i._items[n]?!0:(t&&(i._items[n]=!0),!1);case"object":if(e===null)return i._items.null?!0:(t&&(i._items.null=!0),!1);default:return n=Object.prototype.toString.call(e),n in i._items?vl(e,i._items[n])?!0:(t&&i._items[n].push(e),!1):(t&&(i._items[n]=[e]),!1)}}var sw=Pt(function(t,i){for(var n=[],r=0,s=t.length,a=i.length,o=new rw,c=0;c<a;c+=1)o.add(i[c]);for(;r<s;)o.add(t[r])&&(n[n.length]=t[r]),r+=1;return n});const aw=sw;function ow(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}var cw=Wt(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():cu(t)?[]:Dy(t)?"":Xo(t)?{}:Cy(t)?function(){return arguments}():ow(t)?t.constructor.from(""):void 0}),uw=Wt(P1(!0));const lw=uw;var hw=Pt(function(t,i){for(var n=xa(i),r=0;r<n.length;){var s=n[r];t(i[s],s,i),r+=1}return i});const Py=hw;var fw=Wt(function(t){for(var i={},n=0;n<t.length;)i[t[n][0]]=t[n][1],n+=1;return i});const dw=fw;var pw=Pt(function(t,i){return Jo(i)?!1:t in i});const yw=pw;var mw=Pt(vl);const gw=mw;function _w(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1,n=arguments.length;i<n;){var r=arguments[i];if(r!=null)for(var s in r)cn(s,r)&&(t[s]=r[s]);i+=1}return t}const $y=typeof Object.assign=="function"?Object.assign:_w;var bw=Pt(function(t,i){return i instanceof t||i!=null&&(i.constructor===t||t.name==="Object"&&typeof i=="object")});const bh=bw;var vw=Wt(function(t){return t!=null&&Uy(t,cw(t))});const ww=vw;var Sw=ou(function(t,i,n){var r={},s;for(s in i)cn(s,i)&&(r[s]=cn(s,n)?t(s,i[s],n[s]):i[s]);for(s in n)cn(s,n)&&!cn(s,r)&&(r[s]=n[s]);return r}),Iw=ou(function e(t,i,n){return Sw(function(r,s,a){return Xo(s)&&Xo(a)?e(t,s,a):t(r,s,a)},i,n)}),xw=Pt(function(t,i){return Iw(function(n,r,s){return s},t,i)});const Aw=xw;var Bw=Pt(function(t,i){return $y({},i,t)});const Ew=Bw;var Ow=Pt(function(t,i){return $y({},t,i)});const vh=Ow;function Tw(e){return Pt(function(t,i){return gh(Math.max(0,t.length-i.length),function(){return t.apply(this,e(i,arguments))})})}var Nw=Tw(A1);const Dw=Nw;var Fw=Pt(function(t,i){var n=Number(i),r=0,s;if(n<0||isNaN(n))throw new RangeError("n must be a non-negative number");for(s=new Array(n);r<n;)s[r]=t(r),r+=1;return s});const kw=Fw;var Cw=Pt(function(t,i){for(var n=0,r=t.length,s,a=i.length,o=[];n<r;){for(s=0;s<a;)o[o.length]=[t[n],i[s]],s+=1;n+=1}return o});const Lw=Cw;var Rw={value:()=>{}};function Vy(){for(var e=0,t=arguments.length,i={},n;e<t;++e){if(!(n=arguments[e]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new xo(i)}function xo(e){this._=e}function Mw(e,t){return e.trim().split(/^|\s+/).map(function(i){var n="",r=i.indexOf(".");if(r>=0&&(n=i.slice(r+1),i=i.slice(0,r)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}xo.prototype=Vy.prototype={constructor:xo,on:function(e,t){var i=this._,n=Mw(e+"",i),r,s=-1,a=n.length;if(arguments.length<2){for(;++s<a;)if((r=(e=n[s]).type)&&(r=Uw(i[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=n[s]).type)i[r]=Fd(i[r],e.name,t);else if(t==null)for(r in i)i[r]=Fd(i[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new xo(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var i=new Array(r),n=0,r,s;n<r;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,r=s.length;n<r;++n)s[n].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],r=0,s=n.length;r<s;++r)n[r].value.apply(t,i)}};function Uw(e,t){for(var i=0,n=e.length,r;i<n;++i)if((r=e[i]).name===t)return r.value}function Fd(e,t,i){for(var n=0,r=e.length;n<r;++n)if(e[n].name===t){e[n]=Rw,e=e.slice(0,n).concat(e.slice(n+1));break}return i!=null&&e.push({name:t,value:i}),e}var wl="http://www.w3.org/1999/xhtml";const kd={svg:"http://www.w3.org/2000/svg",xhtml:wl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uu(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),kd.hasOwnProperty(t)?{space:kd[t],local:e}:e}function Pw(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===wl&&t.documentElement.namespaceURI===wl?t.createElement(e):t.createElementNS(i,e)}}function $w(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jy(e){var t=uu(e);return(t.local?$w:Pw)(t)}function Vw(){}function wh(e){return e==null?Vw:function(){return this.querySelector(e)}}function jw(e){typeof e!="function"&&(e=wh(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],a=s.length,o=n[r]=new Array(a),c,u,l=0;l<a;++l)(c=s[l])&&(u=e.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),o[l]=u);return new hi(n,this._parents)}function zw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ww(){return[]}function zy(e){return e==null?Ww:function(){return this.querySelectorAll(e)}}function qw(e){return function(){return zw(e.apply(this,arguments))}}function Yw(e){typeof e=="function"?e=qw(e):e=zy(e);for(var t=this._groups,i=t.length,n=[],r=[],s=0;s<i;++s)for(var a=t[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&(n.push(e.call(c,c.__data__,u,a)),r.push(c));return new hi(n,r)}function Wy(e){return function(){return this.matches(e)}}function qy(e){return function(t){return t.matches(e)}}var Hw=Array.prototype.find;function Gw(e){return function(){return Hw.call(this.children,e)}}function Kw(){return this.firstElementChild}function Jw(e){return this.select(e==null?Kw:Gw(typeof e=="function"?e:qy(e)))}var Qw=Array.prototype.filter;function Xw(){return Array.from(this.children)}function Zw(e){return function(){return Qw.call(this.children,e)}}function tS(e){return this.selectAll(e==null?Xw:Zw(typeof e=="function"?e:qy(e)))}function eS(e){typeof e!="function"&&(e=Wy(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],a=s.length,o=n[r]=[],c,u=0;u<a;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new hi(n,this._parents)}function Yy(e){return new Array(e.length)}function iS(){return new hi(this._enter||this._groups.map(Yy),this._parents)}function Zo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zo.prototype={constructor:Zo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function nS(e){return function(){return e}}function rS(e,t,i,n,r,s){for(var a=0,o,c=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],n[a]=o):i[a]=new Zo(e,s[a]);for(;a<c;++a)(o=t[a])&&(r[a]=o)}function sS(e,t,i,n,r,s,a){var o,c,u=new Map,l=t.length,h=s.length,d=new Array(l),y;for(o=0;o<l;++o)(c=t[o])&&(d[o]=y=a.call(c,c.__data__,o,t)+"",u.has(y)?r[o]=c:u.set(y,c));for(o=0;o<h;++o)y=a.call(e,s[o],o,s)+"",(c=u.get(y))?(n[o]=c,c.__data__=s[o],u.delete(y)):i[o]=new Zo(e,s[o]);for(o=0;o<l;++o)(c=t[o])&&u.get(d[o])===c&&(r[o]=c)}function aS(e){return e.__data__}function oS(e,t){if(!arguments.length)return Array.from(this,aS);var i=t?sS:rS,n=this._parents,r=this._groups;typeof e!="function"&&(e=nS(e));for(var s=r.length,a=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var l=n[u],h=r[u],d=h.length,y=cS(e.call(l,l&&l.__data__,u,n)),g=y.length,_=o[u]=new Array(g),b=a[u]=new Array(g),w=c[u]=new Array(d);i(l,h,_,b,w,y,t);for(var G=0,dt=0,L,Et;G<g;++G)if(L=_[G]){for(G>=dt&&(dt=G+1);!(Et=b[dt])&&++dt<g;);L._next=Et||null}}return a=new hi(a,n),a._enter=o,a._exit=c,a}function cS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uS(){return new hi(this._exit||this._groups.map(Yy),this._parents)}function lS(e,t,i){var n=this.enter(),r=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),i==null?s.remove():i(s),n&&r?n.merge(r).order():r}function hS(e){for(var t=e.selection?e.selection():e,i=this._groups,n=t._groups,r=i.length,s=n.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var u=i[c],l=n[c],h=u.length,d=o[c]=new Array(h),y,g=0;g<h;++g)(y=u[g]||l[g])&&(d[g]=y);for(;c<r;++c)o[c]=i[c];return new hi(o,this._parents)}function fS(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var n=e[t],r=n.length-1,s=n[r],a;--r>=0;)(a=n[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function dS(e){e||(e=pS);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var i=this._groups,n=i.length,r=new Array(n),s=0;s<n;++s){for(var a=i[s],o=a.length,c=r[s]=new Array(o),u,l=0;l<o;++l)(u=a[l])&&(c[l]=u);c.sort(t)}return new hi(r,this._parents).order()}function pS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function mS(){return Array.from(this)}function gS(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,s=n.length;r<s;++r){var a=n[r];if(a)return a}return null}function _S(){let e=0;for(const t of this)++e;return e}function bS(){return!this.node()}function vS(e){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var r=t[i],s=0,a=r.length,o;s<a;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function wS(e){return function(){this.removeAttribute(e)}}function SS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function IS(e,t){return function(){this.setAttribute(e,t)}}function xS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function AS(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function BS(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function ES(e,t){var i=uu(e);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((t==null?i.local?SS:wS:typeof t=="function"?i.local?BS:AS:i.local?xS:IS)(i,t))}function Hy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function OS(e){return function(){this.style.removeProperty(e)}}function TS(e,t,i){return function(){this.style.setProperty(e,t,i)}}function NS(e,t,i){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,i)}}function DS(e,t,i){return arguments.length>1?this.each((t==null?OS:typeof t=="function"?NS:TS)(e,t,i??"")):fs(this.node(),e)}function fs(e,t){return e.style.getPropertyValue(t)||Hy(e).getComputedStyle(e,null).getPropertyValue(t)}function FS(e){return function(){delete this[e]}}function kS(e,t){return function(){this[e]=t}}function CS(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function LS(e,t){return arguments.length>1?this.each((t==null?FS:typeof t=="function"?CS:kS)(e,t)):this.node()[e]}function Gy(e){return e.trim().split(/^|\s+/)}function Sh(e){return e.classList||new Ky(e)}function Ky(e){this._node=e,this._names=Gy(e.getAttribute("class")||"")}Ky.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jy(e,t){for(var i=Sh(e),n=-1,r=t.length;++n<r;)i.add(t[n])}function Qy(e,t){for(var i=Sh(e),n=-1,r=t.length;++n<r;)i.remove(t[n])}function RS(e){return function(){Jy(this,e)}}function MS(e){return function(){Qy(this,e)}}function US(e,t){return function(){(t.apply(this,arguments)?Jy:Qy)(this,e)}}function PS(e,t){var i=Gy(e+"");if(arguments.length<2){for(var n=Sh(this.node()),r=-1,s=i.length;++r<s;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof t=="function"?US:t?RS:MS)(i,t))}function $S(){this.textContent=""}function VS(e){return function(){this.textContent=e}}function jS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zS(e){return arguments.length?this.each(e==null?$S:(typeof e=="function"?jS:VS)(e)):this.node().textContent}function WS(){this.innerHTML=""}function qS(e){return function(){this.innerHTML=e}}function YS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function HS(e){return arguments.length?this.each(e==null?WS:(typeof e=="function"?YS:qS)(e)):this.node().innerHTML}function GS(){this.nextSibling&&this.parentNode.appendChild(this)}function KS(){return this.each(GS)}function JS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function QS(){return this.each(JS)}function XS(e){var t=typeof e=="function"?e:jy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ZS(){return null}function tI(e,t){var i=typeof e=="function"?e:jy(e),n=t==null?ZS:typeof t=="function"?t:wh(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function eI(){var e=this.parentNode;e&&e.removeChild(this)}function iI(){return this.each(eI)}function nI(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rI(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sI(e){return this.select(e?rI:nI)}function aI(e){return arguments.length?this.property("__data__",e):this.node().__data__}function oI(e){return function(t){e.call(this,t,this.__data__)}}function cI(e){return e.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}})}function uI(e){return function(){var t=this.__on;if(t){for(var i=0,n=-1,r=t.length,s;i<r;++i)s=t[i],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function lI(e,t,i){return function(){var n=this.__on,r,s=oI(t);if(n){for(var a=0,o=n.length;a<o;++a)if((r=n[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=i),r.value=t;return}}this.addEventListener(e.type,s,i),r={type:e.type,name:e.name,value:t,listener:s,options:i},n?n.push(r):this.__on=[r]}}function hI(e,t,i){var n=cI(e+""),r,s=n.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,l;c<u;++c)for(r=0,l=o[c];r<s;++r)if((a=n[r]).type===l.type&&a.name===l.name)return l.value}return}for(o=t?lI:uI,r=0;r<s;++r)this.each(o(n[r],t,i));return this}function Xy(e,t,i){var n=Hy(e),r=n.CustomEvent;typeof r=="function"?r=new r(t,i):(r=n.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function fI(e,t){return function(){return Xy(this,e,t)}}function dI(e,t){return function(){return Xy(this,e,t.apply(this,arguments))}}function pI(e,t){return this.each((typeof t=="function"?dI:fI)(e,t))}function*yI(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,s=n.length,a;r<s;++r)(a=n[r])&&(yield a)}var mI=[null];function hi(e,t){this._groups=e,this._parents=t}function Ya(){return new hi([[document.documentElement]],mI)}function gI(){return this}hi.prototype=Ya.prototype={constructor:hi,select:jw,selectAll:Yw,selectChild:Jw,selectChildren:tS,filter:eS,data:oS,enter:iS,exit:uS,join:lS,merge:hS,selection:gI,order:fS,sort:dS,call:yS,nodes:mS,node:gS,size:_S,empty:bS,each:vS,attr:ES,style:DS,property:LS,classed:PS,text:zS,html:HS,raise:KS,lower:QS,append:XS,insert:tI,remove:iI,clone:sI,datum:aI,on:hI,dispatch:pI,[Symbol.iterator]:yI};function Ih(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function Zy(e,t){var i=Object.create(e.prototype);for(var n in t)i[n]=t[n];return i}function Ha(){}var Aa=.7,tc=1/Aa,ns="\\s*([+-]?\\d+)\\s*",Ba="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_I=/^#([0-9a-f]{3,8})$/,bI=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),vI=new RegExp(`^rgb\\(${Li},${Li},${Li}\\)$`),wI=new RegExp(`^rgba\\(${ns},${ns},${ns},${Ba}\\)$`),SI=new RegExp(`^rgba\\(${Li},${Li},${Li},${Ba}\\)$`),II=new RegExp(`^hsl\\(${Ba},${Li},${Li}\\)$`),xI=new RegExp(`^hsla\\(${Ba},${Li},${Li},${Ba}\\)$`),Cd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ih(Ha,Ea,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ld,formatHex:Ld,formatHex8:AI,formatHsl:BI,formatRgb:Rd,toString:Rd});function Ld(){return this.rgb().formatHex()}function AI(){return this.rgb().formatHex8()}function BI(){return tm(this).formatHsl()}function Rd(){return this.rgb().formatRgb()}function Ea(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=_I.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?Md(t):i===3?new Se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?lo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?lo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bI.exec(e))?new Se(t[1],t[2],t[3],1):(t=vI.exec(e))?new Se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wI.exec(e))?lo(t[1],t[2],t[3],t[4]):(t=SI.exec(e))?lo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=II.exec(e))?$d(t[1],t[2]/100,t[3]/100,1):(t=xI.exec(e))?$d(t[1],t[2]/100,t[3]/100,t[4]):Cd.hasOwnProperty(e)?Md(Cd[e]):e==="transparent"?new Se(NaN,NaN,NaN,0):null}function Md(e){return new Se(e>>16&255,e>>8&255,e&255,1)}function lo(e,t,i,n){return n<=0&&(e=t=i=NaN),new Se(e,t,i,n)}function EI(e){return e instanceof Ha||(e=Ea(e)),e?(e=e.rgb(),new Se(e.r,e.g,e.b,e.opacity)):new Se}function ec(e,t,i,n){return arguments.length===1?EI(e):new Se(e,t,i,n??1)}function Se(e,t,i,n){this.r=+e,this.g=+t,this.b=+i,this.opacity=+n}Ih(Se,ec,Zy(Ha,{brighter(e){return e=e==null?tc:Math.pow(tc,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Aa:Math.pow(Aa,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Se(gr(this.r),gr(this.g),gr(this.b),ic(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ud,formatHex:Ud,formatHex8:OI,formatRgb:Pd,toString:Pd}));function Ud(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}`}function OI(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}${pr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pd(){const e=ic(this.opacity);return`${e===1?"rgb(":"rgba("}${gr(this.r)}, ${gr(this.g)}, ${gr(this.b)}${e===1?")":`, ${e})`}`}function ic(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pr(e){return e=gr(e),(e<16?"0":"")+e.toString(16)}function $d(e,t,i,n){return n<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new ai(e,t,i,n)}function tm(e){if(e instanceof ai)return new ai(e.h,e.s,e.l,e.opacity);if(e instanceof Ha||(e=Ea(e)),!e)return new ai;if(e instanceof ai)return e;e=e.rgb();var t=e.r/255,i=e.g/255,n=e.b/255,r=Math.min(t,i,n),s=Math.max(t,i,n),a=NaN,o=s-r,c=(s+r)/2;return o?(t===s?a=(i-n)/o+(i<n)*6:i===s?a=(n-t)/o+2:a=(t-i)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new ai(a,o,c,e.opacity)}function TI(e,t,i,n){return arguments.length===1?tm(e):new ai(e,t,i,n??1)}function ai(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}Ih(ai,TI,Zy(Ha,{brighter(e){return e=e==null?tc:Math.pow(tc,e),new ai(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Aa:Math.pow(Aa,e),new ai(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*t,r=2*i-n;return new Se($u(e>=240?e-240:e+120,r,n),$u(e,r,n),$u(e<120?e+240:e-120,r,n),this.opacity)},clamp(){return new ai(Vd(this.h),ho(this.s),ho(this.l),ic(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ic(this.opacity);return`${e===1?"hsl(":"hsla("}${Vd(this.h)}, ${ho(this.s)*100}%, ${ho(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vd(e){return e=(e||0)%360,e<0?e+360:e}function ho(e){return Math.max(0,Math.min(1,e||0))}function $u(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}function NI(e,t,i,n,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*i+(1+3*e+3*s-3*a)*n+a*r)/6}function DI(e){var t=e.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),r=e[n],s=e[n+1],a=n>0?e[n-1]:2*r-s,o=n<t-1?e[n+2]:2*s-r;return NI((i-n/t)*t,a,r,s,o)}}const xh=e=>()=>e;function em(e,t){return function(i){return e+i*t}}function FI(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(n){return Math.pow(e+n*t,i)}}function V3(e,t){var i=t-e;return i?em(e,i>180||i<-180?i-360*Math.round(i/360):i):xh(isNaN(e)?t:e)}function kI(e){return(e=+e)==1?im:function(t,i){return i-t?FI(t,i,e):xh(isNaN(t)?i:t)}}function im(e,t){var i=t-e;return i?em(e,i):xh(isNaN(e)?t:e)}const jd=function e(t){var i=kI(t);function n(r,s){var a=i((r=ec(r)).r,(s=ec(s)).r),o=i(r.g,s.g),c=i(r.b,s.b),u=im(r.opacity,s.opacity);return function(l){return r.r=a(l),r.g=o(l),r.b=c(l),r.opacity=u(l),r+""}}return n.gamma=e,n}(1);function CI(e){return function(t){var i=t.length,n=new Array(i),r=new Array(i),s=new Array(i),a,o;for(a=0;a<i;++a)o=ec(t[a]),n[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return n=e(n),r=e(r),s=e(s),o.opacity=1,function(c){return o.r=n(c),o.g=r(c),o.b=s(c),o+""}}}var j3=CI(DI);function kn(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}var Sl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vu=new RegExp(Sl.source,"g");function LI(e){return function(){return e}}function RI(e){return function(t){return e(t)+""}}function MI(e,t){var i=Sl.lastIndex=Vu.lastIndex=0,n,r,s,a=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Sl.exec(e))&&(r=Vu.exec(t));)(s=r.index)>i&&(s=t.slice(i,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,c.push({i:a,x:kn(n,r)})),i=Vu.lastIndex;return i<t.length&&(s=t.slice(i),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?RI(c[0].x):LI(t):(t=c.length,function(u){for(var l=0,h;l<t;++l)o[(h=c[l]).i]=h.x(u);return o.join("")})}var zd=180/Math.PI,Il={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nm(e,t,i,n,r,s){var a,o,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*i+t*n)&&(i-=e*c,n-=t*c),(o=Math.sqrt(i*i+n*n))&&(i/=o,n/=o,c/=o),e*n<t*i&&(e=-e,t=-t,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*zd,skewX:Math.atan(c)*zd,scaleX:a,scaleY:o}}var fo;function UI(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Il:nm(t.a,t.b,t.c,t.d,t.e,t.f)}function PI(e){return e==null||(fo||(fo=document.createElementNS("http://www.w3.org/2000/svg","g")),fo.setAttribute("transform",e),!(e=fo.transform.baseVal.consolidate()))?Il:(e=e.matrix,nm(e.a,e.b,e.c,e.d,e.e,e.f))}function rm(e,t,i,n){function r(u){return u.length?u.pop()+" ":""}function s(u,l,h,d,y,g){if(u!==h||l!==d){var _=y.push("translate(",null,t,null,i);g.push({i:_-4,x:kn(u,h)},{i:_-2,x:kn(l,d)})}else(h||d)&&y.push("translate("+h+t+d+i)}function a(u,l,h,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:h.push(r(h)+"rotate(",null,n)-2,x:kn(u,l)})):l&&h.push(r(h)+"rotate("+l+n)}function o(u,l,h,d){u!==l?d.push({i:h.push(r(h)+"skewX(",null,n)-2,x:kn(u,l)}):l&&h.push(r(h)+"skewX("+l+n)}function c(u,l,h,d,y,g){if(u!==h||l!==d){var _=y.push(r(y)+"scale(",null,",",null,")");g.push({i:_-4,x:kn(u,h)},{i:_-2,x:kn(l,d)})}else(h!==1||d!==1)&&y.push(r(y)+"scale("+h+","+d+")")}return function(u,l){var h=[],d=[];return u=e(u),l=e(l),s(u.translateX,u.translateY,l.translateX,l.translateY,h,d),a(u.rotate,l.rotate,h,d),o(u.skewX,l.skewX,h,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,d),u=l=null,function(y){for(var g=-1,_=d.length,b;++g<_;)h[(b=d[g]).i]=b.x(y);return h.join("")}}}var $I=rm(UI,"px, ","px)","deg)"),VI=rm(PI,", ",")",")"),ds=0,Xs=0,qs=0,sm=1e3,nc,Zs,rc=0,br=0,lu=0,Oa=typeof performance=="object"&&performance.now?performance:Date,am=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ah(){return br||(am(jI),br=Oa.now()+lu)}function jI(){br=0}function sc(){this._call=this._time=this._next=null}sc.prototype=om.prototype={constructor:sc,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Ah():+i)+(t==null?0:+t),!this._next&&Zs!==this&&(Zs?Zs._next=this:nc=this,Zs=this),this._call=e,this._time=i,xl()},stop:function(){this._call&&(this._call=null,this._time=1/0,xl())}};function om(e,t,i){var n=new sc;return n.restart(e,t,i),n}function zI(){Ah(),++ds;for(var e=nc,t;e;)(t=br-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ds}function Wd(){br=(rc=Oa.now())+lu,ds=Xs=0;try{zI()}finally{ds=0,qI(),br=0}}function WI(){var e=Oa.now(),t=e-rc;t>sm&&(lu-=t,rc=e)}function qI(){for(var e,t=nc,i,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:nc=i);Zs=e,xl(n)}function xl(e){if(!ds){Xs&&(Xs=clearTimeout(Xs));var t=e-br;t>24?(e<1/0&&(Xs=setTimeout(Wd,e-Oa.now()-lu)),qs&&(qs=clearInterval(qs))):(qs||(rc=Oa.now(),qs=setInterval(WI,sm)),ds=1,am(Wd))}}function qd(e,t,i){var n=new sc;return t=t==null?0:+t,n.restart(r=>{n.stop(),e(r+t)},t,i),n}var YI=Vy("start","end","cancel","interrupt"),HI=[],cm=0,Yd=1,Al=2,Ao=3,Hd=4,Bl=5,Bo=6;function hu(e,t,i,n,r,s){var a=e.__transition;if(!a)e.__transition={};else if(i in a)return;GI(e,i,{name:t,index:n,group:r,on:YI,tween:HI,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:cm})}function Bh(e,t){var i=pi(e,t);if(i.state>cm)throw new Error("too late; already scheduled");return i}function ji(e,t){var i=pi(e,t);if(i.state>Ao)throw new Error("too late; already running");return i}function pi(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function GI(e,t,i){var n=e.__transition,r;n[t]=i,i.timer=om(s,0,i.time);function s(u){i.state=Yd,i.timer.restart(a,i.delay,i.time),i.delay<=u&&a(u-i.delay)}function a(u){var l,h,d,y;if(i.state!==Yd)return c();for(l in n)if(y=n[l],y.name===i.name){if(y.state===Ao)return qd(a);y.state===Hd?(y.state=Bo,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete n[l]):+l<t&&(y.state=Bo,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete n[l])}if(qd(function(){i.state===Ao&&(i.state=Hd,i.timer.restart(o,i.delay,i.time),o(u))}),i.state=Al,i.on.call("start",e,e.__data__,i.index,i.group),i.state===Al){for(i.state=Ao,r=new Array(d=i.tween.length),l=0,h=-1;l<d;++l)(y=i.tween[l].value.call(e,e.__data__,i.index,i.group))&&(r[++h]=y);r.length=h+1}}function o(u){for(var l=u<i.duration?i.ease.call(null,u/i.duration):(i.timer.restart(c),i.state=Bl,1),h=-1,d=r.length;++h<d;)r[h].call(e,l);i.state===Bl&&(i.on.call("end",e,e.__data__,i.index,i.group),c())}function c(){i.state=Bo,i.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function KI(e,t){var i=e.__transition,n,r,s=!0,a;if(i){t=t==null?null:t+"";for(a in i){if((n=i[a]).name!==t){s=!1;continue}r=n.state>Al&&n.state<Bl,n.state=Bo,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]}s&&delete e.__transition}}function JI(e){return this.each(function(){KI(this,e)})}function QI(e,t){var i,n;return function(){var r=ji(this,e),s=r.tween;if(s!==i){n=i=s;for(var a=0,o=n.length;a<o;++a)if(n[a].name===t){n=n.slice(),n.splice(a,1);break}}r.tween=n}}function XI(e,t,i){var n,r;if(typeof i!="function")throw new Error;return function(){var s=ji(this,e),a=s.tween;if(a!==n){r=(n=a).slice();for(var o={name:t,value:i},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=o;break}c===u&&r.push(o)}s.tween=r}}function ZI(e,t){var i=this._id;if(e+="",arguments.length<2){for(var n=pi(this.node(),i).tween,r=0,s=n.length,a;r<s;++r)if((a=n[r]).name===e)return a.value;return null}return this.each((t==null?QI:XI)(i,e,t))}function Eh(e,t,i){var n=e._id;return e.each(function(){var r=ji(this,n);(r.value||(r.value={}))[t]=i.apply(this,arguments)}),function(r){return pi(r,n).value[t]}}function um(e,t){var i;return(typeof t=="number"?kn:t instanceof Ea?jd:(i=Ea(t))?(t=i,jd):MI)(e,t)}function tx(e){return function(){this.removeAttribute(e)}}function ex(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ix(e,t,i){var n,r=i+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===n?s:s=t(n=a,i)}}function nx(e,t,i){var n,r=i+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===n?s:s=t(n=a,i)}}function rx(e,t,i){var n,r,s;return function(){var a,o=i(this),c;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=o+"",a===c?null:a===n&&c===r?s:(r=c,s=t(n=a,o)))}}function sx(e,t,i){var n,r,s;return function(){var a,o=i(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=o+"",a===c?null:a===n&&c===r?s:(r=c,s=t(n=a,o)))}}function ax(e,t){var i=uu(e),n=i==="transform"?VI:um;return this.attrTween(e,typeof t=="function"?(i.local?sx:rx)(i,n,Eh(this,"attr."+e,t)):t==null?(i.local?ex:tx)(i):(i.local?nx:ix)(i,n,t))}function ox(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function cx(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function ux(e,t){var i,n;function r(){var s=t.apply(this,arguments);return s!==n&&(i=(n=s)&&cx(e,s)),i}return r._value=t,r}function lx(e,t){var i,n;function r(){var s=t.apply(this,arguments);return s!==n&&(i=(n=s)&&ox(e,s)),i}return r._value=t,r}function hx(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var n=uu(e);return this.tween(i,(n.local?ux:lx)(n,t))}function fx(e,t){return function(){Bh(this,e).delay=+t.apply(this,arguments)}}function dx(e,t){return t=+t,function(){Bh(this,e).delay=t}}function px(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fx:dx)(t,e)):pi(this.node(),t).delay}function yx(e,t){return function(){ji(this,e).duration=+t.apply(this,arguments)}}function mx(e,t){return t=+t,function(){ji(this,e).duration=t}}function gx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yx:mx)(t,e)):pi(this.node(),t).duration}function _x(e,t){if(typeof t!="function")throw new Error;return function(){ji(this,e).ease=t}}function bx(e){var t=this._id;return arguments.length?this.each(_x(t,e)):pi(this.node(),t).ease}function vx(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;ji(this,e).ease=i}}function wx(e){if(typeof e!="function")throw new Error;return this.each(vx(this._id,e))}function Sx(e){typeof e!="function"&&(e=Wy(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],a=s.length,o=n[r]=[],c,u=0;u<a;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new ln(n,this._parents,this._name,this._id)}function Ix(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,n=t.length,r=i.length,s=Math.min(n,r),a=new Array(n),o=0;o<s;++o)for(var c=t[o],u=i[o],l=c.length,h=a[o]=new Array(l),d,y=0;y<l;++y)(d=c[y]||u[y])&&(h[y]=d);for(;o<n;++o)a[o]=t[o];return new ln(a,this._parents,this._name,this._id)}function xx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function Ax(e,t,i){var n,r,s=xx(t)?Bh:ji;return function(){var a=s(this,e),o=a.on;o!==n&&(r=(n=o).copy()).on(t,i),a.on=r}}function Bx(e,t){var i=this._id;return arguments.length<2?pi(this.node(),i).on.on(e):this.each(Ax(i,e,t))}function Ex(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function Ox(){return this.on("end.remove",Ex(this._id))}function Tx(e){var t=this._name,i=this._id;typeof e!="function"&&(e=wh(e));for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a)for(var o=n[a],c=o.length,u=s[a]=new Array(c),l,h,d=0;d<c;++d)(l=o[d])&&(h=e.call(l,l.__data__,d,o))&&("__data__"in l&&(h.__data__=l.__data__),u[d]=h,hu(u[d],t,i,d,u,pi(l,i)));return new ln(s,this._parents,t,i)}function Nx(e){var t=this._name,i=this._id;typeof e!="function"&&(e=zy(e));for(var n=this._groups,r=n.length,s=[],a=[],o=0;o<r;++o)for(var c=n[o],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var d=e.call(l,l.__data__,h,c),y,g=pi(l,i),_=0,b=d.length;_<b;++_)(y=d[_])&&hu(y,t,i,_,d,g);s.push(d),a.push(l)}return new ln(s,a,t,i)}var Dx=Ya.prototype.constructor;function Fx(){return new Dx(this._groups,this._parents)}function kx(e,t){var i,n,r;return function(){var s=fs(this,e),a=(this.style.removeProperty(e),fs(this,e));return s===a?null:s===i&&a===n?r:r=t(i=s,n=a)}}function lm(e){return function(){this.style.removeProperty(e)}}function Cx(e,t,i){var n,r=i+"",s;return function(){var a=fs(this,e);return a===r?null:a===n?s:s=t(n=a,i)}}function Lx(e,t,i){var n,r,s;return function(){var a=fs(this,e),o=i(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),fs(this,e))),a===c?null:a===n&&c===r?s:(r=c,s=t(n=a,o))}}function Rx(e,t){var i,n,r,s="style."+t,a="end."+s,o;return function(){var c=ji(this,e),u=c.on,l=c.value[s]==null?o||(o=lm(t)):void 0;(u!==i||r!==l)&&(n=(i=u).copy()).on(a,r=l),c.on=n}}function Mx(e,t,i){var n=(e+="")=="transform"?$I:um;return t==null?this.styleTween(e,kx(e,n)).on("end.style."+e,lm(e)):typeof t=="function"?this.styleTween(e,Lx(e,n,Eh(this,"style."+e,t))).each(Rx(this._id,e)):this.styleTween(e,Cx(e,n,t),i).on("end.style."+e,null)}function Ux(e,t,i){return function(n){this.style.setProperty(e,t.call(this,n),i)}}function Px(e,t,i){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Ux(e,a,i)),n}return s._value=t,s}function $x(e,t,i){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Px(e,t,i??""))}function Vx(e){return function(){this.textContent=e}}function jx(e){return function(){var t=e(this);this.textContent=t??""}}function zx(e){return this.tween("text",typeof e=="function"?jx(Eh(this,"text",e)):Vx(e==null?"":e+""))}function Wx(e){return function(t){this.textContent=e.call(this,t)}}function qx(e){var t,i;function n(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&Wx(r)),t}return n._value=e,n}function Yx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qx(e))}function Hx(){for(var e=this._name,t=this._id,i=hm(),n=this._groups,r=n.length,s=0;s<r;++s)for(var a=n[s],o=a.length,c,u=0;u<o;++u)if(c=a[u]){var l=pi(c,t);hu(c,e,i,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ln(n,this._parents,e,i)}function Gx(){var e,t,i=this,n=i._id,r=i.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--r===0&&s()}};i.each(function(){var u=ji(this,n),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),r===0&&s()})}var Kx=0;function ln(e,t,i,n){this._groups=e,this._parents=t,this._name=i,this._id=n}function hm(){return++Kx}var Yi=Ya.prototype;ln.prototype={constructor:ln,select:Tx,selectAll:Nx,selectChild:Yi.selectChild,selectChildren:Yi.selectChildren,filter:Sx,merge:Ix,selection:Fx,transition:Hx,call:Yi.call,nodes:Yi.nodes,node:Yi.node,size:Yi.size,empty:Yi.empty,each:Yi.each,on:Bx,attr:ax,attrTween:hx,style:Mx,styleTween:$x,text:zx,textTween:Yx,remove:Ox,tween:ZI,delay:px,duration:gx,ease:bx,easeVarying:wx,end:Gx,[Symbol.iterator]:Yi[Symbol.iterator]};function Jx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qx={time:null,delay:0,duration:250,ease:Jx};function Xx(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function Zx(e){var t,i;e instanceof ln?(t=e._id,e=e._name):(t=hm(),(i=Qx).time=Ah(),e=e==null?null:e+"");for(var n=this._groups,r=n.length,s=0;s<r;++s)for(var a=n[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&hu(c,e,t,u,a,i||Xx(c,t));return new ln(n,this._parents,e,t)}Ya.prototype.interrupt=JI;Ya.prototype.transition=Zx;var Gd={},ju={},zu=34,Ys=10,Wu=13;function fm(e){return new Function("d","return {"+e.map(function(t,i){return JSON.stringify(t)+": d["+i+'] || ""'}).join(",")+"}")}function tA(e,t){var i=fm(e);return function(n,r){return t(i(n),r,e)}}function Kd(e){var t=Object.create(null),i=[];return e.forEach(function(n){for(var r in n)r in t||i.push(t[r]=r)}),i}function ge(e,t){var i=e+"",n=i.length;return n<t?new Array(t-n+1).join(0)+i:i}function eA(e){return e<0?"-"+ge(-e,6):e>9999?"+"+ge(e,6):ge(e,4)}function iA(e){var t=e.getUTCHours(),i=e.getUTCMinutes(),n=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":eA(e.getUTCFullYear())+"-"+ge(e.getUTCMonth()+1,2)+"-"+ge(e.getUTCDate(),2)+(r?"T"+ge(t,2)+":"+ge(i,2)+":"+ge(n,2)+"."+ge(r,3)+"Z":n?"T"+ge(t,2)+":"+ge(i,2)+":"+ge(n,2)+"Z":i||t?"T"+ge(t,2)+":"+ge(i,2)+"Z":"")}function nA(e){var t=new RegExp('["'+e+`
\r]`),i=e.charCodeAt(0);function n(h,d){var y,g,_=r(h,function(b,w){if(y)return y(b,w-1);g=b,y=d?tA(b,d):fm(b)});return _.columns=g||[],_}function r(h,d){var y=[],g=h.length,_=0,b=0,w,G=g<=0,dt=!1;h.charCodeAt(g-1)===Ys&&--g,h.charCodeAt(g-1)===Wu&&--g;function L(){if(G)return ju;if(dt)return dt=!1,Gd;var et,Zt=_,bt;if(h.charCodeAt(Zt)===zu){for(;_++<g&&h.charCodeAt(_)!==zu||h.charCodeAt(++_)===zu;);return(et=_)>=g?G=!0:(bt=h.charCodeAt(_++))===Ys?dt=!0:bt===Wu&&(dt=!0,h.charCodeAt(_)===Ys&&++_),h.slice(Zt+1,et-1).replace(/""/g,'"')}for(;_<g;){if((bt=h.charCodeAt(et=_++))===Ys)dt=!0;else if(bt===Wu)dt=!0,h.charCodeAt(_)===Ys&&++_;else if(bt!==i)continue;return h.slice(Zt,et)}return G=!0,h.slice(Zt,g)}for(;(w=L())!==ju;){for(var Et=[];w!==Gd&&w!==ju;)Et.push(w),w=L();d&&(Et=d(Et,b++))==null||y.push(Et)}return y}function s(h,d){return h.map(function(y){return d.map(function(g){return l(y[g])}).join(e)})}function a(h,d){return d==null&&(d=Kd(h)),[d.map(l).join(e)].concat(s(h,d)).join(`
`)}function o(h,d){return d==null&&(d=Kd(h)),s(h,d).join(`
`)}function c(h){return h.map(u).join(`
`)}function u(h){return h.map(l).join(e)}function l(h){return h==null?"":h instanceof Date?iA(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:n,parseRows:r,format:a,formatBody:o,formatRows:c,formatRow:u,formatValue:l}}var rA=nA(","),sA=rA.parse;function aA(e){for(var t in e){var i=e[t].trim(),n,r;if(!i)i=null;else if(i==="true")i=!0;else if(i==="false")i=!1;else if(i==="NaN")i=NaN;else if(!isNaN(n=+i))i=n;else if(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))oA&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i);else continue;e[t]=i}return e}const oA=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function cA(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function uA(e,t){return fetch(e,t).then(cA)}function lA(e){return function(t,i,n){return arguments.length===2&&typeof i=="function"&&(n=i,i=void 0),uA(t,i).then(function(r){return e(r,n)})}}var hA=lA(sA);function ta(e,t,i){this.k=e,this.x=t,this.y=i}ta.prototype={constructor:ta,scale:function(e){return e===1?this:new ta(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ta(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ta.prototype;let fA=mh(null),z3=mh(null),W3=mh(null),dA=0;class pA{constructor(){this.listeners={}}on(t,i){let n=dA++;return this.listeners[t]=this.listeners[t]||{},this.listeners[t][n]=i,()=>{delete this.listeners[t][n]}}emit(t,...i){(Ly(this.listeners[t])??[]).forEach(r=>{r(...i)})}}Ew(void 0);class zi extends pA{constructor(){super(),this.registeredViews=[],this.on("data",(t,...i)=>{this.registeredViews.forEach(({view:n,postprocessFuncs:r})=>{if(Jo(n))return;let a=Y1(...r)(t);n instanceof Function?n(a,...i):n.render(a,...i)})})}snapshot(){}restoreSnapshot(t){}async init(){}registerView(t,i){console.log("Backend.registerView",t,i),i=lw([i??K1]),this.registeredViews.push({view:t,postprocessFuncs:i})}addPostprocessing(t,i){this.registeredViews.forEach(({view:n,postprocessFuncs:r})=>{var s;((s=n.spec)==null?void 0:s.id)==t&&r.push(i)})}async execute(t,i){return Jo(t)&&(t=[]),bh(Array,t)||(t=[t]),this._execute(t,i)}async _execute(t,i){}}class yA extends zi{constructor(t){super(),this.data=t.data||[]}async _execute(t,...i){this.emit("data",this.data,...i)}}class mA extends zi{constructor(t){super(),this.data=null,this.promise=null,this.promise=hA(t.url,aA)}async _execute(t,i){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,i)}}function A(e,t,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?s(l.value):r(l.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function Jd(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function ee(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(e,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(y){return function(g){return Promise.resolve(g).then(y,h)}}function o(y,g){n[y]&&(r[y]=function(_){return new Promise(function(b,w){s.push([y,_,b,w])>1||c(y,_)})},g&&(r[y]=g(r[y])))}function c(y,g){try{u(n[y](g))}catch(_){d(s[0][3],_)}}function u(y){y.value instanceof v?Promise.resolve(y.value.v).then(l,h):d(s[0][2],y)}function l(y){c("next",y)}function h(y){c("throw",y)}function d(y,g){y(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function _r(e){var t,i;return t={},n("next"),n("throw",function(r){throw r}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(r,s){t[r]=e[r]?function(a){return(i=!i)?{value:v(e[r](a)),done:!1}:s?s(a):a}:s}}function He(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof Jd=="function"?Jd(e):e[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(s){i[s]=e[s]&&function(a){return new Promise(function(o,c){a=e[s](a),r(o,c,a.done,a.value)})}}function r(s,a,o,c){Promise.resolve(c).then(function(u){s({value:u,done:o})},a)}}const gA=new TextDecoder("utf-8"),El=e=>gA.decode(e),_A=new TextEncoder,Oh=e=>_A.encode(e),bA=e=>typeof e=="number",dm=e=>typeof e=="boolean",Ht=e=>typeof e=="function",Ie=e=>e!=null&&Object(e)===e,vr=e=>Ie(e)&&Ht(e.then),Ga=e=>Ie(e)&&Ht(e[Symbol.iterator]),Ns=e=>Ie(e)&&Ht(e[Symbol.asyncIterator]),Ol=e=>Ie(e)&&Ie(e.schema),pm=e=>Ie(e)&&"done"in e&&"value"in e,ym=e=>Ie(e)&&Ht(e.stat)&&bA(e.fd),mm=e=>Ie(e)&&Th(e.body),fu=e=>"_getDOMStream"in e&&"_getNodeStream"in e,vA=e=>Ie(e)&&Ht(e.abort)&&Ht(e.getWriter)&&!fu(e),Th=e=>Ie(e)&&Ht(e.cancel)&&Ht(e.getReader)&&!fu(e),wA=e=>Ie(e)&&Ht(e.end)&&Ht(e.write)&&dm(e.writable)&&!fu(e),gm=e=>Ie(e)&&Ht(e.read)&&Ht(e.pipe)&&dm(e.readable)&&!fu(e),SA=e=>Ie(e)&&Ht(e.clear)&&Ht(e.bytes)&&Ht(e.position)&&Ht(e.setPosition)&&Ht(e.capacity)&&Ht(e.getBufferIdentifier)&&Ht(e.createLong),Nh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function IA(e){const t=e[0]?[e[0]]:[];let i,n,r,s;for(let a,o,c=0,u=0,l=e.length;++c<l;){if(a=t[u],o=e[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:i,byteLength:r}=a,{byteOffset:n,byteLength:s}=o,i+r<n||n+s<i){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,i,n-i+s)}return t}function Qd(e,t,i=0,n=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,r));return s.set(a,i),e}function Ri(e,t){const i=IA(e),n=i.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,n);for(const l=i.length;++c<l;){if(r=i[c],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?i[c]=r.subarray(s.length):s.length===r.length&&c++,a?Qd(a,s,o):a=s;break}Qd(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),i.slice(c),n-(a?a.byteLength:0)]}function vt(e,t){let i=pm(t)?t.value:t;return i instanceof e?e===Uint8Array?new e(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=Oh(i)),i instanceof ArrayBuffer?new e(i):i instanceof Nh?new e(i):SA(i)?vt(e,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new e(0):new e(i.buffer,i.byteOffset,i.byteLength/e.BYTES_PER_ELEMENT):e.from(i)):new e(0)}const Hs=e=>vt(Int32Array,e),Xd=e=>vt(BigInt64Array,e),rt=e=>vt(Uint8Array,e),Tl=e=>(e.next(),e);function*xA(e,t){const i=function*(r){yield r},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Nh?i(t):Ga(t)?t:i(t);return yield*Tl(function*(r){let s=null;do s=r.next(yield vt(e,s));while(!s.done)}(n[Symbol.iterator]())),new e}const AA=e=>xA(Uint8Array,e);function _m(e,t){return ee(this,arguments,function*(){if(vr(t))return yield v(yield v(yield*_r(He(_m(e,yield v(t))))));const n=function(a){return ee(this,arguments,function*(){yield yield v(yield v(a))})},r=function(a){return ee(this,arguments,function*(){yield v(yield*_r(He(Tl(function*(o){let c=null;do c=o.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Nh?n(t):Ga(t)?r(t):Ns(t)?t:n(t);return yield v(yield*_r(He(Tl(function(a){return ee(this,arguments,function*(){let o=null;do o=yield v(a.next(yield yield v(vt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield v(new e)})}const BA=e=>_m(Uint8Array,e);function bm(e,t,i){if(e!==0){i=i.slice(0,t);for(let n=-1,r=i.length;++n<r;)i[n]+=e}return i.subarray(0,t)}function EA(e,t){let i=0;const n=e.length;if(n!==t.length)return!1;if(n>0)do if(e[i]!==t[i])return!1;while(++i<n);return!0}const Ve={fromIterable(e){return po(OA(e))},fromAsyncIterable(e){return po(TA(e))},fromDOMStream(e){return po(NA(e))},fromNodeStream(e){return po(FA(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},po=e=>(e.next(),e);function*OA(e){let t,i=!1,n=[],r,s,a,o=0;function c(){return s==="peek"?Ri(n,a)[0]:([r,n,o]=Ri(n,a),r)}({cmd:s,size:a}=(yield(()=>null)())||{cmd:"read",size:0});const u=AA(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&r.byteLength>0&&(n.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield c());while(a<o);while(!t)}catch(l){(i=!0)&&typeof u.throw=="function"&&u.throw(l)}finally{i===!1&&typeof u.return=="function"&&u.return(null)}return null}function TA(e){return ee(this,arguments,function*(){let i,n=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Ri(r,o)[0]:([s,r,c]=Ri(r,o),s)}({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0});const l=BA(e)[Symbol.asyncIterator]();try{do if({done:i,value:s}=Number.isNaN(o-c)?yield v(l.next()):yield v(l.next(o-c)),!i&&s.byteLength>0&&(r.push(s),c+=s.byteLength),i||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!i)}catch(h){(n=!0)&&typeof l.throw=="function"&&(yield v(l.throw(h)))}finally{n===!1&&typeof l.return=="function"&&(yield v(l.return(new Uint8Array(0))))}return yield v(null)})}function NA(e){return ee(this,arguments,function*(){let i=!1,n=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Ri(r,o)[0]:([s,r,c]=Ri(r,o),s)}({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0});const l=new DA(e);try{do if({done:i,value:s}=Number.isNaN(o-c)?yield v(l.read()):yield v(l.read(o-c)),!i&&s.byteLength>0&&(r.push(rt(s)),c+=s.byteLength),i||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!i)}catch(h){(n=!0)&&(yield v(l.cancel(h)))}finally{n===!1?yield v(l.cancel()):e.locked&&l.releaseLock()}return yield v(null)})}let DA=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return A(this,void 0,void 0,function*(){const{reader:i,source:n}=this;i&&(yield i.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return A(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const i=yield this.reader.read();return!i.done&&(i.value=rt(i)),i})}};const qu=(e,t)=>{const i=r=>n([t,r]);let n;return[t,i,new Promise(r=>(n=r)&&e.once(t,i))]};function FA(e){return ee(this,arguments,function*(){const i=[];let n="error",r=!1,s=null,a,o,c=0,u=[],l;function h(){return a==="peek"?Ri(u,o)[0]:([l,u,c]=Ri(u,o),l)}if({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0},e.isTTY)return yield yield v(new Uint8Array(0)),yield v(null);try{i[0]=qu(e,"end"),i[1]=qu(e,"error");do{if(i[2]=qu(e,"readable"),[n,s]=yield v(Promise.race(i.map(y=>y[2]))),n==="error")break;if((r=n==="end")||(Number.isFinite(o-c)?(l=rt(e.read(o-c)),l.byteLength<o-c&&(l=rt(e.read()))):l=rt(e.read()),l.byteLength>0&&(u.push(l),c+=l.byteLength)),r||o<=c)do({cmd:a,size:o}=yield yield v(h()));while(o<c)}while(!r)}finally{yield v(d(i,n==="error"?s:null))}return yield v(null);function d(y,g){return l=u=null,new Promise((_,b)=>{for(const[w,G]of y)e.off(w,G);try{const w=e.destroy;w&&w.call(e,g),g=void 0}catch(w){g=w||g}finally{g!=null?b(g):_()}})}})}var $t;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})($t||($t={}));var oe;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(oe||(oe={}));var ae;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(ae||(ae={}));var Ke;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ke||(Ke={}));var R;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(R||(R={}));var Mi;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Mi||(Mi={}));const Yu=2,Oi=4,rn=4,gt=4,Cn=new Int32Array(2),Zd=new Float32Array(Cn.buffer),tp=new Float64Array(Cn.buffer),yo=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Nl;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Nl||(Nl={}));let ps=class vm{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new vm(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Cn[0]=this.readInt32(t),Zd[0]}readFloat64(t){return Cn[yo?0:1]=this.readInt32(t),Cn[yo?1:0]=this.readInt32(t+4),tp[0]}writeInt8(t,i){this.bytes_[t]=i}writeUint8(t,i){this.bytes_[t]=i}writeInt16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeUint16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeInt32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeUint32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeInt64(t,i){this.writeInt32(t,Number(BigInt.asIntN(32,i))),this.writeInt32(t+4,Number(BigInt.asIntN(32,i>>BigInt(32))))}writeUint64(t,i){this.writeUint32(t,Number(BigInt.asUintN(32,i))),this.writeUint32(t+4,Number(BigInt.asUintN(32,i>>BigInt(32))))}writeFloat32(t,i){Zd[0]=i,this.writeInt32(t,Cn[0])}writeFloat64(t,i){tp[0]=i,this.writeInt32(t,Cn[yo?0:1]),this.writeInt32(t+4,Cn[yo?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Oi+rn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let i=0;i<rn;i++)t+=String.fromCharCode(this.readInt8(this.position_+Oi+i));return t}__offset(t,i){const n=t-this.readInt32(t);return i<this.readInt16(n)?this.readInt16(n+i):0}__union(t,i){return t.bb_pos=i+this.readInt32(i),t.bb=this,t}__string(t,i){t+=this.readInt32(t);const n=this.readInt32(t);t+=Oi;const r=this.bytes_.subarray(t,t+n);return i===Nl.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(t,i){return typeof t=="string"?this.__string(i):this.__union(t,i)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Oi}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=rn)throw new Error("FlatBuffers: file identifier must be length "+rn);for(let i=0;i<rn;i++)if(t.charCodeAt(i)!=this.readInt8(this.position()+Oi+i))return!1;return!0}createScalarList(t,i){const n=[];for(let r=0;r<i;++r){const s=t(r);s!==null&&n.push(s)}return n}createObjList(t,i){const n=[];for(let r=0;r<i;++r){const s=t(r);s!==null&&n.push(s.unpack())}return n}},wm=class Sm{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let i;t?i=t:i=1024,this.bb=ps.allocate(i),this.space=i}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,i){t>this.minalign&&(this.minalign=t);const n=~(this.bb.capacity()-this.space+i)+1&t-1;for(;this.space<n+t+i;){const r=this.bb.capacity();this.bb=Sm.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)}pad(t){for(let i=0;i<t;i++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,i,n){(this.force_defaults||i!=n)&&(this.addInt8(i),this.slot(t))}addFieldInt16(t,i,n){(this.force_defaults||i!=n)&&(this.addInt16(i),this.slot(t))}addFieldInt32(t,i,n){(this.force_defaults||i!=n)&&(this.addInt32(i),this.slot(t))}addFieldInt64(t,i,n){(this.force_defaults||i!==n)&&(this.addInt64(i),this.slot(t))}addFieldFloat32(t,i,n){(this.force_defaults||i!=n)&&(this.addFloat32(i),this.slot(t))}addFieldFloat64(t,i,n){(this.force_defaults||i!=n)&&(this.addFloat64(i),this.slot(t))}addFieldOffset(t,i,n){(this.force_defaults||i!=n)&&(this.addOffset(i),this.slot(t))}addFieldStruct(t,i,n){i!=n&&(this.nested(i),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const i=t.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=i<<1,r=ps.allocate(n);return r.setPosition(n-i),r.bytes().set(t.bytes(),n-i),r}addOffset(t){this.prep(Oi,0),this.writeInt32(this.offset()-t+Oi)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let i=0;i<t;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let i=this.vtable_in_use-1;for(;i>=0&&this.vtable[i]==0;i--);const n=i+1;for(;i>=0;i--)this.addInt16(this.vtable[i]!=0?t-this.vtable[i]:0);const r=2;this.addInt16(t-this.object_start);const s=(n+r)*Yu;this.addInt16(s);let a=0;const o=this.space;t:for(i=0;i<this.vtables.length;i++){const c=this.bb.capacity()-this.vtables[i];if(s==this.bb.readInt16(c)){for(let u=Yu;u<s;u+=Yu)if(this.bb.readInt16(o+u)!=this.bb.readInt16(c+u))continue t;a=this.vtables[i];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,i,n){const r=n?gt:0;if(i){const s=i;if(this.prep(this.minalign,Oi+rn+r),s.length!=rn)throw new TypeError("FlatBuffers: file identifier must be length "+rn);for(let a=rn-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Oi+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,i){this.finish(t,i,!0)}requiredField(t,i){const n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(!(i<this.bb.readInt16(r)&&this.bb.readInt16(r+i)!=0))throw new TypeError("FlatBuffers: field "+i+" must be set")}startVector(t,i,n){this.notNested(),this.vector_num_elems=i,this.prep(Oi,t*i),this.prep(n,t*i)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const i=this.createString(t);return this.string_maps.set(t,i),i}createString(t){if(t==null)return 0;let i;return t instanceof Uint8Array?i=t:i=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length),this.bb.bytes().set(i,this.space),this.endVector()}createByteVector(t){return t==null?0:(this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const i=[];for(let n=0;n<t.length;++n){const r=t[n];if(r!==null)i.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return i}createStructOffsetList(t,i){return i(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var ac;(function(e){e[e.BUFFER=0]="BUFFER"})(ac||(ac={}));var oc;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(oc||(oc={}));let kA=class nr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBodyCompression(t,i){return(i||new nr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,i){return t.setPosition(t.position()+gt),(i||new nr).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):oc.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):ac.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,i){t.addFieldInt8(0,i,oc.LZ4_FRAME)}static addMethod(t,i){t.addFieldInt8(1,i,ac.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,i,n){return nr.startBodyCompression(t),nr.addCodec(t,i),nr.addMethod(t,n),nr.endBodyCompression(t)}},Im=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,i,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(i??0)),t.offset()}},xm=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,i,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(i??0)),t.offset()}},Qi=class Dl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsRecordBatch(t,i){return(i||new Dl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,i){return t.setPosition(t.position()+gt),(i||new Dl).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new xm).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new Im).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new kA).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addNodes(t,i){t.addFieldOffset(1,i,0)}static startNodesVector(t,i){t.startVector(16,i,8)}static addBuffers(t,i){t.addFieldOffset(2,i,0)}static startBuffersVector(t,i){t.startVector(16,i,8)}static addCompression(t,i){t.addFieldOffset(3,i,0)}static endRecordBatch(t){return t.endObject()}},Nr=class Fl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryBatch(t,i){return(i||new Fl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,i){return t.setPosition(t.position()+gt),(i||new Fl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Qi).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addData(t,i){t.addFieldOffset(1,i,0)}static addIsDelta(t,i){t.addFieldInt8(2,+i,0)}static endDictionaryBatch(t){return t.endObject()}};var ys;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(ys||(ys={}));var cc;(function(e){e[e.DenseArray=0]="DenseArray"})(cc||(cc={}));let Xr=class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInt(t,i){return(i||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,i){return t.setPosition(t.position()+gt),(i||new rr).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,i){t.addFieldInt32(0,i,0)}static addIsSigned(t,i){t.addFieldInt8(1,+i,0)}static endInt(t){return t.endObject()}static createInt(t,i,n){return rr.startInt(t),rr.addBitWidth(t,i),rr.addIsSigned(t,n),rr.endInt(t)}},Dr=class kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryEncoding(t,i){return(i||new kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,i){return t.setPosition(t.position()+gt),(i||new kl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Xr).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):cc.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addIndexType(t,i){t.addFieldOffset(1,i,0)}static addIsOrdered(t,i){t.addFieldInt8(2,+i,0)}static addDictionaryKind(t,i){t.addFieldInt16(3,i,cc.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},Ye=class sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsKeyValue(t,i){return(i||new sr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,i){return t.setPosition(t.position()+gt),(i||new sr).__init(t.readInt32(t.position())+t.position(),t)}key(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}value(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,i){t.addFieldOffset(0,i,0)}static addValue(t,i){t.addFieldOffset(1,i,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,i,n){return sr.startKeyValue(t),sr.addKey(t,i),sr.addValue(t,n),sr.endKeyValue(t)}},ep=class ea{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBinary(t,i){return(i||new ea).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,i){return t.setPosition(t.position()+gt),(i||new ea).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return ea.startBinary(t),ea.endBinary(t)}},ip=class ia{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBool(t,i){return(i||new ia).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,i){return t.setPosition(t.position()+gt),(i||new ia).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return ia.startBool(t),ia.endBool(t)}},Eo=class Fr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDate(t,i){return(i||new Fr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,i){return t.setPosition(t.position()+gt),(i||new Fr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ke.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,Ke.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,i){return Fr.startDate(t),Fr.addUnit(t,i),Fr.endDate(t)}},kr=class Tn{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDecimal(t,i){return(i||new Tn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,i){return t.setPosition(t.position()+gt),(i||new Tn).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,i){t.addFieldInt32(0,i,0)}static addScale(t,i){t.addFieldInt32(1,i,0)}static addBitWidth(t,i){t.addFieldInt32(2,i,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,i,n,r){return Tn.startDecimal(t),Tn.addPrecision(t,i),Tn.addScale(t,n),Tn.addBitWidth(t,r),Tn.endDecimal(t)}},Oo=class Cr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDuration(t,i){return(i||new Cr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,i){return t.setPosition(t.position()+gt),(i||new Cr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):R.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,R.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,i){return Cr.startDuration(t),Cr.addUnit(t,i),Cr.endDuration(t)}},To=class Lr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeBinary(t,i){return(i||new Lr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,i){return t.setPosition(t.position()+gt),(i||new Lr).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,i){return Lr.startFixedSizeBinary(t),Lr.addByteWidth(t,i),Lr.endFixedSizeBinary(t)}},No=class Rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeList(t,i){return(i||new Rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,i){return t.setPosition(t.position()+gt),(i||new Rr).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,i){return Rr.startFixedSizeList(t),Rr.addListSize(t,i),Rr.endFixedSizeList(t)}},Do=class Mr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFloatingPoint(t,i){return(i||new Mr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,i){return t.setPosition(t.position()+gt),(i||new Mr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ae.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,i){t.addFieldInt16(0,i,ae.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,i){return Mr.startFloatingPoint(t),Mr.addPrecision(t,i),Mr.endFloatingPoint(t)}},Fo=class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInterval(t,i){return(i||new Ur).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,i){return t.setPosition(t.position()+gt),(i||new Ur).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Mi.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,Mi.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,i){return Ur.startInterval(t),Ur.addUnit(t,i),Ur.endInterval(t)}},np=class na{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsLargeBinary(t,i){return(i||new na).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,i){return t.setPosition(t.position()+gt),(i||new na).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return na.startLargeBinary(t),na.endLargeBinary(t)}},rp=class ra{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsLargeUtf8(t,i){return(i||new ra).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,i){return t.setPosition(t.position()+gt),(i||new ra).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return ra.startLargeUtf8(t),ra.endLargeUtf8(t)}},sp=class sa{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsList(t,i){return(i||new sa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,i){return t.setPosition(t.position()+gt),(i||new sa).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return sa.startList(t),sa.endList(t)}},ko=class Pr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMap(t,i){return(i||new Pr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,i){return t.setPosition(t.position()+gt),(i||new Pr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,i){t.addFieldInt8(0,+i,0)}static endMap(t){return t.endObject()}static createMap(t,i){return Pr.startMap(t),Pr.addKeysSorted(t,i),Pr.endMap(t)}},ap=class aa{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsNull(t,i){return(i||new aa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,i){return t.setPosition(t.position()+gt),(i||new aa).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return aa.startNull(t),aa.endNull(t)}},op=class oa{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsStruct_(t,i){return(i||new oa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,i){return t.setPosition(t.position()+gt),(i||new oa).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return oa.startStruct_(t),oa.endStruct_(t)}},ca=class ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTime(t,i){return(i||new ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,i){return t.setPosition(t.position()+gt),(i||new ar).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):R.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,R.MILLISECOND)}static addBitWidth(t,i){t.addFieldInt32(1,i,32)}static endTime(t){return t.endObject()}static createTime(t,i,n){return ar.startTime(t),ar.addUnit(t,i),ar.addBitWidth(t,n),ar.endTime(t)}},ua=class or{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTimestamp(t,i){return(i||new or).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,i){return t.setPosition(t.position()+gt),(i||new or).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):R.SECOND}timezone(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,R.SECOND)}static addTimezone(t,i){t.addFieldOffset(1,i,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,i,n){return or.startTimestamp(t),or.addUnit(t,i),or.addTimezone(t,n),or.endTimestamp(t)}},cr=class ur{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUnion(t,i){return(i||new ur).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,i){return t.setPosition(t.position()+gt),(i||new ur).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):oe.Sparse}typeIds(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb.__vector(this.bb_pos+i)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,i){t.addFieldInt16(0,i,oe.Sparse)}static addTypeIds(t,i){t.addFieldOffset(1,i,0)}static createTypeIdsVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addInt32(i[n]);return t.endVector()}static startTypeIdsVector(t,i){t.startVector(4,i,4)}static endUnion(t){return t.endObject()}static createUnion(t,i,n){return ur.startUnion(t),ur.addMode(t,i),ur.addTypeIds(t,n),ur.endUnion(t)}},cp=class la{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUtf8(t,i){return(i||new la).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,i){return t.setPosition(t.position()+gt),(i||new la).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return la.startUtf8(t),la.endUtf8(t)}};var It;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(It||(It={}));let Ue=class Co{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsField(t,i){return(i||new Co).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,i){return t.setPosition(t.position()+gt),(i||new Co).__init(t.readInt32(t.position())+t.position(),t)}name(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):It.NONE}type(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__union(t,this.bb_pos+i):null}dictionary(t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Dr).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}children(t,i){const n=this.bb.__offset(this.bb_pos,14);return n?(i||new Co).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,16);return n?(i||new Ye).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,i){t.addFieldOffset(0,i,0)}static addNullable(t,i){t.addFieldInt8(1,+i,0)}static addTypeType(t,i){t.addFieldInt8(2,i,It.NONE)}static addType(t,i){t.addFieldOffset(3,i,0)}static addDictionary(t,i){t.addFieldOffset(4,i,0)}static addChildren(t,i){t.addFieldOffset(5,i,0)}static createChildrenVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startChildrenVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(6,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endField(t){return t.endObject()}},Si=class Hi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsSchema(t,i){return(i||new Hi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,i){return t.setPosition(t.position()+gt),(i||new Hi).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ys.Little}fields(t,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new Ue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new Ye).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,i){t.addFieldInt16(0,i,ys.Little)}static addFields(t,i){t.addFieldOffset(1,i,0)}static createFieldsVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startFieldsVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(2,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static addFeatures(t,i){t.addFieldOffset(3,i,0)}static createFeaturesVector(t,i){t.startVector(8,i.length,8);for(let n=i.length-1;n>=0;n--)t.addInt64(i[n]);return t.endVector()}static startFeaturesVector(t,i){t.startVector(8,i,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,i){t.finish(i)}static finishSizePrefixedSchemaBuffer(t,i){t.finish(i,void 0,!0)}static createSchema(t,i,n,r,s){return Hi.startSchema(t),Hi.addEndianness(t,i),Hi.addFields(t,n),Hi.addCustomMetadata(t,r),Hi.addFeatures(t,s),Hi.endSchema(t)}};var lt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(lt||(lt={}));var m;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(m||(m={}));var Xi;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Xi||(Xi={}));const CA=void 0;function Ta(e){if(e===null)return"null";if(e===CA)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Ta(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,i)=>typeof i=="bigint"?`${i}`:i)}function St(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function Am(e,t){return St(e/t)+St(e%t)/St(t)}const LA=Symbol.for("isArrowBigNum");function yi(e,...t){return t.length===0?Object.setPrototypeOf(vt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}yi.prototype[LA]=!0;yi.prototype.toJSON=function(){return`"${Da(this)}"`};yi.prototype.valueOf=function(e){return Bm(this,e)};yi.prototype.toString=function(){return Da(this)};yi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Bm(this);case"string":return Da(this);case"default":return UA(this)}return Da(this)};function rs(...e){return yi.apply(this,e)}function ss(...e){return yi.apply(this,e)}function Na(...e){return yi.apply(this,e)}Object.setPrototypeOf(rs.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ss.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Na.prototype,Object.create(Uint32Array.prototype));Object.assign(rs.prototype,yi.prototype,{constructor:rs,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(ss.prototype,yi.prototype,{constructor:ss,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Na.prototype,yi.prototype,{constructor:Na,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const RA=BigInt(4294967296)*BigInt(4294967296),MA=RA-BigInt(1);function Bm(e,t){const{buffer:i,byteOffset:n,byteLength:r,signed:s}=e,a=new BigUint64Array(i,n,r/8),o=s&&a.at(-1)&BigInt(1)<<BigInt(63);let c=BigInt(0),u=0;if(o){for(const l of a)c|=(l^MA)*(BigInt(1)<<BigInt(64*u++));c*=BigInt(-1),c-=BigInt(1)}else for(const l of a)c|=l*(BigInt(1)<<BigInt(64*u++));if(typeof t=="number"){const l=BigInt(Math.pow(10,t)),h=c/l,d=c%l;return St(h)+St(d)/St(l)}return St(c)}function Da(e){if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Hu(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Hu(e);t=t.slice();let n=1;for(let s=0;s<t.length;s++){const a=t[s],o=~a+n;t[s]=o,n&=a===0?1:0}return`-${Hu(t)}`}function UA(e){return e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Da(e)}function Hu(e){let t="";const i=new Uint32Array(2);let n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let s=-1;const a=n.length-1;do{for(i[0]=n[s=0];s<a;)n[s++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+n[s];n[s]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,t=`${i[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}let PA=class Em{static new(t,i){switch(i){case!0:return new rs(t);case!1:return new ss(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new rs(t)}return t.byteLength===16?new Na(t):new ss(t)}static signed(t){return new rs(t)}static unsigned(t){return new ss(t)}static decimal(t){return new Na(t)}constructor(t,i){return Em.new(t,i)}};var Om,Tm,Nm,Dm,Fm,km,Cm,Lm,Rm,Mm,Um,Pm,$m,Vm,jm,zm,Wm,qm,Ym,Hm,Gm,Km;let x=class Cl{static isNull(t){return(t==null?void 0:t.typeId)===m.Null}static isInt(t){return(t==null?void 0:t.typeId)===m.Int}static isFloat(t){return(t==null?void 0:t.typeId)===m.Float}static isBinary(t){return(t==null?void 0:t.typeId)===m.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===m.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===m.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===m.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===m.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===m.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===m.Date}static isTime(t){return(t==null?void 0:t.typeId)===m.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===m.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===m.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===m.Duration}static isList(t){return(t==null?void 0:t.typeId)===m.List}static isStruct(t){return(t==null?void 0:t.typeId)===m.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===m.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===m.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===m.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===m.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===m.Dictionary}static isDenseUnion(t){return Cl.isUnion(t)&&t.mode===oe.Dense}static isSparseUnion(t){return Cl.isUnion(t)&&t.mode===oe.Sparse}constructor(t){this.typeId=t}};Om=Symbol.toStringTag;x[Om]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(x.prototype);let Pn=class extends x{constructor(){super(m.Null)}toString(){return"Null"}};Tm=Symbol.toStringTag;Pn[Tm]=(e=>e[Symbol.toStringTag]="Null")(Pn.prototype);let wr=class extends x{constructor(t,i){super(m.Int),this.isSigned=t,this.bitWidth=i}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};Nm=Symbol.toStringTag;wr[Nm]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(wr.prototype);let Fa=class extends wr{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(Fa.prototype,"ArrayType",{value:Int32Array});let uc=class extends x{constructor(t){super(m.Float),this.precision=t}get ArrayType(){switch(this.precision){case ae.HALF:return Uint16Array;case ae.SINGLE:return Float32Array;case ae.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};Dm=Symbol.toStringTag;uc[Dm]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(uc.prototype);let lc=class extends x{constructor(){super(m.Binary)}toString(){return"Binary"}};Fm=Symbol.toStringTag;lc[Fm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(lc.prototype);let hc=class extends x{constructor(){super(m.LargeBinary)}toString(){return"LargeBinary"}};km=Symbol.toStringTag;hc[km]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(hc.prototype);let fc=class extends x{constructor(){super(m.Utf8)}toString(){return"Utf8"}};Cm=Symbol.toStringTag;fc[Cm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(fc.prototype);let dc=class extends x{constructor(){super(m.LargeUtf8)}toString(){return"LargeUtf8"}};Lm=Symbol.toStringTag;dc[Lm]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(dc.prototype);let pc=class extends x{constructor(){super(m.Bool)}toString(){return"Bool"}};Rm=Symbol.toStringTag;pc[Rm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(pc.prototype);let yc=class extends x{constructor(t,i,n=128){super(m.Decimal),this.scale=t,this.precision=i,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Mm=Symbol.toStringTag;yc[Mm]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(yc.prototype);let mc=class extends x{constructor(t){super(m.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Ke[this.unit]}>`}get ArrayType(){return this.unit===Ke.DAY?Int32Array:BigInt64Array}};Um=Symbol.toStringTag;mc[Um]=(e=>(e.unit=null,e[Symbol.toStringTag]="Date"))(mc.prototype);let gc=class extends x{constructor(t,i){super(m.Time),this.unit=t,this.bitWidth=i}toString(){return`Time${this.bitWidth}<${R[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};Pm=Symbol.toStringTag;gc[Pm]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(gc.prototype);let _c=class extends x{constructor(t,i){super(m.Timestamp),this.unit=t,this.timezone=i}toString(){return`Timestamp<${R[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};$m=Symbol.toStringTag;_c[$m]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Timestamp"))(_c.prototype);let bc=class extends x{constructor(t){super(m.Interval),this.unit=t}toString(){return`Interval<${Mi[this.unit]}>`}};Vm=Symbol.toStringTag;bc[Vm]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(bc.prototype);let vc=class extends x{constructor(t){super(m.Duration),this.unit=t}toString(){return`Duration<${R[this.unit]}>`}};jm=Symbol.toStringTag;vc[jm]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(vc.prototype);let wc=class extends x{constructor(t){super(m.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};zm=Symbol.toStringTag;wc[zm]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(wc.prototype);let ue=class extends x{constructor(t){super(m.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Wm=Symbol.toStringTag;ue[Wm]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ue.prototype);let Sc=class extends x{constructor(t,i,n){super(m.Union),this.mode=t,this.children=n,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};qm=Symbol.toStringTag;Sc[qm]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Sc.prototype);let Ic=class extends x{constructor(t){super(m.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Ym=Symbol.toStringTag;Ic[Ym]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Ic.prototype);let xc=class extends x{constructor(t,i){super(m.FixedSizeList),this.listSize=t,this.children=[i]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Hm=Symbol.toStringTag;xc[Hm]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(xc.prototype);let Ac=class extends x{constructor(t,i=!1){var n,r,s;if(super(m.Map),this.children=[t],this.keysSorted=i,t&&(t.name="entries",!((n=t==null?void 0:t.type)===null||n===void 0)&&n.children)){const a=(r=t==null?void 0:t.type)===null||r===void 0?void 0:r.children[0];a&&(a.name="key");const o=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];o&&(o.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Gm=Symbol.toStringTag;Ac[Gm]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Ac.prototype);const $A=(e=>()=>++e)(-1);let ms=class extends x{constructor(t,i,n,r){super(m.Dictionary),this.indices=i,this.dictionary=t,this.isOrdered=r||!1,this.id=n==null?$A():St(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};Km=Symbol.toStringTag;ms[Km]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(ms.prototype);function Zi(e){const t=e;switch(e.typeId){case m.Decimal:return e.bitWidth/32;case m.Interval:return 1+t.unit;case m.FixedSizeList:return t.listSize;case m.FixedSizeBinary:return t.byteWidth;default:return 1}}let X=class{visitMany(t,...i){return t.map((n,r)=>this.visit(n,...i.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,i=!0){return VA(this,t,i)}getVisitFnByTypeId(t,i=!0){return $r(this,t,i)}visitNull(t,...i){return null}visitBool(t,...i){return null}visitInt(t,...i){return null}visitFloat(t,...i){return null}visitUtf8(t,...i){return null}visitLargeUtf8(t,...i){return null}visitBinary(t,...i){return null}visitLargeBinary(t,...i){return null}visitFixedSizeBinary(t,...i){return null}visitDate(t,...i){return null}visitTimestamp(t,...i){return null}visitTime(t,...i){return null}visitDecimal(t,...i){return null}visitList(t,...i){return null}visitStruct(t,...i){return null}visitUnion(t,...i){return null}visitDictionary(t,...i){return null}visitInterval(t,...i){return null}visitDuration(t,...i){return null}visitFixedSizeList(t,...i){return null}visitMap(t,...i){return null}};function VA(e,t,i=!0){return typeof t=="number"?$r(e,t,i):typeof t=="string"&&t in m?$r(e,m[t],i):t&&t instanceof x?$r(e,up(t),i):t!=null&&t.type&&t.type instanceof x?$r(e,up(t.type),i):$r(e,m.NONE,i)}function $r(e,t,i=!0){let n=null;switch(t){case m.Null:n=e.visitNull;break;case m.Bool:n=e.visitBool;break;case m.Int:n=e.visitInt;break;case m.Int8:n=e.visitInt8||e.visitInt;break;case m.Int16:n=e.visitInt16||e.visitInt;break;case m.Int32:n=e.visitInt32||e.visitInt;break;case m.Int64:n=e.visitInt64||e.visitInt;break;case m.Uint8:n=e.visitUint8||e.visitInt;break;case m.Uint16:n=e.visitUint16||e.visitInt;break;case m.Uint32:n=e.visitUint32||e.visitInt;break;case m.Uint64:n=e.visitUint64||e.visitInt;break;case m.Float:n=e.visitFloat;break;case m.Float16:n=e.visitFloat16||e.visitFloat;break;case m.Float32:n=e.visitFloat32||e.visitFloat;break;case m.Float64:n=e.visitFloat64||e.visitFloat;break;case m.Utf8:n=e.visitUtf8;break;case m.LargeUtf8:n=e.visitLargeUtf8;break;case m.Binary:n=e.visitBinary;break;case m.LargeBinary:n=e.visitLargeBinary;break;case m.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case m.Date:n=e.visitDate;break;case m.DateDay:n=e.visitDateDay||e.visitDate;break;case m.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case m.Timestamp:n=e.visitTimestamp;break;case m.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case m.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case m.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case m.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case m.Time:n=e.visitTime;break;case m.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case m.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case m.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case m.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case m.Decimal:n=e.visitDecimal;break;case m.List:n=e.visitList;break;case m.Struct:n=e.visitStruct;break;case m.Union:n=e.visitUnion;break;case m.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case m.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case m.Dictionary:n=e.visitDictionary;break;case m.Interval:n=e.visitInterval;break;case m.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case m.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case m.Duration:n=e.visitDuration;break;case m.DurationSecond:n=e.visitDurationSecond||e.visitDuration;break;case m.DurationMillisecond:n=e.visitDurationMillisecond||e.visitDuration;break;case m.DurationMicrosecond:n=e.visitDurationMicrosecond||e.visitDuration;break;case m.DurationNanosecond:n=e.visitDurationNanosecond||e.visitDuration;break;case m.FixedSizeList:n=e.visitFixedSizeList;break;case m.Map:n=e.visitMap;break}if(typeof n=="function")return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${m[t]}'`)}function up(e){switch(e.typeId){case m.Null:return m.Null;case m.Int:{const{bitWidth:t,isSigned:i}=e;switch(t){case 8:return i?m.Int8:m.Uint8;case 16:return i?m.Int16:m.Uint16;case 32:return i?m.Int32:m.Uint32;case 64:return i?m.Int64:m.Uint64}return m.Int}case m.Float:switch(e.precision){case ae.HALF:return m.Float16;case ae.SINGLE:return m.Float32;case ae.DOUBLE:return m.Float64}return m.Float;case m.Binary:return m.Binary;case m.LargeBinary:return m.LargeBinary;case m.Utf8:return m.Utf8;case m.LargeUtf8:return m.LargeUtf8;case m.Bool:return m.Bool;case m.Decimal:return m.Decimal;case m.Time:switch(e.unit){case R.SECOND:return m.TimeSecond;case R.MILLISECOND:return m.TimeMillisecond;case R.MICROSECOND:return m.TimeMicrosecond;case R.NANOSECOND:return m.TimeNanosecond}return m.Time;case m.Timestamp:switch(e.unit){case R.SECOND:return m.TimestampSecond;case R.MILLISECOND:return m.TimestampMillisecond;case R.MICROSECOND:return m.TimestampMicrosecond;case R.NANOSECOND:return m.TimestampNanosecond}return m.Timestamp;case m.Date:switch(e.unit){case Ke.DAY:return m.DateDay;case Ke.MILLISECOND:return m.DateMillisecond}return m.Date;case m.Interval:switch(e.unit){case Mi.DAY_TIME:return m.IntervalDayTime;case Mi.YEAR_MONTH:return m.IntervalYearMonth}return m.Interval;case m.Duration:switch(e.unit){case R.SECOND:return m.DurationSecond;case R.MILLISECOND:return m.DurationMillisecond;case R.MICROSECOND:return m.DurationMicrosecond;case R.NANOSECOND:return m.DurationNanosecond}return m.Duration;case m.Map:return m.Map;case m.List:return m.List;case m.Struct:return m.Struct;case m.Union:switch(e.mode){case oe.Dense:return m.DenseUnion;case oe.Sparse:return m.SparseUnion}return m.Union;case m.FixedSizeBinary:return m.FixedSizeBinary;case m.FixedSizeList:return m.FixedSizeList;case m.Dictionary:return m.Dictionary}throw new Error(`Unrecognized type '${m[e.typeId]}'`)}X.prototype.visitInt8=null;X.prototype.visitInt16=null;X.prototype.visitInt32=null;X.prototype.visitInt64=null;X.prototype.visitUint8=null;X.prototype.visitUint16=null;X.prototype.visitUint32=null;X.prototype.visitUint64=null;X.prototype.visitFloat16=null;X.prototype.visitFloat32=null;X.prototype.visitFloat64=null;X.prototype.visitDateDay=null;X.prototype.visitDateMillisecond=null;X.prototype.visitTimestampSecond=null;X.prototype.visitTimestampMillisecond=null;X.prototype.visitTimestampMicrosecond=null;X.prototype.visitTimestampNanosecond=null;X.prototype.visitTimeSecond=null;X.prototype.visitTimeMillisecond=null;X.prototype.visitTimeMicrosecond=null;X.prototype.visitTimeNanosecond=null;X.prototype.visitDenseUnion=null;X.prototype.visitSparseUnion=null;X.prototype.visitIntervalDayTime=null;X.prototype.visitIntervalYearMonth=null;X.prototype.visitDuration=null;X.prototype.visitDurationSecond=null;X.prototype.visitDurationMillisecond=null;X.prototype.visitDurationMicrosecond=null;X.prototype.visitDurationNanosecond=null;const Jm=new Float64Array(1),Or=new Uint32Array(Jm.buffer);function Qm(e){const t=(e&31744)>>10,i=(e&1023)/1024,n=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,t-15)*(1+i)}function jA(e){if(e!==e)return 32256;Jm[0]=e;const t=(Or[1]&2147483648)>>16&65535;let i=Or[1]&2146435072,n=0;return i>=1089470464?Or[0]>0?i=31744:(i=(i&2080374784)>>16,n=(Or[1]&1048575)>>10):i<=1056964608?(n=1048576+(Or[1]&1048575),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=(Or[1]&1048575)+512>>10),t|i|n&65535}let M=class extends X{};function z(e){return(t,i,n)=>{if(t.setValid(i,n!=null))return e(t,i,n)}}const zA=(e,t,i)=>{e[t]=Math.floor(i/864e5)},Xm=(e,t,i,n)=>{if(i+1<t.length){const r=St(t[i]),s=St(t[i+1]);e.set(n.subarray(0,s-r),r)}},WA=({offset:e,values:t},i,n)=>{const r=e+i;n?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},_n=({values:e},t,i)=>{e[t]=i},Dh=({values:e},t,i)=>{e[t]=i},Zm=({values:e},t,i)=>{e[t]=jA(i)},qA=(e,t,i)=>{switch(e.type.precision){case ae.HALF:return Zm(e,t,i);case ae.SINGLE:case ae.DOUBLE:return Dh(e,t,i)}},tg=({values:e},t,i)=>{zA(e,t,i.valueOf())},eg=({values:e},t,i)=>{e[t]=BigInt(i)},YA=({stride:e,values:t},i,n)=>{t.set(n.subarray(0,e),e*i)},ig=({values:e,valueOffsets:t},i,n)=>Xm(e,t,i,n),ng=({values:e,valueOffsets:t},i,n)=>Xm(e,t,i,Oh(n)),HA=(e,t,i)=>{e.type.unit===Ke.DAY?tg(e,t,i):eg(e,t,i)},rg=({values:e},t,i)=>{e[t]=BigInt(i/1e3)},sg=({values:e},t,i)=>{e[t]=BigInt(i)},ag=({values:e},t,i)=>{e[t]=BigInt(i*1e3)},og=({values:e},t,i)=>{e[t]=BigInt(i*1e6)},GA=(e,t,i)=>{switch(e.type.unit){case R.SECOND:return rg(e,t,i);case R.MILLISECOND:return sg(e,t,i);case R.MICROSECOND:return ag(e,t,i);case R.NANOSECOND:return og(e,t,i)}},cg=({values:e},t,i)=>{e[t]=i},ug=({values:e},t,i)=>{e[t]=i},lg=({values:e},t,i)=>{e[t]=i},hg=({values:e},t,i)=>{e[t]=i},KA=(e,t,i)=>{switch(e.type.unit){case R.SECOND:return cg(e,t,i);case R.MILLISECOND:return ug(e,t,i);case R.MICROSECOND:return lg(e,t,i);case R.NANOSECOND:return hg(e,t,i)}},JA=({values:e,stride:t},i,n)=>{e.set(n.subarray(0,t),t*i)},QA=(e,t,i)=>{const n=e.children[0],r=e.valueOffsets,s=Je.getVisitFn(n);if(Array.isArray(i))for(let a=-1,o=r[t],c=r[t+1];o<c;)s(n,o++,i[++a]);else for(let a=-1,o=r[t],c=r[t+1];o<c;)s(n,o++,i.get(++a))},XA=(e,t,i)=>{const n=e.children[0],{valueOffsets:r}=e,s=Je.getVisitFn(n);let{[t]:a,[t+1]:o}=r;const c=i instanceof Map?i.entries():Object.entries(i);for(const u of c)if(s(n,a,u),++a>=o)break},ZA=(e,t)=>(i,n,r,s)=>n&&i(n,e,t[s]),t2=(e,t)=>(i,n,r,s)=>n&&i(n,e,t.get(s)),e2=(e,t)=>(i,n,r,s)=>n&&i(n,e,t.get(r.name)),i2=(e,t)=>(i,n,r,s)=>n&&i(n,e,t[r.name]),n2=(e,t,i)=>{const n=e.type.children.map(s=>Je.getVisitFn(s.type)),r=i instanceof Map?e2(t,i):i instanceof Ft?t2(t,i):Array.isArray(i)?ZA(t,i):i2(t,i);e.type.children.forEach((s,a)=>r(n[a],e.children[a],s,a))},r2=(e,t,i)=>{e.type.mode===oe.Dense?fg(e,t,i):dg(e,t,i)},fg=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];Je.visit(r,e.valueOffsets[t],i)},dg=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];Je.visit(r,t,i)},s2=(e,t,i)=>{var n;(n=e.dictionary)===null||n===void 0||n.set(e.values[t],i)},a2=(e,t,i)=>{e.type.unit===Mi.DAY_TIME?pg(e,t,i):yg(e,t,i)},pg=({values:e},t,i)=>{e.set(i.subarray(0,2),2*t)},yg=({values:e},t,i)=>{e[t]=i[0]*12+i[1]%12},mg=({values:e},t,i)=>{e[t]=i},gg=({values:e},t,i)=>{e[t]=i},_g=({values:e},t,i)=>{e[t]=i},bg=({values:e},t,i)=>{e[t]=i},o2=(e,t,i)=>{switch(e.type.unit){case R.SECOND:return mg(e,t,i);case R.MILLISECOND:return gg(e,t,i);case R.MICROSECOND:return _g(e,t,i);case R.NANOSECOND:return bg(e,t,i)}},c2=(e,t,i)=>{const{stride:n}=e,r=e.children[0],s=Je.getVisitFn(r);if(Array.isArray(i))for(let a=-1,o=t*n;++a<n;)s(r,o+a,i[a]);else for(let a=-1,o=t*n;++a<n;)s(r,o+a,i.get(a))};M.prototype.visitBool=z(WA);M.prototype.visitInt=z(_n);M.prototype.visitInt8=z(_n);M.prototype.visitInt16=z(_n);M.prototype.visitInt32=z(_n);M.prototype.visitInt64=z(_n);M.prototype.visitUint8=z(_n);M.prototype.visitUint16=z(_n);M.prototype.visitUint32=z(_n);M.prototype.visitUint64=z(_n);M.prototype.visitFloat=z(qA);M.prototype.visitFloat16=z(Zm);M.prototype.visitFloat32=z(Dh);M.prototype.visitFloat64=z(Dh);M.prototype.visitUtf8=z(ng);M.prototype.visitLargeUtf8=z(ng);M.prototype.visitBinary=z(ig);M.prototype.visitLargeBinary=z(ig);M.prototype.visitFixedSizeBinary=z(YA);M.prototype.visitDate=z(HA);M.prototype.visitDateDay=z(tg);M.prototype.visitDateMillisecond=z(eg);M.prototype.visitTimestamp=z(GA);M.prototype.visitTimestampSecond=z(rg);M.prototype.visitTimestampMillisecond=z(sg);M.prototype.visitTimestampMicrosecond=z(ag);M.prototype.visitTimestampNanosecond=z(og);M.prototype.visitTime=z(KA);M.prototype.visitTimeSecond=z(cg);M.prototype.visitTimeMillisecond=z(ug);M.prototype.visitTimeMicrosecond=z(lg);M.prototype.visitTimeNanosecond=z(hg);M.prototype.visitDecimal=z(JA);M.prototype.visitList=z(QA);M.prototype.visitStruct=z(n2);M.prototype.visitUnion=z(r2);M.prototype.visitDenseUnion=z(fg);M.prototype.visitSparseUnion=z(dg);M.prototype.visitDictionary=z(s2);M.prototype.visitInterval=z(a2);M.prototype.visitIntervalDayTime=z(pg);M.prototype.visitIntervalYearMonth=z(yg);M.prototype.visitDuration=z(o2);M.prototype.visitDurationSecond=z(mg);M.prototype.visitDurationMillisecond=z(gg);M.prototype.visitDurationMicrosecond=z(_g);M.prototype.visitDurationNanosecond=z(bg);M.prototype.visitFixedSizeList=z(c2);M.prototype.visitMap=z(XA);const Je=new M,ri=Symbol.for("parent"),as=Symbol.for("rowIndex");let Fh=class{constructor(t,i){return this[ri]=t,this[as]=i,new Proxy(this,new l2)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[as],i=this[ri],n=i.type.children,r={};for(let s=-1,a=n.length;++s<a;)r[n[s].name]=xe.visit(i.children[s],t);return r}toString(){return`{${[...this].map(([t,i])=>`${Ta(t)}: ${Ta(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new u2(this[ri],this[as])}},u2=class{constructor(t,i){this.childIndex=0,this.children=t.children,this.rowIndex=i,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,xe.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(Fh.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ri]:{writable:!0,enumerable:!1,configurable:!1,value:null},[as]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let l2=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ri].type.children.map(i=>i.name)}has(t,i){return t[ri].type.children.findIndex(n=>n.name===i)!==-1}getOwnPropertyDescriptor(t,i){if(t[ri].type.children.findIndex(n=>n.name===i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const n=t[ri].type.children.findIndex(r=>r.name===i);if(n!==-1){const r=xe.visit(t[ri].children[n],t[as]);return Reflect.set(t,i,r),r}}set(t,i,n){const r=t[ri].type.children.findIndex(s=>s.name===i);return r!==-1?(Je.visit(t[ri].children[r],t[as],n),Reflect.set(t,i,n)):Reflect.has(t,i)||typeof i=="symbol"?Reflect.set(t,i,n):!1}},E=class extends X{};function U(e){return(t,i)=>t.getValid(i)?e(t,i):null}const h2=(e,t)=>864e5*e[t],f2=(e,t)=>null,vg=(e,t,i)=>{if(i+1>=t.length)return null;const n=St(t[i]),r=St(t[i+1]);return e.subarray(n,r)},d2=({offset:e,values:t},i)=>{const n=e+i;return(t[n>>3]&1<<n%8)!==0},wg=({values:e},t)=>h2(e,t),Sg=({values:e},t)=>St(e[t]),Qn=({stride:e,values:t},i)=>t[e*i],p2=({stride:e,values:t},i)=>Qm(t[e*i]),Ig=({values:e},t)=>e[t],y2=({stride:e,values:t},i)=>t.subarray(e*i,e*(i+1)),xg=({values:e,valueOffsets:t},i)=>vg(e,t,i),Ag=({values:e,valueOffsets:t},i)=>{const n=vg(e,t,i);return n!==null?El(n):null},m2=({values:e},t)=>e[t],g2=({type:e,values:t},i)=>e.precision!==ae.HALF?t[i]:Qm(t[i]),_2=(e,t)=>e.type.unit===Ke.DAY?wg(e,t):Sg(e,t),Bg=({values:e},t)=>1e3*St(e[t]),Eg=({values:e},t)=>St(e[t]),Og=({values:e},t)=>Am(e[t],BigInt(1e3)),Tg=({values:e},t)=>Am(e[t],BigInt(1e6)),b2=(e,t)=>{switch(e.type.unit){case R.SECOND:return Bg(e,t);case R.MILLISECOND:return Eg(e,t);case R.MICROSECOND:return Og(e,t);case R.NANOSECOND:return Tg(e,t)}},Ng=({values:e},t)=>e[t],Dg=({values:e},t)=>e[t],Fg=({values:e},t)=>e[t],kg=({values:e},t)=>e[t],v2=(e,t)=>{switch(e.type.unit){case R.SECOND:return Ng(e,t);case R.MILLISECOND:return Dg(e,t);case R.MICROSECOND:return Fg(e,t);case R.NANOSECOND:return kg(e,t)}},w2=({values:e,stride:t},i)=>PA.decimal(e.subarray(t*i,t*(i+1))),S2=(e,t)=>{const{valueOffsets:i,stride:n,children:r}=e,{[t*n]:s,[t*n+1]:a}=i,c=r[0].slice(s,a-s);return new Ft([c])},I2=(e,t)=>{const{valueOffsets:i,children:n}=e,{[t]:r,[t+1]:s}=i,a=n[0];return new kh(a.slice(r,s-r))},x2=(e,t)=>new Fh(e,t),A2=(e,t)=>e.type.mode===oe.Dense?Cg(e,t):Lg(e,t),Cg=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return xe.visit(n,e.valueOffsets[t])},Lg=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return xe.visit(n,t)},B2=(e,t)=>{var i;return(i=e.dictionary)===null||i===void 0?void 0:i.get(e.values[t])},E2=(e,t)=>e.type.unit===Mi.DAY_TIME?Rg(e,t):Mg(e,t),Rg=({values:e},t)=>e.subarray(2*t,2*(t+1)),Mg=({values:e},t)=>{const i=e[t],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},Ug=({values:e},t)=>e[t],Pg=({values:e},t)=>e[t],$g=({values:e},t)=>e[t],Vg=({values:e},t)=>e[t],O2=(e,t)=>{switch(e.type.unit){case R.SECOND:return Ug(e,t);case R.MILLISECOND:return Pg(e,t);case R.MICROSECOND:return $g(e,t);case R.NANOSECOND:return Vg(e,t)}},T2=(e,t)=>{const{stride:i,children:n}=e,s=n[0].slice(t*i,i);return new Ft([s])};E.prototype.visitNull=U(f2);E.prototype.visitBool=U(d2);E.prototype.visitInt=U(m2);E.prototype.visitInt8=U(Qn);E.prototype.visitInt16=U(Qn);E.prototype.visitInt32=U(Qn);E.prototype.visitInt64=U(Ig);E.prototype.visitUint8=U(Qn);E.prototype.visitUint16=U(Qn);E.prototype.visitUint32=U(Qn);E.prototype.visitUint64=U(Ig);E.prototype.visitFloat=U(g2);E.prototype.visitFloat16=U(p2);E.prototype.visitFloat32=U(Qn);E.prototype.visitFloat64=U(Qn);E.prototype.visitUtf8=U(Ag);E.prototype.visitLargeUtf8=U(Ag);E.prototype.visitBinary=U(xg);E.prototype.visitLargeBinary=U(xg);E.prototype.visitFixedSizeBinary=U(y2);E.prototype.visitDate=U(_2);E.prototype.visitDateDay=U(wg);E.prototype.visitDateMillisecond=U(Sg);E.prototype.visitTimestamp=U(b2);E.prototype.visitTimestampSecond=U(Bg);E.prototype.visitTimestampMillisecond=U(Eg);E.prototype.visitTimestampMicrosecond=U(Og);E.prototype.visitTimestampNanosecond=U(Tg);E.prototype.visitTime=U(v2);E.prototype.visitTimeSecond=U(Ng);E.prototype.visitTimeMillisecond=U(Dg);E.prototype.visitTimeMicrosecond=U(Fg);E.prototype.visitTimeNanosecond=U(kg);E.prototype.visitDecimal=U(w2);E.prototype.visitList=U(S2);E.prototype.visitStruct=U(x2);E.prototype.visitUnion=U(A2);E.prototype.visitDenseUnion=U(Cg);E.prototype.visitSparseUnion=U(Lg);E.prototype.visitDictionary=U(B2);E.prototype.visitInterval=U(E2);E.prototype.visitIntervalDayTime=U(Rg);E.prototype.visitIntervalYearMonth=U(Mg);E.prototype.visitDuration=U(O2);E.prototype.visitDurationSecond=U(Ug);E.prototype.visitDurationMillisecond=U(Pg);E.prototype.visitDurationMicrosecond=U($g);E.prototype.visitDurationNanosecond=U(Vg);E.prototype.visitFixedSizeList=U(T2);E.prototype.visitMap=U(I2);const xe=new E,Vr=Symbol.for("keys"),os=Symbol.for("vals"),jr=Symbol.for("kKeysAsStrings"),Ll=Symbol.for("_kKeysAsStrings");let kh=class{constructor(t){return this[Vr]=new Ft([t.children[0]]).memoize(),this[os]=t.children[1],new Proxy(this,new D2)}get[jr](){return this[Ll]||(this[Ll]=Array.from(this[Vr].toArray(),String))}[Symbol.iterator](){return new N2(this[Vr],this[os])}get size(){return this[Vr].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Vr],i=this[os],n={};for(let r=-1,s=t.length;++r<s;)n[t.get(r)]=xe.visit(i,r);return n}toString(){return`{${[...this].map(([t,i])=>`${Ta(t)}: ${Ta(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},N2=class{constructor(t,i){this.keys=t,this.vals=i,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),xe.visit(this.vals,t)]})}},D2=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[jr]}has(t,i){return t[jr].includes(i)}getOwnPropertyDescriptor(t,i){if(t[jr].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const n=t[jr].indexOf(i);if(n!==-1){const r=xe.visit(Reflect.get(t,os),n);return Reflect.set(t,i,r),r}}set(t,i,n){const r=t[jr].indexOf(i);return r!==-1?(Je.visit(Reflect.get(t,os),r,n),Reflect.set(t,i,n)):Reflect.has(t,i)?Reflect.set(t,i,n):!1}};Object.defineProperties(kh.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Vr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[os]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ll]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let lp;function jg(e,t,i,n){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof i!="number"?r:i;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(lp=s,s=a,a=lp),a>r&&(a=r),n?n(e,s,a):[s,a]}const Ch=(e,t)=>e<0?t+e:e,hp=e=>e!==e;function Ds(e){if(typeof e!=="object"||e===null)return hp(e)?hp:i=>i===e;if(e instanceof Date){const i=e.valueOf();return n=>n instanceof Date?n.valueOf()===i:!1}return ArrayBuffer.isView(e)?i=>i?EA(e,i):!1:e instanceof Map?k2(e):Array.isArray(e)?F2(e):e instanceof Ft?C2(e):L2(e,!0)}function F2(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=Ds(e[i]);return du(t)}function k2(e){let t=-1;const i=[];for(const n of e.values())i[++t]=Ds(n);return du(i)}function C2(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=Ds(e.get(i));return du(t)}function L2(e,t=!1){const i=Object.keys(e);if(!t&&i.length===0)return()=>!1;const n=[];for(let r=-1,s=i.length;++r<s;)n[r]=Ds(e[i[r]]);return du(n,i)}function du(e,t){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return R2(e,i);case Map:return fp(e,i,i.keys());case kh:case Fh:case Object:case void 0:return fp(e,i,t||Object.keys(i))}return i instanceof Ft?M2(e,i):!1}}function R2(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t[n]))return!1;return!0}function M2(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t.get(n)))return!1;return!0}function fp(e,t,i){const n=i[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let c=s.next(),u=n.next(),l=r.next();for(;a<o&&!u.done&&!l.done&&!c.done&&!(u.value!==l.value||!e[a](c.value));++a,u=n.next(),l=r.next(),c=s.next());return a===o&&u.done&&l.done&&c.done?!0:(n.return&&n.return(),r.return&&r.return(),s.return&&s.return(),!1)}function zg(e,t,i,n){return(i&1<<n)!==0}function U2(e,t,i,n){return(i&1<<n)>>n}function Bc(e,t,i){const n=i.byteLength+7&-8;if(e>0||i.byteLength<n){const r=new Uint8Array(n);return r.set(e%8===0?i.subarray(e>>3):Ec(new Lh(i,e,t,null,zg)).subarray(0,n)),r}return i}function Ec(e){const t=[];let i=0,n=0,r=0;for(const a of e)a&&(r|=1<<n),++n===8&&(t[i++]=r,r=n=0);(i===0||n>0)&&(t[i++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let Lh=class{constructor(t,i,n,r,s){this.bytes=t,this.length=n,this.context=r,this.get=s,this.bit=i%8,this.byteIndex=i>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function Rl(e,t,i){if(i-t<=0)return 0;if(i-t<8){let s=0;for(const a of new Lh(e,t,i-t,e,U2))s+=a;return s}const n=i>>3<<3,r=t+(t%8===0?0:8-t%8);return Rl(e,t,r)+Rl(e,n,i)+P2(e,r>>3,n-r>>3)}function P2(e,t,i){let n=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=i===void 0?e.byteLength:r+i;for(;a-r>=4;)n+=Gu(s.getUint32(r)),r+=4;for(;a-r>=2;)n+=Gu(s.getUint16(r)),r+=2;for(;a-r>=1;)n+=Gu(s.getUint8(r)),r+=1;return n}function Gu(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const $2=-1;let xt=class Ml{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return x.isSparseUnion(t)?this.children.some(i=>i.nullable):x.isDenseUnion(t)?this.children.some(i=>i.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:i,values:n,nullBitmap:r,typeIds:s}=this;return i&&(t+=i.byteLength),n&&(t+=n.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){if(x.isUnion(this.type))return this.children.reduce((n,r)=>n+r.nullCount,0);let t=this._nullCount,i;return t<=$2&&(i=this.nullBitmap)&&(this._nullCount=t=i.length===0?0:this.length-Rl(i,this.offset,this.offset+this.length)),t}constructor(t,i,n,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof Ml?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Zi(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c)))}getValid(t){const{type:i}=this;if(x.isUnion(i)){const n=i,r=this.children[n.typeIdToChildIndex[this.typeIds[t]]],s=n.mode===oe.Dense?this.valueOffsets[t]:t;return r.getValid(s)}if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,i){let n;const{type:r}=this;if(x.isUnion(r)){const s=r,a=this.children[s.typeIdToChildIndex[this.typeIds[t]]],o=s.mode===oe.Dense?this.valueOffsets[t]:t;n=a.getValid(o),a.setValid(o,i)}else{let{nullBitmap:s}=this;const{offset:a,length:o}=this,c=a+t,u=1<<c%8,l=c>>3;(!s||s.byteLength<=l)&&(s=new Uint8Array((a+o+63&-64)>>3).fill(255),this.nullCount>0?(s.set(Bc(a,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:s})):Object.assign(this,{nullBitmap:s,_nullCount:0}));const h=s[l];n=(h&u)!==0,s[l]=i?h|u:h&~u}return n!==!!i&&(this._nullCount=this.nullCount+(i?-1:1)),i}clone(t=this.type,i=this.offset,n=this.length,r=this._nullCount,s=this,a=this.children){return new Ml(t,i,n,r,s,a,this.dictionary)}slice(t,i){const{stride:n,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?n:1,c=this._sliceBuffers(t,i,n,r);return this.clone(this.type,this.offset+t,i,a,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*i))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===m.Null)return this.clone(this.type,0,t,0);const{length:i,nullCount:n}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,i>>3);r[i>>3]=(1<<i-(i&-8))-1,n>0&&r.set(Bc(this.offset,i,this.nullBitmap),0);const s=this.buffers;return s[Xi.VALIDITY]=r,this.clone(this.type,0,t,n+(t-i),s)}_sliceBuffers(t,i,n,r){let s;const{buffers:a}=this;return(s=a[Xi.TYPE])&&(a[Xi.TYPE]=s.subarray(t,t+i)),(s=a[Xi.OFFSET])&&(a[Xi.OFFSET]=s.subarray(t,t+i+1))||(s=a[Xi.DATA])&&(a[Xi.DATA]=r===6?s:s.subarray(n*t,n*(t+i))),a}_sliceChildren(t,i,n){return t.map(r=>r.slice(i,n))}};xt.prototype.children=Object.freeze([]);let V2=class Lo extends X{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:i,["offset"]:n=0,["length"]:r=0}=t;return new xt(i,n,r,r)}visitBool(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitInt(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.data),s=rt(t.nullBitmap),a=Hs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new xt(i,n,o,c,[a,r,s])}visitLargeUtf8(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.data),s=rt(t.nullBitmap),a=Xd(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new xt(i,n,o,c,[a,r,s])}visitBinary(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.data),s=rt(t.nullBitmap),a=Hs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new xt(i,n,o,c,[a,r,s])}visitLargeBinary(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.data),s=rt(t.nullBitmap),a=Xd(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new xt(i,n,o,c,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length/Zi(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitDate(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length/Zi(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length/Zi(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitTime(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length/Zi(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length/Zi(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitList(t){const{["type"]:i,["offset"]:n=0,["child"]:r}=t,s=rt(t.nullBitmap),a=Hs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new xt(i,n,o,c,[a,void 0,s],[r])}visitStruct(t){const{["type"]:i,["offset"]:n=0,["children"]:r=[]}=t,s=rt(t.nullBitmap),{length:a=r.reduce((c,{length:u})=>Math.max(c,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:i,["offset"]:n=0,["children"]:r=[]}=t,s=vt(i.ArrayType,t.typeIds),{["length"]:a=s.length,["nullCount"]:o=-1}=t;if(x.isSparseUnion(i))return new xt(i,n,a,o,[void 0,void 0,void 0,s],r);const c=Hs(t.valueOffsets);return new xt(i,n,a,o,[c,void 0,void 0,s],r)}visitDictionary(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.indices.ArrayType,t.data),{["dictionary"]:a=new Ft([new Lo().visit({type:i.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new xt(i,n,o,c,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length/Zi(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitDuration(t){const{["type"]:i,["offset"]:n=0}=t,r=rt(t.nullBitmap),s=vt(i.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:i,["offset"]:n=0,["child"]:r=new Lo().visit({type:i.valueType})}=t,s=rt(t.nullBitmap),{["length"]:a=r.length/Zi(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new xt(i,n,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:i,["offset"]:n=0,["child"]:r=new Lo().visit({type:i.childType})}=t,s=rt(t.nullBitmap),a=Hs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new xt(i,n,o,c,[a,void 0,s],[r])}};const j2=new V2;function tt(e){return j2.visit(e)}let dp=class{constructor(t=0,i){this.numChunks=t,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function z2(e){return e.some(t=>t.nullable)}function Wg(e){return e.reduce((t,i)=>t+i.nullCount,0)}function qg(e){return e.reduce((t,i,n)=>(t[n+1]=t[n]+i.length,t),new Uint32Array(e.length+1))}function Yg(e,t,i,n){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],c=t[s],{length:u}=o;if(c>=n)break;if(i>=c+u)continue;if(c>=i&&c+u<=n){r.push(o);continue}const l=Math.max(0,i-c),h=Math.min(n-c,u);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function Rh(e,t,i,n){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return i<t[a]?n(e,r,i-t[r]):null;s=r+Math.trunc((a-r)*.5),i<t[s]?a=s:r=s}while(r<a)}function Mh(e,t){return e.getValid(t)}function Oc(e){function t(i,n,r){return e(i[n],r)}return function(i){const n=this.data;return Rh(n,this._offsets,i,t)}}function Hg(e){let t;function i(n,r,s){return e(n[r],s,t)}return function(n,r){const s=this.data;t=r;const a=Rh(s,this._offsets,n,i);return t=void 0,a}}function Gg(e){let t;function i(n,r,s){let a=s,o=0,c=0;for(let u=r-1,l=n.length;++u<l;){const h=n[u];if(~(o=e(h,t,a)))return c+o;a=0,c+=h.length}return-1}return function(n,r){t=n;const s=this.data,a=typeof r!="number"?i(s,0,0):Rh(s,this._offsets,r,i);return t=void 0,a}}let O=class extends X{};function W2(e,t){return t===null&&e.length>0?0:-1}function q2(e,t){const{nullBitmap:i}=e;if(!i||e.nullCount<=0)return-1;let n=0;for(const r of new Lh(i,e.offset+(t||0),e.length,i,zg)){if(!r)return n;++n}return-1}function q(e,t,i){if(t===void 0)return-1;if(t===null)switch(e.typeId){case m.Union:break;case m.Dictionary:break;default:return q2(e,i)}const n=xe.getVisitFn(e),r=Ds(t);for(let s=(i||0)-1,a=e.length;++s<a;)if(r(n(e,s)))return s;return-1}function Kg(e,t,i){const n=xe.getVisitFn(e),r=Ds(t);for(let s=(i||0)-1,a=e.length;++s<a;)if(r(n(e,s)))return s;return-1}O.prototype.visitNull=W2;O.prototype.visitBool=q;O.prototype.visitInt=q;O.prototype.visitInt8=q;O.prototype.visitInt16=q;O.prototype.visitInt32=q;O.prototype.visitInt64=q;O.prototype.visitUint8=q;O.prototype.visitUint16=q;O.prototype.visitUint32=q;O.prototype.visitUint64=q;O.prototype.visitFloat=q;O.prototype.visitFloat16=q;O.prototype.visitFloat32=q;O.prototype.visitFloat64=q;O.prototype.visitUtf8=q;O.prototype.visitLargeUtf8=q;O.prototype.visitBinary=q;O.prototype.visitLargeBinary=q;O.prototype.visitFixedSizeBinary=q;O.prototype.visitDate=q;O.prototype.visitDateDay=q;O.prototype.visitDateMillisecond=q;O.prototype.visitTimestamp=q;O.prototype.visitTimestampSecond=q;O.prototype.visitTimestampMillisecond=q;O.prototype.visitTimestampMicrosecond=q;O.prototype.visitTimestampNanosecond=q;O.prototype.visitTime=q;O.prototype.visitTimeSecond=q;O.prototype.visitTimeMillisecond=q;O.prototype.visitTimeMicrosecond=q;O.prototype.visitTimeNanosecond=q;O.prototype.visitDecimal=q;O.prototype.visitList=q;O.prototype.visitStruct=q;O.prototype.visitUnion=q;O.prototype.visitDenseUnion=Kg;O.prototype.visitSparseUnion=Kg;O.prototype.visitDictionary=q;O.prototype.visitInterval=q;O.prototype.visitIntervalDayTime=q;O.prototype.visitIntervalYearMonth=q;O.prototype.visitDuration=q;O.prototype.visitDurationSecond=q;O.prototype.visitDurationMillisecond=q;O.prototype.visitDurationMicrosecond=q;O.prototype.visitDurationNanosecond=q;O.prototype.visitFixedSizeList=q;O.prototype.visitMap=q;const Tc=new O;let T=class extends X{};function P(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(x.isInt(t)&&t.bitWidth!==64||x.isTime(t)&&t.bitWidth!==64||x.isFloat(t)&&t.precision!==ae.HALF))return new dp(e.data.length,n=>{const r=e.data[n];return r.values.subarray(0,r.length)[Symbol.iterator]()});let i=0;return new dp(e.data.length,n=>{const s=e.data[n].length,a=e.slice(i,i+s);return i+=s,new Y2(a)})}let Y2=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};T.prototype.visitNull=P;T.prototype.visitBool=P;T.prototype.visitInt=P;T.prototype.visitInt8=P;T.prototype.visitInt16=P;T.prototype.visitInt32=P;T.prototype.visitInt64=P;T.prototype.visitUint8=P;T.prototype.visitUint16=P;T.prototype.visitUint32=P;T.prototype.visitUint64=P;T.prototype.visitFloat=P;T.prototype.visitFloat16=P;T.prototype.visitFloat32=P;T.prototype.visitFloat64=P;T.prototype.visitUtf8=P;T.prototype.visitLargeUtf8=P;T.prototype.visitBinary=P;T.prototype.visitLargeBinary=P;T.prototype.visitFixedSizeBinary=P;T.prototype.visitDate=P;T.prototype.visitDateDay=P;T.prototype.visitDateMillisecond=P;T.prototype.visitTimestamp=P;T.prototype.visitTimestampSecond=P;T.prototype.visitTimestampMillisecond=P;T.prototype.visitTimestampMicrosecond=P;T.prototype.visitTimestampNanosecond=P;T.prototype.visitTime=P;T.prototype.visitTimeSecond=P;T.prototype.visitTimeMillisecond=P;T.prototype.visitTimeMicrosecond=P;T.prototype.visitTimeNanosecond=P;T.prototype.visitDecimal=P;T.prototype.visitList=P;T.prototype.visitStruct=P;T.prototype.visitUnion=P;T.prototype.visitDenseUnion=P;T.prototype.visitSparseUnion=P;T.prototype.visitDictionary=P;T.prototype.visitInterval=P;T.prototype.visitIntervalDayTime=P;T.prototype.visitIntervalYearMonth=P;T.prototype.visitDuration=P;T.prototype.visitDurationSecond=P;T.prototype.visitDurationMillisecond=P;T.prototype.visitDurationMicrosecond=P;T.prototype.visitDurationNanosecond=P;T.prototype.visitFixedSizeList=P;T.prototype.visitMap=P;const Uh=new T;var Jg;const Qg={},Xg={};let Ft=class lr{constructor(t){var i,n,r;const s=t[0]instanceof lr?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof xt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(i=s[0])===null||i===void 0?void 0:i.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:c,indexOf:u}=Qg[a.typeId],l=s[0];this.isValid=h=>Mh(l,h),this.get=h=>o(l,h),this.set=(h,d)=>c(l,h,d),this.indexOf=h=>u(l,h),this._offsets=[0,l.length];break}default:Object.setPrototypeOf(this,Xg[a.typeId]),this._offsets=qg(s);break}this.data=s,this.type=a,this.stride=Zi(a),this.numChildren=(r=(n=a.children)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,i)=>t+i.byteLength,0)}get nullable(){return z2(this.data)}get nullCount(){return Wg(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${m[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}at(t){return this.get(Ch(t,this.length))}set(t,i){}indexOf(t,i){return-1}includes(t,i){return this.indexOf(t,i)>-1}[Symbol.iterator](){return Uh.visit(this)}concat(...t){return new lr(this.data.concat(t.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(t,i){return new lr(jg(this,t,i,({data:n,_offsets:r},s,a)=>Yg(n,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:i,length:n,stride:r,ArrayType:s}=this;switch(t.typeId){case m.Int:case m.Float:case m.Decimal:case m.Time:case m.Timestamp:switch(i.length){case 0:return new s;case 1:return i[0].values.subarray(0,n*r);default:return i.reduce((a,{values:o,length:c})=>(a.array.set(o.subarray(0,c*r),a.offset),a.offset+=c*r,a),{array:new s(n*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new lr(this.data.map(({children:i})=>i[t])):null}get isMemoized(){return x.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(x.isDictionary(this.type)){const t=new pp(this.data[0].dictionary),i=this.data.map(n=>{const r=n.clone();return r.dictionary=t,r});return new lr(i)}return new pp(this)}unmemoize(){if(x.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),i=this.data.map(n=>{const r=n.clone();return r.dictionary=t,r});return new lr(i)}return this}};Jg=Symbol.toStringTag;Ft[Jg]=(e=>{e.type=x.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(m).map(i=>m[i]).filter(i=>typeof i=="number"&&i!==m.NONE);for(const i of t){const n=xe.getVisitFnByTypeId(i),r=Je.getVisitFnByTypeId(i),s=Tc.getVisitFnByTypeId(i);Qg[i]={get:n,set:r,indexOf:s},Xg[i]=Object.create(e,{isValid:{value:Oc(Mh)},get:{value:Oc(xe.getVisitFnByTypeId(i))},set:{value:Hg(Je.getVisitFnByTypeId(i))},indexOf:{value:Gg(Tc.getVisitFnByTypeId(i))}})}return"Vector"})(Ft.prototype);let pp=class Zg extends Ft{constructor(t){super(t.data);const i=this.get,n=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const c=i.call(this,a);return s[a]=c,c}}),Object.defineProperty(this,"set",{value(a,o){n.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new Zg(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ft(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},Ul=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,i,n,r){return t.prep(8,24),t.writeInt64(BigInt(r??0)),t.pad(4),t.writeInt32(n),t.writeInt64(BigInt(i??0)),t.offset()}},_i=class Pl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFooter(t,i){return(i||new Pl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,i){return t.setPosition(t.position()+gt),(i||new Pl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$t.V1}schema(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Si).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}dictionaries(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new Ul).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,i){const n=this.bb.__offset(this.bb_pos,10);return n?(i||new Ul).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new Ye).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,$t.V1)}static addSchema(t,i){t.addFieldOffset(1,i,0)}static addDictionaries(t,i){t.addFieldOffset(2,i,0)}static startDictionariesVector(t,i){t.startVector(24,i,8)}static addRecordBatches(t,i){t.addFieldOffset(3,i,0)}static startRecordBatchesVector(t,i){t.startVector(24,i,8)}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,i){t.finish(i)}static finishSizePrefixedFooterBuffer(t,i){t.finish(i,void 0,!0)}},Dt=class hr{constructor(t=[],i,n,r=$t.V5){this.fields=t||[],this.metadata=i||new Map,n||(n=Vl(this.fields)),this.dictionaries=n,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,i)=>`${i}: ${t}`).join(", ")} }>`}select(t){const i=new Set(t),n=this.fields.filter(r=>i.has(r.name));return new hr(n,this.metadata)}selectAt(t){const i=t.map(n=>this.fields[n]).filter(Boolean);return new hr(i,this.metadata)}assign(...t){const i=t[0]instanceof hr?t[0]:Array.isArray(t[0])?new hr(t[0]):new hr(t),n=[...this.fields],r=mo(mo(new Map,this.metadata),i.metadata),s=i.fields.filter(o=>{const c=n.findIndex(u=>u.name===o.name);return~c?(n[c]=o.clone({metadata:mo(mo(new Map,n[c].metadata),o.metadata)}))&&!1:!0}),a=Vl(s,new Map);return new hr([...n,...s],r,new Map([...this.dictionaries,...a]))}};Dt.prototype.fields=null;Dt.prototype.metadata=null;Dt.prototype.dictionaries=null;let Mt=class $l{static new(...t){let[i,n,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:i}=t[0],n===void 0&&(n=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new $l(`${i}`,n,r,s)}constructor(t,i,n=!1,r){this.name=t,this.type=i,this.nullable=n,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[i,n,r,s]=t;return!t[0]||typeof t[0]!="object"?[i=this.name,n=this.type,r=this.nullable,s=this.metadata]=t:{name:i=this.name,type:n=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],$l.new(i,n,r,s)}};Mt.prototype.type=null;Mt.prototype.name=null;Mt.prototype.nullable=null;Mt.prototype.metadata=null;function mo(e,t){return new Map([...e||new Map,...t||new Map])}function Vl(e,t=new Map){for(let i=-1,n=e.length;++i<n;){const s=e[i].type;if(x.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Vl(s.children,t)}return t}var H2=wm,G2=ps;let ka=class{static decode(t){t=new G2(rt(t));const i=_i.getRootAsFooter(t),n=Dt.decode(i.schema(),new Map,i.version());return new K2(n,i)}static encode(t){const i=new H2,n=Dt.encode(i,t.schema);_i.startRecordBatchesVector(i,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())gs.encode(i,a);const r=i.endVector();_i.startDictionariesVector(i,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())gs.encode(i,a);const s=i.endVector();return _i.startFooter(i),_i.addSchema(i,n),_i.addVersion(i,$t.V5),_i.addRecordBatches(i,r),_i.addDictionaries(i,s),_i.finishFooterBuffer(i,_i.endFooter(i)),i.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,i=$t.V5,n,r){this.schema=t,this.version=i,n&&(this._recordBatches=n),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let t,i=-1,n=this.numRecordBatches;++i<n;)(t=this.getRecordBatch(i))&&(yield t)}*dictionaryBatches(){for(let t,i=-1,n=this.numDictionaries;++i<n;)(t=this.getDictionaryBatch(i))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},K2=class extends ka{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,i){super(t,i.version()),this._footer=i}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const i=this._footer.recordBatches(t);if(i)return gs.decode(i)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const i=this._footer.dictionaries(t);if(i)return gs.decode(i)}return null}},gs=class t0{static decode(t){return new t0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,i){const{metaDataLength:n}=i,r=BigInt(i.offset),s=BigInt(i.bodyLength);return Ul.createBlock(t,r,n,s)}constructor(t,i,n){this.metaDataLength=t,this.offset=St(n),this.bodyLength=St(i)}};const kt=Object.freeze({done:!0,value:void 0});class yp{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}let Ph=class{tee(){return this._getDOMStream().tee()}pipe(t,i){return this._getNodeStream().pipe(t,i)}pipeTo(t,i){return this._getDOMStream().pipeTo(t,i)}pipeThrough(t,i){return this._getDOMStream().pipeThrough(t,i)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},J2=class extends Ph{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(kt);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Ve.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Ve.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return A(this,void 0,void 0,function*(){return yield this.abort(t),kt})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),kt})}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((i,n)=>{this.resolvers.push({resolve:i,reject:n})}):Promise.resolve(kt)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Ro=class extends J2{write(t){if((t=rt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?El(this.toUint8Array(!0)):this.toUint8Array(!1).then(El)}toUint8Array(t=!1){return t?Ri(this._values)[0]:(()=>A(this,void 0,void 0,function*(){var i,n,r,s;const a=[];let o=0;try{for(var c=!0,u=He(this),l;l=yield u.next(),i=l.done,!i;c=!0){s=l.value,c=!1;const h=s;a.push(h),o+=h.byteLength}}catch(h){n={error:h}}finally{try{!c&&!i&&(r=u.return)&&(yield r.call(u))}finally{if(n)throw n.error}}return Ri(a,o)[0]}))()}};class Nc{constructor(t){t&&(this.source=new Q2(Ve.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class _s{constructor(t){t instanceof _s?this.source=t.source:t instanceof Ro?this.source=new ir(Ve.fromAsyncIterable(t)):gm(t)?this.source=new ir(Ve.fromNodeStream(t)):Th(t)?this.source=new ir(Ve.fromDOMStream(t)):mm(t)?this.source=new ir(Ve.fromDOMStream(t.body)):Ga(t)?this.source=new ir(Ve.fromIterable(t)):vr(t)?this.source=new ir(Ve.fromAsyncIterable(t)):Ns(t)&&(this.source=new ir(Ve.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Q2{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,i="read"){return this.source.next({cmd:i,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||kt)}return(t){return Object.create(this.source.return&&this.source.return(t)||kt)}}class ir{constructor(t){this.source=t,this._closedPromise=new Promise(i=>this._closedPromiseResolve=i)}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t){return A(this,arguments,void 0,function*(i,n="read"){return yield this.source.next({cmd:n,size:i})})}throw(t){return A(this,void 0,void 0,function*(){const i=this.source.throw&&(yield this.source.throw(t))||kt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}return(t){return A(this,void 0,void 0,function*(){const i=this.source.return&&(yield this.source.return(t))||kt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}}class mp extends Nc{constructor(t,i){super(),this.position=0,this.buffer=rt(t),this.size=i===void 0?this.buffer.byteLength:i}readInt32(t){const{buffer:i,byteOffset:n}=this.readAt(t,4);return new DataView(i,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:i,size:n,position:r}=this;return i&&r<n?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,r+Math.min(n-r,t)),i.subarray(r,this.position)):null}readAt(t,i){const n=this.buffer,r=Math.min(this.size,t+i);return n?n.subarray(t,r):new Uint8Array(i)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Dc extends _s{constructor(t,i){super(),this.position=0,this._handle=t,typeof i=="number"?this.size=i:this._pending=(()=>A(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return A(this,void 0,void 0,function*(){const{buffer:i,byteOffset:n}=yield this.readAt(t,4);return new DataView(i,n).getInt32(0,!0)})}seek(t){return A(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return A(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:n,position:r}=this;if(i&&r<n){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,a=0,o=0;const c=Math.min(n,s+Math.min(n-s,t)),u=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=o)<c&&(a+=o)<u.byteLength;)({bytesRead:o}=yield i.read(u,a,u.byteLength-a,s));return u}return null})}readAt(t,i){return A(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r}=this;if(n&&t+i<r){const s=Math.min(r,t+i),a=new Uint8Array(s-t);return(yield n.read(a,0,i,t)).buffer}return new Uint8Array(i)})}close(){return A(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return A(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const X2=65536;function Zr(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const bs=8,$h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class e0{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const i=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=i[3]*n[3];this.buffer[0]=r&65535;let s=r>>>16;return r=i[2]*n[3],s+=r,r=i[3]*n[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?X2:0,this.buffer[1]+=s>>>16,this.buffer[1]+=i[1]*n[3]+i[2]*n[2]+i[3]*n[1],this.buffer[1]+=i[0]*n[3]+i[1]*n[2]+i[2]*n[1]+i[3]*n[0]<<16,this}_plus(t){const i=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],i<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=i}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Zr(this.buffer[1])} ${Zr(this.buffer[0])}`}}let jt=class Gi extends e0{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,i=new Uint32Array(2)){return Gi.fromString(typeof t=="string"?t:t.toString(),i)}static fromNumber(t,i=new Uint32Array(2)){return Gi.fromString(t.toString(),i)}static fromString(t,i=new Uint32Array(2)){const n=t.length,r=new Gi(i);for(let s=0;s<n;){const a=bs<n-s?bs:n-s,o=new Gi(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),c=new Gi(new Uint32Array([$h[a],0]));r.times(c),r.plus(o),s+=a}return r}static convertArray(t){const i=new Uint32Array(t.length*2);for(let n=-1,r=t.length;++n<r;)Gi.from(t[n],new Uint32Array(i.buffer,i.byteOffset+2*n*4,2));return i}static multiply(t,i){return new Gi(new Uint32Array(t.buffer)).times(i)}static add(t,i){return new Gi(new Uint32Array(t.buffer)).plus(i)}},wa=class Ki extends e0{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const i=this.buffer[1]<<0,n=t.buffer[1]<<0;return i<n||i===n&&this.buffer[0]<t.buffer[0]}static from(t,i=new Uint32Array(2)){return Ki.fromString(typeof t=="string"?t:t.toString(),i)}static fromNumber(t,i=new Uint32Array(2)){return Ki.fromString(t.toString(),i)}static fromString(t,i=new Uint32Array(2)){const n=t.startsWith("-"),r=t.length,s=new Ki(i);for(let a=n?1:0;a<r;){const o=bs<r-a?bs:r-a,c=new Ki(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0])),u=new Ki(new Uint32Array([$h[o],0]));s.times(u),s.plus(c),a+=o}return n?s.negate():s}static convertArray(t){const i=new Uint32Array(t.length*2);for(let n=-1,r=t.length;++n<r;)Ki.from(t[n],new Uint32Array(i.buffer,i.byteOffset+2*n*4,2));return i}static multiply(t,i){return new Ki(new Uint32Array(t.buffer)).times(i)}static add(t,i){return new Ki(new Uint32Array(t.buffer)).plus(i)}};class Ii{constructor(t){this.buffer=t}high(){return new wa(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new wa(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const i=new jt(new Uint32Array([this.buffer[3],0])),n=new jt(new Uint32Array([this.buffer[2],0])),r=new jt(new Uint32Array([this.buffer[1],0])),s=new jt(new Uint32Array([this.buffer[0],0])),a=new jt(new Uint32Array([t.buffer[3],0])),o=new jt(new Uint32Array([t.buffer[2],0])),c=new jt(new Uint32Array([t.buffer[1],0])),u=new jt(new Uint32Array([t.buffer[0],0]));let l=jt.multiply(s,u);this.buffer[0]=l.low();const h=new jt(new Uint32Array([l.high(),0]));return l=jt.multiply(r,u),h.plus(l),l=jt.multiply(s,c),h.plus(l),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(l)?1:0,this.buffer[2]=h.high(),new jt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(jt.multiply(n,u)).plus(jt.multiply(r,c)).plus(jt.multiply(s,o)),this.buffer[3]+=jt.multiply(i,u).plus(jt.multiply(n,c)).plus(jt.multiply(r,o)).plus(jt.multiply(s,a)).low(),this}plus(t){const i=new Uint32Array(4);return i[3]=this.buffer[3]+t.buffer[3]>>>0,i[2]=this.buffer[2]+t.buffer[2]>>>0,i[1]=this.buffer[1]+t.buffer[1]>>>0,i[0]=this.buffer[0]+t.buffer[0]>>>0,i[0]<this.buffer[0]>>>0&&++i[1],i[1]<this.buffer[1]>>>0&&++i[2],i[2]<this.buffer[2]>>>0&&++i[3],this.buffer[3]=i[3],this.buffer[2]=i[2],this.buffer[1]=i[1],this.buffer[0]=i[0],this}hex(){return`${Zr(this.buffer[3])} ${Zr(this.buffer[2])} ${Zr(this.buffer[1])} ${Zr(this.buffer[0])}`}static multiply(t,i){return new Ii(new Uint32Array(t.buffer)).times(i)}static add(t,i){return new Ii(new Uint32Array(t.buffer)).plus(i)}static from(t,i=new Uint32Array(4)){return Ii.fromString(typeof t=="string"?t:t.toString(),i)}static fromNumber(t,i=new Uint32Array(4)){return Ii.fromString(t.toString(),i)}static fromString(t,i=new Uint32Array(4)){const n=t.startsWith("-"),r=t.length,s=new Ii(i);for(let a=n?1:0;a<r;){const o=bs<r-a?bs:r-a,c=new Ii(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0,0,0])),u=new Ii(new Uint32Array([$h[o],0,0,0]));s.times(u),s.plus(c),a+=o}return n?s.negate():s}static convertArray(t){const i=new Uint32Array(t.length*4);for(let n=-1,r=t.length;++n<r;)Ii.from(t[n],new Uint32Array(i.buffer,i.byteOffset+4*4*n,4));return i}}class i0 extends X{constructor(t,i,n,r,s=$t.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=i,this.buffers=n,this.dictionaries=r,this.metadataVersion=s}visit(t){return super.visit(t instanceof Mt?t.type:t)}visitNull(t,{length:i}=this.nextFieldNode()){return tt({type:t,length:i})}visitBool(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t,{length:i,nullCount:n}=this.nextFieldNode()){return this.metadataVersion<$t.V5&&this.readNullBitmap(t,n),t.mode===oe.Sparse?this.visitSparseUnion(t,{length:i,nullCount:n}):this.visitDenseUnion(t,{length:i,nullCount:n})}visitDenseUnion(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDuration(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:i,nullCount:n}=this.nextFieldNode()){return tt({type:t,length:i,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,i,n=this.nextBufferRange()){return i>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,i){return this.readData(t,i)}readTypeIds(t,i){return this.readData(t,i)}readData(t,{length:i,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+i)}readDictionary(t){return this.dictionaries.get(t.id)}}class Z2 extends i0{constructor(t,i,n,r,s){super(new Uint8Array(0),i,n,r,s),this.sources=t}readNullBitmap(t,i,{offset:n}=this.nextBufferRange()){return i<=0?new Uint8Array(0):Ec(this.sources[n])}readOffsets(t,{offset:i}=this.nextBufferRange()){return vt(Uint8Array,vt(t.OffsetArrayType,this.sources[i]))}readTypeIds(t,{offset:i}=this.nextBufferRange()){return vt(Uint8Array,vt(t.ArrayType,this.sources[i]))}readData(t,{offset:i}=this.nextBufferRange()){const{sources:n}=this;return x.isTimestamp(t)||(x.isInt(t)||x.isTime(t))&&t.bitWidth===64||x.isDuration(t)||x.isDate(t)&&t.unit===Ke.MILLISECOND?vt(Uint8Array,wa.convertArray(n[i])):x.isDecimal(t)?vt(Uint8Array,Ii.convertArray(n[i])):x.isBinary(t)||x.isLargeBinary(t)||x.isFixedSizeBinary(t)?tB(n[i]):x.isBool(t)?Ec(n[i]):x.isUtf8(t)||x.isLargeUtf8(t)?Oh(n[i].join("")):vt(Uint8Array,vt(t.ArrayType,n[i].map(r=>+r)))}}function tB(e){const t=e.join(""),i=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)i[n>>1]=Number.parseInt(t.slice(n,n+2),16);return i}let N=class extends X{compareSchemas(t,i){return t===i||i instanceof t.constructor&&this.compareManyFields(t.fields,i.fields)}compareManyFields(t,i){return t===i||Array.isArray(t)&&Array.isArray(i)&&t.length===i.length&&t.every((n,r)=>this.compareFields(n,i[r]))}compareFields(t,i){return t===i||i instanceof t.constructor&&t.name===i.name&&t.nullable===i.nullable&&this.visit(t.type,i.type)}};function de(e,t){return t instanceof e.constructor}function xr(e,t){return e===t||de(e,t)}function bn(e,t){return e===t||de(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function pu(e,t){return e===t||de(e,t)&&e.precision===t.precision}function eB(e,t){return e===t||de(e,t)&&e.byteWidth===t.byteWidth}function Vh(e,t){return e===t||de(e,t)&&e.unit===t.unit}function Ka(e,t){return e===t||de(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ja(e,t){return e===t||de(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function iB(e,t){return e===t||de(e,t)&&e.children.length===t.children.length&&$n.compareManyFields(e.children,t.children)}function nB(e,t){return e===t||de(e,t)&&e.children.length===t.children.length&&$n.compareManyFields(e.children,t.children)}function jh(e,t){return e===t||de(e,t)&&e.mode===t.mode&&e.typeIds.every((i,n)=>i===t.typeIds[n])&&$n.compareManyFields(e.children,t.children)}function rB(e,t){return e===t||de(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&$n.visit(e.indices,t.indices)&&$n.visit(e.dictionary,t.dictionary)}function zh(e,t){return e===t||de(e,t)&&e.unit===t.unit}function Qa(e,t){return e===t||de(e,t)&&e.unit===t.unit}function sB(e,t){return e===t||de(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&$n.compareManyFields(e.children,t.children)}function aB(e,t){return e===t||de(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&$n.compareManyFields(e.children,t.children)}N.prototype.visitNull=xr;N.prototype.visitBool=xr;N.prototype.visitInt=bn;N.prototype.visitInt8=bn;N.prototype.visitInt16=bn;N.prototype.visitInt32=bn;N.prototype.visitInt64=bn;N.prototype.visitUint8=bn;N.prototype.visitUint16=bn;N.prototype.visitUint32=bn;N.prototype.visitUint64=bn;N.prototype.visitFloat=pu;N.prototype.visitFloat16=pu;N.prototype.visitFloat32=pu;N.prototype.visitFloat64=pu;N.prototype.visitUtf8=xr;N.prototype.visitLargeUtf8=xr;N.prototype.visitBinary=xr;N.prototype.visitLargeBinary=xr;N.prototype.visitFixedSizeBinary=eB;N.prototype.visitDate=Vh;N.prototype.visitDateDay=Vh;N.prototype.visitDateMillisecond=Vh;N.prototype.visitTimestamp=Ka;N.prototype.visitTimestampSecond=Ka;N.prototype.visitTimestampMillisecond=Ka;N.prototype.visitTimestampMicrosecond=Ka;N.prototype.visitTimestampNanosecond=Ka;N.prototype.visitTime=Ja;N.prototype.visitTimeSecond=Ja;N.prototype.visitTimeMillisecond=Ja;N.prototype.visitTimeMicrosecond=Ja;N.prototype.visitTimeNanosecond=Ja;N.prototype.visitDecimal=xr;N.prototype.visitList=iB;N.prototype.visitStruct=nB;N.prototype.visitUnion=jh;N.prototype.visitDenseUnion=jh;N.prototype.visitSparseUnion=jh;N.prototype.visitDictionary=rB;N.prototype.visitInterval=zh;N.prototype.visitIntervalDayTime=zh;N.prototype.visitIntervalYearMonth=zh;N.prototype.visitDuration=Qa;N.prototype.visitDurationSecond=Qa;N.prototype.visitDurationMillisecond=Qa;N.prototype.visitDurationMicrosecond=Qa;N.prototype.visitDurationNanosecond=Qa;N.prototype.visitFixedSizeList=sB;N.prototype.visitMap=aB;const $n=new N;function jl(e,t){return $n.compareSchemas(e,t)}function Ku(e,t){return oB(e,t.map(i=>i.data.concat()))}function oB(e,t){const i=[...e.fields],n=[],r={numBatches:t.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,o=-1;const c=t.length;let u,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=cB(i,a,l,t,r),a>0&&(n[s++]=tt({type:new ue(i),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(i),n.map(h=>new be(e,h))]}function cB(e,t,i,n,r){var s;const a=(t+63&-64)>>3;for(let o=-1,c=n.length;++o<c;){const u=i[o],l=u==null?void 0:u.length;if(l>=t)l===t?i[o]=u:(i[o]=u.slice(0,t),r.numBatches=Math.max(r.numBatches,n[o].unshift(u.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),i[o]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:tt({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return i}var n0;let Vn=class fr{constructor(...t){var i,n;if(t.length===0)return this.batches=[],this.schema=new Dt([]),this._offsets=[0],this;let r,s;t[0]instanceof Dt&&(r=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const a=c=>{if(c){if(c instanceof be)return[c];if(c instanceof fr)return c.batches;if(c instanceof xt){if(c.type instanceof ue)return[new be(new Dt(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(u=>a(u));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(u=>a(u));if(typeof c=="object"){const u=Object.keys(c),l=u.map(y=>new Ft([c[y]])),h=r??new Dt(u.map((y,g)=>new Mt(String(y),l[g].type,l[g].nullable))),[,d]=Ku(h,l);return d.length===0?[new be(c)]:d}}}return[]},o=t.flatMap(c=>a(c));if(r=(n=r??((i=o[0])===null||i===void 0?void 0:i.schema))!==null&&n!==void 0?n:new Dt([]),!(r instanceof Dt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of o){if(!(c instanceof be))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!jl(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??qg(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,i)=>t+i.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Wg(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}at(t){return this.get(Ch(t,this.numRows))}set(t,i){}indexOf(t,i){return-1}[Symbol.iterator](){return this.batches.length>0?Uh.visit(new Ft(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const i=this.schema,n=this.data.concat(t.flatMap(({data:r})=>r));return new fr(i,n.map(r=>new be(i,r)))}slice(t,i){const n=this.schema;[t,i]=jg({length:this.numRows},t,i);const r=Yg(this.data,this._offsets,t,i);return new fr(n,r.map(s=>new be(n,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(i=>i.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const i=this.data.map(n=>n.children[t]);if(i.length===0){const{type:n}=this.schema.fields[t],r=tt({type:n,length:0,nullCount:0});i.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ft(i)}return null}setChild(t,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t),i)}setChildAt(t,i){let n=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){i||(i=new Ft([tt({type:new Pn,length:this.numRows})]));const s=n.fields.slice(),a=s[t].clone({type:i.type}),o=this.schema.fields.map((c,u)=>this.getChildAt(u));[s[t],o[t]]=[a,i],[n,r]=Ku(n,o)}return new fr(n,r)}select(t){const i=this.schema.fields.reduce((n,r,s)=>n.set(r.name,s),new Map);return this.selectAt(t.map(n=>i.get(n)).filter(n=>n>-1))}selectAt(t){const i=this.schema.selectAt(t),n=this.batches.map(r=>r.selectAt(t));return new fr(i,n)}assign(t){const i=this.schema.fields,[n,r]=t.schema.fields.reduce((o,c,u)=>{const[l,h]=o,d=i.findIndex(y=>y.name===c.name);return~d?h[d]=u:l.push(u),o},[[],[]]),s=this.schema.assign(t.schema),a=[...i.map((o,c)=>[c,r[c]]).map(([o,c])=>c===void 0?this.getChildAt(o):t.getChildAt(c)),...n.map(o=>t.getChildAt(o))].filter(Boolean);return new fr(...Ku(s,a))}};n0=Symbol.toStringTag;Vn[n0]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Oc(Mh),e.get=Oc(xe.getVisitFn(m.Struct)),e.set=Hg(Je.getVisitFn(m.Struct)),e.indexOf=Gg(Tc.getVisitFn(m.Struct)),"Table"))(Vn.prototype);var r0;let be=class ha{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Dt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=tt({nullCount:0,type:new ue(this.schema.fields),children:this.schema.fields.map(i=>tt({type:i.type,nullCount:0}))})]=t,!(this.data instanceof xt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=gp(this.schema,this.data.children);break}case 1:{const[i]=t,{fields:n,children:r,length:s}=Object.keys(i).reduce((c,u,l)=>(c.children[l]=i[u],c.length=Math.max(c.length,i[u].length),c.fields[l]=Mt.new({name:u,type:i[u].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new Dt(n),o=tt({type:new ue(n),length:s,children:r,nullCount:0});[this.schema,this.data]=gp(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=s0(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return xe.visit(this.data,t)}at(t){return this.get(Ch(t,this.numRows))}set(t,i){return Je.visit(this.data,t,i)}indexOf(t,i){return Tc.visit(this.data,t,i)}[Symbol.iterator](){return Uh.visit(new Ft([this.data]))}toArray(){return[...this]}concat(...t){return new Vn(this.schema,[this,...t])}slice(t,i){const[n]=new Ft([this.data]).slice(t,i).data;return new ha(this.schema,n)}getChild(t){var i;return this.getChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Ft([this.data.children[t]]):null}setChild(t,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t),i)}setChildAt(t,i){let n=this.schema,r=this.data;if(t>-1&&t<this.numCols){i||(i=new Ft([tt({type:new Pn,length:this.numRows})]));const s=n.fields.slice(),a=r.children.slice(),o=s[t].clone({type:i.type});[s[t],a[t]]=[o,i.data[0]],n=new Dt(s,new Map(this.schema.metadata)),r=tt({type:new ue(s),children:a})}return new ha(n,r)}select(t){const i=this.schema.select(t),n=new ue(i.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new ha(i,tt({type:n,length:this.numRows,children:r}))}selectAt(t){const i=this.schema.selectAt(t),n=t.map(s=>this.data.children[s]).filter(Boolean),r=tt({type:new ue(i.fields),length:this.numRows,children:n});return new ha(i,r)}};r0=Symbol.toStringTag;be[r0]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(be.prototype);function gp(e,t,i=t.reduce((n,r)=>Math.max(n,r.length),0)){var n;const r=[...e.fields],s=[...t],a=(i+63&-64)>>3;for(const[o,c]of e.fields.entries()){const u=t[o];(!u||u.length!==i)&&(r[o]=c.clone({nullable:!0}),s[o]=(n=u==null?void 0:u._changeLengthAndBackfillNullBitmap(i))!==null&&n!==void 0?n:tt({type:c.type,length:i,nullCount:i,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),tt({type:new ue(r),length:i,children:s})]}function s0(e,t,i=new Map){var n,r;if(((n=e==null?void 0:e.length)!==null&&n!==void 0?n:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,a=e.length;++s<a;){const{type:o}=e[s],c=t[s];for(const u of[c,...((r=c==null?void 0:c.dictionary)===null||r===void 0?void 0:r.data)||[]])s0(o.children,u==null?void 0:u.children,i);if(x.isDictionary(o)){const{id:u}=o;if(!i.has(u))c!=null&&c.dictionary&&i.set(u,c.dictionary);else if(i.get(u)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return i}let Wh=class extends be{constructor(t){const i=t.fields.map(r=>tt({type:r.type})),n=tt({type:new ue(t.fields),nullCount:0,children:i});super(t,n)}},En=class vi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMessage(t,i){return(i||new vi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,i){return t.setPosition(t.position()+gt),(i||new vi).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$t.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):lt.NONE}header(t){const i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__union(t,this.bb_pos+i):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new Ye).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,$t.V1)}static addHeaderType(t,i){t.addFieldInt8(1,i,lt.NONE)}static addHeader(t,i){t.addFieldOffset(2,i,0)}static addBodyLength(t,i){t.addFieldInt64(3,i,BigInt("0"))}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,i){t.finish(i)}static finishSizePrefixedMessageBuffer(t,i){t.finish(i,void 0,!0)}static createMessage(t,i,n,r,s,a){return vi.startMessage(t),vi.addVersion(t,i),vi.addHeaderType(t,n),vi.addHeader(t,r),vi.addBodyLength(t,s),vi.addCustomMetadata(t,a),vi.endMessage(t)}},uB=class extends X{visit(t,i){return t==null||i==null?void 0:super.visit(t,i)}visitNull(t,i){return ap.startNull(i),ap.endNull(i)}visitInt(t,i){return Xr.startInt(i),Xr.addBitWidth(i,t.bitWidth),Xr.addIsSigned(i,t.isSigned),Xr.endInt(i)}visitFloat(t,i){return Do.startFloatingPoint(i),Do.addPrecision(i,t.precision),Do.endFloatingPoint(i)}visitBinary(t,i){return ep.startBinary(i),ep.endBinary(i)}visitLargeBinary(t,i){return np.startLargeBinary(i),np.endLargeBinary(i)}visitBool(t,i){return ip.startBool(i),ip.endBool(i)}visitUtf8(t,i){return cp.startUtf8(i),cp.endUtf8(i)}visitLargeUtf8(t,i){return rp.startLargeUtf8(i),rp.endLargeUtf8(i)}visitDecimal(t,i){return kr.startDecimal(i),kr.addScale(i,t.scale),kr.addPrecision(i,t.precision),kr.addBitWidth(i,t.bitWidth),kr.endDecimal(i)}visitDate(t,i){return Eo.startDate(i),Eo.addUnit(i,t.unit),Eo.endDate(i)}visitTime(t,i){return ca.startTime(i),ca.addUnit(i,t.unit),ca.addBitWidth(i,t.bitWidth),ca.endTime(i)}visitTimestamp(t,i){const n=t.timezone&&i.createString(t.timezone)||void 0;return ua.startTimestamp(i),ua.addUnit(i,t.unit),n!==void 0&&ua.addTimezone(i,n),ua.endTimestamp(i)}visitInterval(t,i){return Fo.startInterval(i),Fo.addUnit(i,t.unit),Fo.endInterval(i)}visitDuration(t,i){return Oo.startDuration(i),Oo.addUnit(i,t.unit),Oo.endDuration(i)}visitList(t,i){return sp.startList(i),sp.endList(i)}visitStruct(t,i){return op.startStruct_(i),op.endStruct_(i)}visitUnion(t,i){cr.startTypeIdsVector(i,t.typeIds.length);const n=cr.createTypeIdsVector(i,t.typeIds);return cr.startUnion(i),cr.addMode(i,t.mode),cr.addTypeIds(i,n),cr.endUnion(i)}visitDictionary(t,i){const n=this.visit(t.indices,i);return Dr.startDictionaryEncoding(i),Dr.addId(i,BigInt(t.id)),Dr.addIsOrdered(i,t.isOrdered),n!==void 0&&Dr.addIndexType(i,n),Dr.endDictionaryEncoding(i)}visitFixedSizeBinary(t,i){return To.startFixedSizeBinary(i),To.addByteWidth(i,t.byteWidth),To.endFixedSizeBinary(i)}visitFixedSizeList(t,i){return No.startFixedSizeList(i),No.addListSize(i,t.listSize),No.endFixedSizeList(i)}visitMap(t,i){return ko.startMap(i),ko.addKeysSorted(i,t.keysSorted),ko.endMap(i)}};const Ju=new uB;function lB(e,t=new Map){return new Dt(fB(e,t),Mo(e.metadata),t)}function a0(e){return new ke(e.count,o0(e.columns),c0(e.columns))}function hB(e){return new Ui(a0(e.data),e.id,e.isDelta)}function fB(e,t){return(e.fields||[]).filter(Boolean).map(i=>Mt.fromJSON(i,t))}function _p(e,t){return(e.children||[]).filter(Boolean).map(i=>Mt.fromJSON(i,t))}function o0(e){return(e||[]).reduce((t,i)=>[...t,new jn(i.count,dB(i.VALIDITY)),...o0(i.children)],[])}function c0(e,t=[]){for(let i=-1,n=(e||[]).length;++i<n;){const r=e[i];r.VALIDITY&&t.push(new ki(t.length,r.VALIDITY.length)),r.TYPE_ID&&t.push(new ki(t.length,r.TYPE_ID.length)),r.OFFSET&&t.push(new ki(t.length,r.OFFSET.length)),r.DATA&&t.push(new ki(t.length,r.DATA.length)),t=c0(r.children,t)}return t}function dB(e){return(e||[]).reduce((t,i)=>t+ +(i===0),0)}function pB(e,t){let i,n,r,s,a,o;return!t||!(s=e.dictionary)?(a=vp(e,_p(e,t)),r=new Mt(e.name,a,e.nullable,Mo(e.metadata))):t.has(i=s.id)?(n=(n=s.indexType)?bp(n):new Fa,o=new ms(t.get(i),n,i,s.isOrdered),r=new Mt(e.name,o,e.nullable,Mo(e.metadata))):(n=(n=s.indexType)?bp(n):new Fa,t.set(i,a=vp(e,_p(e,t))),o=new ms(a,n,i,s.isOrdered),r=new Mt(e.name,o,e.nullable,Mo(e.metadata))),r||null}function Mo(e=[]){return new Map(e.map(({key:t,value:i})=>[t,i]))}function bp(e){return new wr(e.isSigned,e.bitWidth)}function vp(e,t){const i=e.type.name;switch(i){case"NONE":return new Pn;case"null":return new Pn;case"binary":return new lc;case"largebinary":return new hc;case"utf8":return new fc;case"largeutf8":return new dc;case"bool":return new pc;case"list":return new wc((t||[])[0]);case"struct":return new ue(t||[]);case"struct_":return new ue(t||[])}switch(i){case"int":{const n=e.type;return new wr(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=e.type;return new uc(ae[n.precision])}case"decimal":{const n=e.type;return new yc(n.scale,n.precision,n.bitWidth)}case"date":{const n=e.type;return new mc(Ke[n.unit])}case"time":{const n=e.type;return new gc(R[n.unit],n.bitWidth)}case"timestamp":{const n=e.type;return new _c(R[n.unit],n.timezone)}case"interval":{const n=e.type;return new bc(Mi[n.unit])}case"duration":{const n=e.type;return new vc(R[n.unit])}case"union":{const n=e.type,[r,...s]=(n.mode+"").toLowerCase(),a=r.toUpperCase()+s.join("");return new Sc(oe[a],n.typeIds||[],t||[])}case"fixedsizebinary":{const n=e.type;return new Ic(n.byteWidth)}case"fixedsizelist":{const n=e.type;return new xc(n.listSize,(t||[])[0])}case"map":{const n=e.type;return new Ac((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${i}"`)}var yB=wm,mB=ps;let un=class zr{static fromJSON(t,i){const n=new zr(0,$t.V5,i);return n._createHeader=gB(t,i),n}static decode(t){t=new mB(rt(t));const i=En.getRootAsMessage(t),n=i.bodyLength(),r=i.version(),s=i.headerType(),a=new zr(n,r,s);return a._createHeader=_B(i,s),a}static encode(t){const i=new yB;let n=-1;return t.isSchema()?n=Dt.encode(i,t.header()):t.isRecordBatch()?n=ke.encode(i,t.header()):t.isDictionaryBatch()&&(n=Ui.encode(i,t.header())),En.startMessage(i),En.addVersion(i,$t.V5),En.addHeader(i,n),En.addHeaderType(i,t.headerType),En.addBodyLength(i,BigInt(t.bodyLength)),En.finishMessageBuffer(i,En.endMessage(i)),i.asUint8Array()}static from(t,i=0){if(t instanceof Dt)return new zr(0,$t.V5,lt.Schema,t);if(t instanceof ke)return new zr(i,$t.V5,lt.RecordBatch,t);if(t instanceof Ui)return new zr(i,$t.V5,lt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===lt.Schema}isRecordBatch(){return this.headerType===lt.RecordBatch}isDictionaryBatch(){return this.headerType===lt.DictionaryBatch}constructor(t,i,n,r){this._version=i,this._headerType=n,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=St(t)}},ke=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,i,n){this._nodes=i,this._buffers=n,this._length=St(t)}},Ui=class{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,i,n=!1){this._data=t,this._isDelta=n,this._id=St(i)}},ki=class{constructor(t,i){this.offset=St(t),this.length=St(i)}},jn=class{constructor(t,i){this.length=St(t),this.nullCount=St(i)}};function gB(e,t){return()=>{switch(t){case lt.Schema:return Dt.fromJSON(e);case lt.RecordBatch:return ke.fromJSON(e);case lt.DictionaryBatch:return Ui.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${lt[t]}, type: ${t} }`)}}function _B(e,t){return()=>{switch(t){case lt.Schema:return Dt.decode(e.header(new Si),new Map,e.version());case lt.RecordBatch:return ke.decode(e.header(new Qi),e.version());case lt.DictionaryBatch:return Ui.decode(e.header(new Nr),e.version())}throw new Error(`Unrecognized Message type: { name: ${lt[t]}, type: ${t} }`)}}Mt.encode=TB;Mt.decode=EB;Mt.fromJSON=pB;Dt.encode=OB;Dt.decode=bB;Dt.fromJSON=lB;ke.encode=NB;ke.decode=vB;ke.fromJSON=a0;Ui.encode=DB;Ui.decode=wB;Ui.fromJSON=hB;jn.encode=FB;jn.decode=IB;ki.encode=kB;ki.decode=SB;function bB(e,t=new Map,i=$t.V5){const n=BB(e,t);return new Dt(n,Uo(e),t,i)}function vB(e,t=$t.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ke(e.length(),xB(e),AB(e,t))}function wB(e,t=$t.V5){return new Ui(ke.decode(e.data(),t),e.id(),e.isDelta())}function SB(e){return new ki(e.offset(),e.length())}function IB(e){return new jn(e.length(),e.nullCount())}function xB(e){const t=[];for(let i,n=-1,r=-1,s=e.nodesLength();++n<s;)(i=e.nodes(n))&&(t[++r]=jn.decode(i));return t}function AB(e,t){const i=[];for(let n,r=-1,s=-1,a=e.buffersLength();++r<a;)(n=e.buffers(r))&&(t<$t.V4&&(n.bb_pos+=8*(r+1)),i[++s]=ki.decode(n));return i}function BB(e,t){const i=[];for(let n,r=-1,s=-1,a=e.fieldsLength();++r<a;)(n=e.fields(r))&&(i[++s]=Mt.decode(n,t));return i}function wp(e,t){const i=[];for(let n,r=-1,s=-1,a=e.childrenLength();++r<a;)(n=e.children(r))&&(i[++s]=Mt.decode(n,t));return i}function EB(e,t){let i,n,r,s,a,o;return!t||!(o=e.dictionary())?(r=Ip(e,wp(e,t)),n=new Mt(e.name(),r,e.nullable(),Uo(e))):t.has(i=St(o.id()))?(s=(s=o.indexType())?Sp(s):new Fa,a=new ms(t.get(i),s,i,o.isOrdered()),n=new Mt(e.name(),a,e.nullable(),Uo(e))):(s=(s=o.indexType())?Sp(s):new Fa,t.set(i,r=Ip(e,wp(e,t))),a=new ms(r,s,i,o.isOrdered()),n=new Mt(e.name(),a,e.nullable(),Uo(e))),n||null}function Uo(e){const t=new Map;if(e)for(let i,n,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(i=e.customMetadata(r))&&(n=i.key())!=null&&t.set(n,i.value());return t}function Sp(e){return new wr(e.isSigned(),e.bitWidth())}function Ip(e,t){const i=e.typeType();switch(i){case It.NONE:return new Pn;case It.Null:return new Pn;case It.Binary:return new lc;case It.LargeBinary:return new hc;case It.Utf8:return new fc;case It.LargeUtf8:return new dc;case It.Bool:return new pc;case It.List:return new wc((t||[])[0]);case It.Struct_:return new ue(t||[])}switch(i){case It.Int:{const n=e.type(new Xr);return new wr(n.isSigned(),n.bitWidth())}case It.FloatingPoint:{const n=e.type(new Do);return new uc(n.precision())}case It.Decimal:{const n=e.type(new kr);return new yc(n.scale(),n.precision(),n.bitWidth())}case It.Date:{const n=e.type(new Eo);return new mc(n.unit())}case It.Time:{const n=e.type(new ca);return new gc(n.unit(),n.bitWidth())}case It.Timestamp:{const n=e.type(new ua);return new _c(n.unit(),n.timezone())}case It.Interval:{const n=e.type(new Fo);return new bc(n.unit())}case It.Duration:{const n=e.type(new Oo);return new vc(n.unit())}case It.Union:{const n=e.type(new cr);return new Sc(n.mode(),n.typeIdsArray()||[],t||[])}case It.FixedSizeBinary:{const n=e.type(new To);return new Ic(n.byteWidth())}case It.FixedSizeList:{const n=e.type(new No);return new xc(n.listSize(),(t||[])[0])}case It.Map:{const n=e.type(new ko);return new Ac((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${It[i]}" (${i})`)}function OB(e,t){const i=t.fields.map(s=>Mt.encode(e,s));Si.startFieldsVector(e,i.length);const n=Si.createFieldsVector(e,i),r=t.metadata&&t.metadata.size>0?Si.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),c=e.createString(`${a}`);return Ye.startKeyValue(e),Ye.addKey(e,o),Ye.addValue(e,c),Ye.endKeyValue(e)})):-1;return Si.startSchema(e),Si.addFields(e,n),Si.addEndianness(e,CB?ys.Little:ys.Big),r!==-1&&Si.addCustomMetadata(e,r),Si.endSchema(e)}function TB(e,t){let i=-1,n=-1,r=-1;const s=t.type;let a=t.typeId;x.isDictionary(s)?(a=s.dictionary.typeId,r=Ju.visit(s,e),n=Ju.visit(s.dictionary,e)):n=Ju.visit(s,e);const o=(s.children||[]).map(l=>Mt.encode(e,l)),c=Ue.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?Ue.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const d=e.createString(`${l}`),y=e.createString(`${h}`);return Ye.startKeyValue(e),Ye.addKey(e,d),Ye.addValue(e,y),Ye.endKeyValue(e)})):-1;return t.name&&(i=e.createString(t.name)),Ue.startField(e),Ue.addType(e,n),Ue.addTypeType(e,a),Ue.addChildren(e,c),Ue.addNullable(e,!!t.nullable),i!==-1&&Ue.addName(e,i),r!==-1&&Ue.addDictionary(e,r),u!==-1&&Ue.addCustomMetadata(e,u),Ue.endField(e)}function NB(e,t){const i=t.nodes||[],n=t.buffers||[];Qi.startNodesVector(e,i.length);for(const a of i.slice().reverse())jn.encode(e,a);const r=e.endVector();Qi.startBuffersVector(e,n.length);for(const a of n.slice().reverse())ki.encode(e,a);const s=e.endVector();return Qi.startRecordBatch(e),Qi.addLength(e,BigInt(t.length)),Qi.addNodes(e,r),Qi.addBuffers(e,s),Qi.endRecordBatch(e)}function DB(e,t){const i=ke.encode(e,t.data);return Nr.startDictionaryBatch(e),Nr.addId(e,BigInt(t.id)),Nr.addIsDelta(e,t.isDelta),Nr.addData(e,i),Nr.endDictionaryBatch(e)}function FB(e,t){return xm.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function kB(e,t){return Im.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const CB=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),qh=e=>`Expected ${lt[e]} Message in stream, but was null or length 0.`,Yh=e=>`Header pointer of flatbuffer-encoded ${lt[e]} Message is null or length 0.`,u0=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,l0=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class h0{constructor(t){this.source=t instanceof Nc?t:new Nc(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?kt:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let i;if((i=this.next()).done)return null;if(t!=null&&i.value.headerType!==t)throw new Error(qh(t));return i.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const i=rt(this.source.read(t));if(i.byteLength<t)throw new Error(l0(t,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()}readSchema(t=!1){const i=lt.Schema,n=this.readMessage(i),r=n==null?void 0:n.header();if(t&&!r)throw new Error(Yh(i));return r}readMetadataLength(){const t=this.source.read(yu),i=t&&new ps(t),n=(i==null?void 0:i.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(t){const i=this.source.read(t);if(!i)return kt;if(i.byteLength<t)throw new Error(u0(t,i.byteLength));return{done:!1,value:un.decode(i)}}}class LB{constructor(t,i){this.source=t instanceof _s?t:ym(t)?new Dc(t,i):new _s(t)}[Symbol.asyncIterator](){return this}next(){return A(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?kt:t})}throw(t){return A(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return A(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return A(this,void 0,void 0,function*(){let i;if((i=yield this.next()).done)return null;if(t!=null&&i.value.headerType!==t)throw new Error(qh(t));return i.value})}readMessageBody(t){return A(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const i=rt(yield this.source.read(t));if(i.byteLength<t)throw new Error(l0(t,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()})}readSchema(){return A(this,arguments,void 0,function*(t=!1){const i=lt.Schema,n=yield this.readMessage(i),r=n==null?void 0:n.header();if(t&&!r)throw new Error(Yh(i));return r})}readMetadataLength(){return A(this,void 0,void 0,function*(){const t=yield this.source.read(yu),i=t&&new ps(t),n=(i==null?void 0:i.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(t){return A(this,void 0,void 0,function*(){const i=yield this.source.read(t);if(!i)return kt;if(i.byteLength<t)throw new Error(u0(t,i.byteLength));return{done:!1,value:un.decode(i)}})}}class RB extends h0{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof yp?t:new yp(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:un.fromJSON(t.schema,lt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const i=t.dictionaries[this._dictionaryIndex++];return this._body=i.data.columns,{done:!1,value:un.fromJSON(i,lt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const i=t.batches[this._batchIndex++];return this._body=i.columns,{done:!1,value:un.fromJSON(i,lt.RecordBatch)}}return this._body=[],kt}readMessageBody(t){return i(this._body);function i(n){return(n||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...i(s.children)],[])}}readMessage(t){let i;if((i=this.next()).done)return null;if(t!=null&&i.value.headerType!==t)throw new Error(qh(t));return i.value}readSchema(){const t=lt.Schema,i=this.readMessage(t),n=i==null?void 0:i.header();if(!i||!n)throw new Error(Yh(t));return n}}const yu=4,zl="ARROW1",Ca=new Uint8Array(zl.length);for(let e=0;e<zl.length;e+=1)Ca[e]=zl.codePointAt(e);function Hh(e,t=0){for(let i=-1,n=Ca.length;++i<n;)if(Ca[i]!==e[t+i])return!1;return!0}const Xa=Ca.length,f0=Xa+yu,MB=Xa*2+yu;class Ge extends Ph{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const i=this._impl.open(t);return vr(i)?i.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Ve.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Ve.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,i){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ge?t:Ol(t)?VB(t):ym(t)?WB(t):vr(t)?(()=>A(this,void 0,void 0,function*(){return yield Ge.from(yield t)}))():mm(t)||Th(t)||gm(t)||Ns(t)?zB(new _s(t)):jB(new Nc(t))}static readAll(t){return t instanceof Ge?t.isSync()?xp(t):Ap(t):Ol(t)||ArrayBuffer.isView(t)||Ga(t)||pm(t)?xp(t):Ap(t)}}class Fc extends Ge{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return ee(this,arguments,function*(){yield v(yield*_r(He(this[Symbol.iterator]())))})}}class kc extends Ge{constructor(t){super(t),this._impl=t}readAll(){return A(this,void 0,void 0,function*(){var t,i,n,r;const s=new Array;try{for(var a=!0,o=He(this),c;c=yield o.next(),t=c.done,!t;a=!0){r=c.value,a=!1;const u=r;s.push(u)}}catch(u){i={error:u}}finally{try{!a&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(i)throw i.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class d0 extends Fc{constructor(t){super(t),this._impl=t}}class UB extends kc{constructor(t){super(t),this._impl=t}}class p0{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,i){const n=this._loadVectors(t,i,this.schema.fields),r=tt({type:new ue(this.schema.fields),length:t.length,children:n});return new be(this.schema,r)}_loadDictionaryBatch(t,i){const{id:n,isDelta:r}=t,{dictionaries:s,schema:a}=this,o=s.get(n),c=a.dictionaries.get(n),u=this._loadVectors(t.data,i,[c]);return(o&&r?o.concat(new Ft(u)):new Ft(u)).memoize()}_loadVectors(t,i,n){return new i0(i,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}}class Cc extends p0{constructor(t,i){super(i),this._reader=Ol(t)?new RB(this._handle=t):new h0(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=m0(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):kt}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):kt}next(){if(this.closed)return kt;let t;const{_reader:i}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=i.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=i.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Wh(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Lc extends p0{constructor(t,i){super(i),this._reader=new LB(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return A(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return A(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=m0(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return A(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):kt})}return(t){return A(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):kt})}next(){return A(this,void 0,void 0,function*(){if(this.closed)return kt;let t;const{_reader:i}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=yield i.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=yield i.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Wh(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return A(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class y0 extends Cc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,i){super(t instanceof mp?t:new mp(t),i)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var i;if(this.closed)return null;this._footer||this.open();const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const r=this._reader.readMessage(lt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(t){var i;const n=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const r=this._reader.readMessage(lt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}}_readFooter(){const{_handle:t}=this,i=t.size-f0,n=t.readInt32(i),r=t.readAt(i-n,n);return ka.decode(r)}_readNextMessageAndValidate(t){var i;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class PB extends Lc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...i){const n=typeof i[0]!="number"?i.shift():void 0,r=i[0]instanceof Map?i.shift():void 0;super(t instanceof Dc?t:new Dc(t,n),r)}isFile(){return!0}isAsync(){return!0}open(t){const i=Object.create(null,{open:{get:()=>super.open}});return A(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield i.open.call(this,t)})}readRecordBatch(t){return A(this,void 0,void 0,function*(){var i;if(this.closed)return null;this._footer||(yield this.open());const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const r=yield this._reader.readMessage(lt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(t){return A(this,void 0,void 0,function*(){var i;const n=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const r=yield this._reader.readMessage(lt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}})}_readFooter(){return A(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const i=t.size-f0,n=yield t.readInt32(i),r=yield t.readAt(i-n,n);return ka.decode(r)})}_readNextMessageAndValidate(t){return A(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=this._footer.getRecordBatch(this._recordBatchIndex);if(i&&(yield this._handle.seek(i.offset)))return yield this._reader.readMessage(t)}return null})}}class $B extends Cc{constructor(t,i){super(t,i)}_loadVectors(t,i,n){return new Z2(i,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}}function m0(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*xp(e){const t=Ge.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function Ap(e){return ee(this,arguments,function*(){const i=yield v(Ge.from(e));try{if(!(yield v(i.open({autoDestroy:!1}))).closed)do yield yield v(i);while(!(yield v(i.reset().open())).closed)}finally{yield v(i.cancel())}})}function VB(e){return new Fc(new $B(e))}function jB(e){const t=e.peek(Xa+7&-8);return t&&t.byteLength>=4?Hh(t)?new d0(new y0(e.read())):new Fc(new Cc(e)):new Fc(new Cc(function*(){}()))}function zB(e){return A(this,void 0,void 0,function*(){const t=yield e.peek(Xa+7&-8);return t&&t.byteLength>=4?Hh(t)?new d0(new y0(yield e.read())):new kc(new Lc(e)):new kc(new Lc(function(){return ee(this,arguments,function*(){})}()))})}function WB(e){return A(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),i=new Dc(e,t);return t>=MB&&Hh(yield i.readAt(0,Xa+7&-8))?new UB(new PB(i)):new kc(new Lc(i))})}let Vt=class g0 extends X{static assemble(...t){const i=r=>r.flatMap(s=>Array.isArray(s)?i(s):s instanceof be?s.data.children:s.data),n=new g0;return n.visitMany(i(t)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Ft)return this.visitMany(t.data),this;const{type:i}=t;if(!x.isDictionary(i)){const{length:n}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(x.isUnion(i))this.nodes.push(new jn(n,0));else{const{nullCount:r}=t;x.isNull(i)||ui.call(this,r<=0?new Uint8Array(0):Bc(t.offset,n,t.nullBitmap)),this.nodes.push(new jn(n,r))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function ui(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new ki(this._byteLength,t)),this._byteLength+=t,this}function qB(e){var t;const{type:i,length:n,typeIds:r,valueOffsets:s}=e;if(ui.call(this,r),i.mode===oe.Sparse)return Wl.call(this,e);if(i.mode===oe.Dense){if(e.offset<=0)return ui.call(this,s),Wl.call(this,e);{const a=new Int32Array(n),o=Object.create(null),c=Object.create(null);for(let u,l,h=-1;++h<n;)(u=r[h])!==void 0&&((l=o[u])===void 0&&(l=o[u]=s[h]),a[h]=s[h]-l,c[u]=((t=c[u])!==null&&t!==void 0?t:0)+1);ui.call(this,a),this.visitMany(e.children.map((u,l)=>{const h=i.typeIds[l],d=o[h],y=c[h];return u.slice(d,Math.min(n,y))}))}}return this}function YB(e){let t;return e.nullCount>=e.length?ui.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?ui.call(this,Bc(e.offset,e.length,t)):ui.call(this,Ec(e.values))}function vn(e){return ui.call(this,e.values.subarray(0,e.length*e.stride))}function mu(e){const{length:t,values:i,valueOffsets:n}=e,r=St(n[0]),s=St(n[t]),a=Math.min(s-r,i.byteLength-r);return ui.call(this,bm(-r,t+1,n)),ui.call(this,i.subarray(r,r+a)),this}function Gh(e){const{length:t,valueOffsets:i}=e;if(i){const{[0]:n,[t]:r}=i;return ui.call(this,bm(-n,t+1,i)),this.visit(e.children[0].slice(n,r-n))}return this.visit(e.children[0])}function Wl(e){return this.visitMany(e.type.children.map((t,i)=>e.children[i]).filter(Boolean))[0]}Vt.prototype.visitBool=YB;Vt.prototype.visitInt=vn;Vt.prototype.visitFloat=vn;Vt.prototype.visitUtf8=mu;Vt.prototype.visitLargeUtf8=mu;Vt.prototype.visitBinary=mu;Vt.prototype.visitLargeBinary=mu;Vt.prototype.visitFixedSizeBinary=vn;Vt.prototype.visitDate=vn;Vt.prototype.visitTimestamp=vn;Vt.prototype.visitTime=vn;Vt.prototype.visitDecimal=vn;Vt.prototype.visitList=Gh;Vt.prototype.visitStruct=Wl;Vt.prototype.visitUnion=qB;Vt.prototype.visitInterval=vn;Vt.prototype.visitDuration=vn;Vt.prototype.visitFixedSizeList=Gh;Vt.prototype.visitMap=Gh;let _0=class extends Ph{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,i){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Ro,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,Ie(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return vr(t)?t.then(i=>this.writeAll(i)):Ns(t)?Jh(this,t):Kh(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,i=null){return t===this._sink||t instanceof Ro?this._sink=t:(this._sink=new Ro,t&&vA(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&wA(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!i||!jl(i,this._schema))&&(i==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=i,this._writeSchema(i))),this}write(t){let i=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Vn&&!(i=t.schema))return this.finish()&&void 0;if(t instanceof be&&!(i=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(i&&!jl(i,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,i)}t instanceof be?t instanceof Wh||this._writeRecordBatch(t):t instanceof Vn?this.writeAll(t.batches):Ga(t)&&this.writeAll(t)}_writeMessage(t,i=8){const n=i-1,r=un.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+n&~n,c=o-s-a;return t.headerType===lt.RecordBatch?this._recordBatchBlocks.push(new gs(o,t.bodyLength,this._position)):t.headerType===lt.DictionaryBatch&&this._dictionaryBlocks.push(new gs(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(c)}_write(t){if(this._started){const i=rt(t);i&&i.byteLength>0&&(this._sink.write(i),this._position+=i.byteLength)}return this}_writeSchema(t){return this._writeMessage(un.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Ca)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:i,nodes:n,bufferRegions:r,buffers:s}=Vt.assemble(t),a=new ke(t.numRows,n,r),o=un.from(a,i);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,i,n=!1){const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=Vt.assemble(new Ft([t])),c=new ke(t.length,s,a),u=new Ui(c,i,n),l=un.from(u,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let i,n,r;for(let s=-1,a=t.length;++s<a;)(i=t[s])&&(n=i.byteLength)>0&&(this._write(i),(r=(n+7&-8)-n)>0&&this._writePadding(r));return this}_writeDictionaries(t){var i,n;for(const[r,s]of t.dictionaries){const a=(i=s==null?void 0:s.data)!==null&&i!==void 0?i:[],o=this._seenDictionaries.get(r),c=(n=this._dictionaryDeltaOffsets.get(r))!==null&&n!==void 0?n:0;if(!o||o.data[0]!==a[0])for(const[u,l]of a.entries())this._writeDictionaryBatch(l,r,u>0);else if(c<a.length)for(const u of a.slice(c))this._writeDictionaryBatch(u,r,!0);this._seenDictionaries.set(r,s),this._dictionaryDeltaOffsets.set(r,a.length)}return this}},HB=class b0 extends _0{static writeAll(t,i){const n=new b0(i);return vr(t)?t.then(r=>n.writeAll(r)):Ns(t)?Jh(n,t):Kh(n,t)}},GB=class v0 extends _0{static writeAll(t){const i=new v0;return vr(t)?t.then(n=>i.writeAll(n)):Ns(t)?Jh(i,t):Kh(i,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(t,i,n=!1){if(!n&&this._seenDictionaries.has(i))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(t,i,n)}_writeFooter(t){const i=ka.encode(new ka(t,$t.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(i)._write(Int32Array.of(i.byteLength))._writeMagic()}};function Kh(e,t){let i=t;t instanceof Vn&&(i=t.batches,e.reset(void 0,t.schema));for(const n of i)e.write(n);return e.finish()}function Jh(e,t){return A(this,void 0,void 0,function*(){var i,n,r,s,a,o,c;try{for(i=!0,n=He(t);r=yield n.next(),s=r.done,!s;i=!0){c=r.value,i=!1;const u=c;e.write(u)}}catch(u){a={error:u}}finally{try{!i&&!s&&(o=n.return)&&(yield o.call(n))}finally{if(a)throw a.error}}return e.finish()})}function KB(e,t="stream"){return(t==="stream"?HB:GB).writeAll(e).toUint8Array(!0)}var JB=Object.create,w0=Object.defineProperty,QB=Object.getOwnPropertyDescriptor,XB=Object.getOwnPropertyNames,ZB=Object.getPrototypeOf,tE=Object.prototype.hasOwnProperty,eE=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),iE=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of XB(t))!tE.call(e,r)&&r!==i&&w0(e,r,{get:()=>t[r],enumerable:!(n=QB(t,r))||n.enumerable});return e},nE=(e,t,i)=>(i=e!=null?JB(ZB(e)):{},iE(t||!e||!e.__esModule?w0(i,"default",{value:e,enumerable:!0}):i,e)),rE=eE((e,t)=>{t.exports=Worker}),sE=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(sE||{}),aE=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(aE||{}),oE=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(oE||{}),cE=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(cE||{}),uE=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(uE||{}),lE=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(lE||{}),hE=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},fE=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(fE||{}),dE=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),i=Ge.from(t);return console.assert(i.isSync(),"Reader is not sync"),console.assert(i.isFile(),"Reader is not file"),new Vn(i)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let i=new S0(this._bindings,this._conn,t),n=await Ge.from(i);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new pE(this._bindings,this._conn,t)}async insertArrowTable(e,t){let i=KB(e,"stream");await this.insertArrowFromIPCStream(i,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},S0=class{constructor(e,t,i){this.db=e,this.conn=t,this.header=i,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},pE=class{constructor(e,t,i){this.bindings=e,this.connectionId=t,this.statementId=i}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),i=Ge.from(t);return console.assert(i.isSync()),console.assert(i.isFile()),new Vn(i)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),i=new S0(this.bindings,this.connectionId,t),n=await Ge.from(i);return console.assert(n.isAsync()),console.assert(n.isStream()),n}},yE=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(yE||{}),mE=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(mE||{}),ot=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((i,n)=>{this.promiseResolver=i,this.promiseRejecter=n})}};function Po(e){switch(e.typeId){case m.Binary:return{sqlType:"binary"};case m.Bool:return{sqlType:"bool"};case m.Date:return{sqlType:"date"};case m.DateDay:return{sqlType:"date32[d]"};case m.DateMillisecond:return{sqlType:"date64[ms]"};case m.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case m.Float:return{sqlType:"float"};case m.Float16:return{sqlType:"float16"};case m.Float32:return{sqlType:"float32"};case m.Float64:return{sqlType:"float64"};case m.Int:return{sqlType:"int32"};case m.Int16:return{sqlType:"int16"};case m.Int32:return{sqlType:"int32"};case m.Int64:return{sqlType:"int64"};case m.Uint16:return{sqlType:"uint16"};case m.Uint32:return{sqlType:"uint32"};case m.Uint64:return{sqlType:"uint64"};case m.Uint8:return{sqlType:"uint8"};case m.IntervalDayTime:return{sqlType:"interval[dt]"};case m.IntervalYearMonth:return{sqlType:"interval[m]"};case m.List:return{sqlType:"list",valueType:Po(e.valueType)};case m.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case m.Null:return{sqlType:"null"};case m.Utf8:return{sqlType:"utf8"};case m.Struct:return{sqlType:"struct",fields:e.children.map(t=>ql(t.name,t.type))};case m.Map:{let t=e;return{sqlType:"map",keyType:Po(t.keyType),valueType:Po(t.valueType)}}case m.Time:return{sqlType:"time[s]"};case m.TimeMicrosecond:return{sqlType:"time[us]"};case m.TimeMillisecond:return{sqlType:"time[ms]"};case m.TimeNanosecond:return{sqlType:"time[ns]"};case m.TimeSecond:return{sqlType:"time[s]"};case m.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case m.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case m.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case m.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case m.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function ql(e,t){let i=Po(t);return i.name=e,i}var gE=new TextEncoder,_E=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,i)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let i=this._nextMessageId++;return this._pendingRequests.set(i,e),this._worker.postMessage({messageId:i,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let i=e.data;switch(i.type){case"LOG":{this._logger.log(i.data);return}case"INSTANTIATE_PROGRESS":{for(let r of this._onInstantiationProgress)r(i.data);return}}let n=this._pendingRequests.get(i.requestId);if(!n){console.warn("unassociated response: [".concat(i.requestId,", ").concat(i.type.toString(),"]"));return}if(this._pendingRequests.delete(i.requestId),i.type=="ERROR"){let r=new Error(i.data.message);r.name=i.data.name,(t=Object.getOwnPropertyDescriptor(r,"stack"))!=null&&t.writable&&(r.stack=i.data.stack),n.promiseRejecter(r);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(i.type=="OK"){n.promiseResolver(i.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],i.type=="OK"){n.promiseResolver(i.data);return}break;case"GLOB_FILE_INFOS":if(i.type=="FILE_INFOS"){n.promiseResolver(i.data);return}break;case"GET_VERSION":if(i.type=="VERSION_STRING"){n.promiseResolver(i.data);return}break;case"GET_FEATURE_FLAGS":if(i.type=="FEATURE_FLAGS"){n.promiseResolver(i.data);return}break;case"GET_TABLE_NAMES":if(i.type=="TABLE_NAMES"){n.promiseResolver(i.data);return}break;case"TOKENIZE":if(i.type=="SCRIPT_TOKENS"){n.promiseResolver(i.data);return}break;case"COPY_FILE_TO_BUFFER":if(i.type=="FILE_BUFFER"){n.promiseResolver(i.data);return}break;case"EXPORT_FILE_STATISTICS":if(i.type=="FILE_STATISTICS"){n.promiseResolver(i.data);return}break;case"CONNECT":if(i.type=="CONNECTION_INFO"){n.promiseResolver(i.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(i.type=="QUERY_RESULT"){n.promiseResolver(i.data);return}break;case"SEND_PREPARED":if(i.type=="QUERY_RESULT_HEADER"){n.promiseResolver(i.data);return}break;case"START_PENDING_QUERY":if(i.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(i.data);return}break;case"POLL_PENDING_QUERY":if(i.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(i.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],i.type=="SUCCESS"){n.promiseResolver(i.data);return}break;case"FETCH_QUERY_RESULTS":if(i.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(i.data);return}break;case"CREATE_PREPARED":if(i.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(i.data);return}break}n.promiseRejecter(new Error("unexpected response type: ".concat(i.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new ot("RESET",null);return await this.postTask(e)}async ping(){let e=new ot("PING",null);await this.postTask(e)}async dropFile(e){let t=new ot("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new ot("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new ot("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,i=n=>{}){this._onInstantiationProgress.push(i);let n=new ot("INSTANTIATE",[e,t]);return await this.postTask(n)}async getVersion(){let e=new ot("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new ot("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new ot("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new ot("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new ot("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new dE(this,e)}async disconnect(e){let t=new ot("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let i=new ot("RUN_QUERY",[e,t]);return await this.postTask(i)}async startPendingQuery(e,t){let i=new ot("START_PENDING_QUERY",[e,t]);return await this.postTask(i)}async pollPendingQuery(e){let t=new ot("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new ot("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new ot("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let i=new ot("GET_TABLE_NAMES",[e,t]);return await this.postTask(i)}async createPrepared(e,t){let i=new ot("CREATE_PREPARED",[e,t]);return await this.postTask(i)}async closePrepared(e,t){let i=new ot("CLOSE_PREPARED",[e,t]);await this.postTask(i)}async runPrepared(e,t,i){let n=new ot("RUN_PREPARED",[e,t,i]);return await this.postTask(n)}async sendPrepared(e,t,i){let n=new ot("SEND_PREPARED",[e,t,i]);return await this.postTask(n)}async globFiles(e){let t=new ot("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let i=gE.encode(t);await this.registerFileBuffer(e,i)}async registerFileURL(e,t,i,n){t===void 0&&(t=e);let r=new ot("REGISTER_FILE_URL",[e,t,i,n]);await this.postTask(r)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let i=new ot("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(i,[t.buffer])}async registerFileHandle(e,t,i,n){let r=new ot("REGISTER_FILE_HANDLE",[e,t,i,n]);await this.postTask(r,[])}async collectFileStatistics(e,t){let i=new ot("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(i,[])}async exportFileStatistics(e){let t=new ot("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new ot("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let i=new ot("COPY_FILE_TO_PATH",[e,t]);await this.postTask(i)}async insertArrowFromIPCStream(e,t,i){if(t.length==0)return;let n=new ot("INSERT_ARROW_FROM_IPC_STREAM",[e,t,i]);await this.postTask(n,[t.buffer])}async insertCSVFromPath(e,t,i){if(i.columns!==void 0){let r=[];for(let s in i.columns){let a=i.columns[s];r.push(ql(s,a))}i.columnsFlat=r,delete i.columns}let n=new ot("IMPORT_CSV_FROM_PATH",[e,t,i]);await this.postTask(n)}async insertJSONFromPath(e,t,i){if(i.columns!==void 0){let r=[];for(let s in i.columns){let a=i.columns[s];r.push(ql(s,a))}i.columnsFlat=r,delete i.columns}let n=new ot("IMPORT_JSON_FROM_PATH",[e,t,i]);await this.postTask(n)}},bE=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),vE=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),wE=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),SE=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),IE={name:"@duckdb/duckdb-wasm",version:"1.29.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^17.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.2",eslint:"^8.57.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^22.8.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.13",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-node-blocking.d.ts",import:"./dist/duckdb-node-blocking.mjs",require:"./dist/duckdb-node-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Qh=IE.version.split(".");Qh[0];Qh[1];Qh[2];var xE=()=>typeof navigator>"u",Qu=null,Xu=null,Zu=null,tl=null,el=null;async function AE(){return Qu==null&&(Qu=typeof BigInt64Array<"u"),Xu==null&&(Xu=await vE()),Zu==null&&(Zu=await SE()),tl==null&&(tl=await wE()),el==null&&(el=await bE()),{bigInt64Array:Qu,crossOriginIsolated:xE()||globalThis.crossOriginIsolated||!1,wasmExceptions:Xu,wasmSIMD:tl,wasmThreads:Zu,wasmBulkMemory:el}}async function BE(e){let t=await AE();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}nE(rE());function EE(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}EE();var OE=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(OE||{});const TE=""+new URL("../assets/duckdb-mvp.79c53003.wasm",import.meta.url).href,NE=""+new URL("../assets/duckdb-browser-mvp.worker.f798d151.js",import.meta.url).href,DE=""+new URL("../assets/duckdb-eh.00d45e5e.wasm",import.meta.url).href,FE=""+new URL("../assets/duckdb-browser-eh.worker.260b4773.js",import.meta.url).href;class kE extends zi{constructor(t){super(),this.sources=[],this.db=null,this.conn=null,t.sources?this.sources.push.apply(this.sources,t.sources):t.name&&this.sources.push(t)}register(t){this.sources.push(t)}async query(t){return await this.conn.query(t)}async init(){const i=await BE({mvp:{mainModule:TE,mainWorker:NE},eh:{mainModule:DE,mainWorker:FE}}),n=new Worker(i.mainWorker),r=new hE;this.db=new _E(r,n),await this.db.instantiate(i.mainModule,i.pthreadWorker),this.conn=await this.db.connect();for(let s of this.sources)await this.load(s)}async load(t){let i=t.name;if(t.csv)await this.db.registerFileText(i,t.csv),await this.conn.insertCSVFromPath(i,{name:i,schema:"main",detect:!0,header:!0});else if(t.url){let r=await(await fetch(t.url)).arrayBuffer();const s=new Uint8Array(r);await this.db.registerFileBuffer(i,s),await this.conn.insertCSVFromPath(i,{name:i,schema:"main",detect:!0,header:!0})}else if(t.parquet){const n=`${I1}/${t.parquet}`;console.log("parquet_name and registration path:",t.parquet,n),await this.db.registerFileURL(t.parquet,n,4,!1);const r=`CREATE TABLE ${t.name} AS SELECT * FROM parquet_scan(${t.parquet})`;console.log("parquet loading query:",r),await this.query(r);const a=(await this.conn.query("SHOW ALL TABLES")).toArray().map(Object.fromEntries);console.log("database DIAGNOSTIC: ",a)}return this}async _execute(t,...i){for(const n of t){const r=n.q;let s=await this.conn.query(r),a=s.toArray().map(Object.fromEntries);return a.columns=s.schema.fields.map(o=>o.name),console.debug("duckdb.execute",r,a,...i),this.emit("data",a,...i),this.emit("debug",a),a}}}var Nn=(e=>(e.LITERAL="literal",e.AST="ast",e.LIST="list",e.ANY="any",e.OPT="opt",e.FIXEDMULTI="fixedmulti",e.MULTI="multi",e))(Nn||{});let Bp=nw(e=>e.length>0);class CE{constructor(t){this.binding={},this.spec={},this.spec=t}update(t){return this.binding=vh(this.binding,t),this}snapshot(){return this.binding}restoreSnapshot(t){this.binding=t}toSQL(){return Yl(this.binding,this.spec)}}function Yl(e,t){let i=t.children??[],n=Dw(Yl,[e]),r=[],s;switch(t==null?void 0:t.type){case Nn.LITERAL:return t.value;case Nn.AST:return r=i.map(n),Bp(r).join("");case Nn.LIST:return r=i.map(n),Bp(r).join(t.delim);case Nn.ANY:if(s=e[t.id]??t.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=i.length?a:n(i[a]);case Nn.OPT:return s=e[t.id]??t.default??0,gw(s,[1,"selected"])?n(i[0]):"";case Nn.FIXEDMULTI:case Nn.MULTI:let o=e[t.id]??t.default??[];return bh(Array,o)||(o=[o]),o.map(c=>Yl(c,i[0])).join(t.delim??"");default:return""}}class LE extends zi{constructor(t){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=t,this.dt=new CE(t.difftree),this.backend=bh(String,t.backend)?x1(fA)[t.backend]:t.backend,this.backend&&this.backend.on("data",i=>{this.emit("data",i)})}snapshot(){return this.dt.snapshot()}async _execute(t,i){let n=t[0]??{};const r=this.dt.update(n).toSQL();if(console.log("ClientDT.execute",r,n),this.emit("debug",r),this.backend)return this.backend.execute(r,i)}}class RE extends zi{constructor(t){super(),this.q=[],this.q=t.data??[]}async execute(t,i){this.emit("data",t??this.q,i)}}class ME extends zi{constructor(t){super();let i=t.attrs??[];this.gen=n=>{let r=i.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",n]),dw(r)}}async _execute(t,...i){this.emit("data",kw(this.gen,10),...i)}}class UE extends zi{constructor(t){super(),this.backend=t.backend,this.query=t.query,this.name=t.name,this.params=t.defaults??{}}snapshot(){return Qo(this.params)}restoreSnapshot(t){this.params=t}prepareQuery(t,i){let n=t;return Py((r,s)=>{n=n.replaceAll(`var(${s})`,r)},i),n}async _execute(t){t=Array.isArray(t)?t:[t],t.forEach(r=>{this.params=vh(this.params,r)});let i=this.prepareQuery(this.query,this.params),n=await this.backend._execute([{q:i}],this.name);return this.emit("data",n,this.name),n}}const ht=Array.isArray;function Ae(e){return e!=null?ht(e)?e:[e]:[]}function PE(e=0,t=1/0){return`${Ep(e)} < row_number() && row_number() <= ${Ep(t)}`}function Ep(e){return e<0?`count() + ${e}`:e}class I0{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,i){return this.__derive(this,t,i)}filter(t){return this.__filter(this,t)}slice(t,i){return this.filter(PE(t,i)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,i){return this.__relocate(this,Ae(t),i)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,i){return this.__sample(this,t,i)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,i){return this.__impute(this,t,i)}fold(t,i){return this.__fold(this,t,i)}pivot(t,i,n){return this.__pivot(this,t,i,n)}spread(t,i){return this.__spread(this,t,i)}unroll(t,i){return this.__unroll(this,t,i)}lookup(t,i,...n){return this.__lookup(this,t,i,n.flat())}join(t,i,n,r){return this.__join(this,t,i,n,r)}join_left(t,i,n,r){const s={...r,left:!0,right:!1};return this.__join(this,t,i,n,s)}join_right(t,i,n,r){const s={...r,left:!1,right:!0};return this.__join(this,t,i,n,s)}join_full(t,i,n,r){const s={...r,left:!0,right:!0};return this.__join(this,t,i,n,s)}cross(t,i,n){return this.__cross(this,t,i,n)}semijoin(t,i){return this.__semijoin(this,t,i)}antijoin(t,i){return this.__antijoin(this,t,i)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Q(e){throw Error(e)}function le(e){return typeof e=="number"}function Ot(e){return typeof e=="function"}function gu(e,t){const i=Array(e);if(Ot(t))for(let n=0;n<e;++n)i[n]=t(n);else i.fill(t);return i}let $E=class extends I0{constructor(t,i,n,r,s,a,o){super(o),this._names=Object.freeze(t),this._data=n,this._total=i,this._nrows=r?r.count():i,this._mask=i!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(t){Q("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,i){return this.array(t,i)}array(t,i){Q("Not implemented")}*values(t){const i=this.getter(t),n=this.numRows();for(let r=0;r<n;++r)yield i(r)}get(t,i=0){Q("Not implemented")}getter(t){Q("Not implemented")}objects(t){Q("Not implemented")}object(t){Q("Not implemented")}[Symbol.iterator](){Q("Not implemented")}print(t={}){le(t)?t={limit:t}:t.limit==null&&(t.limit=10);const i=this.objects({...t,grouped:!1}),n=`${this[Symbol.toStringTag]}. Showing ${i.length} rows.`;return console.log(n),console.table(i),this}indices(t=!0){if(this._index)return this._index;const i=this.numRows(),n=new Uint32Array(i),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))n[++a]=o;else for(let o=0;o<i;++o)n[++a]=o;if(t&&r){const o=this._order,c=this._data;n.sort((u,l)=>o(u,l,c))}return(t||!r)&&(this._index=n),n}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:i,size:n}=this._group,r=gu(n,()=>[]),s=this._index,a=this.mask(),o=this.numRows();if(s&&this.isOrdered())for(let c=0,u;c<o;++c)u=s[c],r[i[u]].push(u);else if(a)for(let c=a.next(0);c>=0;c=a.next(c+1))r[i[c]].push(c);else for(let c=0;c<o;++c)r[i[c]].push(c);if(t&&!s&&this.isOrdered()){const c=this._order,u=this._data;for(let l=0;l<n;++l)r[l].sort((h,d)=>c(h,d,u))}return(t||!this.isOrdered())&&(this._partitions=r),r}scan(t,i,n=1/0,r=0){const s=this._mask,a=this._nrows,o=this._data;let c=r||0;if(c>a)return;const u=Math.min(a,c+n),l=()=>c=this._total;if(i&&this.isOrdered()||s&&this._index){const h=this.indices(),d=this._data;for(;c<u;++c)t(h[c],d,l)}else if(s){let h=u-c+1;for(c=s.nth(c);--h&&c>-1;c=s.next(c+1))t(c,o,l)}else for(;c<u;++c)t(c,o,l)}slice(t=0,i=1/0){if(this.isGrouped())return super.slice(t,i);const n=[],r=this.numRows();return t=Math.max(0,t+(t<0?r:0)),i=Math.min(r,Math.max(0,i+(i<0?r:0))),this.scan(s=>n.push(s),!0,i-t,t),this.reify(n)}reduce(t){return this.__reduce(this,t)}},VE=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},jE=function(e){return e&&Ot(e.get)?e:new VE(e)};function hn(e){return e instanceof Date}function ce(e){return e===Object(e)}function Rc(e){return e instanceof RegExp}function ne(e){return typeof e=="string"}function zE(e,t){const i=n=>Q(`Illegal argument type: ${n||typeof e}`);return e instanceof Map?Op(e.entries(),t):hn(e)?i("Date"):Rc(e)?i("RegExp"):ne(e)?i():ht(e)?WE(e,t):Ot(e[Symbol.iterator])?qE(e,t):ce(e)?Op(Object.entries(e),t):i()}function Op(e,t=["key","value"]){const i=[],n=[];for(const[s,a]of e)i.push(s),n.push(a);const r={};return t[0]&&(r[t[0]]=i),t[1]&&(r[t[1]]=n),r}function WE(e,t){const i=e.length,n={},r=s=>n[s]=Array(i);if(i){t=t||Object.keys(e[0]);const s=t.map(r),a=s.length;for(let o=0;o<i;++o){const c=e[o];for(let u=0;u<a;++u)s[u][o]=c[t[u]]}}else t&&t.forEach(r);return n}function qE(e,t){const i={},n=a=>i[a]=[];let r,s;for(const a of e){r||(t=t||Object.keys(a),r=t.map(n),s=r.length);for(let o=0;o<s;++o)r[o].push(a[t[o]])}return!r&&t&&t.forEach(n),i}const{hasOwnProperty:YE}=Object.prototype;function fi(e,t){return YE.call(e,t)}function Le(e){return e?new Tp({...e.data()},e.columnNames()):new Tp}class Tp{constructor(t,i){this.data=t||{},this.names=i||[]}add(t,i){return this.has(t)||this.names.push(t+""),this.data[t]=i}has(t){return fi(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ut=void 0,HE=Object.getPrototypeOf(Int8Array);function Za(e){return e instanceof HE}function yr(e){return ht(e)||Za(e)}function ci(e){return e!=null&&e===e}const Gs=e=>yr(e)||ne(e),GE={compact:e=>yr(e)?e.filter(t=>ci(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,i)=>Gs(e)?e.includes(t,i):!1,indexof:(e,t)=>Gs(e)?e.indexOf(t):-1,join:(e,t)=>yr(e)?e.join(t):ut,lastindexof:(e,t)=>Gs(e)?e.lastIndexOf(t):-1,length:e=>Gs(e)?e.length:0,pluck:(e,t)=>yr(e)?e.map(i=>ci(i)?i[t]:ut):ut,reverse:e=>yr(e)?e.slice().reverse():ne(e)?e.split("").reverse().join(""):ut,slice:(e,t,i)=>Gs(e)?e.slice(t,i):ut};function KE(e,t,i,n,r){return e==null?null:e<t?-1/0:e>i?1/0:(e=Math.max(t,Math.min(e,i)),t+n*Math.floor(1e-14+(e-t)/n+(r||0)))}function $o(e,t,i="0"){const n=e+"",r=n.length;return r<t?Array(t-r+1).join(i)+n:n}const bi=e=>(e<10?"0":"")+e,JE=e=>e<0?"-"+$o(-e,6):e>9999?"+"+$o(e,6):$o(e,4);function x0(e,t,i,n,r,s,a,o,c){const u=o?"Z":"";return JE(e)+"-"+bi(t+1)+"-"+bi(i)+(!c||a?"T"+bi(n)+":"+bi(r)+":"+bi(s)+"."+$o(a,3)+u:s?"T"+bi(n)+":"+bi(r)+":"+bi(s)+u:r||n||!o?"T"+bi(n)+":"+bi(r)+u:"")}function A0(e,t){return isNaN(e)?"Invalid Date":x0(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function _u(e,t){return isNaN(e)?"Invalid Date":x0(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const QE=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function XE(e){return e.match(QE)&&!isNaN(Date.parse(e))}function ZE(e,t=Date.parse){return XE(e)?t(e):e}const B0=6e4,E0=864e5,O0=6048e5,Lt=new Date,Rt=new Date,Ut=e=>(Lt.setTime(typeof e=="string"?ZE(e):e),Lt);function tO(e,t,i,n,r,s,a){return arguments.length?new Date(e,t||0,i??1,n||0,r||0,s||0,a||0):new Date(Date.now())}function eO(e,t,i,n,r,s,a){return arguments.length?new Date(Date.UTC(e,t||0,i??1,n||0,r||0,s||0,a||0)):new Date(Date.now())}function iO(e){Rt.setTime(+e),Rt.setHours(0,0,0,0),Lt.setTime(+Rt),Lt.setMonth(0),Lt.setDate(1);const t=(Rt.getTimezoneOffset()-Lt.getTimezoneOffset())*B0;return Math.floor(1+(Rt-Lt-t)/E0)}function nO(e){Rt.setTime(+e),Rt.setUTCHours(0,0,0,0);const t=Date.UTC(Rt.getUTCFullYear(),0,1);return Math.floor(1+(Rt-t)/E0)}function rO(e,t){const i=t||0;Rt.setTime(+e),Rt.setDate(Rt.getDate()-(Rt.getDay()+7-i)%7),Rt.setHours(0,0,0,0),Lt.setTime(+e),Lt.setMonth(0),Lt.setDate(1),Lt.setDate(1-(Lt.getDay()+7-i)%7),Lt.setHours(0,0,0,0);const n=(Rt.getTimezoneOffset()-Lt.getTimezoneOffset())*B0;return Math.floor((1+(Rt-Lt)-n)/O0)}function sO(e,t){const i=t||0;return Rt.setTime(+e),Rt.setUTCDate(Rt.getUTCDate()-(Rt.getUTCDay()+7-i)%7),Rt.setUTCHours(0,0,0,0),Lt.setTime(+e),Lt.setUTCMonth(0),Lt.setUTCDate(1),Lt.setUTCDate(1-(Lt.getUTCDay()+7-i)%7),Lt.setUTCHours(0,0,0,0),Math.floor((1+(Rt-Lt))/O0)}const aO={format_date:(e,t)=>A0(Ut(e),!t),format_utcdate:(e,t)=>_u(Ut(e),!t),timestamp:e=>+Ut(e),year:e=>Ut(e).getFullYear(),quarter:e=>Math.floor(Ut(e).getMonth()/3),month:e=>Ut(e).getMonth(),date:e=>Ut(e).getDate(),dayofweek:e=>Ut(e).getDay(),hours:e=>Ut(e).getHours(),minutes:e=>Ut(e).getMinutes(),seconds:e=>Ut(e).getSeconds(),milliseconds:e=>Ut(e).getMilliseconds(),utcyear:e=>Ut(e).getUTCFullYear(),utcquarter:e=>Math.floor(Ut(e).getUTCMonth()/3),utcmonth:e=>Ut(e).getUTCMonth(),utcdate:e=>Ut(e).getUTCDate(),utcdayofweek:e=>Ut(e).getUTCDay(),utchours:e=>Ut(e).getUTCHours(),utcminutes:e=>Ut(e).getUTCMinutes(),utcseconds:e=>Ut(e).getUTCSeconds(),utcmilliseconds:e=>Ut(e).getUTCMilliseconds(),datetime:tO,dayofyear:iO,week:rO,utcdatetime:eO,utcdayofyear:nO,utcweek:sO,now:Date.now};function Xh(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:hn(e)||hn(t)?+e==+t:Rc(e)&&Rc(t)?e+""==t+"":ce(e)&&ce(t)?oO(e,t):!1}function oO(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Np(e,t);const i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length||(i.sort(),n.sort(),!Np(i,n,(s,a)=>s===a)))return!1;const r=i.length;for(let s=0;s<r;++s){const a=i[s];if(!Xh(e[a],t[a]))return!1}return!0}function Np(e,t,i=Xh){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;++r)if(!i(e[r],t[r]))return!1;return!0}const cO={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let uO=Math.random;function Fs(){return uO()}const lO={random:Fs,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Zh(e){return e instanceof Map}function hO(e){return e instanceof Set}function Vo(e){return Zh(e)||hO(e)}function il(e){return Array.from(e)}const fO={has:(e,t)=>Vo(e)?e.has(t):e!=null?fi(e,t):!1,keys:e=>Zh(e)?il(e.keys()):e!=null?Object.keys(e):[],values:e=>Vo(e)?il(e.values()):e!=null?Object.values(e):[],entries:e=>Vo(e)?il(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ut};function dO(e,t,i){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(fi(t,e))return t[e];return i!==void 0?i:e}function pO(e,t,i){let n=arguments.length;e=+e,t=+t,i=n<2?(t=e,e=0,1):n<3?1:+i,n=Math.max(0,Math.ceil((t-e)/i))|0;const r=new Array(n);for(let s=0;s<n;++s)r[s]=e+s*i;return r}const yO={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,i)=>e==null?!1:String(e).endsWith(t,i),match:(e,t,i)=>{const n=e==null?e:String(e).match(t);return i==null||n==null?n:typeof i=="number"?n[i]:n.groups?n.groups[i]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,i)=>e==null?e:String(e).padEnd(t,i),padstart:(e,t,i)=>e==null?e:String(e).padStart(t,i),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,i)=>e==null?e:String(e).replace(t,String(i)),substring:(e,t,i)=>e==null?e:String(e).substring(t,i),split:(e,t,i)=>e==null?[]:String(e).split(t,i),startswith:(e,t,i)=>e==null?!1:String(e).startsWith(t,i),trim:e=>e==null?e:String(e).trim()},ts={bin:KE,equal:Xh,recode:dO,sequence:pO,...GE,...aO,...cO,...lO,...fO,...yO};function La(e){return typeof e=="bigint"}function Pi(e){return e===void 0?e+"":La(e)?e+"n":JSON.stringify(e)}function J(e,t=[],i=[]){return new mO(e,Ae(t),Ae(i))}let mO=class{constructor(t,i,n){this.name=t,this.fields=i,this.params=n}toString(){const t=[...this.fields.map(i=>`d[${Pi(i)}]`),...this.params.map(Pi)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const T0=e=>J("any",e),N0=()=>J("count"),D0=e=>J("array_agg",e),F0=e=>J("array_agg_distinct",e),k0=(e,t)=>J("map_agg",[e,t]),C0=(e,t)=>J("object_agg",[e,t]),L0=(e,t)=>J("entries_agg",[e,t]);({...ts});function gO(e,t){e=Vo(e)?e:new Set(e);let i=t,n=0;for(;e.has(i);)i=t+ ++n;return i}function _O(e,t){if(!e||!t)return e;const{keys:i,rows:n,size:r}=e,s=new Int32Array(r);t.scan(l=>s[i[l]]=1);const a=s.reduce((l,h)=>l+h,0);if(a===r)return e;const o=Array(a);let c=0;for(let l=0;l<r;++l)s[l]&&(o[s[l]=c++]=n[l]);const u=new Uint32Array(i.length);return t.scan(l=>u[l]=s[i[l]]),{...e,keys:u,rows:o,size:c}}function bO(e,t,i,n){const{keys:r,rows:s,size:a}=e;let o=s,c=a,u=null;if(i){u=new Int32Array(a),t(g=>u[r[g]]=1);const y=u.reduce((g,_)=>g+_,0);if(y!==a){o=Array(y),c=0;for(let g=0;g<a;++g)u[g]&&(o[u[g]=c++]=s[g])}}let l=-1;const h=new Uint32Array(n);return t(c!==a?y=>h[++l]=u[r[y]]:y=>h[++l]=r[y]),{...e,keys:h,rows:o,size:c}}function vO(e,t,i,n){const r=n==="map"||n===!0?k0:n==="entries"?L0:n==="object"?C0:Q('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),a=gO(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:i}}).rollup({[a]:D0(a)});for(let c=s.length;--c>=0;)o=o.groupby(s.slice(0,c)).rollup({[a]:r(s[c],a)});return o.get(a)}const wO="ArrayPattern",SO="ArrowFunctionExpression",IO="FunctionExpression",Un="Identifier",ks="Literal",R0="MemberExpression",xO="ObjectExpression",M0="ObjectPattern",U0="Property",to="Column",AO="Constant",BO="Dictionary",EO="Function",OO="Parameter",P0="Op",Bt=(e,t)=>{const i=TO[e.type];return i?i(e,t):Q(`Unsupported expression construct: ${e.type}`)},nl=(e,t)=>"("+Bt(e.left,t)+" "+e.operator+" "+Bt(e.right,t)+")",rl=(e,t)=>"("+xi(e.params,t)+")=>"+Bt(e.body,t),Dp=(e,t)=>Bt(e.callee,t)+"("+xi(e.arguments,t)+")",xi=(e,t,i=",")=>e.map(n=>Bt(n,t)).join(i),$0=e=>e.computed?`[${Pi(e.name)}]`:`.${e.name}`,Fp=(e,t,i)=>{const n=e.table||"";return`data${n}${$0(e)}.${i}(${t.index}${n})`},TO={Constant:e=>e.raw,Column:(e,t)=>Fp(e,t,"get"),Dictionary:(e,t)=>Fp(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${$0(e)}`,Op:(e,t)=>`op(${Pi(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:i,expressions:n}=e,r=n.length;let s=i[0].value.raw;for(let a=0;a<r;)s+="${"+Bt(n[a],t)+"}"+i[++a].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const i=!e.computed,n=Bt(e.object,t),r=Bt(e.property,t);return n+(i?"."+r:"["+r+"]")},CallExpression:Dp,NewExpression:(e,t)=>"new "+Dp(e,t),ArrayExpression:(e,t)=>"["+xi(e.elements,t)+"]",AssignmentExpression:nl,BinaryExpression:nl,LogicalExpression:nl,UnaryExpression:(e,t)=>"("+e.operator+Bt(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Bt(e.test,t)+"?"+Bt(e.consequent,t)+":"+Bt(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+xi(e.properties,t)+"})",Property:(e,t)=>{const i=Bt(e.key,t);return(e.computed?`[${i}]`:i)+":"+Bt(e.value,t)},ArrowFunctionExpression:rl,FunctionExpression:rl,FunctionDeclaration:rl,ArrayPattern:(e,t)=>"["+xi(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+xi(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+xi(e.declarations,t,","),VariableDeclarator:(e,t)=>Bt(e.id,t)+"="+Bt(e.init,t),SpreadElement:(e,t)=>"..."+Bt(e.argument,t),BlockStatement:(e,t)=>"{"+xi(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Bt(e.expression,t),IfStatement:(e,t)=>"if ("+Bt(e.test,t)+")"+Bt(e.consequent,t)+(e.alternate?" else "+Bt(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Bt(e.discriminant,t)+") {"+xi(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Bt(e.test,t):"default")+": "+xi(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Bt(e.argument,t),Program:(e,t)=>Bt(e.body[0],t)};function Mc(e,t={index:"row"}){return Bt(e,t)}function NO(e,t,i=15,n=!0,r=0,s){const o=Math.LN10;if(s==null){const c=Math.ceil(Math.log(i)/o),u=t-e||Math.abs(e)||1,l=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(u)/o)-c));Math.ceil(u/s)>i;)s*=10;const h=l.length;for(let d=0;d<h;++d){const y=s/l[d];y>=r&&u/y<=i&&(s=y)}}if(n){let c=Math.log(s);const u=c>=0?0:~~(-c/o)+1,l=Math.pow(10,-u-1);c=Math.floor(e/s+l)*s,e=e<c?c-s:c,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function vs(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:hn(e)?+e:ht(e)||Za(e)?`[${e.map(vs)}]`:Rc(e)?e+"":DO(e)}function DO(e){let t="{",i=-1;for(const n in e)++i>0&&(t+=","),t+=`"${n}":${vs(e[n])}`;return t+="}",t}function Uc(e,t){const i=e.length;return i===1?(n,r)=>vs(e[0](n,r)):(n,r)=>{let s="";for(let a=0;a<i;++a){a>0&&(s+="|");const o=e[a](n,r);if(t&&(o==null||o!==o))return null;s+=vs(o)}return s}}function FO(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const i=vs(t),n=e.get(i);n?++n.n:e.set(i,{v:t,n:1})},decrement(t){const i=vs(t),n=e.get(i);n.n===1?e.delete(i):--n.n},forEach(t){e.forEach(({v:i,n})=>t(i,n))}}}function nn(){}function kO(e,t=0,i=e.length){let n=e[t++];for(let r=t;r<i;++r)n*=e[r];return n}function qt(e){return e.init=e.init||nn,e.add=e.add||nn,e.rem=e.rem||nn,e}function kp(e,t){return e.product_v=!1,e.product=t}const V0={count:{create:()=>qt({value:e=>e.count}),param:[]},array_agg:{create:()=>qt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>qt({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>qt({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>qt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>qt({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ut}),param:[1]},valid:{create:()=>qt({value:e=>e.valid}),param:[1]},invalid:{create:()=>qt({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=FO(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>qt({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>qt({value:e=>{let t=ut,i=0;return e.distinct.forEach((n,r)=>{r>i&&(i=r,t=n)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ut,add:(e,t)=>La(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>kp(e,1),value:e=>e.valid?e.product_v?kp(e,kO(e.list.values())):e.product:void 0,add:(e,t)=>La(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ut,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>qt({value:e=>e.valid?e.mean:ut}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ut,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>qt({value:e=>e.valid>1?e.dev/e.valid:ut}),param:[1],req:["variance"]},stdev:{create:()=>qt({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ut}),param:[1],req:["variance"]},stdevp:{create:()=>qt({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ut}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ut,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ut)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ut,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ut)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>qt({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>qt({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ut,add:(e,t,i)=>{const n=t-e.mean_x,r=i-e.mean_y;e.mean_x+=n/e.valid,e.mean_y+=r/e.valid;const s=i-e.mean_y;e.dev_x+=n*(t-e.mean_x),e.dev_y+=r*s,e.cov+=n*s},rem:(e,t,i)=>{const n=t-e.mean_x,r=i-e.mean_y;e.mean_x-=e.valid?n/e.valid:e.mean_x,e.mean_y-=e.valid?r/e.valid:e.mean_y;const s=i-e.mean_y;e.dev_x-=n*(t-e.mean_x),e.dev_y-=r*s,e.cov-=n*s}}),param:[2]},covariancep:{create:()=>qt({value:e=>e.valid>1?e.cov/e.valid:ut}),param:[2],req:["covariance"]},corr:{create:()=>qt({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ut}),param:[2],req:["covariance"]},bins:{create:(e,t,i,n)=>qt({value:r=>NO(r.min,r.max,e,t,i,n)}),param:[1,4],req:["min","max"]}},Cp={create(){let e;return{init:()=>e=1,value:t=>{const i=t.index;return i&&!t.peer(i)?e=i+1:e}}},param:[]},Lp={create(){let e;return{init:()=>e=0,value:t=>{const{index:i,peer:n,size:r}=t;let s=i;if(e<s){for(;s+1<r&&n(s+1);)++s;e=s}return(1+e)/r}}},param:[]},j0={row_number:{create(){return{init:nn,value:e=>e.index+1}},param:[]},rank:Cp,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:i=>{const n=i.index;if(n>=e){for(t=e=n+1;i.peer(e);t+=++e);t/=e-n}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const i=t.index;return i&&!t.peer(i)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Cp.create();return{init:e,value:i=>(t(i)-1)/(i.size-1)}},param:[]},cume_dist:Lp,ntile:{create(e){e=+e,e>0||Q("ntile num must be greater than zero.");const{init:t,value:i}=Lp.create();return{init:t,value:n=>Math.ceil(e*i(n))}},param:[0,1]},lag:{create(e,t=ut){return e=+e||1,{init:nn,value:(i,n)=>{const r=i.index-e;return r>=0?i.value(r,n):t}}},param:[1,2]},lead:{create(e,t=ut){return e=+e||1,{init:nn,value:(i,n)=>{const r=i.index+e;return r<i.size?i.value(r,n):t}}},param:[1,2]},first_value:{create(){return{init:nn,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:nn,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Q("nth_value nth must be greater than zero."),{init:nn,value:(t,i)=>{const n=t.i0+(e-1);return n<t.i1?t.value(n,i):ut}}},param:[1,1]},fill_down:{create(e=ut){let t;return{init:()=>t=e,value:(i,n)=>{const r=i.value(i.index,n);return ci(r)?t=r:t}}},param:[1,1]},fill_up:{create(e=ut){let t,i;return{init:()=>(t=e,i=-1),value:(n,r)=>n.index<=i?t:(i=CO(n,r,n.index))>=0?t=n.value(i,r):(i=n.size,t=e)}},param:[1,1]}};function CO(e,t,i){for(const n=e.size;i<n;++i)if(ci(e.value(i,t)))return i;return-1}function tf(e){return fi(V0,e)}function ef(e){return fi(j0,e)}function z0(e){return fi(ts,e)||e==="row_object"}function W0(e){return tf(e)&&V0[e]}function q0(e){return ef(e)&&j0[e]}function Ks(e,t,i){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,i)}const nf={escape:(e,t,i)=>Ks(e,t,i),expr:(e,t)=>Ks(`(row,data,op)=>${e}`,ts,t),expr2:(e,t)=>Ks(`(row0,data0,row,data)=>${e}`,ts,t),join:(e,t)=>Ks(`(row1,data1,row2,data2)=>${e}`,ts,t),param:(e,t)=>Ks(e,ts,t)},LO={"==":1,"!=":1,"===":1,"!==":1};function Y0(e,t,i=0,n,r){if(e.type=to,e.name=t,e.table=i,r&&n&&Ot(n.keyFor)){const s=LO[r.operator]?r.left===e?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===e?1:0]:null;s&&s.type===ks&&RO(r,e,s,n.keyFor(s.value))}return e}function RO(e,t,i,n){return n<0?(e.type=ks,e.value=!1,e.raw="false"):(t.type=BO,i.value=n,i.raw=n+""),!0}function bu(e){return ht(e)?e:Zh(e)?e.entries():e?Object.entries(e):[]}const H0="row_object";function G0(e,t){e.type=xO;const i=e.properties=[];for(const n of bu(t)){const[r,s]=ht(n)?n:[n,n];i.push({type:U0,key:{type:ks,raw:Pi(s)},value:Y0({computed:!0},r)})}return e}function K0(e){return Mc(G0({},e))}function J0(e){return nf.expr(K0(e))}const MO=new TextDecoder("utf-8"),Hl=e=>MO.decode(e),UO=new TextEncoder,vu=e=>UO.encode(e),PO=e=>typeof e=="boolean",_e=e=>typeof e=="function",Xn=e=>e!=null&&Object(e)===e,wu=e=>Xn(e)&&_e(e.then),rf=e=>Xn(e)&&_e(e[Symbol.iterator]),Su=e=>Xn(e)&&_e(e[Symbol.asyncIterator]),$O=e=>Xn(e)&&"done"in e&&"value"in e,Q0=e=>"_getDOMStream"in e&&"_getNodeStream"in e,VO=e=>Xn(e)&&_e(e.abort)&&_e(e.getWriter)&&!Q0(e),jO=e=>Xn(e)&&_e(e.end)&&_e(e.write)&&PO(e.writable)&&!Q0(e),zO=e=>Xn(e)&&_e(e.clear)&&_e(e.bytes)&&_e(e.position)&&_e(e.setPosition)&&_e(e.capacity)&&_e(e.getBufferIdentifier)&&_e(e.createLong),sf=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function WO(e){const t=e[0]?[e[0]]:[];let i,n,r,s;for(let a,o,c=0,u=0,l=e.length;++c<l;){if(a=t[u],o=e[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:i,byteLength:r}=a,{byteOffset:n,byteLength:s}=o,i+r<n||n+s<i){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,i,n-i+s)}return t}function Gl(e,t,i=0,n=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,r));return s.set(a,i),e}function $i(e,t){const i=WO(e),n=i.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,n);for(const l=i.length;++c<l;){if(r=i[c],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?i[c]=r.subarray(s.length):s.length===r.length&&c++,a?Gl(a,s,o):a=s;break}Gl(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),i.slice(c),n-(a?a.byteLength:0)]}function Yt(e,t){let i=$O(t)?t.value:t;return i instanceof e?e===Uint8Array?new e(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=vu(i)),i instanceof ArrayBuffer?new e(i):i instanceof sf?new e(i):zO(i)?Yt(e,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new e(0):new e(i.buffer,i.byteOffset,i.byteLength/e.BYTES_PER_ELEMENT):e.from(i)):new e(0)}const Js=e=>Yt(Int32Array,e),Rp=e=>Yt(BigInt64Array,e),st=e=>Yt(Uint8Array,e),Kl=e=>(e.next(),e);function*qO(e,t){const i=function*(r){yield r},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof sf?i(t):rf(t)?t:i(t);return yield*Kl(function*(r){let s=null;do s=r.next(yield Yt(e,s));while(!s.done)}(n[Symbol.iterator]())),new e}const YO=e=>qO(Uint8Array,e);function X0(e,t){return ee(this,arguments,function*(){if(wu(t))return yield v(yield v(yield*_r(He(X0(e,yield v(t))))));const n=function(a){return ee(this,arguments,function*(){yield yield v(yield v(a))})},r=function(a){return ee(this,arguments,function*(){yield v(yield*_r(He(Kl(function*(o){let c=null;do c=o.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof sf?n(t):rf(t)?r(t):Su(t)?t:n(t);return yield v(yield*_r(He(Kl(function(a){return ee(this,arguments,function*(){let o=null;do o=yield v(a.next(yield yield v(Yt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield v(new e)})}const HO=e=>X0(Uint8Array,e);function Z0(e,t,i){if(e!==0){i=i.slice(0,t);for(let n=-1,r=i.length;++n<r;)i[n]+=e}return i.subarray(0,t)}function GO(e,t){let i=0;const n=e.length;if(n!==t.length)return!1;if(n>0)do if(e[i]!==t[i])return!1;while(++i<n);return!0}const Mp={fromIterable(e){return go(KO(e))},fromAsyncIterable(e){return go(JO(e))},fromDOMStream(e){return go(QO(e))},fromNodeStream(e){return go(ZO(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},go=e=>(e.next(),e);function*KO(e){let t,i=!1,n=[],r,s,a,o=0;function c(){return s==="peek"?$i(n,a)[0]:([r,n,o]=$i(n,a),r)}({cmd:s,size:a}=(yield(()=>null)())||{cmd:"read",size:0});const u=YO(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&r.byteLength>0&&(n.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield c());while(a<o);while(!t)}catch(l){(i=!0)&&typeof u.throw=="function"&&u.throw(l)}finally{i===!1&&typeof u.return=="function"&&u.return(null)}return null}function JO(e){return ee(this,arguments,function*(){let i,n=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?$i(r,o)[0]:([s,r,c]=$i(r,o),s)}({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0});const l=HO(e)[Symbol.asyncIterator]();try{do if({done:i,value:s}=Number.isNaN(o-c)?yield v(l.next()):yield v(l.next(o-c)),!i&&s.byteLength>0&&(r.push(s),c+=s.byteLength),i||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!i)}catch(h){(n=!0)&&typeof l.throw=="function"&&(yield v(l.throw(h)))}finally{n===!1&&typeof l.return=="function"&&(yield v(l.return(new Uint8Array(0))))}return yield v(null)})}function QO(e){return ee(this,arguments,function*(){let i=!1,n=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?$i(r,o)[0]:([s,r,c]=$i(r,o),s)}({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0});const l=new XO(e);try{do if({done:i,value:s}=Number.isNaN(o-c)?yield v(l.read()):yield v(l.read(o-c)),!i&&s.byteLength>0&&(r.push(st(s)),c+=s.byteLength),i||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!i)}catch(h){(n=!0)&&(yield v(l.cancel(h)))}finally{n===!1?yield v(l.cancel()):e.locked&&l.releaseLock()}return yield v(null)})}class XO{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return A(this,void 0,void 0,function*(){const{reader:i,source:n}=this;i&&(yield i.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return A(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const i=yield this.reader.read();return!i.done&&(i.value=st(i)),i})}}const sl=(e,t)=>{const i=r=>n([t,r]);let n;return[t,i,new Promise(r=>(n=r)&&e.once(t,i))]};function ZO(e){return ee(this,arguments,function*(){const i=[];let n="error",r=!1,s=null,a,o,c=0,u=[],l;function h(){return a==="peek"?$i(u,o)[0]:([l,u,c]=$i(u,o),l)}if({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0},e.isTTY)return yield yield v(new Uint8Array(0)),yield v(null);try{i[0]=sl(e,"end"),i[1]=sl(e,"error");do{if(i[2]=sl(e,"readable"),[n,s]=yield v(Promise.race(i.map(y=>y[2]))),n==="error")break;if((r=n==="end")||(Number.isFinite(o-c)?(l=st(e.read(o-c)),l.byteLength<o-c&&(l=st(e.read()))):l=st(e.read()),l.byteLength>0&&(u.push(l),c+=l.byteLength)),r||o<=c)do({cmd:a,size:o}=yield yield v(h()));while(o<c)}while(!r)}finally{yield v(d(i,n==="error"?s:null))}return yield v(null);function d(y,g){return l=u=null,new Promise((_,b)=>{for(const[w,G]of y)e.off(w,G);try{const w=e.destroy;w&&w.call(e,g),g=void 0}catch(w){g=w||g}finally{g!=null?b(g):_()}})}})}var Kt;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Kt||(Kt={}));var he;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(he||(he={}));var Qt;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Qt||(Qt={}));var Qe;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Qe||(Qe={}));var B;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(B||(B={}));var Xe;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Xe||(Xe={}));const al=2,Ti=4,sn=4,_t=4,Ln=new Int32Array(2),Up=new Float32Array(Ln.buffer),Pp=new Float64Array(Ln.buffer),_o=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Jl;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Jl||(Jl={}));let Pc=class t_{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new t_(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ln[0]=this.readInt32(t),Up[0]}readFloat64(t){return Ln[_o?0:1]=this.readInt32(t),Ln[_o?1:0]=this.readInt32(t+4),Pp[0]}writeInt8(t,i){this.bytes_[t]=i}writeUint8(t,i){this.bytes_[t]=i}writeInt16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeUint16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeInt32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeUint32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeInt64(t,i){this.writeInt32(t,Number(BigInt.asIntN(32,i))),this.writeInt32(t+4,Number(BigInt.asIntN(32,i>>BigInt(32))))}writeUint64(t,i){this.writeUint32(t,Number(BigInt.asUintN(32,i))),this.writeUint32(t+4,Number(BigInt.asUintN(32,i>>BigInt(32))))}writeFloat32(t,i){Up[0]=i,this.writeInt32(t,Ln[0])}writeFloat64(t,i){Pp[0]=i,this.writeInt32(t,Ln[_o?0:1]),this.writeInt32(t+4,Ln[_o?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ti+sn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let i=0;i<sn;i++)t+=String.fromCharCode(this.readInt8(this.position_+Ti+i));return t}__offset(t,i){const n=t-this.readInt32(t);return i<this.readInt16(n)?this.readInt16(n+i):0}__union(t,i){return t.bb_pos=i+this.readInt32(i),t.bb=this,t}__string(t,i){t+=this.readInt32(t);const n=this.readInt32(t);t+=Ti;const r=this.bytes_.subarray(t,t+n);return i===Jl.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(t,i){return typeof t=="string"?this.__string(i):this.__union(t,i)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Ti}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=sn)throw new Error("FlatBuffers: file identifier must be length "+sn);for(let i=0;i<sn;i++)if(t.charCodeAt(i)!=this.readInt8(this.position()+Ti+i))return!1;return!0}createScalarList(t,i){const n=[];for(let r=0;r<i;++r){const s=t(r);s!==null&&n.push(s)}return n}createObjList(t,i){const n=[];for(let r=0;r<i;++r){const s=t(r);s!==null&&n.push(s.unpack())}return n}},e_=class i_{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let i;t?i=t:i=1024,this.bb=Pc.allocate(i),this.space=i}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,i){t>this.minalign&&(this.minalign=t);const n=~(this.bb.capacity()-this.space+i)+1&t-1;for(;this.space<n+t+i;){const r=this.bb.capacity();this.bb=i_.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)}pad(t){for(let i=0;i<t;i++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,i,n){(this.force_defaults||i!=n)&&(this.addInt8(i),this.slot(t))}addFieldInt16(t,i,n){(this.force_defaults||i!=n)&&(this.addInt16(i),this.slot(t))}addFieldInt32(t,i,n){(this.force_defaults||i!=n)&&(this.addInt32(i),this.slot(t))}addFieldInt64(t,i,n){(this.force_defaults||i!==n)&&(this.addInt64(i),this.slot(t))}addFieldFloat32(t,i,n){(this.force_defaults||i!=n)&&(this.addFloat32(i),this.slot(t))}addFieldFloat64(t,i,n){(this.force_defaults||i!=n)&&(this.addFloat64(i),this.slot(t))}addFieldOffset(t,i,n){(this.force_defaults||i!=n)&&(this.addOffset(i),this.slot(t))}addFieldStruct(t,i,n){i!=n&&(this.nested(i),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const i=t.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=i<<1,r=Pc.allocate(n);return r.setPosition(n-i),r.bytes().set(t.bytes(),n-i),r}addOffset(t){this.prep(Ti,0),this.writeInt32(this.offset()-t+Ti)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let i=0;i<t;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let i=this.vtable_in_use-1;for(;i>=0&&this.vtable[i]==0;i--);const n=i+1;for(;i>=0;i--)this.addInt16(this.vtable[i]!=0?t-this.vtable[i]:0);const r=2;this.addInt16(t-this.object_start);const s=(n+r)*al;this.addInt16(s);let a=0;const o=this.space;t:for(i=0;i<this.vtables.length;i++){const c=this.bb.capacity()-this.vtables[i];if(s==this.bb.readInt16(c)){for(let u=al;u<s;u+=al)if(this.bb.readInt16(o+u)!=this.bb.readInt16(c+u))continue t;a=this.vtables[i];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,i,n){const r=n?_t:0;if(i){const s=i;if(this.prep(this.minalign,Ti+sn+r),s.length!=sn)throw new TypeError("FlatBuffers: file identifier must be length "+sn);for(let a=sn-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Ti+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,i){this.finish(t,i,!0)}requiredField(t,i){const n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(!(i<this.bb.readInt16(r)&&this.bb.readInt16(r+i)!=0))throw new TypeError("FlatBuffers: field "+i+" must be set")}startVector(t,i,n){this.notNested(),this.vector_num_elems=i,this.prep(Ti,t*i),this.prep(n,t*i)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const i=this.createString(t);return this.string_maps.set(t,i),i}createString(t){if(t==null)return 0;let i;t instanceof Uint8Array?i=t:i=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length);for(let n=0,r=this.space,s=this.bb.bytes();n<i.length;n++)s[r++]=i[n];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const i=[];for(let n=0;n<t.length;++n){const r=t[n];if(r!==null)i.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return i}createStructOffsetList(t,i){return i(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var $c;(function(e){e[e.BUFFER=0]="BUFFER"})($c||($c={}));var Vc;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Vc||(Vc={}));class Rn{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBodyCompression(t,i){return(i||new Rn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,i){return t.setPosition(t.position()+_t),(i||new Rn).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Vc.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):$c.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,i){t.addFieldInt8(0,i,Vc.LZ4_FRAME)}static addMethod(t,i){t.addFieldInt8(1,i,$c.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,i,n){return Rn.startBodyCompression(t),Rn.addCodec(t,i),Rn.addMethod(t,n),Rn.endBodyCompression(t)}}class n_{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,i,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(i??0)),t.offset()}}let r_=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,i,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(i??0)),t.offset()}},tn=class Ql{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsRecordBatch(t,i){return(i||new Ql).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,i){return t.setPosition(t.position()+_t),(i||new Ql).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new r_).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new n_).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new Rn).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addNodes(t,i){t.addFieldOffset(1,i,0)}static startNodesVector(t,i){t.startVector(16,i,8)}static addBuffers(t,i){t.addFieldOffset(2,i,0)}static startBuffersVector(t,i){t.startVector(16,i,8)}static addCompression(t,i){t.addFieldOffset(3,i,0)}static endRecordBatch(t){return t.endObject()}},Wr=class Xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryBatch(t,i){return(i||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,i){return t.setPosition(t.position()+_t),(i||new Xl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new tn).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addData(t,i){t.addFieldOffset(1,i,0)}static addIsDelta(t,i){t.addFieldInt8(2,+i,0)}static endDictionaryBatch(t){return t.endObject()}};var ws;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(ws||(ws={}));var jc;(function(e){e[e.DenseArray=0]="DenseArray"})(jc||(jc={}));class De{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInt(t,i){return(i||new De).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,i){return t.setPosition(t.position()+_t),(i||new De).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,i){t.addFieldInt32(0,i,0)}static addIsSigned(t,i){t.addFieldInt8(1,+i,0)}static endInt(t){return t.endObject()}static createInt(t,i,n){return De.startInt(t),De.addBitWidth(t,i),De.addIsSigned(t,n),De.endInt(t)}}class an{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryEncoding(t,i){return(i||new an).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,i){return t.setPosition(t.position()+_t),(i||new an).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new De).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):jc.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addIndexType(t,i){t.addFieldOffset(1,i,0)}static addIsOrdered(t,i){t.addFieldInt8(2,+i,0)}static addDictionaryKind(t,i){t.addFieldInt16(3,i,jc.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Gt{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsKeyValue(t,i){return(i||new Gt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,i){return t.setPosition(t.position()+_t),(i||new Gt).__init(t.readInt32(t.position())+t.position(),t)}key(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}value(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,i){t.addFieldOffset(0,i,0)}static addValue(t,i){t.addFieldOffset(1,i,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,i,n){return Gt.startKeyValue(t),Gt.addKey(t,i),Gt.addValue(t,n),Gt.endKeyValue(t)}}let $p=class fa{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBinary(t,i){return(i||new fa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,i){return t.setPosition(t.position()+_t),(i||new fa).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return fa.startBinary(t),fa.endBinary(t)}},Vp=class da{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBool(t,i){return(i||new da).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,i){return t.setPosition(t.position()+_t),(i||new da).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return da.startBool(t),da.endBool(t)}},jo=class qr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDate(t,i){return(i||new qr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,i){return t.setPosition(t.position()+_t),(i||new qr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qe.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,Qe.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,i){return qr.startDate(t),qr.addUnit(t,i),qr.endDate(t)}},Yr=class Dn{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDecimal(t,i){return(i||new Dn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,i){return t.setPosition(t.position()+_t),(i||new Dn).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,i){t.addFieldInt32(0,i,0)}static addScale(t,i){t.addFieldInt32(1,i,0)}static addBitWidth(t,i){t.addFieldInt32(2,i,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,i,n,r){return Dn.startDecimal(t),Dn.addPrecision(t,i),Dn.addScale(t,n),Dn.addBitWidth(t,r),Dn.endDecimal(t)}},zo=class Hr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDuration(t,i){return(i||new Hr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,i){return t.setPosition(t.position()+_t),(i||new Hr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):B.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,B.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,i){return Hr.startDuration(t),Hr.addUnit(t,i),Hr.endDuration(t)}},Wo=class Gr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeBinary(t,i){return(i||new Gr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,i){return t.setPosition(t.position()+_t),(i||new Gr).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,i){return Gr.startFixedSizeBinary(t),Gr.addByteWidth(t,i),Gr.endFixedSizeBinary(t)}},qo=class Kr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeList(t,i){return(i||new Kr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,i){return t.setPosition(t.position()+_t),(i||new Kr).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,i){return Kr.startFixedSizeList(t),Kr.addListSize(t,i),Kr.endFixedSizeList(t)}};class Ni{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFloatingPoint(t,i){return(i||new Ni).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,i){return t.setPosition(t.position()+_t),(i||new Ni).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qt.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,i){t.addFieldInt16(0,i,Qt.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,i){return Ni.startFloatingPoint(t),Ni.addPrecision(t,i),Ni.endFloatingPoint(t)}}class Di{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInterval(t,i){return(i||new Di).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,i){return t.setPosition(t.position()+_t),(i||new Di).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xe.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,Xe.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,i){return Di.startInterval(t),Di.addUnit(t,i),Di.endInterval(t)}}let jp=class pa{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsLargeBinary(t,i){return(i||new pa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,i){return t.setPosition(t.position()+_t),(i||new pa).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return pa.startLargeBinary(t),pa.endLargeBinary(t)}},zp=class ya{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsLargeUtf8(t,i){return(i||new ya).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,i){return t.setPosition(t.position()+_t),(i||new ya).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return ya.startLargeUtf8(t),ya.endLargeUtf8(t)}},Wp=class ma{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsList(t,i){return(i||new ma).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,i){return t.setPosition(t.position()+_t),(i||new ma).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return ma.startList(t),ma.endList(t)}},Yo=class Jr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMap(t,i){return(i||new Jr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,i){return t.setPosition(t.position()+_t),(i||new Jr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,i){t.addFieldInt8(0,+i,0)}static endMap(t){return t.endObject()}static createMap(t,i){return Jr.startMap(t),Jr.addKeysSorted(t,i),Jr.endMap(t)}},qp=class ga{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsNull(t,i){return(i||new ga).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,i){return t.setPosition(t.position()+_t),(i||new ga).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return ga.startNull(t),ga.endNull(t)}};class mr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsStruct_(t,i){return(i||new mr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,i){return t.setPosition(t.position()+_t),(i||new mr).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return mr.startStruct_(t),mr.endStruct_(t)}}class je{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTime(t,i){return(i||new je).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,i){return t.setPosition(t.position()+_t),(i||new je).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):B.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,B.MILLISECOND)}static addBitWidth(t,i){t.addFieldInt32(1,i,32)}static endTime(t){return t.endObject()}static createTime(t,i,n){return je.startTime(t),je.addUnit(t,i),je.addBitWidth(t,n),je.endTime(t)}}class ze{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTimestamp(t,i){return(i||new ze).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,i){return t.setPosition(t.position()+_t),(i||new ze).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):B.SECOND}timezone(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,B.SECOND)}static addTimezone(t,i){t.addFieldOffset(1,i,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,i,n){return ze.startTimestamp(t),ze.addUnit(t,i),ze.addTimezone(t,n),ze.endTimestamp(t)}}class ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUnion(t,i){return(i||new ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,i){return t.setPosition(t.position()+_t),(i||new ve).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):he.Sparse}typeIds(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb.__vector(this.bb_pos+i)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,i){t.addFieldInt16(0,i,he.Sparse)}static addTypeIds(t,i){t.addFieldOffset(1,i,0)}static createTypeIdsVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addInt32(i[n]);return t.endVector()}static startTypeIdsVector(t,i){t.startVector(4,i,4)}static endUnion(t){return t.endObject()}static createUnion(t,i,n){return ve.startUnion(t),ve.addMode(t,i),ve.addTypeIds(t,n),ve.endUnion(t)}}let Yp=class _a{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUtf8(t,i){return(i||new _a).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,i){return t.setPosition(t.position()+_t),(i||new _a).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return _a.startUtf8(t),_a.endUtf8(t)}};var At;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(At||(At={}));let Pe=class Ho{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsField(t,i){return(i||new Ho).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,i){return t.setPosition(t.position()+_t),(i||new Ho).__init(t.readInt32(t.position())+t.position(),t)}name(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):At.NONE}type(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__union(t,this.bb_pos+i):null}dictionary(t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new an).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}children(t,i){const n=this.bb.__offset(this.bb_pos,14);return n?(i||new Ho).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,16);return n?(i||new Gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,i){t.addFieldOffset(0,i,0)}static addNullable(t,i){t.addFieldInt8(1,+i,0)}static addTypeType(t,i){t.addFieldInt8(2,i,At.NONE)}static addType(t,i){t.addFieldOffset(3,i,0)}static addDictionary(t,i){t.addFieldOffset(4,i,0)}static addChildren(t,i){t.addFieldOffset(5,i,0)}static createChildrenVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startChildrenVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(6,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endField(t){return t.endObject()}},Ai=class Ji{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsSchema(t,i){return(i||new Ji).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,i){return t.setPosition(t.position()+_t),(i||new Ji).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ws.Little}fields(t,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new Pe).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new Gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,i){t.addFieldInt16(0,i,ws.Little)}static addFields(t,i){t.addFieldOffset(1,i,0)}static createFieldsVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startFieldsVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(2,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static addFeatures(t,i){t.addFieldOffset(3,i,0)}static createFeaturesVector(t,i){t.startVector(8,i.length,8);for(let n=i.length-1;n>=0;n--)t.addInt64(i[n]);return t.endVector()}static startFeaturesVector(t,i){t.startVector(8,i,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,i){t.finish(i)}static finishSizePrefixedSchemaBuffer(t,i){t.finish(i,void 0,!0)}static createSchema(t,i,n,r,s){return Ji.startSchema(t),Ji.addEndianness(t,i),Ji.addFields(t,n),Ji.addCustomMetadata(t,r),Ji.addFeatures(t,s),Ji.endSchema(t)}};var zt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(zt||(zt={}));var p;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(p||(p={}));var en;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(en||(en={}));const tT=void 0;function Sr(e){if(e===null)return"null";if(e===tT)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Sr(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,i)=>typeof i=="bigint"?`${i}`:i)}const eT=Symbol.for("isArrowBigNum");function mi(e,...t){return t.length===0?Object.setPrototypeOf(Yt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}mi.prototype[eT]=!0;mi.prototype.toJSON=function(){return`"${Ma(this)}"`};mi.prototype.valueOf=function(){return s_(this)};mi.prototype.toString=function(){return Ma(this)};mi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return s_(this);case"string":return Ma(this);case"default":return iT(this)}return Ma(this)};function cs(...e){return mi.apply(this,e)}function us(...e){return mi.apply(this,e)}function Ra(...e){return mi.apply(this,e)}Object.setPrototypeOf(cs.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(us.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Ra.prototype,Object.create(Uint32Array.prototype));Object.assign(cs.prototype,mi.prototype,{constructor:cs,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(us.prototype,mi.prototype,{constructor:us,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Ra.prototype,mi.prototype,{constructor:Ra,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function s_(e){const{buffer:t,byteOffset:i,length:n,signed:r}=e,s=new BigUint64Array(t,i,n),a=r&&s.at(-1)&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),c=BigInt(0);if(a){for(const u of s)o+=~u*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const u of s)o+=u*(BigInt(1)<<BigInt(32)*c++);return o}const Ma=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return ol(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return ol(e);t=t.slice();let n=1;for(let s=0;s<t.length;s++){const a=t[s],o=~a+n;t[s]=o,n&=a===0?1:0}return`-${ol(t)}`},iT=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Ma(e);function ol(e){let t="";const i=new Uint32Array(2);let n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let s=-1;const a=n.length-1;do{for(i[0]=n[s=0];s<a;)n[s++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+n[s];n[s]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,t=`${i[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}class af{static new(t,i){switch(i){case!0:return new cs(t);case!1:return new us(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new cs(t)}return t.byteLength===16?new Ra(t):new us(t)}static signed(t){return new cs(t)}static unsigned(t){return new us(t)}static decimal(t){return new Ra(t)}constructor(t,i){return af.new(t,i)}}function ie(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var a_,o_,c_,u_,l_,h_,f_,d_,p_,y_,m_,g_,__,b_,v_,w_,S_,I_,x_,A_,B_,E_;class K{static isNull(t){return(t==null?void 0:t.typeId)===p.Null}static isInt(t){return(t==null?void 0:t.typeId)===p.Int}static isFloat(t){return(t==null?void 0:t.typeId)===p.Float}static isBinary(t){return(t==null?void 0:t.typeId)===p.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===p.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===p.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===p.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===p.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===p.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===p.Date}static isTime(t){return(t==null?void 0:t.typeId)===p.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===p.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===p.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===p.Duration}static isList(t){return(t==null?void 0:t.typeId)===p.List}static isStruct(t){return(t==null?void 0:t.typeId)===p.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===p.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===p.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===p.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===p.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===p.Dictionary}static isDenseUnion(t){return K.isUnion(t)&&t.mode===he.Dense}static isSparseUnion(t){return K.isUnion(t)&&t.mode===he.Sparse}constructor(t){this.typeId=t}}a_=Symbol.toStringTag;K[a_]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(K.prototype);class fn extends K{constructor(){super(p.Null)}toString(){return"Null"}}o_=Symbol.toStringTag;fn[o_]=(e=>e[Symbol.toStringTag]="Null")(fn.prototype);class fe extends K{constructor(t,i){super(p.Int),this.isSigned=t,this.bitWidth=i}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}c_=Symbol.toStringTag;fe[c_]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(fe.prototype);class of extends fe{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class cf extends fe{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class zn extends fe{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class uf extends fe{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class lf extends fe{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class hf extends fe{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class ff extends fe{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class df extends fe{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(of.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(cf.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(zn.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(uf.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(lf.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(hf.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ff.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(df.prototype,"ArrayType",{value:BigUint64Array});class Wn extends K{constructor(t){super(p.Float),this.precision=t}get ArrayType(){switch(this.precision){case Qt.HALF:return Uint16Array;case Qt.SINGLE:return Float32Array;case Qt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}u_=Symbol.toStringTag;Wn[u_]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Wn.prototype);class O_ extends Wn{constructor(){super(Qt.HALF)}}class pf extends Wn{constructor(){super(Qt.SINGLE)}}class yf extends Wn{constructor(){super(Qt.DOUBLE)}}Object.defineProperty(O_.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(pf.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(yf.prototype,"ArrayType",{value:Float64Array});class Ua extends K{constructor(){super(p.Binary)}toString(){return"Binary"}}l_=Symbol.toStringTag;Ua[l_]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Ua.prototype);class zc extends K{constructor(){super(p.LargeBinary)}toString(){return"LargeBinary"}}h_=Symbol.toStringTag;zc[h_]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(zc.prototype);class Ss extends K{constructor(){super(p.Utf8)}toString(){return"Utf8"}}f_=Symbol.toStringTag;Ss[f_]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Ss.prototype);class Wc extends K{constructor(){super(p.LargeUtf8)}toString(){return"LargeUtf8"}}d_=Symbol.toStringTag;Wc[d_]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(Wc.prototype);class Pa extends K{constructor(){super(p.Bool)}toString(){return"Bool"}}p_=Symbol.toStringTag;Pa[p_]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Pa.prototype);class qc extends K{constructor(t,i,n=128){super(p.Decimal),this.scale=t,this.precision=i,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}y_=Symbol.toStringTag;qc[y_]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(qc.prototype);class Is extends K{constructor(t){super(p.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Qe[this.unit]}>`}}m_=Symbol.toStringTag;Is[m_]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Is.prototype);class nT extends Is{constructor(){super(Qe.DAY)}}class rT extends Is{constructor(){super(Qe.MILLISECOND)}}class dn extends K{constructor(t,i){super(p.Time),this.unit=t,this.bitWidth=i}toString(){return`Time${this.bitWidth}<${B[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}g_=Symbol.toStringTag;dn[g_]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(dn.prototype);class sT extends dn{constructor(){super(B.SECOND,32)}}class aT extends dn{constructor(){super(B.MILLISECOND,32)}}class oT extends dn{constructor(){super(B.MICROSECOND,64)}}class cT extends dn{constructor(){super(B.NANOSECOND,64)}}class Yc extends K{constructor(t,i){super(p.Timestamp),this.unit=t,this.timezone=i}toString(){return`Timestamp<${B[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}__=Symbol.toStringTag;Yc[__]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Yc.prototype);class xs extends K{constructor(t){super(p.Interval),this.unit=t}toString(){return`Interval<${Xe[this.unit]}>`}}b_=Symbol.toStringTag;xs[b_]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(xs.prototype);class uT extends xs{constructor(){super(Xe.DAY_TIME)}}class lT extends xs{constructor(){super(Xe.YEAR_MONTH)}}class Hc extends K{constructor(t){super(p.Duration),this.unit=t}toString(){return`Duration<${B[this.unit]}>`}}v_=Symbol.toStringTag;Hc[v_]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(Hc.prototype);class As extends K{constructor(t){super(p.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}w_=Symbol.toStringTag;As[w_]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(As.prototype);class se extends K{constructor(t){super(p.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}S_=Symbol.toStringTag;se[S_]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(se.prototype);class $a extends K{constructor(t,i,n){super(p.Union),this.mode=t,this.children=n,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}I_=Symbol.toStringTag;$a[I_]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))($a.prototype);class Gc extends K{constructor(t){super(p.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}x_=Symbol.toStringTag;Gc[x_]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Gc.prototype);class Bs extends K{constructor(t,i){super(p.FixedSizeList),this.listSize=t,this.children=[i]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}A_=Symbol.toStringTag;Bs[A_]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Bs.prototype);class Va extends K{constructor(t,i=!1){var n,r,s;if(super(p.Map),this.children=[t],this.keysSorted=i,t&&(t.name="entries",!((n=t==null?void 0:t.type)===null||n===void 0)&&n.children)){const a=(r=t==null?void 0:t.type)===null||r===void 0?void 0:r.children[0];a&&(a.name="key");const o=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];o&&(o.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}B_=Symbol.toStringTag;Va[B_]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Va.prototype);const hT=(e=>()=>++e)(-1);class qn extends K{constructor(t,i,n,r){super(p.Dictionary),this.indices=i,this.dictionary=t,this.isOrdered=r||!1,this.id=n==null?hT():ie(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}E_=Symbol.toStringTag;qn[E_]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(qn.prototype);function Ei(e){const t=e;switch(e.typeId){case p.Decimal:return e.bitWidth/32;case p.Timestamp:return 2;case p.Date:return 1+t.unit;case p.Interval:return 1+t.unit;case p.FixedSizeList:return t.listSize;case p.FixedSizeBinary:return t.byteWidth;default:return 1}}class Z{visitMany(t,...i){return t.map((n,r)=>this.visit(n,...i.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,i=!0){return fT(this,t,i)}getVisitFnByTypeId(t,i=!0){return Qr(this,t,i)}visitNull(t,...i){return null}visitBool(t,...i){return null}visitInt(t,...i){return null}visitFloat(t,...i){return null}visitUtf8(t,...i){return null}visitLargeUtf8(t,...i){return null}visitBinary(t,...i){return null}visitLargeBinary(t,...i){return null}visitFixedSizeBinary(t,...i){return null}visitDate(t,...i){return null}visitTimestamp(t,...i){return null}visitTime(t,...i){return null}visitDecimal(t,...i){return null}visitList(t,...i){return null}visitStruct(t,...i){return null}visitUnion(t,...i){return null}visitDictionary(t,...i){return null}visitInterval(t,...i){return null}visitDuration(t,...i){return null}visitFixedSizeList(t,...i){return null}visitMap(t,...i){return null}}function fT(e,t,i=!0){return typeof t=="number"?Qr(e,t,i):typeof t=="string"&&t in p?Qr(e,p[t],i):t&&t instanceof K?Qr(e,Hp(t),i):t!=null&&t.type&&t.type instanceof K?Qr(e,Hp(t.type),i):Qr(e,p.NONE,i)}function Qr(e,t,i=!0){let n=null;switch(t){case p.Null:n=e.visitNull;break;case p.Bool:n=e.visitBool;break;case p.Int:n=e.visitInt;break;case p.Int8:n=e.visitInt8||e.visitInt;break;case p.Int16:n=e.visitInt16||e.visitInt;break;case p.Int32:n=e.visitInt32||e.visitInt;break;case p.Int64:n=e.visitInt64||e.visitInt;break;case p.Uint8:n=e.visitUint8||e.visitInt;break;case p.Uint16:n=e.visitUint16||e.visitInt;break;case p.Uint32:n=e.visitUint32||e.visitInt;break;case p.Uint64:n=e.visitUint64||e.visitInt;break;case p.Float:n=e.visitFloat;break;case p.Float16:n=e.visitFloat16||e.visitFloat;break;case p.Float32:n=e.visitFloat32||e.visitFloat;break;case p.Float64:n=e.visitFloat64||e.visitFloat;break;case p.Utf8:n=e.visitUtf8;break;case p.LargeUtf8:n=e.visitLargeUtf8;break;case p.Binary:n=e.visitBinary;break;case p.LargeBinary:n=e.visitLargeBinary;break;case p.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case p.Date:n=e.visitDate;break;case p.DateDay:n=e.visitDateDay||e.visitDate;break;case p.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case p.Timestamp:n=e.visitTimestamp;break;case p.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case p.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case p.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case p.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case p.Time:n=e.visitTime;break;case p.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case p.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case p.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case p.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case p.Decimal:n=e.visitDecimal;break;case p.List:n=e.visitList;break;case p.Struct:n=e.visitStruct;break;case p.Union:n=e.visitUnion;break;case p.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case p.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case p.Dictionary:n=e.visitDictionary;break;case p.Interval:n=e.visitInterval;break;case p.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case p.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case p.Duration:n=e.visitDuration;break;case p.DurationSecond:n=e.visitDurationSecond||e.visitDuration;break;case p.DurationMillisecond:n=e.visitDurationMillisecond||e.visitDuration;break;case p.DurationMicrosecond:n=e.visitDurationMicrosecond||e.visitDuration;break;case p.DurationNanosecond:n=e.visitDurationNanosecond||e.visitDuration;break;case p.FixedSizeList:n=e.visitFixedSizeList;break;case p.Map:n=e.visitMap;break}if(typeof n=="function")return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${p[t]}'`)}function Hp(e){switch(e.typeId){case p.Null:return p.Null;case p.Int:{const{bitWidth:t,isSigned:i}=e;switch(t){case 8:return i?p.Int8:p.Uint8;case 16:return i?p.Int16:p.Uint16;case 32:return i?p.Int32:p.Uint32;case 64:return i?p.Int64:p.Uint64}return p.Int}case p.Float:switch(e.precision){case Qt.HALF:return p.Float16;case Qt.SINGLE:return p.Float32;case Qt.DOUBLE:return p.Float64}return p.Float;case p.Binary:return p.Binary;case p.LargeBinary:return p.LargeBinary;case p.Utf8:return p.Utf8;case p.LargeUtf8:return p.LargeUtf8;case p.Bool:return p.Bool;case p.Decimal:return p.Decimal;case p.Time:switch(e.unit){case B.SECOND:return p.TimeSecond;case B.MILLISECOND:return p.TimeMillisecond;case B.MICROSECOND:return p.TimeMicrosecond;case B.NANOSECOND:return p.TimeNanosecond}return p.Time;case p.Timestamp:switch(e.unit){case B.SECOND:return p.TimestampSecond;case B.MILLISECOND:return p.TimestampMillisecond;case B.MICROSECOND:return p.TimestampMicrosecond;case B.NANOSECOND:return p.TimestampNanosecond}return p.Timestamp;case p.Date:switch(e.unit){case Qe.DAY:return p.DateDay;case Qe.MILLISECOND:return p.DateMillisecond}return p.Date;case p.Interval:switch(e.unit){case Xe.DAY_TIME:return p.IntervalDayTime;case Xe.YEAR_MONTH:return p.IntervalYearMonth}return p.Interval;case p.Duration:switch(e.unit){case B.SECOND:return p.DurationSecond;case B.MILLISECOND:return p.DurationMillisecond;case B.MICROSECOND:return p.DurationMicrosecond;case B.NANOSECOND:return p.DurationNanosecond}return p.Duration;case p.Map:return p.Map;case p.List:return p.List;case p.Struct:return p.Struct;case p.Union:switch(e.mode){case he.Dense:return p.DenseUnion;case he.Sparse:return p.SparseUnion}return p.Union;case p.FixedSizeBinary:return p.FixedSizeBinary;case p.FixedSizeList:return p.FixedSizeList;case p.Dictionary:return p.Dictionary}throw new Error(`Unrecognized type '${p[e.typeId]}'`)}Z.prototype.visitInt8=null;Z.prototype.visitInt16=null;Z.prototype.visitInt32=null;Z.prototype.visitInt64=null;Z.prototype.visitUint8=null;Z.prototype.visitUint16=null;Z.prototype.visitUint32=null;Z.prototype.visitUint64=null;Z.prototype.visitFloat16=null;Z.prototype.visitFloat32=null;Z.prototype.visitFloat64=null;Z.prototype.visitDateDay=null;Z.prototype.visitDateMillisecond=null;Z.prototype.visitTimestampSecond=null;Z.prototype.visitTimestampMillisecond=null;Z.prototype.visitTimestampMicrosecond=null;Z.prototype.visitTimestampNanosecond=null;Z.prototype.visitTimeSecond=null;Z.prototype.visitTimeMillisecond=null;Z.prototype.visitTimeMicrosecond=null;Z.prototype.visitTimeNanosecond=null;Z.prototype.visitDenseUnion=null;Z.prototype.visitSparseUnion=null;Z.prototype.visitIntervalDayTime=null;Z.prototype.visitIntervalYearMonth=null;Z.prototype.visitDuration=null;Z.prototype.visitDurationSecond=null;Z.prototype.visitDurationMillisecond=null;Z.prototype.visitDurationMicrosecond=null;Z.prototype.visitDurationNanosecond=null;const T_=new Float64Array(1),Tr=new Uint32Array(T_.buffer);function N_(e){const t=(e&31744)>>10,i=(e&1023)/1024,n=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,t-15)*(1+i)}function D_(e){if(e!==e)return 32256;T_[0]=e;const t=(Tr[1]&2147483648)>>16&65535;let i=Tr[1]&2146435072,n=0;return i>=1089470464?Tr[0]>0?i=31744:(i=(i&2080374784)>>16,n=(Tr[1]&1048575)>>10):i<=1056964608?(n=1048576+(Tr[1]&1048575),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=(Tr[1]&1048575)+512>>10),t|i|n&65535}class $ extends Z{}function W(e){return(t,i,n)=>{if(t.setValid(i,n!=null))return e(t,i,n)}}const dT=(e,t,i)=>{e[t]=Math.trunc(i/864e5)},mf=(e,t,i)=>{e[t]=Math.trunc(i%4294967296),e[t+1]=Math.trunc(i/4294967296)},pT=(e,t,i)=>{e[t]=Math.trunc(i*1e3%4294967296),e[t+1]=Math.trunc(i*1e3/4294967296)},yT=(e,t,i)=>{e[t]=Math.trunc(i*1e6%4294967296),e[t+1]=Math.trunc(i*1e6/4294967296)},F_=(e,t,i,n)=>{if(i+1<t.length){const r=ie(t[i]),s=ie(t[i+1]);e.set(n.subarray(0,s-r),r)}},mT=({offset:e,values:t},i,n)=>{const r=e+i;n?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},wn=({values:e},t,i)=>{e[t]=i},gf=({values:e},t,i)=>{e[t]=i},k_=({values:e},t,i)=>{e[t]=D_(i)},gT=(e,t,i)=>{switch(e.type.precision){case Qt.HALF:return k_(e,t,i);case Qt.SINGLE:case Qt.DOUBLE:return gf(e,t,i)}},_f=({values:e},t,i)=>{dT(e,t,i.valueOf())},bf=({values:e},t,i)=>{mf(e,t*2,i.valueOf())},C_=({stride:e,values:t},i,n)=>{t.set(n.subarray(0,e),e*i)},L_=({values:e,valueOffsets:t},i,n)=>F_(e,t,i,n),R_=({values:e,valueOffsets:t},i,n)=>F_(e,t,i,vu(n)),M_=(e,t,i)=>{e.type.unit===Qe.DAY?_f(e,t,i):bf(e,t,i)},vf=({values:e},t,i)=>mf(e,t*2,i/1e3),wf=({values:e},t,i)=>mf(e,t*2,i),Sf=({values:e},t,i)=>pT(e,t*2,i),If=({values:e},t,i)=>yT(e,t*2,i),U_=(e,t,i)=>{switch(e.type.unit){case B.SECOND:return vf(e,t,i);case B.MILLISECOND:return wf(e,t,i);case B.MICROSECOND:return Sf(e,t,i);case B.NANOSECOND:return If(e,t,i)}},xf=({values:e},t,i)=>{e[t]=i},Af=({values:e},t,i)=>{e[t]=i},Bf=({values:e},t,i)=>{e[t]=i},Ef=({values:e},t,i)=>{e[t]=i},P_=(e,t,i)=>{switch(e.type.unit){case B.SECOND:return xf(e,t,i);case B.MILLISECOND:return Af(e,t,i);case B.MICROSECOND:return Bf(e,t,i);case B.NANOSECOND:return Ef(e,t,i)}},$_=({values:e,stride:t},i,n)=>{e.set(n.subarray(0,t),t*i)},_T=(e,t,i)=>{const n=e.children[0],r=e.valueOffsets,s=Ze.getVisitFn(n);if(Array.isArray(i))for(let a=-1,o=r[t],c=r[t+1];o<c;)s(n,o++,i[++a]);else for(let a=-1,o=r[t],c=r[t+1];o<c;)s(n,o++,i.get(++a))},bT=(e,t,i)=>{const n=e.children[0],{valueOffsets:r}=e,s=Ze.getVisitFn(n);let{[t]:a,[t+1]:o}=r;const c=i instanceof Map?i.entries():Object.entries(i);for(const u of c)if(s(n,a,u),++a>=o)break},vT=(e,t)=>(i,n,r,s)=>n&&i(n,e,t[s]),wT=(e,t)=>(i,n,r,s)=>n&&i(n,e,t.get(s)),ST=(e,t)=>(i,n,r,s)=>n&&i(n,e,t.get(r.name)),IT=(e,t)=>(i,n,r,s)=>n&&i(n,e,t[r.name]),xT=(e,t,i)=>{const n=e.type.children.map(s=>Ze.getVisitFn(s.type)),r=i instanceof Map?ST(t,i):i instanceof ft?wT(t,i):Array.isArray(i)?vT(t,i):IT(t,i);e.type.children.forEach((s,a)=>r(n[a],e.children[a],s,a))},AT=(e,t,i)=>{e.type.mode===he.Dense?V_(e,t,i):j_(e,t,i)},V_=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];Ze.visit(r,e.valueOffsets[t],i)},j_=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];Ze.visit(r,t,i)},BT=(e,t,i)=>{var n;(n=e.dictionary)===null||n===void 0||n.set(e.values[t],i)},z_=(e,t,i)=>{e.type.unit===Xe.DAY_TIME?Of(e,t,i):Tf(e,t,i)},Of=({values:e},t,i)=>{e.set(i.subarray(0,2),2*t)},Tf=({values:e},t,i)=>{e[t]=i[0]*12+i[1]%12},Nf=({values:e},t,i)=>{e[t]=i},Df=({values:e},t,i)=>{e[t]=i},Ff=({values:e},t,i)=>{e[t]=i},kf=({values:e},t,i)=>{e[t]=i},W_=(e,t,i)=>{switch(e.type.unit){case B.SECOND:return Nf(e,t,i);case B.MILLISECOND:return Df(e,t,i);case B.MICROSECOND:return Ff(e,t,i);case B.NANOSECOND:return kf(e,t,i)}},ET=(e,t,i)=>{const{stride:n}=e,r=e.children[0],s=Ze.getVisitFn(r);if(Array.isArray(i))for(let a=-1,o=t*n;++a<n;)s(r,o+a,i[a]);else for(let a=-1,o=t*n;++a<n;)s(r,o+a,i.get(a))};$.prototype.visitBool=W(mT);$.prototype.visitInt=W(wn);$.prototype.visitInt8=W(wn);$.prototype.visitInt16=W(wn);$.prototype.visitInt32=W(wn);$.prototype.visitInt64=W(wn);$.prototype.visitUint8=W(wn);$.prototype.visitUint16=W(wn);$.prototype.visitUint32=W(wn);$.prototype.visitUint64=W(wn);$.prototype.visitFloat=W(gT);$.prototype.visitFloat16=W(k_);$.prototype.visitFloat32=W(gf);$.prototype.visitFloat64=W(gf);$.prototype.visitUtf8=W(R_);$.prototype.visitLargeUtf8=W(R_);$.prototype.visitBinary=W(L_);$.prototype.visitLargeBinary=W(L_);$.prototype.visitFixedSizeBinary=W(C_);$.prototype.visitDate=W(M_);$.prototype.visitDateDay=W(_f);$.prototype.visitDateMillisecond=W(bf);$.prototype.visitTimestamp=W(U_);$.prototype.visitTimestampSecond=W(vf);$.prototype.visitTimestampMillisecond=W(wf);$.prototype.visitTimestampMicrosecond=W(Sf);$.prototype.visitTimestampNanosecond=W(If);$.prototype.visitTime=W(P_);$.prototype.visitTimeSecond=W(xf);$.prototype.visitTimeMillisecond=W(Af);$.prototype.visitTimeMicrosecond=W(Bf);$.prototype.visitTimeNanosecond=W(Ef);$.prototype.visitDecimal=W($_);$.prototype.visitList=W(_T);$.prototype.visitStruct=W(xT);$.prototype.visitUnion=W(AT);$.prototype.visitDenseUnion=W(V_);$.prototype.visitSparseUnion=W(j_);$.prototype.visitDictionary=W(BT);$.prototype.visitInterval=W(z_);$.prototype.visitIntervalDayTime=W(Of);$.prototype.visitIntervalYearMonth=W(Tf);$.prototype.visitDuration=W(W_);$.prototype.visitDurationSecond=W(Nf);$.prototype.visitDurationMillisecond=W(Df);$.prototype.visitDurationMicrosecond=W(Ff);$.prototype.visitDurationNanosecond=W(kf);$.prototype.visitFixedSizeList=W(ET);$.prototype.visitMap=W(bT);const Ze=new $,si=Symbol.for("parent"),ls=Symbol.for("rowIndex");class Cf{constructor(t,i){return this[si]=t,this[ls]=i,new Proxy(this,new TT)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ls],i=this[si],n=i.type.children,r={};for(let s=-1,a=n.length;++s<a;)r[n[s].name]=Be.visit(i.children[s],t);return r}toString(){return`{${[...this].map(([t,i])=>`${Sr(t)}: ${Sr(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new OT(this[si],this[ls])}}class OT{constructor(t,i){this.childIndex=0,this.children=t.children,this.rowIndex=i,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Be.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Cf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[si]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ls]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class TT{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[si].type.children.map(i=>i.name)}has(t,i){return t[si].type.children.findIndex(n=>n.name===i)!==-1}getOwnPropertyDescriptor(t,i){if(t[si].type.children.findIndex(n=>n.name===i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const n=t[si].type.children.findIndex(r=>r.name===i);if(n!==-1){const r=Be.visit(t[si].children[n],t[ls]);return Reflect.set(t,i,r),r}}set(t,i,n){const r=t[si].type.children.findIndex(s=>s.name===i);return r!==-1?(Ze.visit(t[si].children[r],t[ls],n),Reflect.set(t,i,n)):Reflect.has(t,i)||typeof i=="symbol"?Reflect.set(t,i,n):!1}}class D extends Z{}function V(e){return(t,i)=>t.getValid(i)?e(t,i):null}const NT=(e,t)=>864e5*e[t],Lf=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),DT=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,FT=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,q_=e=>new Date(e),kT=(e,t)=>q_(NT(e,t)),CT=(e,t)=>q_(Lf(e,t)),LT=(e,t)=>null,Y_=(e,t,i)=>{if(i+1>=t.length)return null;const n=ie(t[i]),r=ie(t[i+1]);return e.subarray(n,r)},RT=({offset:e,values:t},i)=>{const n=e+i;return(t[n>>3]&1<<n%8)!==0},H_=({values:e},t)=>kT(e,t),G_=({values:e},t)=>CT(e,t*2),Zn=({stride:e,values:t},i)=>t[e*i],MT=({stride:e,values:t},i)=>N_(t[e*i]),K_=({values:e},t)=>e[t],UT=({stride:e,values:t},i)=>t.subarray(e*i,e*(i+1)),J_=({values:e,valueOffsets:t},i)=>Y_(e,t,i),Q_=({values:e,valueOffsets:t},i)=>{const n=Y_(e,t,i);return n!==null?Hl(n):null},PT=({values:e},t)=>e[t],$T=({type:e,values:t},i)=>e.precision!==Qt.HALF?t[i]:N_(t[i]),VT=(e,t)=>e.type.unit===Qe.DAY?H_(e,t):G_(e,t),X_=({values:e},t)=>1e3*Lf(e,t*2),Z_=({values:e},t)=>Lf(e,t*2),tb=({values:e},t)=>DT(e,t*2),eb=({values:e},t)=>FT(e,t*2),jT=(e,t)=>{switch(e.type.unit){case B.SECOND:return X_(e,t);case B.MILLISECOND:return Z_(e,t);case B.MICROSECOND:return tb(e,t);case B.NANOSECOND:return eb(e,t)}},ib=({values:e},t)=>e[t],nb=({values:e},t)=>e[t],rb=({values:e},t)=>e[t],sb=({values:e},t)=>e[t],zT=(e,t)=>{switch(e.type.unit){case B.SECOND:return ib(e,t);case B.MILLISECOND:return nb(e,t);case B.MICROSECOND:return rb(e,t);case B.NANOSECOND:return sb(e,t)}},WT=({values:e,stride:t},i)=>af.decimal(e.subarray(t*i,t*(i+1))),qT=(e,t)=>{const{valueOffsets:i,stride:n,children:r}=e,{[t*n]:s,[t*n+1]:a}=i,c=r[0].slice(s,a-s);return new ft([c])},YT=(e,t)=>{const{valueOffsets:i,children:n}=e,{[t]:r,[t+1]:s}=i,a=n[0];return new Iu(a.slice(r,s-r))},HT=(e,t)=>new Cf(e,t),GT=(e,t)=>e.type.mode===he.Dense?ab(e,t):ob(e,t),ab=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return Be.visit(n,e.valueOffsets[t])},ob=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return Be.visit(n,t)},KT=(e,t)=>{var i;return(i=e.dictionary)===null||i===void 0?void 0:i.get(e.values[t])},JT=(e,t)=>e.type.unit===Xe.DAY_TIME?cb(e,t):ub(e,t),cb=({values:e},t)=>e.subarray(2*t,2*(t+1)),ub=({values:e},t)=>{const i=e[t],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},lb=({values:e},t)=>e[t],hb=({values:e},t)=>e[t],fb=({values:e},t)=>e[t],db=({values:e},t)=>e[t],QT=(e,t)=>{switch(e.type.unit){case B.SECOND:return lb(e,t);case B.MILLISECOND:return hb(e,t);case B.MICROSECOND:return fb(e,t);case B.NANOSECOND:return db(e,t)}},XT=(e,t)=>{const{stride:i,children:n}=e,s=n[0].slice(t*i,i);return new ft([s])};D.prototype.visitNull=V(LT);D.prototype.visitBool=V(RT);D.prototype.visitInt=V(PT);D.prototype.visitInt8=V(Zn);D.prototype.visitInt16=V(Zn);D.prototype.visitInt32=V(Zn);D.prototype.visitInt64=V(K_);D.prototype.visitUint8=V(Zn);D.prototype.visitUint16=V(Zn);D.prototype.visitUint32=V(Zn);D.prototype.visitUint64=V(K_);D.prototype.visitFloat=V($T);D.prototype.visitFloat16=V(MT);D.prototype.visitFloat32=V(Zn);D.prototype.visitFloat64=V(Zn);D.prototype.visitUtf8=V(Q_);D.prototype.visitLargeUtf8=V(Q_);D.prototype.visitBinary=V(J_);D.prototype.visitLargeBinary=V(J_);D.prototype.visitFixedSizeBinary=V(UT);D.prototype.visitDate=V(VT);D.prototype.visitDateDay=V(H_);D.prototype.visitDateMillisecond=V(G_);D.prototype.visitTimestamp=V(jT);D.prototype.visitTimestampSecond=V(X_);D.prototype.visitTimestampMillisecond=V(Z_);D.prototype.visitTimestampMicrosecond=V(tb);D.prototype.visitTimestampNanosecond=V(eb);D.prototype.visitTime=V(zT);D.prototype.visitTimeSecond=V(ib);D.prototype.visitTimeMillisecond=V(nb);D.prototype.visitTimeMicrosecond=V(rb);D.prototype.visitTimeNanosecond=V(sb);D.prototype.visitDecimal=V(WT);D.prototype.visitList=V(qT);D.prototype.visitStruct=V(HT);D.prototype.visitUnion=V(GT);D.prototype.visitDenseUnion=V(ab);D.prototype.visitSparseUnion=V(ob);D.prototype.visitDictionary=V(KT);D.prototype.visitInterval=V(JT);D.prototype.visitIntervalDayTime=V(cb);D.prototype.visitIntervalYearMonth=V(ub);D.prototype.visitDuration=V(QT);D.prototype.visitDurationSecond=V(lb);D.prototype.visitDurationMillisecond=V(hb);D.prototype.visitDurationMicrosecond=V(fb);D.prototype.visitDurationNanosecond=V(db);D.prototype.visitFixedSizeList=V(XT);D.prototype.visitMap=V(YT);const Be=new D,oi=Symbol.for("keys"),hs=Symbol.for("vals");class Iu{constructor(t){return this[oi]=new ft([t.children[0]]).memoize(),this[hs]=t.children[1],new Proxy(this,new tN)}[Symbol.iterator](){return new ZT(this[oi],this[hs])}get size(){return this[oi].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[oi],i=this[hs],n={};for(let r=-1,s=t.length;++r<s;)n[t.get(r)]=Be.visit(i,r);return n}toString(){return`{${[...this].map(([t,i])=>`${Sr(t)}: ${Sr(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class ZT{constructor(t,i){this.keys=t,this.vals=i,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Be.visit(this.vals,t)]})}}class tN{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[oi].toArray().map(String)}has(t,i){return t[oi].includes(i)}getOwnPropertyDescriptor(t,i){if(t[oi].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const n=t[oi].indexOf(i);if(n!==-1){const r=Be.visit(Reflect.get(t,hs),n);return Reflect.set(t,i,r),r}}set(t,i,n){const r=t[oi].indexOf(i);return r!==-1?(Ze.visit(Reflect.get(t,hs),r,n),Reflect.set(t,i,n)):Reflect.has(t,i)?Reflect.set(t,i,n):!1}}Object.defineProperties(Iu.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[oi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[hs]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Gp;function pb(e,t,i,n){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof i!="number"?r:i;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Gp=s,s=a,a=Gp),a>r&&(a=r),n?n(e,s,a):[s,a]}const Kp=e=>e!==e;function Cs(e){if(typeof e!=="object"||e===null)return Kp(e)?Kp:i=>i===e;if(e instanceof Date){const i=e.valueOf();return n=>n instanceof Date?n.valueOf()===i:!1}return ArrayBuffer.isView(e)?i=>i?GO(e,i):!1:e instanceof Map?iN(e):Array.isArray(e)?eN(e):e instanceof ft?nN(e):rN(e,!0)}function eN(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=Cs(e[i]);return xu(t)}function iN(e){let t=-1;const i=[];for(const n of e.values())i[++t]=Cs(n);return xu(i)}function nN(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=Cs(e.get(i));return xu(t)}function rN(e,t=!1){const i=Object.keys(e);if(!t&&i.length===0)return()=>!1;const n=[];for(let r=-1,s=i.length;++r<s;)n[r]=Cs(e[i[r]]);return xu(n,i)}function xu(e,t){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return sN(e,i);case Map:return Jp(e,i,i.keys());case Iu:case Cf:case Object:case void 0:return Jp(e,i,t||Object.keys(i))}return i instanceof ft?aN(e,i):!1}}function sN(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t[n]))return!1;return!0}function aN(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t.get(n)))return!1;return!0}function Jp(e,t,i){const n=i[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let c=s.next(),u=n.next(),l=r.next();for(;a<o&&!u.done&&!l.done&&!c.done&&!(u.value!==l.value||!e[a](c.value));++a,u=n.next(),l=r.next(),c=s.next());return a===o&&u.done&&l.done&&c.done?!0:(n.return&&n.return(),r.return&&r.return(),s.return&&s.return(),!1)}function yb(e,t,i,n){return(i&1<<n)!==0}function oN(e,t,i,n){return(i&1<<n)>>n}function Kc(e,t,i){const n=i.byteLength+7&-8;if(e>0||i.byteLength<n){const r=new Uint8Array(n);return r.set(e%8===0?i.subarray(e>>3):mb(new Rf(i,e,t,null,yb)).subarray(0,n)),r}return i}function mb(e){const t=[];let i=0,n=0,r=0;for(const a of e)a&&(r|=1<<n),++n===8&&(t[i++]=r,r=n=0);(i===0||n>0)&&(t[i++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Rf{constructor(t,i,n,r,s){this.bytes=t,this.length=n,this.context=r,this.get=s,this.bit=i%8,this.byteIndex=i>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Zl(e,t,i){if(i-t<=0)return 0;if(i-t<8){let s=0;for(const a of new Rf(e,t,i-t,e,oN))s+=a;return s}const n=i>>3<<3,r=t+(t%8===0?0:8-t%8);return Zl(e,t,r)+Zl(e,n,i)+cN(e,r>>3,n-r>>3)}function cN(e,t,i){let n=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=i===void 0?e.byteLength:r+i;for(;a-r>=4;)n+=cl(s.getUint32(r)),r+=4;for(;a-r>=2;)n+=cl(s.getUint16(r)),r+=2;for(;a-r>=1;)n+=cl(s.getUint8(r)),r+=1;return n}function cl(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const uN=-1;class pt{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return K.isSparseUnion(t)?this.children.some(i=>i.nullable):K.isDenseUnion(t)?this.children.some(i=>i.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:i,values:n,nullBitmap:r,typeIds:s}=this;return i&&(t+=i.byteLength),n&&(t+=n.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){if(K.isUnion(this.type))return this.children.reduce((n,r)=>n+r.nullCount,0);let t=this._nullCount,i;return t<=uN&&(i=this.nullBitmap)&&(this._nullCount=t=this.length-Zl(i,this.offset,this.offset+this.length)),t}constructor(t,i,n,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof pt?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Ei(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c)))}getValid(t){const{type:i}=this;if(K.isUnion(i)){const n=i,r=this.children[n.typeIdToChildIndex[this.typeIds[t]]],s=n.mode===he.Dense?this.valueOffsets[t]:t;return r.getValid(s)}if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,i){let n;const{type:r}=this;if(K.isUnion(r)){const s=r,a=this.children[s.typeIdToChildIndex[this.typeIds[t]]],o=s.mode===he.Dense?this.valueOffsets[t]:t;n=a.getValid(o),a.setValid(o,i)}else{let{nullBitmap:s}=this;const{offset:a,length:o}=this,c=a+t,u=1<<c%8,l=c>>3;(!s||s.byteLength<=l)&&(s=new Uint8Array((a+o+63&-64)>>3).fill(255),this.nullCount>0&&s.set(Kc(a,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const h=s[l];n=(h&u)!==0,i?s[l]=h|u:s[l]=h&~u}return n!==!!i&&(this._nullCount=this.nullCount+(i?-1:1)),i}clone(t=this.type,i=this.offset,n=this.length,r=this._nullCount,s=this,a=this.children){return new pt(t,i,n,r,s,a,this.dictionary)}slice(t,i){const{stride:n,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?n:1,c=this._sliceBuffers(t,i,n,r);return this.clone(this.type,this.offset+t,i,a,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*i))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===p.Null)return this.clone(this.type,0,t,0);const{length:i,nullCount:n}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,i>>3);r[i>>3]=(1<<i-(i&-8))-1,n>0&&r.set(Kc(this.offset,i,this.nullBitmap),0);const s=this.buffers;return s[en.VALIDITY]=r,this.clone(this.type,0,t,n+(t-i),s)}_sliceBuffers(t,i,n,r){let s;const{buffers:a}=this;return(s=a[en.TYPE])&&(a[en.TYPE]=s.subarray(t,t+i)),(s=a[en.OFFSET])&&(a[en.OFFSET]=s.subarray(t,t+i+1))||(s=a[en.DATA])&&(a[en.DATA]=r===6?s:s.subarray(n*t,n*(t+i))),a}_sliceChildren(t,i,n){return t.map(r=>r.slice(i,n))}}pt.prototype.children=Object.freeze([]);class Sa extends Z{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:i,["offset"]:n=0,["length"]:r=0}=t;return new pt(i,n,r,r)}visitBool(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitInt(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.data),s=st(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new pt(i,n,o,c,[a,r,s])}visitLargeUtf8(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.data),s=st(t.nullBitmap),a=Rp(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new pt(i,n,o,c,[a,r,s])}visitBinary(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.data),s=st(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new pt(i,n,o,c,[a,r,s])}visitLargeBinary(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.data),s=st(t.nullBitmap),a=Rp(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new pt(i,n,o,c,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length/Ei(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitDate(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length/Ei(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length/Ei(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitTime(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length/Ei(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length/Ei(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitList(t){const{["type"]:i,["offset"]:n=0,["child"]:r}=t,s=st(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new pt(i,n,o,c,[a,void 0,s],[r])}visitStruct(t){const{["type"]:i,["offset"]:n=0,["children"]:r=[]}=t,s=st(t.nullBitmap),{length:a=r.reduce((c,{length:u})=>Math.max(c,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:i,["offset"]:n=0,["children"]:r=[]}=t,s=Yt(i.ArrayType,t.typeIds),{["length"]:a=s.length,["nullCount"]:o=-1}=t;if(K.isSparseUnion(i))return new pt(i,n,a,o,[void 0,void 0,void 0,s],r);const c=Js(t.valueOffsets);return new pt(i,n,a,o,[c,void 0,void 0,s],r)}visitDictionary(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.indices.ArrayType,t.data),{["dictionary"]:a=new ft([new Sa().visit({type:i.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new pt(i,n,o,c,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length/Ei(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitDuration(t){const{["type"]:i,["offset"]:n=0}=t,r=st(t.nullBitmap),s=Yt(i.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:i,["offset"]:n=0,["child"]:r=new Sa().visit({type:i.valueType})}=t,s=st(t.nullBitmap),{["length"]:a=r.length/Ei(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new pt(i,n,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:i,["offset"]:n=0,["child"]:r=new Sa().visit({type:i.childType})}=t,s=st(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new pt(i,n,o,c,[a,void 0,s],[r])}}const lN=new Sa;function re(e){return lN.visit(e)}class Qp{constructor(t=0,i){this.numChunks=t,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function hN(e){return e.some(t=>t.nullable)}function gb(e){return e.reduce((t,i)=>t+i.nullCount,0)}function _b(e){return e.reduce((t,i,n)=>(t[n+1]=t[n]+i.length,t),new Uint32Array(e.length+1))}function bb(e,t,i,n){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],c=t[s],{length:u}=o;if(c>=n)break;if(i>=c+u)continue;if(c>=i&&c+u<=n){r.push(o);continue}const l=Math.max(0,i-c),h=Math.min(n-c,u);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function Mf(e,t,i,n){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return i<t[a]?n(e,r,i-t[r]):null;s=r+Math.trunc((a-r)*.5),i<t[s]?a=s:r=s}while(r<a)}function Uf(e,t){return e.getValid(t)}function Jc(e){function t(i,n,r){return e(i[n],r)}return function(i){const n=this.data;return Mf(n,this._offsets,i,t)}}function vb(e){let t;function i(n,r,s){return e(n[r],s,t)}return function(n,r){const s=this.data;t=r;const a=Mf(s,this._offsets,n,i);return t=void 0,a}}function wb(e){let t;function i(n,r,s){let a=s,o=0,c=0;for(let u=r-1,l=n.length;++u<l;){const h=n[u];if(~(o=e(h,t,a)))return c+o;a=0,c+=h.length}return-1}return function(n,r){t=n;const s=this.data,a=typeof r!="number"?i(s,0,0):Mf(s,this._offsets,r,i);return t=void 0,a}}class F extends Z{}function fN(e,t){return t===null&&e.length>0?0:-1}function dN(e,t){const{nullBitmap:i}=e;if(!i||e.nullCount<=0)return-1;let n=0;for(const r of new Rf(i,e.offset+(t||0),e.length,i,yb)){if(!r)return n;++n}return-1}function Y(e,t,i){if(t===void 0)return-1;if(t===null)switch(e.typeId){case p.Union:break;case p.Dictionary:break;default:return dN(e,i)}const n=Be.getVisitFn(e),r=Cs(t);for(let s=(i||0)-1,a=e.length;++s<a;)if(r(n(e,s)))return s;return-1}function Sb(e,t,i){const n=Be.getVisitFn(e),r=Cs(t);for(let s=(i||0)-1,a=e.length;++s<a;)if(r(n(e,s)))return s;return-1}F.prototype.visitNull=fN;F.prototype.visitBool=Y;F.prototype.visitInt=Y;F.prototype.visitInt8=Y;F.prototype.visitInt16=Y;F.prototype.visitInt32=Y;F.prototype.visitInt64=Y;F.prototype.visitUint8=Y;F.prototype.visitUint16=Y;F.prototype.visitUint32=Y;F.prototype.visitUint64=Y;F.prototype.visitFloat=Y;F.prototype.visitFloat16=Y;F.prototype.visitFloat32=Y;F.prototype.visitFloat64=Y;F.prototype.visitUtf8=Y;F.prototype.visitLargeUtf8=Y;F.prototype.visitBinary=Y;F.prototype.visitLargeBinary=Y;F.prototype.visitFixedSizeBinary=Y;F.prototype.visitDate=Y;F.prototype.visitDateDay=Y;F.prototype.visitDateMillisecond=Y;F.prototype.visitTimestamp=Y;F.prototype.visitTimestampSecond=Y;F.prototype.visitTimestampMillisecond=Y;F.prototype.visitTimestampMicrosecond=Y;F.prototype.visitTimestampNanosecond=Y;F.prototype.visitTime=Y;F.prototype.visitTimeSecond=Y;F.prototype.visitTimeMillisecond=Y;F.prototype.visitTimeMicrosecond=Y;F.prototype.visitTimeNanosecond=Y;F.prototype.visitDecimal=Y;F.prototype.visitList=Y;F.prototype.visitStruct=Y;F.prototype.visitUnion=Y;F.prototype.visitDenseUnion=Sb;F.prototype.visitSparseUnion=Sb;F.prototype.visitDictionary=Y;F.prototype.visitInterval=Y;F.prototype.visitIntervalDayTime=Y;F.prototype.visitIntervalYearMonth=Y;F.prototype.visitDuration=Y;F.prototype.visitDurationSecond=Y;F.prototype.visitDurationMillisecond=Y;F.prototype.visitDurationMicrosecond=Y;F.prototype.visitDurationNanosecond=Y;F.prototype.visitFixedSizeList=Y;F.prototype.visitMap=Y;const Qc=new F;class k extends Z{}function j(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===p.Timestamp||t instanceof fe&&t.bitWidth!==64||t instanceof dn&&t.bitWidth!==64||t instanceof Wn&&t.precision!==Qt.HALF))return new Qp(e.data.length,n=>{const r=e.data[n];return r.values.subarray(0,r.length)[Symbol.iterator]()});let i=0;return new Qp(e.data.length,n=>{const s=e.data[n].length,a=e.slice(i,i+s);return i+=s,new pN(a)})}class pN{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}k.prototype.visitNull=j;k.prototype.visitBool=j;k.prototype.visitInt=j;k.prototype.visitInt8=j;k.prototype.visitInt16=j;k.prototype.visitInt32=j;k.prototype.visitInt64=j;k.prototype.visitUint8=j;k.prototype.visitUint16=j;k.prototype.visitUint32=j;k.prototype.visitUint64=j;k.prototype.visitFloat=j;k.prototype.visitFloat16=j;k.prototype.visitFloat32=j;k.prototype.visitFloat64=j;k.prototype.visitUtf8=j;k.prototype.visitLargeUtf8=j;k.prototype.visitBinary=j;k.prototype.visitLargeBinary=j;k.prototype.visitFixedSizeBinary=j;k.prototype.visitDate=j;k.prototype.visitDateDay=j;k.prototype.visitDateMillisecond=j;k.prototype.visitTimestamp=j;k.prototype.visitTimestampSecond=j;k.prototype.visitTimestampMillisecond=j;k.prototype.visitTimestampMicrosecond=j;k.prototype.visitTimestampNanosecond=j;k.prototype.visitTime=j;k.prototype.visitTimeSecond=j;k.prototype.visitTimeMillisecond=j;k.prototype.visitTimeMicrosecond=j;k.prototype.visitTimeNanosecond=j;k.prototype.visitDecimal=j;k.prototype.visitList=j;k.prototype.visitStruct=j;k.prototype.visitUnion=j;k.prototype.visitDenseUnion=j;k.prototype.visitSparseUnion=j;k.prototype.visitDictionary=j;k.prototype.visitInterval=j;k.prototype.visitIntervalDayTime=j;k.prototype.visitIntervalYearMonth=j;k.prototype.visitDuration=j;k.prototype.visitDurationSecond=j;k.prototype.visitDurationMillisecond=j;k.prototype.visitDurationMicrosecond=j;k.prototype.visitDurationNanosecond=j;k.prototype.visitFixedSizeList=j;k.prototype.visitMap=j;const Pf=new k;var Ib;const xb={},Ab={};class ft{constructor(t){var i,n,r;const s=t[0]instanceof ft?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof pt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(i=s[0])===null||i===void 0?void 0:i.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:c,indexOf:u}=xb[a.typeId],l=s[0];this.isValid=h=>Uf(l,h),this.get=h=>o(l,h),this.set=(h,d)=>c(l,h,d),this.indexOf=h=>u(l,h),this._offsets=[0,l.length];break}default:Object.setPrototypeOf(this,Ab[a.typeId]),this._offsets=_b(s);break}this.data=s,this.type=a,this.stride=Ei(a),this.numChildren=(r=(n=a.children)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,i)=>t+i.byteLength,0)}get nullable(){return hN(this.data)}get nullCount(){return gb(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${p[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,i){}indexOf(t,i){return-1}includes(t,i){return this.indexOf(t,i)>-1}[Symbol.iterator](){return Pf.visit(this)}concat(...t){return new ft(this.data.concat(t.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(t,i){return new ft(pb(this,t,i,({data:n,_offsets:r},s,a)=>bb(n,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:i,length:n,stride:r,ArrayType:s}=this;switch(t.typeId){case p.Int:case p.Float:case p.Decimal:case p.Time:case p.Timestamp:switch(i.length){case 0:return new s;case 1:return i[0].values.subarray(0,n*r);default:return i.reduce((a,{values:o,length:c})=>(a.array.set(o.subarray(0,c*r),a.offset),a.offset+=c*r,a),{array:new s(n*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ft(this.data.map(({children:i})=>i[t])):null}get isMemoized(){return K.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(K.isDictionary(this.type)){const t=new Xc(this.data[0].dictionary),i=this.data.map(n=>{const r=n.clone();return r.dictionary=t,r});return new ft(i)}return new Xc(this)}unmemoize(){if(K.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),i=this.data.map(n=>{const r=n.clone();return r.dictionary=t,r});return new ft(i)}return this}}Ib=Symbol.toStringTag;ft[Ib]=(e=>{e.type=K.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(p).map(i=>p[i]).filter(i=>typeof i=="number"&&i!==p.NONE);for(const i of t){const n=Be.getVisitFnByTypeId(i),r=Ze.getVisitFnByTypeId(i),s=Qc.getVisitFnByTypeId(i);xb[i]={get:n,set:r,indexOf:s},Ab[i]=Object.create(e,{isValid:{value:Jc(Uf)},get:{value:Jc(Be.getVisitFnByTypeId(i))},set:{value:vb(Ze.getVisitFnByTypeId(i))},indexOf:{value:wb(Qc.getVisitFnByTypeId(i))}})}return"Vector"})(ft.prototype);class Xc extends ft{constructor(t){super(t.data);const i=this.get,n=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const c=i.call(this,a);return s[a]=c,c}}),Object.defineProperty(this,"set",{value(a,o){n.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new Xc(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ft(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function yN(e){if(!e||e.length<=0)return function(r){return!0};let t="";const i=e.filter(n=>n===n);return i.length>0&&(t=`
    switch (x) {${i.map(n=>`
        case ${mN(n)}:`).join("")}
            return false;
    }`),e.length!==i.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function mN(e){return typeof e!="bigint"?Sr(e):`${Sr(e)}n`}function ul(e,t){const i=Math.ceil(e)*t-1;return(i-i%64+64||64)/t}function Xp(e,t=0){return e.length>=t?e.subarray(0,t):Gl(new e.constructor(t),e,0)}class eo{constructor(t,i=0,n=1){this.length=Math.ceil(i/n),this.buffer=new t(this.length),this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,i){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const i=this.stride,n=this.length*i,r=this.buffer.length;n>=r&&this._resize(r===0?ul(n*1,this.BYTES_PER_ELEMENT):ul(n*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=ul(t*this.stride,this.BYTES_PER_ELEMENT);const i=Xp(this.buffer,t);return this.clear(),i}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=Xp(this.buffer,t)}}class io extends eo{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,i){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=i,this}}class Bb extends io{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,i){const{buffer:n}=this.reserve(t-this.length+1),r=t>>3,s=t%8,a=n[r]>>s&1;return i?a===0&&(n[r]|=1<<s,++this.numValid):a===1&&(n[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Eb extends io{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,i){const n=this.length-1,r=this.reserve(t-n+1).buffer;return n<t++&&n>=0&&r.fill(r[n],n,t),r[t]=r[t-1]+i,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let Oe=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:i}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=i,this.stride=Ei(t),this._nulls=new Bb,i&&i.length>0&&(this._isValid=yN(i))}toVector(){return new ft([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:i,_values:n,_nulls:r,_typeIds:s,children:a}=this;return i&&(t+=i.byteLength),n&&(t+=n.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),a.reduce((o,c)=>o+c.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((i,n)=>i+n.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,i){return this.setValid(t,this.isValid(i))&&this.setValue(t,i),this}setValue(t,i){this._setValue(this,t,i)}setValid(t,i){return this.length=this._nulls.set(t,+i).length,i}addChild(t,i=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,i,n,r;const{type:s,length:a,nullCount:o,_typeIds:c,_offsets:u,_values:l,_nulls:h}=this;(i=c==null?void 0:c.flush(a))?r=u==null?void 0:u.flush(a):(r=u==null?void 0:u.flush(a))?t=l==null?void 0:l.flush(u.last()):t=l==null?void 0:l.flush(a),o>0&&(n=h==null?void 0:h.flush(a));const d=this.children.map(y=>y.flush());return this.clear(),re({type:s,length:a,nullCount:o,children:d,child:d[0],data:t,typeIds:i,nullBitmap:n,valueOffsets:r})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,i,n,r;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(i=this._values)===null||i===void 0||i.clear(),(n=this._offsets)===null||n===void 0||n.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};Oe.prototype.length=1;Oe.prototype.stride=1;Oe.prototype.children=null;Oe.prototype.finished=!1;Oe.prototype.nullValues=null;Oe.prototype._isValid=()=>!0;class Sn extends Oe{constructor(t){super(t),this._values=new io(this.ArrayType,0,this.stride)}setValue(t,i){const n=this._values;return n.reserve(t-n.length+1),super.setValue(t,i)}}class Ls extends Oe{constructor(t){super(t),this._pendingLength=0,this._offsets=new Eb(t.type)}setValue(t,i){const n=this._pending||(this._pending=new Map),r=n.get(t);r&&(this._pendingLength-=r.length),this._pendingLength+=i instanceof Iu?i[oi].length:i.length,n.set(t,i)}setValid(t,i){return super.setValid(t,i)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,i=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,i),this}}class th{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,i,n,r){return t.prep(8,24),t.writeInt64(BigInt(r??0)),t.pad(4),t.writeInt32(n),t.writeInt64(BigInt(i??0)),t.offset()}}class Ne{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFooter(t,i){return(i||new Ne).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,i){return t.setPosition(t.position()+_t),(i||new Ne).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kt.V1}schema(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Ai).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}dictionaries(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new th).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,i){const n=this.bb.__offset(this.bb_pos,10);return n?(i||new th).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new Gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,Kt.V1)}static addSchema(t,i){t.addFieldOffset(1,i,0)}static addDictionaries(t,i){t.addFieldOffset(2,i,0)}static startDictionariesVector(t,i){t.startVector(24,i,8)}static addRecordBatches(t,i){t.addFieldOffset(3,i,0)}static startRecordBatchesVector(t,i){t.startVector(24,i,8)}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,i){t.finish(i)}static finishSizePrefixedFooterBuffer(t,i){t.finish(i,void 0,!0)}}class mt{constructor(t=[],i,n,r=Kt.V5){this.fields=t||[],this.metadata=i||new Map,n||(n=eh(t)),this.dictionaries=n,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,i)=>`${i}: ${t}`).join(", ")} }>`}select(t){const i=new Set(t),n=this.fields.filter(r=>i.has(r.name));return new mt(n,this.metadata)}selectAt(t){const i=t.map(n=>this.fields[n]).filter(Boolean);return new mt(i,this.metadata)}assign(...t){const i=t[0]instanceof mt?t[0]:Array.isArray(t[0])?new mt(t[0]):new mt(t),n=[...this.fields],r=bo(bo(new Map,this.metadata),i.metadata),s=i.fields.filter(o=>{const c=n.findIndex(u=>u.name===o.name);return~c?(n[c]=o.clone({metadata:bo(bo(new Map,n[c].metadata),o.metadata)}))&&!1:!0}),a=eh(s,new Map);return new mt([...n,...s],r,new Map([...this.dictionaries,...a]))}}mt.prototype.fields=null;mt.prototype.metadata=null;mt.prototype.dictionaries=null;class yt{static new(...t){let[i,n,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:i}=t[0],n===void 0&&(n=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new yt(`${i}`,n,r,s)}constructor(t,i,n=!1,r){this.name=t,this.type=i,this.nullable=n,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[i,n,r,s]=t;return!t[0]||typeof t[0]!="object"?[i=this.name,n=this.type,r=this.nullable,s=this.metadata]=t:{name:i=this.name,type:n=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],yt.new(i,n,r,s)}}yt.prototype.type=null;yt.prototype.name=null;yt.prototype.nullable=null;yt.prototype.metadata=null;function bo(e,t){return new Map([...e||new Map,...t||new Map])}function eh(e,t=new Map){for(let i=-1,n=e.length;++i<n;){const s=e[i].type;if(K.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&eh(s.children,t)}return t}var gN=e_,_N=Pc;class ih{static decode(t){t=new _N(st(t));const i=Ne.getRootAsFooter(t),n=mt.decode(i.schema(),new Map,i.version());return new bN(n,i)}static encode(t){const i=new gN,n=mt.encode(i,t.schema);Ne.startRecordBatchesVector(i,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())Yn.encode(i,a);const r=i.endVector();Ne.startDictionariesVector(i,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())Yn.encode(i,a);const s=i.endVector();return Ne.startFooter(i),Ne.addSchema(i,n),Ne.addVersion(i,Kt.V5),Ne.addRecordBatches(i,r),Ne.addDictionaries(i,s),Ne.finishFooterBuffer(i,Ne.endFooter(i)),i.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,i=Kt.V5,n,r){this.schema=t,this.version=i,n&&(this._recordBatches=n),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let t,i=-1,n=this.numRecordBatches;++i<n;)(t=this.getRecordBatch(i))&&(yield t)}*dictionaryBatches(){for(let t,i=-1,n=this.numDictionaries;++i<n;)(t=this.getDictionaryBatch(i))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class bN extends ih{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,i){super(t,i.version()),this._footer=i}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const i=this._footer.recordBatches(t);if(i)return Yn.decode(i)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const i=this._footer.dictionaries(t);if(i)return Yn.decode(i)}return null}}class Yn{static decode(t){return new Yn(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,i){const{metaDataLength:n}=i,r=BigInt(i.offset),s=BigInt(i.bodyLength);return th.createBlock(t,r,n,s)}constructor(t,i,n){this.metaDataLength=t,this.offset=ie(n),this.bodyLength=ie(i)}}const vo=Object.freeze({done:!0,value:void 0});class Ob{tee(){return this._getDOMStream().tee()}pipe(t,i){return this._getNodeStream().pipe(t,i)}pipeTo(t,i){return this._getDOMStream().pipeTo(t,i)}pipeThrough(t,i){return this._getDOMStream().pipeThrough(t,i)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class vN extends Ob{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(vo);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Mp.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Mp.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return A(this,void 0,void 0,function*(){return yield this.abort(t),vo})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),vo})}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((i,n)=>{this.resolvers.push({resolve:i,reject:n})}):Promise.resolve(vo)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ll extends vN{write(t){if((t=st(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Hl(this.toUint8Array(!0)):this.toUint8Array(!1).then(Hl)}toUint8Array(t=!1){return t?$i(this._values)[0]:(()=>A(this,void 0,void 0,function*(){var i,n,r,s;const a=[];let o=0;try{for(var c=!0,u=He(this),l;l=yield u.next(),i=l.done,!i;c=!0){s=l.value,c=!1;const h=s;a.push(h),o+=h.byteLength}}catch(h){n={error:h}}finally{try{!c&&!i&&(r=u.return)&&(yield r.call(u))}finally{if(n)throw n.error}}return $i(a,o)[0]}))()}}class Tb extends Ls{constructor(t){super(t),this._values=new eo(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,i){return super.setValue(t,st(i))}_flushPending(t,i){const n=this._offsets,r=this._values.reserve(i).buffer;let s=0;for(const[a,o]of t)if(o===void 0)n.set(a,0);else{const c=o.length;r.set(o,s),n.set(a,c),s+=c}}}class Nb extends Ls{constructor(t){super(t),this._values=new eo(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,i){return super.setValue(t,st(i))}_flushPending(t,i){const n=this._offsets,r=this._values.reserve(i).buffer;let s=0;for(const[a,o]of t)if(o===void 0)n.set(a,BigInt(0));else{const c=o.length;r.set(o,s),n.set(a,BigInt(c)),s+=c}}}class wN extends Oe{constructor(t){super(t),this._values=new Bb}setValue(t,i){this._values.set(t,+i)}}class Au extends Sn{}Au.prototype._setValue=M_;class Db extends Au{}Db.prototype._setValue=_f;class Fb extends Au{}Fb.prototype._setValue=bf;class kb extends Sn{}kb.prototype._setValue=$_;class SN extends Oe{constructor({type:t,nullValues:i,dictionaryHashFunction:n}){super({type:new qn(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Zc({type:this.type.indices,nullValues:i}),this.dictionary=Zc({type:this.type.dictionary,nullValues:null}),typeof n=="function"&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,i){const n=this.indices;return i=n.setValid(t,i),this.length=n.length,i}setValue(t,i){const n=this._keysToIndices,r=this.valueToKey(i);let s=n[r];return s===void 0&&(n[r]=s=this._dictionaryOffset+this.dictionary.append(i).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,i=this._dictionary,n=this.dictionary.toVector(),r=this.indices.flush().clone(t);return r.dictionary=i?i.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Cb extends Sn{}Cb.prototype._setValue=C_;class IN extends Oe{setValue(t,i){const[n]=this.children,r=t*this.stride;for(let s=-1,a=i.length;++s<a;)n.set(r+s,i[s])}addChild(t,i="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(t);return this.type=new Bs(this.type.listSize,new yt(i,t.type,!0)),n}}class Bu extends Sn{setValue(t,i){this._values.set(t,i)}}class xN extends Bu{setValue(t,i){super.setValue(t,D_(i))}}class AN extends Bu{}class BN extends Bu{}class Eu extends Sn{}Eu.prototype._setValue=z_;class Lb extends Eu{}Lb.prototype._setValue=Of;class Rb extends Eu{}Rb.prototype._setValue=Tf;class Rs extends Sn{}Rs.prototype._setValue=W_;class Mb extends Rs{}Mb.prototype._setValue=Nf;class Ub extends Rs{}Ub.prototype._setValue=Df;class Pb extends Rs{}Pb.prototype._setValue=Ff;class $b extends Rs{}$b.prototype._setValue=kf;class In extends Sn{setValue(t,i){this._values.set(t,i)}}class EN extends In{}class ON extends In{}class TN extends In{}class NN extends In{}class DN extends In{}class FN extends In{}class kN extends In{}class CN extends In{}class LN extends Ls{constructor(t){super(t),this._offsets=new Eb(t.type)}addChild(t,i="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new As(new yt(i,t.type,!0)),this.numChildren-1}_flushPending(t){const i=this._offsets,[n]=this.children;for(const[r,s]of t)if(typeof s>"u")i.set(r,0);else{const a=s,o=a.length,c=i.set(r,o).buffer[r];for(let u=-1;++u<o;)n.set(c+u,a[u])}}}class RN extends Ls{set(t,i){return super.set(t,i)}setValue(t,i){const n=i instanceof Map?i:new Map(Object.entries(i)),r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=n.size,r.set(t,n)}addChild(t,i=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Va(new yt(i,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const i=this._offsets,[n]=this.children;for(const[r,s]of t)if(s===void 0)i.set(r,0);else{let{[r]:a,[r+1]:o}=i.set(r,s.size).buffer;for(const c of s.entries())if(n.set(a,c),++a>=o)break}}}class MN extends Oe{setValue(t,i){}setValid(t,i){return this.length=Math.max(t+1,this.length),i}}class UN extends Oe{setValue(t,i){const{children:n,type:r}=this;switch(Array.isArray(i)||i.constructor){case!0:return r.children.forEach((s,a)=>n[a].set(t,i[a]));case Map:return r.children.forEach((s,a)=>n[a].set(t,i.get(s.name)));default:return r.children.forEach((s,a)=>n[a].set(t,i[s.name]))}}setValid(t,i){return super.setValid(t,i)||this.children.forEach(n=>n.setValid(t,i)),i}addChild(t,i=`${this.numChildren}`){const n=this.children.push(t);return this.type=new se([...this.type.children,new yt(i,t.type,!0)]),n}}class Ms extends Sn{}Ms.prototype._setValue=U_;class Vb extends Ms{}Vb.prototype._setValue=vf;class jb extends Ms{}jb.prototype._setValue=wf;class zb extends Ms{}zb.prototype._setValue=Sf;class Wb extends Ms{}Wb.prototype._setValue=If;class Us extends Sn{}Us.prototype._setValue=P_;class qb extends Us{}qb.prototype._setValue=xf;class Yb extends Us{}Yb.prototype._setValue=Af;class Hb extends Us{}Hb.prototype._setValue=Bf;class Gb extends Us{}Gb.prototype._setValue=Ef;class $f extends Oe{constructor(t){super(t),this._typeIds=new io(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,i){return this.set(this.length,t,i)}set(t,i,n){return n===void 0&&(n=this._valueToChildTypeId(this,i,t)),this.setValue(t,i,n),this}setValue(t,i,n){this._typeIds.set(t,n);const r=this.type.typeIdToChildIndex[n],s=this.children[r];s==null||s.set(t,i)}addChild(t,i=`${this.children.length}`){const n=this.children.push(t),{type:{children:r,mode:s,typeIds:a}}=this,o=[...r,new yt(i,t.type)];return this.type=new $a(s,[...a,n],o),n}_valueToChildTypeId(t,i,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class PN extends $f{}class $N extends $f{constructor(t){super(t),this._offsets=new io(Int32Array)}setValue(t,i,n){const r=this._typeIds.set(t,n).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(t,s.length).buffer[t];s==null||s.set(a,i)}}class Kb extends Ls{constructor(t){super(t),this._values=new eo(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,i){return super.setValue(t,vu(i))}_flushPending(t,i){}}Kb.prototype._flushPending=Tb.prototype._flushPending;class Jb extends Ls{constructor(t){super(t),this._values=new eo(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,i){return super.setValue(t,vu(i))}_flushPending(t,i){}}Jb.prototype._flushPending=Nb.prototype._flushPending;class VN extends Z{visitNull(){return MN}visitBool(){return wN}visitInt(){return In}visitInt8(){return EN}visitInt16(){return ON}visitInt32(){return TN}visitInt64(){return NN}visitUint8(){return DN}visitUint16(){return FN}visitUint32(){return kN}visitUint64(){return CN}visitFloat(){return Bu}visitFloat16(){return xN}visitFloat32(){return AN}visitFloat64(){return BN}visitUtf8(){return Kb}visitLargeUtf8(){return Jb}visitBinary(){return Tb}visitLargeBinary(){return Nb}visitFixedSizeBinary(){return Cb}visitDate(){return Au}visitDateDay(){return Db}visitDateMillisecond(){return Fb}visitTimestamp(){return Ms}visitTimestampSecond(){return Vb}visitTimestampMillisecond(){return jb}visitTimestampMicrosecond(){return zb}visitTimestampNanosecond(){return Wb}visitTime(){return Us}visitTimeSecond(){return qb}visitTimeMillisecond(){return Yb}visitTimeMicrosecond(){return Hb}visitTimeNanosecond(){return Gb}visitDecimal(){return kb}visitList(){return LN}visitStruct(){return UN}visitUnion(){return $f}visitDenseUnion(){return $N}visitSparseUnion(){return PN}visitDictionary(){return SN}visitInterval(){return Eu}visitIntervalDayTime(){return Lb}visitIntervalYearMonth(){return Rb}visitDuration(){return Rs}visitDurationSecond(){return Mb}visitDurationMillisecond(){return Ub}visitDurationMicrosecond(){return Pb}visitDurationNanosecond(){return $b}visitFixedSizeList(){return IN}visitMap(){return RN}}const jN=new VN;class C extends Z{compareSchemas(t,i){return t===i||i instanceof t.constructor&&this.compareManyFields(t.fields,i.fields)}compareManyFields(t,i){return t===i||Array.isArray(t)&&Array.isArray(i)&&t.length===i.length&&t.every((n,r)=>this.compareFields(n,i[r]))}compareFields(t,i){return t===i||i instanceof t.constructor&&t.name===i.name&&t.nullable===i.nullable&&this.visit(t.type,i.type)}}function pe(e,t){return t instanceof e.constructor}function Ar(e,t){return e===t||pe(e,t)}function xn(e,t){return e===t||pe(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Ou(e,t){return e===t||pe(e,t)&&e.precision===t.precision}function zN(e,t){return e===t||pe(e,t)&&e.byteWidth===t.byteWidth}function Vf(e,t){return e===t||pe(e,t)&&e.unit===t.unit}function no(e,t){return e===t||pe(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function ro(e,t){return e===t||pe(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function WN(e,t){return e===t||pe(e,t)&&e.children.length===t.children.length&&Hn.compareManyFields(e.children,t.children)}function qN(e,t){return e===t||pe(e,t)&&e.children.length===t.children.length&&Hn.compareManyFields(e.children,t.children)}function jf(e,t){return e===t||pe(e,t)&&e.mode===t.mode&&e.typeIds.every((i,n)=>i===t.typeIds[n])&&Hn.compareManyFields(e.children,t.children)}function YN(e,t){return e===t||pe(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Hn.visit(e.indices,t.indices)&&Hn.visit(e.dictionary,t.dictionary)}function zf(e,t){return e===t||pe(e,t)&&e.unit===t.unit}function so(e,t){return e===t||pe(e,t)&&e.unit===t.unit}function HN(e,t){return e===t||pe(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Hn.compareManyFields(e.children,t.children)}function GN(e,t){return e===t||pe(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Hn.compareManyFields(e.children,t.children)}C.prototype.visitNull=Ar;C.prototype.visitBool=Ar;C.prototype.visitInt=xn;C.prototype.visitInt8=xn;C.prototype.visitInt16=xn;C.prototype.visitInt32=xn;C.prototype.visitInt64=xn;C.prototype.visitUint8=xn;C.prototype.visitUint16=xn;C.prototype.visitUint32=xn;C.prototype.visitUint64=xn;C.prototype.visitFloat=Ou;C.prototype.visitFloat16=Ou;C.prototype.visitFloat32=Ou;C.prototype.visitFloat64=Ou;C.prototype.visitUtf8=Ar;C.prototype.visitLargeUtf8=Ar;C.prototype.visitBinary=Ar;C.prototype.visitLargeBinary=Ar;C.prototype.visitFixedSizeBinary=zN;C.prototype.visitDate=Vf;C.prototype.visitDateDay=Vf;C.prototype.visitDateMillisecond=Vf;C.prototype.visitTimestamp=no;C.prototype.visitTimestampSecond=no;C.prototype.visitTimestampMillisecond=no;C.prototype.visitTimestampMicrosecond=no;C.prototype.visitTimestampNanosecond=no;C.prototype.visitTime=ro;C.prototype.visitTimeSecond=ro;C.prototype.visitTimeMillisecond=ro;C.prototype.visitTimeMicrosecond=ro;C.prototype.visitTimeNanosecond=ro;C.prototype.visitDecimal=Ar;C.prototype.visitList=WN;C.prototype.visitStruct=qN;C.prototype.visitUnion=jf;C.prototype.visitDenseUnion=jf;C.prototype.visitSparseUnion=jf;C.prototype.visitDictionary=YN;C.prototype.visitInterval=zf;C.prototype.visitIntervalDayTime=zf;C.prototype.visitIntervalYearMonth=zf;C.prototype.visitDuration=so;C.prototype.visitDurationSecond=so;C.prototype.visitDurationMillisecond=so;C.prototype.visitDurationMicrosecond=so;C.prototype.visitDurationNanosecond=so;C.prototype.visitFixedSizeList=HN;C.prototype.visitMap=GN;const Hn=new C;function nh(e,t){return Hn.compareSchemas(e,t)}function Zc(e){const t=e.type,i=new(jN.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const n=e.children||[],r={nullValues:e.nullValues},s=Array.isArray(n)?(a,o)=>n[o]||r:({name:a})=>n[a]||r;for(const[a,o]of t.children.entries()){const{type:c}=o,u=s(o,a);i.children.push(Zc(Object.assign(Object.assign({},u),{type:c})))}}return i}function hl(e,t){return KN(e,t.map(i=>i.data.concat()))}function KN(e,t){const i=[...e.fields],n=[],r={numBatches:t.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,o=-1;const c=t.length;let u,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=JN(i,a,l,t,r),a>0&&(n[s++]=re({type:new se(i),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(i),n.map(h=>new Fe(e,h))]}function JN(e,t,i,n,r){var s;const a=(t+63&-64)>>3;for(let o=-1,c=n.length;++o<c;){const u=i[o],l=u==null?void 0:u.length;if(l>=t)l===t?i[o]=u:(i[o]=u.slice(0,t),r.numBatches=Math.max(r.numBatches,n[o].unshift(u.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),i[o]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:re({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return i}var Qb;class we{constructor(...t){var i,n;if(t.length===0)return this.batches=[],this.schema=new mt([]),this._offsets=[0],this;let r,s;t[0]instanceof mt&&(r=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const a=c=>{if(c){if(c instanceof Fe)return[c];if(c instanceof we)return c.batches;if(c instanceof pt){if(c.type instanceof se)return[new Fe(new mt(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(u=>a(u));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(u=>a(u));if(typeof c=="object"){const u=Object.keys(c),l=u.map(y=>new ft([c[y]])),h=r??new mt(u.map((y,g)=>new yt(String(y),l[g].type,l[g].nullable))),[,d]=hl(h,l);return d.length===0?[new Fe(c)]:d}}}return[]},o=t.flatMap(c=>a(c));if(r=(n=r??((i=o[0])===null||i===void 0?void 0:i.schema))!==null&&n!==void 0?n:new mt([]),!(r instanceof mt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of o){if(!(c instanceof Fe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!nh(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??_b(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,i)=>t+i.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=gb(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,i){}indexOf(t,i){return-1}[Symbol.iterator](){return this.batches.length>0?Pf.visit(new ft(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const i=this.schema,n=this.data.concat(t.flatMap(({data:r})=>r));return new we(i,n.map(r=>new Fe(i,r)))}slice(t,i){const n=this.schema;[t,i]=pb({length:this.numRows},t,i);const r=bb(this.data,this._offsets,t,i);return new we(n,r.map(s=>new Fe(n,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(i=>i.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const i=this.data.map(n=>n.children[t]);if(i.length===0){const{type:n}=this.schema.fields[t],r=re({type:n,length:0,nullCount:0});i.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new ft(i)}return null}setChild(t,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t),i)}setChildAt(t,i){let n=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){i||(i=new ft([re({type:new fn,length:this.numRows})]));const s=n.fields.slice(),a=s[t].clone({type:i.type}),o=this.schema.fields.map((c,u)=>this.getChildAt(u));[s[t],o[t]]=[a,i],[n,r]=hl(n,o)}return new we(n,r)}select(t){const i=this.schema.fields.reduce((n,r,s)=>n.set(r.name,s),new Map);return this.selectAt(t.map(n=>i.get(n)).filter(n=>n>-1))}selectAt(t){const i=this.schema.selectAt(t),n=this.batches.map(r=>r.selectAt(t));return new we(i,n)}assign(t){const i=this.schema.fields,[n,r]=t.schema.fields.reduce((o,c,u)=>{const[l,h]=o,d=i.findIndex(y=>y.name===c.name);return~d?h[d]=u:l.push(u),o},[[],[]]),s=this.schema.assign(t.schema),a=[...i.map((o,c)=>[c,r[c]]).map(([o,c])=>c===void 0?this.getChildAt(o):t.getChildAt(c)),...n.map(o=>t.getChildAt(o))].filter(Boolean);return new we(...hl(s,a))}}Qb=Symbol.toStringTag;we[Qb]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Jc(Uf),e.get=Jc(Be.getVisitFn(p.Struct)),e.set=vb(Ze.getVisitFn(p.Struct)),e.indexOf=wb(Qc.getVisitFn(p.Struct)),"Table"))(we.prototype);var Xb;let Fe=class ba{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof mt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=re({nullCount:0,type:new se(this.schema.fields),children:this.schema.fields.map(i=>re({type:i.type,nullCount:0}))})]=t,!(this.data instanceof pt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Zp(this.schema,this.data.children);break}case 1:{const[i]=t,{fields:n,children:r,length:s}=Object.keys(i).reduce((c,u,l)=>(c.children[l]=i[u],c.length=Math.max(c.length,i[u].length),c.fields[l]=yt.new({name:u,type:i[u].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new mt(n),o=re({type:new se(n),length:s,children:r,nullCount:0});[this.schema,this.data]=Zp(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Zb(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Be.visit(this.data,t)}set(t,i){return Ze.visit(this.data,t,i)}indexOf(t,i){return Qc.visit(this.data,t,i)}[Symbol.iterator](){return Pf.visit(new ft([this.data]))}toArray(){return[...this]}concat(...t){return new we(this.schema,[this,...t])}slice(t,i){const[n]=new ft([this.data]).slice(t,i).data;return new ba(this.schema,n)}getChild(t){var i;return this.getChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ft([this.data.children[t]]):null}setChild(t,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t),i)}setChildAt(t,i){let n=this.schema,r=this.data;if(t>-1&&t<this.numCols){i||(i=new ft([re({type:new fn,length:this.numRows})]));const s=n.fields.slice(),a=r.children.slice(),o=s[t].clone({type:i.type});[s[t],a[t]]=[o,i.data[0]],n=new mt(s,new Map(this.schema.metadata)),r=re({type:new se(s),children:a})}return new ba(n,r)}select(t){const i=this.schema.select(t),n=new se(i.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new ba(i,re({type:n,length:this.numRows,children:r}))}selectAt(t){const i=this.schema.selectAt(t),n=t.map(s=>this.data.children[s]).filter(Boolean),r=re({type:new se(i.fields),length:this.numRows,children:n});return new ba(i,r)}};Xb=Symbol.toStringTag;Fe[Xb]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Fe.prototype);function Zp(e,t,i=t.reduce((n,r)=>Math.max(n,r.length),0)){var n;const r=[...e.fields],s=[...t],a=(i+63&-64)>>3;for(const[o,c]of e.fields.entries()){const u=t[o];(!u||u.length!==i)&&(r[o]=c.clone({nullable:!0}),s[o]=(n=u==null?void 0:u._changeLengthAndBackfillNullBitmap(i))!==null&&n!==void 0?n:re({type:c.type,length:i,nullCount:i,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),re({type:new se(r),length:i,children:s})]}function Zb(e,t,i=new Map){var n,r;if(((n=e==null?void 0:e.length)!==null&&n!==void 0?n:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,a=e.length;++s<a;){const{type:o}=e[s],c=t[s];for(const u of[c,...((r=c==null?void 0:c.dictionary)===null||r===void 0?void 0:r.data)||[]])Zb(o.children,u==null?void 0:u.children,i);if(K.isDictionary(o)){const{id:u}=o;if(!i.has(u))c!=null&&c.dictionary&&i.set(u,c.dictionary);else if(i.get(u)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return i}class QN extends Fe{constructor(t){const i=t.fields.map(r=>re({type:r.type})),n=re({type:new se(t.fields),nullCount:0,children:i});super(t,n)}}let On=class wi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMessage(t,i){return(i||new wi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,i){return t.setPosition(t.position()+_t),(i||new wi).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kt.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):zt.NONE}header(t){const i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__union(t,this.bb_pos+i):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new Gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,Kt.V1)}static addHeaderType(t,i){t.addFieldInt8(1,i,zt.NONE)}static addHeader(t,i){t.addFieldOffset(2,i,0)}static addBodyLength(t,i){t.addFieldInt64(3,i,BigInt("0"))}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,i){t.finish(i)}static finishSizePrefixedMessageBuffer(t,i){t.finish(i,void 0,!0)}static createMessage(t,i,n,r,s,a){return wi.startMessage(t),wi.addVersion(t,i),wi.addHeaderType(t,n),wi.addHeader(t,r),wi.addBodyLength(t,s),wi.addCustomMetadata(t,a),wi.endMessage(t)}};class XN extends Z{visit(t,i){return t==null||i==null?void 0:super.visit(t,i)}visitNull(t,i){return qp.startNull(i),qp.endNull(i)}visitInt(t,i){return De.startInt(i),De.addBitWidth(i,t.bitWidth),De.addIsSigned(i,t.isSigned),De.endInt(i)}visitFloat(t,i){return Ni.startFloatingPoint(i),Ni.addPrecision(i,t.precision),Ni.endFloatingPoint(i)}visitBinary(t,i){return $p.startBinary(i),$p.endBinary(i)}visitLargeBinary(t,i){return jp.startLargeBinary(i),jp.endLargeBinary(i)}visitBool(t,i){return Vp.startBool(i),Vp.endBool(i)}visitUtf8(t,i){return Yp.startUtf8(i),Yp.endUtf8(i)}visitLargeUtf8(t,i){return zp.startLargeUtf8(i),zp.endLargeUtf8(i)}visitDecimal(t,i){return Yr.startDecimal(i),Yr.addScale(i,t.scale),Yr.addPrecision(i,t.precision),Yr.addBitWidth(i,t.bitWidth),Yr.endDecimal(i)}visitDate(t,i){return jo.startDate(i),jo.addUnit(i,t.unit),jo.endDate(i)}visitTime(t,i){return je.startTime(i),je.addUnit(i,t.unit),je.addBitWidth(i,t.bitWidth),je.endTime(i)}visitTimestamp(t,i){const n=t.timezone&&i.createString(t.timezone)||void 0;return ze.startTimestamp(i),ze.addUnit(i,t.unit),n!==void 0&&ze.addTimezone(i,n),ze.endTimestamp(i)}visitInterval(t,i){return Di.startInterval(i),Di.addUnit(i,t.unit),Di.endInterval(i)}visitDuration(t,i){return zo.startDuration(i),zo.addUnit(i,t.unit),zo.endDuration(i)}visitList(t,i){return Wp.startList(i),Wp.endList(i)}visitStruct(t,i){return mr.startStruct_(i),mr.endStruct_(i)}visitUnion(t,i){ve.startTypeIdsVector(i,t.typeIds.length);const n=ve.createTypeIdsVector(i,t.typeIds);return ve.startUnion(i),ve.addMode(i,t.mode),ve.addTypeIds(i,n),ve.endUnion(i)}visitDictionary(t,i){const n=this.visit(t.indices,i);return an.startDictionaryEncoding(i),an.addId(i,BigInt(t.id)),an.addIsOrdered(i,t.isOrdered),n!==void 0&&an.addIndexType(i,n),an.endDictionaryEncoding(i)}visitFixedSizeBinary(t,i){return Wo.startFixedSizeBinary(i),Wo.addByteWidth(i,t.byteWidth),Wo.endFixedSizeBinary(i)}visitFixedSizeList(t,i){return qo.startFixedSizeList(i),qo.addListSize(i,t.listSize),qo.endFixedSizeList(i)}visitMap(t,i){return Yo.startMap(i),Yo.addKeysSorted(i,t.keysSorted),Yo.endMap(i)}}const fl=new XN;function ZN(e,t=new Map){return new mt(eD(e,t),Go(e.metadata),t)}function tv(e){return new Ce(e.count,ev(e.columns),iv(e.columns))}function tD(e){return new Vi(tv(e.data),e.id,e.isDelta)}function eD(e,t){return(e.fields||[]).filter(Boolean).map(i=>yt.fromJSON(i,t))}function ty(e,t){return(e.children||[]).filter(Boolean).map(i=>yt.fromJSON(i,t))}function ev(e){return(e||[]).reduce((t,i)=>[...t,new Gn(i.count,iD(i.VALIDITY)),...ev(i.children)],[])}function iv(e,t=[]){for(let i=-1,n=(e||[]).length;++i<n;){const r=e[i];r.VALIDITY&&t.push(new Ci(t.length,r.VALIDITY.length)),r.TYPE_ID&&t.push(new Ci(t.length,r.TYPE_ID.length)),r.OFFSET&&t.push(new Ci(t.length,r.OFFSET.length)),r.DATA&&t.push(new Ci(t.length,r.DATA.length)),t=iv(r.children,t)}return t}function iD(e){return(e||[]).reduce((t,i)=>t+ +(i===0),0)}function nD(e,t){let i,n,r,s,a,o;return!t||!(s=e.dictionary)?(a=iy(e,ty(e,t)),r=new yt(e.name,a,e.nullable,Go(e.metadata))):t.has(i=s.id)?(n=(n=s.indexType)?ey(n):new zn,o=new qn(t.get(i),n,i,s.isOrdered),r=new yt(e.name,o,e.nullable,Go(e.metadata))):(n=(n=s.indexType)?ey(n):new zn,t.set(i,a=iy(e,ty(e,t))),o=new qn(a,n,i,s.isOrdered),r=new yt(e.name,o,e.nullable,Go(e.metadata))),r||null}function Go(e=[]){return new Map(e.map(({key:t,value:i})=>[t,i]))}function ey(e){return new fe(e.isSigned,e.bitWidth)}function iy(e,t){const i=e.type.name;switch(i){case"NONE":return new fn;case"null":return new fn;case"binary":return new Ua;case"largebinary":return new zc;case"utf8":return new Ss;case"largeutf8":return new Wc;case"bool":return new Pa;case"list":return new As((t||[])[0]);case"struct":return new se(t||[]);case"struct_":return new se(t||[])}switch(i){case"int":{const n=e.type;return new fe(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=e.type;return new Wn(Qt[n.precision])}case"decimal":{const n=e.type;return new qc(n.scale,n.precision,n.bitWidth)}case"date":{const n=e.type;return new Is(Qe[n.unit])}case"time":{const n=e.type;return new dn(B[n.unit],n.bitWidth)}case"timestamp":{const n=e.type;return new Yc(B[n.unit],n.timezone)}case"interval":{const n=e.type;return new xs(Xe[n.unit])}case"duration":{const n=e.type;return new Hc(B[n.unit])}case"union":{const n=e.type,[r,...s]=(n.mode+"").toLowerCase(),a=r.toUpperCase()+s.join("");return new $a(he[a],n.typeIds||[],t||[])}case"fixedsizebinary":{const n=e.type;return new Gc(n.byteWidth)}case"fixedsizelist":{const n=e.type;return new Bs(n.listSize,(t||[])[0])}case"map":{const n=e.type;return new Va((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${i}"`)}var rD=e_,sD=Pc;class Fi{static fromJSON(t,i){const n=new Fi(0,Kt.V5,i);return n._createHeader=aD(t,i),n}static decode(t){t=new sD(st(t));const i=On.getRootAsMessage(t),n=i.bodyLength(),r=i.version(),s=i.headerType(),a=new Fi(n,r,s);return a._createHeader=oD(i,s),a}static encode(t){const i=new rD;let n=-1;return t.isSchema()?n=mt.encode(i,t.header()):t.isRecordBatch()?n=Ce.encode(i,t.header()):t.isDictionaryBatch()&&(n=Vi.encode(i,t.header())),On.startMessage(i),On.addVersion(i,Kt.V5),On.addHeader(i,n),On.addHeaderType(i,t.headerType),On.addBodyLength(i,BigInt(t.bodyLength)),On.finishMessageBuffer(i,On.endMessage(i)),i.asUint8Array()}static from(t,i=0){if(t instanceof mt)return new Fi(0,Kt.V5,zt.Schema,t);if(t instanceof Ce)return new Fi(i,Kt.V5,zt.RecordBatch,t);if(t instanceof Vi)return new Fi(i,Kt.V5,zt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===zt.Schema}isRecordBatch(){return this.headerType===zt.RecordBatch}isDictionaryBatch(){return this.headerType===zt.DictionaryBatch}constructor(t,i,n,r){this._version=i,this._headerType=n,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=ie(t)}}class Ce{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,i,n){this._nodes=i,this._buffers=n,this._length=ie(t)}}class Vi{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,i,n=!1){this._data=t,this._isDelta=n,this._id=ie(i)}}class Ci{constructor(t,i){this.offset=ie(t),this.length=ie(i)}}class Gn{constructor(t,i){this.length=ie(t),this.nullCount=ie(i)}}function aD(e,t){return()=>{switch(t){case zt.Schema:return mt.fromJSON(e);case zt.RecordBatch:return Ce.fromJSON(e);case zt.DictionaryBatch:return Vi.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${zt[t]}, type: ${t} }`)}}function oD(e,t){return()=>{switch(t){case zt.Schema:return mt.decode(e.header(new Ai),new Map,e.version());case zt.RecordBatch:return Ce.decode(e.header(new tn),e.version());case zt.DictionaryBatch:return Vi.decode(e.header(new Wr),e.version())}throw new Error(`Unrecognized Message type: { name: ${zt[t]}, type: ${t} }`)}}yt.encode=_D;yt.decode=mD;yt.fromJSON=nD;mt.encode=gD;mt.decode=cD;mt.fromJSON=ZN;Ce.encode=bD;Ce.decode=uD;Ce.fromJSON=tv;Vi.encode=vD;Vi.decode=lD;Vi.fromJSON=tD;Gn.encode=wD;Gn.decode=fD;Ci.encode=SD;Ci.decode=hD;function cD(e,t=new Map,i=Kt.V5){const n=yD(e,t);return new mt(n,Ko(e),t,i)}function uD(e,t=Kt.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Ce(e.length(),dD(e),pD(e,t))}function lD(e,t=Kt.V5){return new Vi(Ce.decode(e.data(),t),e.id(),e.isDelta())}function hD(e){return new Ci(e.offset(),e.length())}function fD(e){return new Gn(e.length(),e.nullCount())}function dD(e){const t=[];for(let i,n=-1,r=-1,s=e.nodesLength();++n<s;)(i=e.nodes(n))&&(t[++r]=Gn.decode(i));return t}function pD(e,t){const i=[];for(let n,r=-1,s=-1,a=e.buffersLength();++r<a;)(n=e.buffers(r))&&(t<Kt.V4&&(n.bb_pos+=8*(r+1)),i[++s]=Ci.decode(n));return i}function yD(e,t){const i=[];for(let n,r=-1,s=-1,a=e.fieldsLength();++r<a;)(n=e.fields(r))&&(i[++s]=yt.decode(n,t));return i}function ny(e,t){const i=[];for(let n,r=-1,s=-1,a=e.childrenLength();++r<a;)(n=e.children(r))&&(i[++s]=yt.decode(n,t));return i}function mD(e,t){let i,n,r,s,a,o;return!t||!(o=e.dictionary())?(r=sy(e,ny(e,t)),n=new yt(e.name(),r,e.nullable(),Ko(e))):t.has(i=ie(o.id()))?(s=(s=o.indexType())?ry(s):new zn,a=new qn(t.get(i),s,i,o.isOrdered()),n=new yt(e.name(),a,e.nullable(),Ko(e))):(s=(s=o.indexType())?ry(s):new zn,t.set(i,r=sy(e,ny(e,t))),a=new qn(r,s,i,o.isOrdered()),n=new yt(e.name(),a,e.nullable(),Ko(e))),n||null}function Ko(e){const t=new Map;if(e)for(let i,n,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(i=e.customMetadata(r))&&(n=i.key())!=null&&t.set(n,i.value());return t}function ry(e){return new fe(e.isSigned(),e.bitWidth())}function sy(e,t){const i=e.typeType();switch(i){case At.NONE:return new fn;case At.Null:return new fn;case At.Binary:return new Ua;case At.LargeBinary:return new zc;case At.Utf8:return new Ss;case At.LargeUtf8:return new Wc;case At.Bool:return new Pa;case At.List:return new As((t||[])[0]);case At.Struct_:return new se(t||[])}switch(i){case At.Int:{const n=e.type(new De);return new fe(n.isSigned(),n.bitWidth())}case At.FloatingPoint:{const n=e.type(new Ni);return new Wn(n.precision())}case At.Decimal:{const n=e.type(new Yr);return new qc(n.scale(),n.precision(),n.bitWidth())}case At.Date:{const n=e.type(new jo);return new Is(n.unit())}case At.Time:{const n=e.type(new je);return new dn(n.unit(),n.bitWidth())}case At.Timestamp:{const n=e.type(new ze);return new Yc(n.unit(),n.timezone())}case At.Interval:{const n=e.type(new Di);return new xs(n.unit())}case At.Duration:{const n=e.type(new zo);return new Hc(n.unit())}case At.Union:{const n=e.type(new ve);return new $a(n.mode(),n.typeIdsArray()||[],t||[])}case At.FixedSizeBinary:{const n=e.type(new Wo);return new Gc(n.byteWidth())}case At.FixedSizeList:{const n=e.type(new qo);return new Bs(n.listSize(),(t||[])[0])}case At.Map:{const n=e.type(new Yo);return new Va((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${At[i]}" (${i})`)}function gD(e,t){const i=t.fields.map(s=>yt.encode(e,s));Ai.startFieldsVector(e,i.length);const n=Ai.createFieldsVector(e,i),r=t.metadata&&t.metadata.size>0?Ai.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),c=e.createString(`${a}`);return Gt.startKeyValue(e),Gt.addKey(e,o),Gt.addValue(e,c),Gt.endKeyValue(e)})):-1;return Ai.startSchema(e),Ai.addFields(e,n),Ai.addEndianness(e,ID?ws.Little:ws.Big),r!==-1&&Ai.addCustomMetadata(e,r),Ai.endSchema(e)}function _D(e,t){let i=-1,n=-1,r=-1;const s=t.type;let a=t.typeId;K.isDictionary(s)?(a=s.dictionary.typeId,r=fl.visit(s,e),n=fl.visit(s.dictionary,e)):n=fl.visit(s,e);const o=(s.children||[]).map(l=>yt.encode(e,l)),c=Pe.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?Pe.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const d=e.createString(`${l}`),y=e.createString(`${h}`);return Gt.startKeyValue(e),Gt.addKey(e,d),Gt.addValue(e,y),Gt.endKeyValue(e)})):-1;return t.name&&(i=e.createString(t.name)),Pe.startField(e),Pe.addType(e,n),Pe.addTypeType(e,a),Pe.addChildren(e,c),Pe.addNullable(e,!!t.nullable),i!==-1&&Pe.addName(e,i),r!==-1&&Pe.addDictionary(e,r),u!==-1&&Pe.addCustomMetadata(e,u),Pe.endField(e)}function bD(e,t){const i=t.nodes||[],n=t.buffers||[];tn.startNodesVector(e,i.length);for(const a of i.slice().reverse())Gn.encode(e,a);const r=e.endVector();tn.startBuffersVector(e,n.length);for(const a of n.slice().reverse())Ci.encode(e,a);const s=e.endVector();return tn.startRecordBatch(e),tn.addLength(e,BigInt(t.length)),tn.addNodes(e,r),tn.addBuffers(e,s),tn.endRecordBatch(e)}function vD(e,t){const i=Ce.encode(e,t.data);return Wr.startDictionaryBatch(e),Wr.addId(e,BigInt(t.id)),Wr.addIsDelta(e,t.isDelta),Wr.addData(e,i),Wr.endDictionaryBatch(e)}function wD(e,t){return r_.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function SD(e,t){return n_.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const ID=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),rh="ARROW1",Wf=new Uint8Array(rh.length);for(let e=0;e<rh.length;e+=1)Wf[e]=rh.codePointAt(e);Wf.length;class Ct extends Z{static assemble(...t){const i=r=>r.flatMap(s=>Array.isArray(s)?i(s):s instanceof Fe?s.data.children:s.data),n=new Ct;return n.visitMany(i(t)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ft)return this.visitMany(t.data),this;const{type:i}=t;if(!K.isDictionary(i)){const{length:n}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(K.isUnion(i))this.nodes.push(new Gn(n,0));else{const{nullCount:r}=t;K.isNull(i)||li.call(this,r<=0?new Uint8Array(0):Kc(t.offset,n,t.nullBitmap)),this.nodes.push(new Gn(n,r))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function li(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Ci(this._byteLength,t)),this._byteLength+=t,this}function xD(e){var t;const{type:i,length:n,typeIds:r,valueOffsets:s}=e;if(li.call(this,r),i.mode===he.Sparse)return sh.call(this,e);if(i.mode===he.Dense){if(e.offset<=0)return li.call(this,s),sh.call(this,e);{const a=new Int32Array(n),o=Object.create(null),c=Object.create(null);for(let u,l,h=-1;++h<n;)(u=r[h])!==void 0&&((l=o[u])===void 0&&(l=o[u]=s[h]),a[h]=s[h]-l,c[u]=((t=c[u])!==null&&t!==void 0?t:0)+1);li.call(this,a),this.visitMany(e.children.map((u,l)=>{const h=i.typeIds[l],d=o[h],y=c[h];return u.slice(d,Math.min(n,y))}))}}return this}function AD(e){let t;return e.nullCount>=e.length?li.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?li.call(this,Kc(e.offset,e.length,t)):li.call(this,mb(e.values))}function An(e){return li.call(this,e.values.subarray(0,e.length*e.stride))}function Tu(e){const{length:t,values:i,valueOffsets:n}=e,r=ie(n[0]),s=ie(n[t]),a=Math.min(s-r,i.byteLength-r);return li.call(this,Z0(-r,t+1,n)),li.call(this,i.subarray(r,r+a)),this}function qf(e){const{length:t,valueOffsets:i}=e;if(i){const{[0]:n,[t]:r}=i;return li.call(this,Z0(-n,t+1,i)),this.visit(e.children[0].slice(n,r-n))}return this.visit(e.children[0])}function sh(e){return this.visitMany(e.type.children.map((t,i)=>e.children[i]).filter(Boolean))[0]}Ct.prototype.visitBool=AD;Ct.prototype.visitInt=An;Ct.prototype.visitFloat=An;Ct.prototype.visitUtf8=Tu;Ct.prototype.visitLargeUtf8=Tu;Ct.prototype.visitBinary=Tu;Ct.prototype.visitLargeBinary=Tu;Ct.prototype.visitFixedSizeBinary=An;Ct.prototype.visitDate=An;Ct.prototype.visitTimestamp=An;Ct.prototype.visitTime=An;Ct.prototype.visitDecimal=An;Ct.prototype.visitList=qf;Ct.prototype.visitStruct=sh;Ct.prototype.visitUnion=xD;Ct.prototype.visitInterval=An;Ct.prototype.visitDuration=An;Ct.prototype.visitFixedSizeList=qf;Ct.prototype.visitMap=qf;class nv extends Ob{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,i){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new ll,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Xn(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return wu(t)?t.then(i=>this.writeAll(i)):Su(t)?Kf(this,t):Gf(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,i=null){return t===this._sink||t instanceof ll?this._sink=t:(this._sink=new ll,t&&VO(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&jO(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!i||!nh(i,this._schema))&&(i==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=i,this._writeSchema(i))),this}write(t){let i=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof we&&!(i=t.schema))return this.finish()&&void 0;if(t instanceof Fe&&!(i=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(i&&!nh(i,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,i)}t instanceof Fe?t instanceof QN||this._writeRecordBatch(t):t instanceof we?this.writeAll(t.batches):rf(t)&&this.writeAll(t)}_writeMessage(t,i=8){const n=i-1,r=Fi.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+n&~n,c=o-s-a;return t.headerType===zt.RecordBatch?this._recordBatchBlocks.push(new Yn(o,t.bodyLength,this._position)):t.headerType===zt.DictionaryBatch&&this._dictionaryBlocks.push(new Yn(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(c)}_write(t){if(this._started){const i=st(t);i&&i.byteLength>0&&(this._sink.write(i),this._position+=i.byteLength)}return this}_writeSchema(t){return this._writeMessage(Fi.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Wf)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:i,nodes:n,bufferRegions:r,buffers:s}=Ct.assemble(t),a=new Ce(t.numRows,n,r),o=Fi.from(a,i);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,i,n=!1){this._dictionaryDeltaOffsets.set(i,t.length+(this._dictionaryDeltaOffsets.get(i)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=Ct.assemble(new ft([t])),c=new Ce(t.length,s,a),u=new Vi(c,i,n),l=Fi.from(u,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let i,n,r;for(let s=-1,a=t.length;++s<a;)(i=t[s])&&(n=i.byteLength)>0&&(this._write(i),(r=(n+7&-8)-n)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[i,n]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(i)||0;if(r===0||(n=n==null?void 0:n.slice(r)).length>0)for(const s of n.data)this._writeDictionaryBatch(s,i,r>0),r+=s.length}return this}}class Yf extends nv{static writeAll(t,i){const n=new Yf(i);return wu(t)?t.then(r=>n.writeAll(r)):Su(t)?Kf(n,t):Gf(n,t)}}class Hf extends nv{static writeAll(t){const i=new Hf;return wu(t)?t.then(n=>i.writeAll(n)):Su(t)?Kf(i,t):Gf(i,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const i=ih.encode(new ih(t,Kt.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(i)._write(Int32Array.of(i.byteLength))._writeMagic()}}function Gf(e,t){let i=t;t instanceof we&&(i=t.batches,e.reset(void 0,t.schema));for(const n of i)e.write(n);return e.finish()}function Kf(e,t){var i,n,r,s,a,o,c;return A(this,void 0,void 0,function*(){try{for(i=!0,n=He(t);r=yield n.next(),s=r.done,!s;i=!0){c=r.value,i=!1;const u=c;e.write(u)}}catch(u){a={error:u}}finally{try{!i&&!s&&(o=n.return)&&(yield o.call(n))}finally{if(a)throw a.error}}return e.finish()})}function BD(e,t="stream"){return(t==="stream"?Yf:Hf).writeAll(e).toUint8Array(!0)}function Jf(e,t=1){return(e*t+63&-64||64)/t}function Kn(e,t,i=e.BYTES_PER_ELEMENT){return new e(Jf(t,i))}function Qf(e){return e instanceof pt?e:new pt(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function ED(e){return new ft([Qf(e)])}const Xf=new TextEncoder;function OD(e,t,i){const n=Xf.encode(i);return e.set(n,t),n.length}function TD(e,t,i){return Xf.encodeInto(i,e.subarray(t)).written}const ND=Xf.encodeInto?TD:OD;function ay(e,t){const i=Kn(e.ArrayType,t);return{set(n,r){i[r]=n},data:()=>({type:e,length:t,buffers:[null,i]})}}function DD(e,t){const i=Kn(e.ArrayType,t/8);return{set(n,r){n&&(i[r>>3]|=1<<r%8)},data:()=>({type:e,length:t,buffers:[null,i]})}}function FD(e,t){const i=Kn(e.ArrayType,t);return{set(n,r){i[r]=n/864e5|0},data:()=>({type:e,length:t,buffers:[null,i]})}}function kD(e,t){const i=Kn(e.ArrayType,t<<1);return{set(n,r){const s=r<<1;i[s]=n%4294967296|0,i[s+1]=n/4294967296|0},data:()=>({type:e,length:t,buffers:[null,i]})}}function CD(e){const t=Zc({type:e,nullValues:[null,void 0]});return{set(i,n){t.set(n,i)},data:()=>t.finish().flush()}}function LD(e,t,i){const n=Kn(Int32Array,t+1),r=Kn(Uint8Array,3*i);let s=0;return{set(a,o){s+=ND(r,s,a),n[o+1]=s},data:()=>{const a=Jf(s),o=r.length>a?r.subarray(0,a):r;return{type:e,length:t,buffers:[n,o]}}}}function RD(e,t){const i=[],n=Kn(e.indices.ArrayType,t),r=Object.create(null);let s=-1,a=0;return{set(o,c){const u=String(o);let l=r[u];l===void 0&&(a+=u.length,r[u]=l=++s,i.push(u)),n[c]=l},data:()=>({type:e,length:t,buffers:[null,n],dict:MD(e.dictionary,i,a)})}}function MD(e,t,i){const n=LD(e,t.length,i);return t.forEach(n.set),ED(n.data())}function UD(e,t){const i=Kn(Uint8Array,t/8);let n=0;return{set(r,s){r==null?++n:(e.set(r,s),i[s>>3]|=1<<s%8)},data:()=>{const r=e.data();return n&&(r.nulls=n,r.buffers[2]=i),r}}}function PD(e,t,i=!0){let n;switch(e.typeId){case p.Int:n=e.bitWidth<64?ay:null;break;case p.Float:n=e.precision>0?ay:null;break;case p.Dictionary:n=e.dictionary.typeId===p.Utf8&&e.indices.typeId===p.Int&&e.indices.bitWidth<64?RD:null;break;case p.Bool:n=DD;break;case p.Date:n=e.unit?kD:FD;break}return n==null?CD(e):i?UD(n(e,t),t):n(e,t)}function $D(e,t){const i=e.length,n=Jf(i,e.BYTES_PER_ELEMENT);let r=e;return i!==n&&(r=new e.constructor(n),r.set(e)),Qf({type:t,length:i,buffers:[null,r]})}function rv(e,t,i,n,r=!0){const s=PD(n,e,r);return t(i,s.set),Qf(s.data())}function Zf(e){if(e instanceof K||e==null)return e;switch(e){case p.Binary:return new Ua;case p.Bool:return new Pa;case p.DateDay:return new nT;case p.DateMillisecond:case p.Date:return new rT;case p.Dictionary:return new qn(new Ss,new zn);case p.Float16:return new O_;case p.Float32:return new pf;case p.Float64:case p.Float:return new yf;case p.Int8:return new of;case p.Int16:return new cf;case p.Int32:case p.Int:return new zn;case p.Int64:return new uf;case p.IntervalDayTime:return new uT;case p.Interval:case p.IntervalYearMonth:return new lT;case p.Null:return new fn;case p.TimeMicrosecond:return new oT;case p.TimeMillisecond:case p.Time:return new aT;case p.TimeNanosecond:return new cT;case p.TimeSecond:return new sT;case p.Uint8:return new lf;case p.Uint16:return new hf;case p.Uint32:return new ff;case p.Uint64:return new df;case p.Utf8:return new Ss;default:Q(`Unsupported type code: ${Pi(e)}. Use a data type constructor instead?`)}}function VD(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function sv(e,t){const i=ah();return e(t,i.add),i}function ah(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const i=typeof t;if(i==="string")++e.strings;else if(i==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(i==="boolean")++e.bools;else if(i==="object")if(hn(t))++e.dates,VD(t)&&++e.utcdays;else if(yr(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const n=e.array_prof||(e.array_prof=ah());t.forEach(n.add)}else{++e.structs;const n=e.struct_prof||(e.struct_prof={});for(const r in t)(n[r]||(n[r]=ah())).add(t[r])}else i==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Zf(jD(e))}};return e}function jD(e){const t=e.count-e.nulls;if(t===0)return p.Null;if(e.ints===t){const i=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?i>=2**31?p.Float64:i<128?p.Int8:i<32768?p.Int16:p.Int32:i>=2**32?p.Float64:i<256?p.Uint8:i<65536?p.Uint16:p.Uint32}else{if(e.nums===t)return p.Float64;if(e.bigints===t){const i=-e.min>e.max?-e.min-1n:e.max;return e.min<0?i<2**63?p.Int64:Q(`BigInt exceeds 64 bits: ${i}`):e.max<2**64?p.Uint64:Q(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return p.Bool;if(e.utcdays===t)return p.DateDay;if(e.dates===t)return p.DateMillisecond;if(e.arrays===t){const i=yt.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Bs(e.minlen,i):new As(i)}else if(e.structs===t){const i=e.struct_prof;return new se(Object.keys(i).map(n=>yt.new(n,i[n].type(),!0)))}else{if(e.strings>0)return p.Dictionary;Q("Type inference failure")}}}}function zD(e,t,i,n,r,s=!0){if(r=Zf(r),!r){const a=sv(n,t);s=a.nulls>0,r=a.type()}return rv(i,n,t,r,s)}function WD(e,t,i,n,r,s=!0){r=Zf(r);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),c=qD(a);if(c&&o&&oy(c.type,r))return c;const u=a.data;if(Za(u)){const l=YD(u);if(o&&l&&oy(l,r))return $D(u,l);r=r||l,s=!1}if(!r){const l=sv(n,a);s=l.nulls>0,r=l.type()}return rv(i,n,a,r,s)}function qD(e){return e instanceof ft?e:e.vector instanceof ft?e.vector:null}function YD(e){const i={Float32Array:pf,Float64Array:yf,Int8Array:of,Int16Array:cf,Int32Array:zn,Uint8Array:lf,Uint16Array:hf,Uint32Array:ff,BigInt64Array:uf,BigUint64Array:df}[e.constructor.name];return i?new i:null}function oy(e,t){return!e||!t?!0:e.compareTo(t)}function HD(e,t,i){const n=Math.min(e.length,i+t);return(r,s)=>{for(let a=i;a<n;++a)s(e[a][r],a)}}function GD(e,t,i){const n=i===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(r,s)=>{let a=-1;n&&yr(r.data)?r.data.forEach(s):e.scan(o=>s(r.get(o),++a),!0,t,i)}}const KD=()=>Q("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function JD(){try{return we}catch{KD()}}function av(e,t={}){const{types:i={}}=t,{dataFrom:n,names:r,nrows:s,scan:a}=QD(e,t),o={};r.forEach(u=>{const l=n(e,u,s,a,i[u]);l.length!==s&&Q("Column length mismatch"),o[u]=l});const c=JD();return new c(o)}function QD(e,t){const{columns:i,limit:n=1/0,offset:r=0}=t,s=Ot(i)?i(e):ht(i)?i:null;if(ht(e))return{dataFrom:zD,names:s||Object.keys(e[0]),nrows:Math.min(n,e.length-r),scan:HD(e,n,r)};if(XD(e))return{dataFrom:WD,names:s||e.columnNames(),nrows:Math.min(n,e.numRows()-r),scan:GD(e,n,r)};Q("Unsupported input data type")}function XD(e){return e&&Ot(e.reify)}function ZD(e,t={}){const{format:i,...n}=t,r=i||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return BD(av(e,n),i)}function tF(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function eF(e,t={}){let i=0,n=0,r=0,s=0,a=0,o=0;return e(c=>{if(++i,c==null){++n;return}const u=typeof c;if(u==="object"&&hn(c))++r,tF(c)&&++s;else if(u==="number"&&(++a,c===c&&(c|0)!==c)){const l=c+"",h=l.indexOf(".");if(h>=0){const d=l.indexOf("e"),y=d>0?d:l.length;o=Math.max(o,y-h-1)}}}),{align:(n+a+r)/i>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,t.maxdigits||6)}}}function Nu(e,t){return Ot(t)?t(e):t||e.columnNames()}function ov(e,t,i){const n=i.format||{},r=i.align||{},s={},a={};return t.forEach(o=>{const c=eF(iF(e,o),i);a[o]=r[o]||c.align,s[o]=n[o]||c.format}),{align:a,format:s}}function iF(e,t){const i=e.column(t);return n=>e.scan(r=>n(i.get(r)))}function td(e,t,i=100,n,r){const s=e.data(),a=t.length;e.scan(o=>{r.row(o);for(let c=0;c<a;++c){const u=t[c];r.cell(s[t[c]].get(o),u,c)}},!0,i,n)}function nF(e,t={}){const i=Nu(e,t.columns),n=t.format||{},r=t.delimiter||",",s=new RegExp(`["${r}
\r]`),a=u=>u==null?"":hn(u)?_u(u,!0):s.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,o=i.map(a);let c="";return td(e,i,t.limit||1/0,t.offset,{row(){c+=o.join(r)+`
`},cell(u,l,h){o[h]=a(n[l]?n[l](u):u)}}),c+o.join(r)}function cv(e,t={}){if(Ot(t))return t(e)+"";const i=typeof e;if(i==="object"){if(hn(e))return t.utc?_u(e):A0(e);{const n=JSON.stringify(e,(s,a)=>Za(a)?Array.from(a):a),r=t.maxlen||30;return n.length>r?n.slice(0,28)+""+(n[0]==="["?"]":"}"):n}}else if(i==="number"){const n=t.digits||0;let r;return e!==0&&((r=Math.abs(e))>=1e18||r<Math.pow(10,-n))?e.toExponential(n):e.toFixed(n)}else return e+""}function Du(e,t,i={}){for(const n in e)i[n]=t(e[n],n);return i}function rF(e,t={}){const i=Nu(e,t.columns),{align:n,format:r}=ov(e,i,t),s=sF(t),a=t.null,o=_=>_==="c"?"center":_==="r"?"right":"left",c=_=>_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(_,b)=>c(cv(_,b)),l=a?(_,b)=>_==null?a(_):u(_,b):u;let h=-1,d=-1;const y=(_,b,w)=>{const G=w?o(n[b]):"",dt=s[_]&&s[_](b,d,h)||"",L=(G?`text-align: ${G};`+(dt?" ":""):"")+dt;return`<${_}${L?` style="${L}"`:""}>`};let g=y("table")+y("thead")+y("tr",h)+i.map(_=>`${y("th",_,1)}${_}</th>`).join("")+"</tr></thead>"+y("tbody");return td(e,i,t.limit,t.offset,{row(_){h=_,g+=(++d?"</tr>":"")+y("tr")},cell(_,b){g+=y("td",b,1)+l(_,r[b])+"</td>"}}),g+"</tr></tbody></table>"}function sF(e){return Du(e.style,t=>Ot(t)?t:()=>t)}function aF(e,t=!0,i=!1){return e===void 0||e?t:i}const oF=e=>hn(e)?_u(e,!0):e;function cF(e,t={}){const i=aF(t.schema),n=t.format||{},r=Nu(e,t.columns);let s="{";return i&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,o)=>{s+=(o?",":"")+JSON.stringify(a)+":[";const c=e.column(a),u=n[a]||oF;let l=-1;e.scan(h=>{const d=c.get(h);s+=(++l?",":"")+JSON.stringify(u(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(i?"}":"")}function uF(e,t={}){const i=Nu(e,t.columns),{align:n,format:r}=ov(e,i,t),s=c=>c==="c"?":-:":c==="r"?"-:":":-",a=c=>c.replace(/\|/g,"\\|");let o="|"+i.map(a).join("|")+`|
|`+i.map(c=>s(n[c])).join("|")+"|";return td(e,i,t.limit,t.offset,{row(){o+=`
|`},cell(c,u){o+=a(cv(c,r[u]))+"|"}}),o+`
`}function uv(e,t){for(const[i,n]of bu(t))e.set(i,n);return e}function lF(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function pn(e,t,i=new Map){return t=le(t)?e.columnName(t):t,ne(t)?i.set(t,t):ht(t)?t.forEach(n=>pn(e,n,i)):Ot(t)?pn(e,t(e),i):ce(t)?uv(i,t):Q(`Invalid column selection: ${Pi(t)}`),i}function Fu(e,t){return e.toObject=t,e}function lv(e){return ht(e)?e.map(lv):e&&e.toObject?e.toObject():e}function Es(){return Fu(e=>e.columnNames(),()=>({all:[]}))}function hv(...e){return e=e.flat(),Fu(t=>{const i=pn(t,e);return t.columnNames(n=>!i.has(n))},()=>({not:lv(e)}))}function hF(e,t){return Fu(i=>{let n=le(e)?e:i.columnIndex(e),r=le(t)?t:i.columnIndex(t);if(r<n){const s=r;r=n,n=s}return i.columnNames().slice(n,r+1)},()=>({range:[e,t]}))}function fF(e){return ne(e)&&(e=RegExp(lF(e))),Fu(t=>t.columnNames(i=>e.test(i)),()=>({matches:[e.source,e.flags]}))}function dF(e){return Za(e.data)?e.data.constructor:Array}class on extends $E{static from(t,i){return new on(zE(t,i),i)}static new(t,i){if(t instanceof on)return t;const n={},r=[];for(const[s,a]of bu(t))n[s]=a,r.push(s);return new on(n,i||r)}constructor(t,i,n,r,s,a){Du(t,jE,t),i=i||Object.keys(t);const o=i.length?t[i[0]].length:0;super(i,o,t,n,r,s,a)}create({data:t,names:i,filter:n,groups:r,order:s}){const a=n!==void 0?n:this.mask();return new on(t||this._data,i||(t?null:this._names),a,r!==void 0?r:_O(this._group,n&&a),s!==void 0?s:this._order,this._params)}assign(...t){const i=this.numRows(),n=this.reify(),r=Le(n).groupby(n.groups());return t.forEach(s=>{s=on.new(s),s.numRows()!==i&&Q("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,i=Array){const n=this.column(t),r=new i(this.numRows());let s=-1;return this.scan(a=>r[++s]=n.get(a),!0),r}get(t,i=0){const n=this.column(t);return this.isFiltered()||this.isOrdered()?n.get(this.indices()[i]):n.get(i)}getter(t){const i=this.column(t),n=this.isFiltered()||this.isOrdered()?this.indices():null;return n?r=>i.get(n[r]):i?r=>i.get(r):Q(`Unrecognized column: ${t}`)}object(t=0){return cy(this)(t)}objects(t={}){const{grouped:i,limit:n,offset:r}=t,s=pn(this,t.columns||Es()),a=J0(s),o=[];if(this.scan((c,u)=>o.push(a(c,u)),!0,n,r),i&&this.isGrouped()){const c=[];return this.scan(u=>c.push(u),!0,n,r),vO(this,c,o,i)}return o}*[Symbol.iterator](){const t=cy(this),i=this.numRows();for(let n=0;n<i;++n)yield t(n)}reify(t){const i=t?t.length:this.numRows(),n=this._names;let r,s;if(!t&&!this.isOrdered())if(this.isFiltered())i===this.totalRows()&&(r=this.data());else return this;if(!r){const a=t?c=>t.forEach(c):c=>this.scan(c,!0),o=n.length;r={};for(let c=0;c<o;++c){const u=n[c],l=this.column(u),h=r[u]=new(dF(l))(i);let d=-1;a(y=>h[++d]=l.get(y))}this.isGrouped()&&(s=bO(this.groups(),a,!!t,i))}return this.create({data:r,names:n,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((i,n)=>n(i),this)}toArrow(t){return av(this,t)}toArrowBuffer(t){return ZD(this,t)}toCSV(t){return nF(this,t)}toHTML(t){return rF(this,t)}toJSON(t){return cF(this,t)}toMarkdown(t){return uF(this,t)}}function cy(e){let t=e._builder;if(!t){const i=J0(e.columnNames()),n=e.data();if(e.isOrdered()||e.isFiltered()){const r=e.indices();t=s=>i(r[s],n)}else t=r=>i(r,n);e._builder=t}return t}class pF{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function at(e,t,i,n){const r=i[e.type]||i.Default;if(r&&r(e,t,n)===!1)return;const s=yF[e.type];s&&s(e,t,i)}const wo=(e,t,i)=>{at(e.argument,t,i,e)},dl=(e,t,i)=>{at(e.left,t,i,e),at(e.right,t,i,e)},uy=(e,t,i)=>{at(e.test,t,i,e),at(e.consequent,t,i,e),e.alternate&&at(e.alternate,t,i,e)},pl=(e,t,i)=>{Bi(e.params,t,i,e),at(e.body,t,i,e)},ly=(e,t,i)=>{at(e.callee,t,i,e),Bi(e.arguments,t,i,e)},Bi=(e,t,i,n)=>{e.forEach(r=>at(r,t,i,n))},yF={TemplateLiteral:(e,t,i)=>{Bi(e.expressions,t,i,e),Bi(e.quasis,t,i,e)},MemberExpression:(e,t,i)=>{at(e.object,t,i,e),at(e.property,t,i,e)},CallExpression:ly,NewExpression:ly,ArrayExpression:(e,t,i)=>{Bi(e.elements,t,i,e)},AssignmentExpression:dl,AwaitExpression:wo,BinaryExpression:dl,LogicalExpression:dl,UnaryExpression:wo,UpdateExpression:wo,ConditionalExpression:uy,ObjectExpression:(e,t,i)=>{Bi(e.properties,t,i,e)},Property:(e,t,i)=>{at(e.key,t,i,e),at(e.value,t,i,e)},ArrowFunctionExpression:pl,FunctionExpression:pl,FunctionDeclaration:pl,VariableDeclaration:(e,t,i)=>{Bi(e.declarations,t,i,e)},VariableDeclarator:(e,t,i)=>{at(e.id,t,i,e),at(e.init,t,i,e)},SpreadElement:(e,t,i)=>{at(e.argument,t,i,e)},BlockStatement:(e,t,i)=>{Bi(e.body,t,i,e)},ExpressionStatement:(e,t,i)=>{at(e.expression,t,i,e)},IfStatement:uy,ForStatement:(e,t,i)=>{at(e.init,t,i,e),at(e.test,t,i,e),at(e.update,t,i,e),at(e.body,t,i,e)},WhileStatement:(e,t,i)=>{at(e.test,t,i,e),at(e.body,t,i,e)},DoWhileStatement:(e,t,i)=>{at(e.body,t,i,e),at(e.test,t,i,e)},SwitchStatement:(e,t,i)=>{at(e.discriminant,t,i,e),Bi(e.cases,t,i,e)},SwitchCase:(e,t,i)=>{e.test&&at(e.test,t,i,e),Bi(e.consequent,t,i,e)},ReturnStatement:wo,Program:(e,t,i)=>{at(e.body[0],t,i,e)}};function fv(e){delete e.start,delete e.end,delete e.optional}function hy(e){fv(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function mF(e){return at(e,null,{Column:hy,Constant:hy,Default:fv}),e}function Jt(e,t){return t&&t.type===e}function gF(e){return Jt(IO,e)||Jt(SO,e)}function _F(e){return Ot(e)?e:()=>e}const bF="Escaped functions are not valid as rollup or pivot values.";function vF(e,t,i){e.aggronly&&Q(bF);const n="(row,data)=>fn("+K0(e.table.columnNames())+",$)";return{escape:nf.escape(n,_F(t.expr),i)}}var wF=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],dv=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],SF="-----------------------------------------------------------------------------------------------------------------------------------------------------",pv="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",yl={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ml="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",IF={5:ml,"5module":ml+" export import",6:ml+" const class extends export import super"},xF=/^in(stanceof)?$/,AF=new RegExp("["+pv+"]"),BF=new RegExp("["+pv+SF+"]");function oh(e,t){for(var i=65536,n=0;n<t.length;n+=2){if(i+=t[n],i>e)return!1;if(i+=t[n+1],i>=e)return!0}return!1}function yn(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&AF.test(String.fromCharCode(e)):t===!1?!1:oh(e,dv)}function Os(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&BF.test(String.fromCharCode(e)):t===!1?!1:oh(e,dv)||oh(e,wF)}var ct=function(t,i){i===void 0&&(i={}),this.label=t,this.keyword=i.keyword,this.beforeExpr=!!i.beforeExpr,this.startsExpr=!!i.startsExpr,this.isLoop=!!i.isLoop,this.isAssign=!!i.isAssign,this.prefix=!!i.prefix,this.postfix=!!i.postfix,this.binop=i.binop||null,this.updateContext=null};function Re(e,t){return new ct(e,{beforeExpr:!0,binop:t})}var Me={beforeExpr:!0},me={startsExpr:!0},ed={};function nt(e,t){return t===void 0&&(t={}),t.keyword=e,ed[e]=new ct(e,t)}var f={num:new ct("num",me),regexp:new ct("regexp",me),string:new ct("string",me),name:new ct("name",me),privateId:new ct("privateId",me),eof:new ct("eof"),bracketL:new ct("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ct("]"),braceL:new ct("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ct("}"),parenL:new ct("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ct(")"),comma:new ct(",",Me),semi:new ct(";",Me),colon:new ct(":",Me),dot:new ct("."),question:new ct("?",Me),questionDot:new ct("?."),arrow:new ct("=>",Me),template:new ct("template"),invalidTemplate:new ct("invalidTemplate"),ellipsis:new ct("...",Me),backQuote:new ct("`",me),dollarBraceL:new ct("${",{beforeExpr:!0,startsExpr:!0}),eq:new ct("=",{beforeExpr:!0,isAssign:!0}),assign:new ct("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ct("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ct("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Re("||",1),logicalAND:Re("&&",2),bitwiseOR:Re("|",3),bitwiseXOR:Re("^",4),bitwiseAND:Re("&",5),equality:Re("==/!=/===/!==",6),relational:Re("</>/<=/>=",7),bitShift:Re("<</>>/>>>",8),plusMin:new ct("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Re("%",10),star:Re("*",10),slash:Re("/",10),starstar:new ct("**",{beforeExpr:!0}),coalesce:Re("??",1),_break:nt("break"),_case:nt("case",Me),_catch:nt("catch"),_continue:nt("continue"),_debugger:nt("debugger"),_default:nt("default",Me),_do:nt("do",{isLoop:!0,beforeExpr:!0}),_else:nt("else",Me),_finally:nt("finally"),_for:nt("for",{isLoop:!0}),_function:nt("function",me),_if:nt("if"),_return:nt("return",Me),_switch:nt("switch"),_throw:nt("throw",Me),_try:nt("try"),_var:nt("var"),_const:nt("const"),_while:nt("while",{isLoop:!0}),_with:nt("with"),_new:nt("new",{beforeExpr:!0,startsExpr:!0}),_this:nt("this",me),_super:nt("super",me),_class:nt("class",me),_extends:nt("extends",Me),_export:nt("export"),_import:nt("import",me),_null:nt("null",me),_true:nt("true",me),_false:nt("false",me),_in:nt("in",{beforeExpr:!0,binop:7}),_instanceof:nt("instanceof",{beforeExpr:!0,binop:7}),_typeof:nt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:nt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:nt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ti=/\r\n?|\n|\u2028|\u2029/,EF=new RegExp(ti.source,"g");function Ps(e){return e===10||e===13||e===8232||e===8233}function yv(e,t,i){i===void 0&&(i=e.length);for(var n=t;n<i;n++){var r=e.charCodeAt(n);if(Ps(r))return n<i-1&&r===13&&e.charCodeAt(n+1)===10?n+2:n+1}return-1}var mv=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,We=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,gv=Object.prototype,OF=gv.hasOwnProperty,TF=gv.toString,$s=Object.hasOwn||function(e,t){return OF.call(e,t)},fy=Array.isArray||function(e){return TF.call(e)==="[object Array]"},dy=Object.create(null);function Mn(e){return dy[e]||(dy[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function mn(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var NF=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ja=function(t,i){this.line=t,this.column=i};ja.prototype.offset=function(t){return new ja(this.line,this.column+t)};var ku=function(t,i,n){this.start=i,this.end=n,t.sourceFile!==null&&(this.source=t.sourceFile)};function _v(e,t){for(var i=1,n=0;;){var r=yv(e,n,t);if(r<0)return new ja(i,t-n);++i,n=r}}var ch={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},py=!1;function DF(e){var t={};for(var i in ch)t[i]=e&&$s(e,i)?e[i]:ch[i];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!py&&typeof console=="object"&&console.warn&&(py=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),fy(t.onToken)){var n=t.onToken;t.onToken=function(r){return n.push(r)}}return fy(t.onComment)&&(t.onComment=FF(t,t.onComment)),t}function FF(e,t){return function(i,n,r,s,a,o){var c={type:i?"Block":"Line",value:n,start:r,end:s};e.locations&&(c.loc=new ku(this,a,o)),e.ranges&&(c.range=[r,s]),t.push(c)}}var za=1,Vs=2,id=4,bv=8,nd=16,vv=32,Cu=64,wv=128,Br=256,ao=512,Lu=za|Vs|Br;function rd(e,t){return Vs|(e?id:0)|(t?bv:0)}var tu=0,sd=1,Bn=2,Sv=3,Iv=4,xv=5,Xt=function(t,i,n){this.options=t=DF(t),this.sourceFile=t.sourceFile,this.keywords=Mn(IF[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=yl[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=Mn(r);var s=(r?r+" ":"")+yl.strict;this.reservedWordsStrict=Mn(s),this.reservedWordsStrictBind=Mn(s+" "+yl.strictBind),this.input=String(i),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ti).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=f.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(za),this.regexpState=null,this.privateNameStack=[]},Wi={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Xt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Wi.inFunction.get=function(){return(this.currentVarScope().flags&Vs)>0};Wi.inGenerator.get=function(){return(this.currentVarScope().flags&bv)>0};Wi.inAsync.get=function(){return(this.currentVarScope().flags&id)>0};Wi.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],i=t.flags;if(i&(Br|ao))return!1;if(i&Vs)return(i&id)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Wi.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags;return(t&Cu)>0||this.options.allowSuperOutsideMethod};Wi.allowDirectSuper.get=function(){return(this.currentThisScope().flags&wv)>0};Wi.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Wi.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],i=t.flags;if(i&(Br|ao)||i&Vs&&!(i&nd))return!0}return!1};Wi.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Br)>0};Xt.extend=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n};Xt.parse=function(t,i){return new this(i,t).parse()};Xt.parseExpressionAt=function(t,i,n){var r=new this(n,t,i);return r.nextToken(),r.parseExpression()};Xt.tokenizer=function(t,i){return new this(i,t)};Object.defineProperties(Xt.prototype,Wi);var ye=Xt.prototype,kF=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;ye.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){We.lastIndex=e,e+=We.exec(this.input)[0].length;var t=kF.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){We.lastIndex=e+t[0].length;var i=We.exec(this.input),n=i.index+i[0].length,r=this.input.charAt(n);return r===";"||r==="}"||ti.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(n+1)==="=")}e+=t[0].length,We.lastIndex=e,e+=We.exec(this.input)[0].length,this.input[e]===";"&&e++}};ye.eat=function(e){return this.type===e?(this.next(),!0):!1};ye.isContextual=function(e){return this.type===f.name&&this.value===e&&!this.containsEsc};ye.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ye.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ye.canInsertSemicolon=function(){return this.type===f.eof||this.type===f.braceR||ti.test(this.input.slice(this.lastTokEnd,this.start))};ye.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ye.semicolon=function(){!this.eat(f.semi)&&!this.insertSemicolon()&&this.unexpected()};ye.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ye.expect=function(e){this.eat(e)||this.unexpected()};ye.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Ru=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ye.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var i=t?e.parenthesizedAssign:e.parenthesizedBind;i>-1&&this.raiseRecoverable(i,t?"Assigning to rvalue":"Parenthesized pattern")}};ye.checkExpressionErrors=function(e,t){if(!e)return!1;var i=e.shorthandAssign,n=e.doubleProto;if(!t)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")};ye.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ye.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var I=Xt.prototype;I.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==f.eof;){var i=this.parseStatement(null,!0,t);e.body.push(i)}if(this.inModule)for(var n=0,r=Object.keys(this.undefinedExports);n<r.length;n+=1){var s=r[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ad={kind:"loop"},CF={kind:"switch"};I.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;We.lastIndex=this.pos;var t=We.exec(this.input),i=this.pos+t[0].length,n=this.input.charCodeAt(i);if(n===91||n===92)return!0;if(e)return!1;if(n===123||n>55295&&n<56320)return!0;if(yn(n,!0)){for(var r=i+1;Os(n=this.input.charCodeAt(r),!0);)++r;if(n===92||n>55295&&n<56320)return!0;var s=this.input.slice(i,r);if(!xF.test(s))return!0}return!1};I.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;We.lastIndex=this.pos;var e=We.exec(this.input),t=this.pos+e[0].length,i;return!ti.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Os(i=this.input.charCodeAt(t+8))||i>55295&&i<56320))};I.parseStatement=function(e,t,i){var n=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(n=f._var,s="let"),n){case f._break:case f._continue:return this.parseBreakContinueStatement(r,n.keyword);case f._debugger:return this.parseDebuggerStatement(r);case f._do:return this.parseDoStatement(r);case f._for:return this.parseForStatement(r);case f._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case f._class:return e&&this.unexpected(),this.parseClass(r,!0);case f._if:return this.parseIfStatement(r);case f._return:return this.parseReturnStatement(r);case f._switch:return this.parseSwitchStatement(r);case f._throw:return this.parseThrowStatement(r);case f._try:return this.parseTryStatement(r);case f._const:case f._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case f._while:return this.parseWhileStatement(r);case f._with:return this.parseWithStatement(r);case f.braceL:return this.parseBlock(!0,r);case f.semi:return this.parseEmptyStatement(r);case f._export:case f._import:if(this.options.ecmaVersion>10&&n===f._import){We.lastIndex=this.pos;var a=We.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(c===40||c===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===f._import?this.parseImport(r):this.parseExport(r,i);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var u=this.value,l=this.parseExpression();return n===f.name&&l.type==="Identifier"&&this.eat(f.colon)?this.parseLabeledStatement(r,u,l,e):this.parseExpressionStatement(r,l)}};I.parseBreakContinueStatement=function(e,t){var i=t==="break";this.next(),this.eat(f.semi)||this.insertSemicolon()?e.label=null:this.type!==f.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var r=this.labels[n];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(i||r.kind==="loop")||e.label&&i))break}return n===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,i?"BreakStatement":"ContinueStatement")};I.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};I.parseDoStatement=function(e){return this.next(),this.labels.push(ad),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(f._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(f.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};I.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ad),this.enterScope(0),this.expect(f.parenL),this.type===f.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var i=this.isLet();if(this.type===f._var||this.type===f._const||i){var n=this.startNode(),r=i?"let":this.value;return this.next(),this.parseVar(n,!0,r),this.finishNode(n,"VariableDeclaration"),(this.type===f._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&n.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===f._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,n)):(t>-1&&this.unexpected(t),this.parseFor(e,n))}var s=this.isContextual("let"),a=!1,o=this.containsEsc,c=new Ru,u=this.start,l=t>-1?this.parseExprSubscripts(c,"await"):this.parseExpression(!0,c);return this.type===f._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===f._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(l.start===u&&!o&&l.type==="Identifier"&&l.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,c),this.checkLValPattern(l),this.parseForIn(e,l)):(this.checkExpressionErrors(c,!0),t>-1&&this.unexpected(t),this.parseFor(e,l))};I.parseFunctionStatement=function(e,t,i){return this.next(),this.parseFunction(e,Ia|(i?0:uh),!1,t)};I.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(f._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};I.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(f.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};I.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(f.braceL),this.labels.push(CF),this.enterScope(0);for(var t,i=!1;this.type!==f.braceR;)if(this.type===f._case||this.type===f._default){var n=this.type===f._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),n?t.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,t.test=null),this.expect(f.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};I.parseThrowStatement=function(e){return this.next(),ti.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var LF=[];I.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?vv:0),this.checkLValPattern(e,t?Iv:Bn),this.expect(f.parenR),e};I.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===f._catch){var t=this.startNode();this.next(),this.eat(f.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(f._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};I.parseVarStatement=function(e,t,i){return this.next(),this.parseVar(e,!1,t,i),this.semicolon(),this.finishNode(e,"VariableDeclaration")};I.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ad),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};I.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};I.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};I.parseLabeledStatement=function(e,t,i,n){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===t&&this.raise(i.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===f._switch?"switch":null,c=this.labels.length-1;c>=0;c--){var u=this.labels[c];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(n?n.indexOf("label")===-1?n+"label":n:"label"),this.labels.pop(),e.label=i,this.finishNode(e,"LabeledStatement")};I.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};I.parseBlock=function(e,t,i){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(f.braceL),e&&this.enterScope(0);this.type!==f.braceR;){var n=this.parseStatement(null);t.body.push(n)}return i&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};I.parseFor=function(e,t){return e.init=t,this.expect(f.semi),e.test=this.type===f.semi?null:this.parseExpression(),this.expect(f.semi),e.update=this.type===f.parenR?null:this.parseExpression(),this.expect(f.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};I.parseForIn=function(e,t){var i=this.type===f._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!i||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(f.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,i?"ForInStatement":"ForOfStatement")};I.parseVar=function(e,t,i,n){for(e.declarations=[],e.kind=i;;){var r=this.startNode();if(this.parseVarId(r,i),this.eat(f.eq)?r.init=this.parseMaybeAssign(t):!n&&i==="const"&&!(this.type===f._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!n&&r.id.type!=="Identifier"&&!(t&&(this.type===f._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):r.init=null,e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(f.comma))break}return e};I.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?sd:Bn,!1)};var Ia=1,uh=2,Av=4;I.parseFunction=function(e,t,i,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===f.star&&t&uh&&this.unexpected(),e.generator=this.eat(f.star)),this.options.ecmaVersion>=8&&(e.async=!!n),t&Ia&&(e.id=t&Av&&this.type!==f.name?null:this.parseIdent(),e.id&&!(t&uh)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?sd:Bn:Sv));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(rd(e.async,e.generator)),t&Ia||(e.id=this.type===f.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,i,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&Ia?"FunctionDeclaration":"FunctionExpression")};I.parseFunctionParams=function(e){this.expect(f.parenL),e.params=this.parseBindingList(f.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};I.parseClass=function(e,t){this.next();var i=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var n=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(f.braceL);this.type!==f.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&RF(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};I.parseClassElement=function(e){if(this.eat(f.semi))return null;var t=this.options.ecmaVersion,i=this.startNode(),n="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(f.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===f.star?o=!0:n="static"}if(i.static=o,!n&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===f.star)&&!this.canInsertSemicolon()?s=!0:n="async"),!n&&(t>=9||!s)&&this.eat(f.star)&&(r=!0),!n&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:n=c)}if(n?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=n,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),t<13||this.type===f.parenL||a!=="method"||r||s){var u=!i.static&&eu(i,"constructor"),l=u&&e;u&&a!=="method"&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=u?"constructor":a,this.parseClassMethod(i,r,s,l)}else this.parseClassField(i);return i};I.isClassElementNameStart=function(){return this.type===f.name||this.type===f.privateId||this.type===f.num||this.type===f.string||this.type===f.bracketL||this.type.keyword};I.parseClassElementName=function(e){this.type===f.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};I.parseClassMethod=function(e,t,i,n){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),i&&this.raise(r.start,"Constructor can't be an async method")):e.static&&eu(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,i,n);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};I.parseClassField=function(e){return eu(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&eu(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(f.eq)?(this.enterScope(ao|Cu),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")};I.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Br|Cu);this.type!==f.braceR;){var i=this.parseStatement(null);e.body.push(i)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};I.parseClassId=function(e,t){this.type===f.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Bn,!1)):(t===!0&&this.unexpected(),e.id=null)};I.parseClassSuper=function(e){e.superClass=this.eat(f._extends)?this.parseExprSubscripts(null,!1):null};I.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};I.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,i=e.used;if(this.options.checkPrivateFields)for(var n=this.privateNameStack.length,r=n===0?null:this.privateNameStack[n-1],s=0;s<i.length;++s){var a=i[s];$s(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function RF(e,t){var i=t.key.name,n=e[i],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),n==="iget"&&r==="iset"||n==="iset"&&r==="iget"||n==="sget"&&r==="sset"||n==="sset"&&r==="sget"?(e[i]="true",!1):n?!0:(e[i]=r,!1)}function eu(e,t){var i=e.computed,n=e.key;return!i&&(n.type==="Identifier"&&n.name===t||n.type==="Literal"&&n.value===t)}I.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==f.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};I.parseExport=function(e,t){if(this.next(),this.eat(f.star))return this.parseExportAllDeclaration(e,t);if(this.eat(f._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==f.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var i=0,n=e.specifiers;i<n.length;i+=1){var r=n[i];this.checkUnreserved(r.local),this.checkLocalExport(r.local),r.local.type==="Literal"&&this.raise(r.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};I.parseExportDeclaration=function(e){return this.parseStatement(null)};I.parseExportDefaultDeclaration=function(){var e;if(this.type===f._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Ia|Av,!1,e)}else if(this.type===f._class){var i=this.startNode();return this.parseClass(i,"nullableID")}else{var n=this.parseMaybeAssign();return this.semicolon(),n}};I.checkExport=function(e,t,i){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),$s(e,t)&&this.raiseRecoverable(i,"Duplicate export '"+t+"'"),e[t]=!0)};I.checkPatternExport=function(e,t){var i=t.type;if(i==="Identifier")this.checkExport(e,t,t.start);else if(i==="ObjectPattern")for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.checkPatternExport(e,s)}else if(i==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(e,c)}else i==="Property"?this.checkPatternExport(e,t.value):i==="AssignmentPattern"?this.checkPatternExport(e,t.left):i==="RestElement"&&this.checkPatternExport(e,t.argument)};I.checkVariableExport=function(e,t){if(e)for(var i=0,n=t;i<n.length;i+=1){var r=n[i];this.checkPatternExport(e,r.id)}};I.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};I.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};I.parseExportSpecifiers=function(e){var t=[],i=!0;for(this.expect(f.braceL);!this.eat(f.braceR);){if(i)i=!1;else if(this.expect(f.comma),this.afterTrailingComma(f.braceR))break;t.push(this.parseExportSpecifier(e))}return t};I.parseImport=function(e){return this.next(),this.type===f.string?(e.specifiers=LF,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===f.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};I.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Bn),this.finishNode(e,"ImportSpecifier")};I.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Bn),this.finishNode(e,"ImportDefaultSpecifier")};I.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Bn),this.finishNode(e,"ImportNamespaceSpecifier")};I.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===f.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(f.comma)))return e;if(this.type===f.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(f.braceL);!this.eat(f.braceR);){if(t)t=!1;else if(this.expect(f.comma),this.afterTrailingComma(f.braceR))break;e.push(this.parseImportSpecifier())}return e};I.parseWithClause=function(){var e=[];if(!this.eat(f._with))return e;this.expect(f.braceL);for(var t={},i=!0;!this.eat(f.braceR);){if(i)i=!1;else if(this.expect(f.comma),this.afterTrailingComma(f.braceR))break;var n=this.parseImportAttribute(),r=n.key.type==="Identifier"?n.key.name:n.key.value;$s(t,r)&&this.raiseRecoverable(n.key.start,"Duplicate attribute key '"+r+"'"),t[r]=!0,e.push(n)}return e};I.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===f.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(f.colon),this.type!==f.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")};I.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===f.string){var e=this.parseLiteral(this.value);return NF.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};I.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};I.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var ei=Xt.prototype;ei.toAssignable=function(e,t,i){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,r=e.properties;n<r.length;n+=1){var s=r[n];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,i);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return e};ei.toAssignableList=function(e,t){for(var i=e.length,n=0;n<i;n++){var r=e[n];r&&this.toAssignable(r,t)}if(i){var s=e[i-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};ei.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};ei.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==f.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};ei.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case f.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(f.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case f.braceL:return this.parseObj(!0)}return this.parseIdent()};ei.parseBindingList=function(e,t,i,n){for(var r=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(f.comma),t&&this.type===f.comma)r.push(null);else{if(i&&this.afterTrailingComma(e))break;if(this.type===f.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else r.push(this.parseAssignableListItem(n))}return r};ei.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};ei.parseBindingListItem=function(e){return e};ei.parseMaybeDefault=function(e,t,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(f.eq))return i;var n=this.startNodeAt(e,t);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")};ei.checkLValSimple=function(e,t,i){t===void 0&&(t=tu);var n=t!==tu;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(n?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(t===Bn&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),i&&($s(i,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),i[e.name]=!0),t!==xv&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,i);default:this.raise(e.start,(n?"Binding":"Assigning to")+" rvalue")}};ei.checkLValPattern=function(e,t,i){switch(t===void 0&&(t=tu),e.type){case"ObjectPattern":for(var n=0,r=e.properties;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,t,i)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,t,i)}break;default:this.checkLValSimple(e,t,i)}};ei.checkLValInnerPattern=function(e,t,i){switch(t===void 0&&(t=tu),e.type){case"Property":this.checkLValInnerPattern(e.value,t,i);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,i);break;case"RestElement":this.checkLValPattern(e.argument,t,i);break;default:this.checkLValPattern(e,t,i)}};var ii=function(t,i,n,r,s){this.token=t,this.isExpr=!!i,this.preserveSpace=!!n,this.override=r,this.generator=!!s},Tt={b_stat:new ii("{",!1),b_expr:new ii("{",!0),b_tmpl:new ii("${",!1),p_stat:new ii("(",!1),p_expr:new ii("(",!0),q_tmpl:new ii("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ii("function",!1),f_expr:new ii("function",!0),f_expr_gen:new ii("function",!0,!1,null,!0),f_gen:new ii("function",!1,!1,null,!0)},js=Xt.prototype;js.initialContext=function(){return[Tt.b_stat]};js.curContext=function(){return this.context[this.context.length-1]};js.braceIsBlock=function(e){var t=this.curContext();return t===Tt.f_expr||t===Tt.f_stat?!0:e===f.colon&&(t===Tt.b_stat||t===Tt.b_expr)?!t.isExpr:e===f._return||e===f.name&&this.exprAllowed?ti.test(this.input.slice(this.lastTokEnd,this.start)):e===f._else||e===f.semi||e===f.eof||e===f.parenR||e===f.arrow?!0:e===f.braceL?t===Tt.b_stat:e===f._var||e===f._const||e===f.name?!1:!this.exprAllowed};js.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};js.updateContext=function(e){var t,i=this.type;i.keyword&&e===f.dot?this.exprAllowed=!1:(t=i.updateContext)?t.call(this,e):this.exprAllowed=i.beforeExpr};js.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};f.parenR.updateContext=f.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Tt.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};f.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Tt.b_stat:Tt.b_expr),this.exprAllowed=!0};f.dollarBraceL.updateContext=function(){this.context.push(Tt.b_tmpl),this.exprAllowed=!0};f.parenL.updateContext=function(e){var t=e===f._if||e===f._for||e===f._with||e===f._while;this.context.push(t?Tt.p_stat:Tt.p_expr),this.exprAllowed=!0};f.incDec.updateContext=function(){};f._function.updateContext=f._class.updateContext=function(e){e.beforeExpr&&e!==f._else&&!(e===f.semi&&this.curContext()!==Tt.p_stat)&&!(e===f._return&&ti.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===f.colon||e===f.braceL)&&this.curContext()===Tt.b_stat)?this.context.push(Tt.f_expr):this.context.push(Tt.f_stat),this.exprAllowed=!1};f.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};f.backQuote.updateContext=function(){this.curContext()===Tt.q_tmpl?this.context.pop():this.context.push(Tt.q_tmpl),this.exprAllowed=!1};f.star.updateContext=function(e){if(e===f._function){var t=this.context.length-1;this.context[t]===Tt.f_expr?this.context[t]=Tt.f_expr_gen:this.context[t]=Tt.f_gen}this.exprAllowed=!0};f.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==f.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var H=Xt.prototype;H.checkPropClash=function(e,t,i){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n=e.key,r;switch(n.type){case"Identifier":r=n.name;break;case"Literal":r=String(n.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(t.proto&&(i?i.doubleProto<0&&(i.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(n.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}};H.parseExpression=function(e,t){var i=this.start,n=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===f.comma){var s=this.startNodeAt(i,n);for(s.expressions=[r];this.eat(f.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r};H.parseMaybeAssign=function(e,t,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var n=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Ru,n=!0);var o=this.start,c=this.startLoc;(this.type===f.parenL||this.type===f.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(i&&(u=i.call(this,u,o,c)),this.type.isAssign){var l=this.startNodeAt(o,c);return l.operator=this.value,this.type===f.eq&&(u=this.toAssignable(u,!1,t)),n||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===f.eq?this.checkLValPattern(u):this.checkLValSimple(u),l.left=u,this.next(),l.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else n&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),u};H.parseMaybeConditional=function(e,t){var i=this.start,n=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(f.question)){var s=this.startNodeAt(i,n);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(f.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return r};H.parseExprOps=function(e,t){var i=this.start,n=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===i&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,i,n,-1,e)};H.parseExprOp=function(e,t,i,n,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==f._in)&&s>n){var a=this.type===f.logicalOR||this.type===f.logicalAND,o=this.type===f.coalesce;o&&(s=f.logicalAND.binop);var c=this.value;this.next();var u=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),u,l,s,r),d=this.buildBinary(t,i,e,h,c,a||o);return(a&&this.type===f.coalesce||o&&(this.type===f.logicalOR||this.type===f.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,i,n,r)}return e};H.buildBinary=function(e,t,i,n,r,s){n.type==="PrivateIdentifier"&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=i,a.operator=r,a.right=n,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};H.parseMaybeUnary=function(e,t,i,n){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(n),t=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===f.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,n),this.checkExpressionErrors(e,!0),c?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&Bv(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&lh(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===f.privateId)(n||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==f._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,n),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(r,s);u.operator=this.value,u.prefix=!1,u.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(u,"UpdateExpression")}}if(!i&&this.eat(f.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,n),"**",!1);else return a};function Bv(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&Bv(e.expression)}function lh(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&lh(e.expression)||e.type==="ParenthesizedExpression"&&lh(e.expression)}H.parseExprSubscripts=function(e,t){var i=this.start,n=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,i,n,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};H.parseSubscripts=function(e,t,i,n,r){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,i,n,s,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var c=this.startNodeAt(t,i);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}e=o}};H.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(f.arrow)};H.parseSubscriptAsyncArrow=function(e,t,i,n){return this.parseArrowExpression(this.startNodeAt(e,t),i,!0,n)};H.parseSubscript=function(e,t,i,n,r,s,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(f.questionDot);n&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(f.bracketL);if(u||c&&this.type!==f.parenL&&this.type!==f.backQuote||this.eat(f.dot)){var l=this.startNodeAt(t,i);l.object=e,u?(l.property=this.parseExpression(),this.expect(f.bracketR)):this.type===f.privateId&&e.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!u,o&&(l.optional=c),e=this.finishNode(l,"MemberExpression")}else if(!n&&this.eat(f.parenL)){var h=new Ru,d=this.yieldPos,y=this.awaitPos,g=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var _=this.parseExprList(f.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=y,this.awaitIdentPos=g,this.parseSubscriptAsyncArrow(t,i,_,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=y||this.awaitPos,this.awaitIdentPos=g||this.awaitIdentPos;var b=this.startNodeAt(t,i);b.callee=e,b.arguments=_,o&&(b.optional=c),e=this.finishNode(b,"CallExpression")}else if(this.type===f.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var w=this.startNodeAt(t,i);w.tag=e,w.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(w,"TaggedTemplateExpression")}return e};H.parseExprAtom=function(e,t,i){this.type===f.slash&&this.readRegexp();var n,r=this.potentialArrowAt===this.start;switch(this.type){case f._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===f.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==f.dot&&this.type!==f.bracketL&&this.type!==f.parenL&&this.unexpected(),this.finishNode(n,"Super");case f._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case f.name:var s=this.start,a=this.startLoc,o=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&c.name==="async"&&!this.canInsertSemicolon()&&this.eat(f._function))return this.overrideContext(Tt.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(f.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[c],!1,t);if(this.options.ecmaVersion>=8&&c.name==="async"&&this.type===f.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return c=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(f.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[c],!0,t)}return c;case f.regexp:var u=this.value;return n=this.parseLiteral(u.value),n.regex={pattern:u.pattern,flags:u.flags},n;case f.num:case f.string:return this.parseLiteral(this.value);case f._null:case f._true:case f._false:return n=this.startNode(),n.value=this.type===f._null?null:this.type===f._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case f.parenL:var l=this.start,h=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),h;case f.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(f.bracketR,!0,!0,e),this.finishNode(n,"ArrayExpression");case f.braceL:return this.overrideContext(Tt.b_expr),this.parseObj(!1,e);case f._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case f._class:return this.parseClass(this.startNode(),!1);case f._new:return this.parseNew();case f.backQuote:return this.parseTemplate();case f._import:return this.options.ecmaVersion>=11?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}};H.parseExprAtomDefault=function(){this.unexpected()};H.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===f.parenL&&!e)return this.parseDynamicImport(t);if(this.type===f.dot){var i=this.startNodeAt(t.start,t.loc&&t.loc.start);return i.name="import",t.meta=this.finishNode(i,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};H.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(f.parenR)?e.options=null:(this.expect(f.comma),this.afterTrailingComma(f.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(f.parenR)||(this.expect(f.comma),this.afterTrailingComma(f.parenR)||this.unexpected())));else if(!this.eat(f.parenR)){var t=this.start;this.eat(f.comma)&&this.eat(f.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};H.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};H.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};H.parseParenExpression=function(){this.expect(f.parenL);var e=this.parseExpression();return this.expect(f.parenR),e};H.shouldParseArrow=function(e){return!this.canInsertSemicolon()};H.parseParenAndDistinguishExpression=function(e,t){var i=this.start,n=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,c=[],u=!0,l=!1,h=new Ru,d=this.yieldPos,y=this.awaitPos,g;for(this.yieldPos=0,this.awaitPos=0;this.type!==f.parenR;)if(u?u=!1:this.expect(f.comma),s&&this.afterTrailingComma(f.parenR,!0)){l=!0;break}else if(this.type===f.ellipsis){g=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else c.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var _=this.lastTokEnd,b=this.lastTokEndLoc;if(this.expect(f.parenR),e&&this.shouldParseArrow(c)&&this.eat(f.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=y,this.parseParenArrowList(i,n,c,t);(!c.length||l)&&this.unexpected(this.lastTokStart),g&&this.unexpected(g),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=y||this.awaitPos,c.length>1?(r=this.startNodeAt(a,o),r.expressions=c,this.finishNodeAt(r,"SequenceExpression",_,b)):r=c[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var w=this.startNodeAt(i,n);return w.expression=r,this.finishNode(w,"ParenthesizedExpression")}else return r};H.parseParenItem=function(e){return e};H.parseParenArrowList=function(e,t,i,n){return this.parseArrowExpression(this.startNodeAt(e,t),i,!1,n)};var MF=[];H.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===f.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var i=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var n=this.start,r=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,r,!0,!1),this.eat(f.parenL)?e.arguments=this.parseExprList(f.parenR,this.options.ecmaVersion>=8,!1):e.arguments=MF,this.finishNode(e,"NewExpression")};H.parseTemplateElement=function(e){var t=e.isTagged,i=this.startNode();return this.type===f.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),i.tail=this.type===f.backQuote,this.finishNode(i,"TemplateElement")};H.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:t});for(i.quasis=[n];!n.tail;)this.type===f.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(f.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(f.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(i,"TemplateLiteral")};H.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===f.name||this.type===f.num||this.type===f.string||this.type===f.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===f.star)&&!ti.test(this.input.slice(this.lastTokEnd,this.start))};H.parseObj=function(e,t){var i=this.startNode(),n=!0,r={};for(i.properties=[],this.next();!this.eat(f.braceR);){if(n)n=!1;else if(this.expect(f.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(f.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),i.properties.push(s)}return this.finishNode(i,e?"ObjectPattern":"ObjectExpression")};H.parseProperty=function(e,t){var i=this.startNode(),n,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(f.ellipsis))return e?(i.argument=this.parseIdent(!1),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(i,"RestElement")):(i.argument=this.parseMaybeAssign(!1,t),this.type===f.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(i,"SpreadElement"));this.options.ecmaVersion>=6&&(i.method=!1,i.shorthand=!1,(e||t)&&(s=this.start,a=this.startLoc),e||(n=this.eat(f.star)));var o=this.containsEsc;return this.parsePropertyName(i),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(i)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(f.star),this.parsePropertyName(i)):r=!1,this.parsePropertyValue(i,e,n,r,s,a,t,o),this.finishNode(i,"Property")};H.parseGetterSetter=function(e){var t=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=t;var i=e.kind==="get"?0:1;if(e.value.params.length!==i){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};H.parsePropertyValue=function(e,t,i,n,r,s,a,o){(i||n)&&this.type===f.colon&&this.unexpected(),this.eat(f.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===f.parenL?(t&&this.unexpected(),e.method=!0,e.value=this.parseMethod(i,n),e.kind="init"):!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==f.comma&&this.type!==f.braceR&&this.type!==f.eq?((i||n)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((i||n)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===f.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected()};H.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(f.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(f.bracketR),e.key;e.computed=!1}return e.key=this.type===f.num||this.type===f.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};H.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};H.parseMethod=function(e,t,i){var n=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(rd(t,n.generator)|Cu|(i?wv:0)),this.expect(f.parenL),n.params=this.parseBindingList(f.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")};H.parseArrowExpression=function(e,t,i,n){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(rd(i,!1)|nd),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,n),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};H.parseFunctionBody=function(e,t,i,n){var r=t&&this.type!==f.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(n),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!i&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,xv),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=c}this.exitScope()};H.isSimpleParamList=function(e){for(var t=0,i=e;t<i.length;t+=1){var n=i[t];if(n.type!=="Identifier")return!1}return!0};H.checkParams=function(e,t){for(var i=Object.create(null),n=0,r=e.params;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,sd,t?null:i)}};H.parseExprList=function(e,t,i,n){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(f.comma),t&&this.afterTrailingComma(e))break;var a=void 0;i&&this.type===f.comma?a=null:this.type===f.ellipsis?(a=this.parseSpread(n),n&&this.type===f.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),r.push(a)}return r};H.checkUnreserved=function(e){var t=e.start,i=e.end,n=e.name;if(this.inGenerator&&n==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&n==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Lu)&&n==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(n==="arguments"||n==="await")&&this.raise(t,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(t,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,i).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(n)&&(!this.inAsync&&n==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+n+"' is reserved"))}};H.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};H.parseIdentNode=function(){var e=this.startNode();return this.type===f.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=f.name):this.unexpected(),e};H.parsePrivateIdent=function(){var e=this.startNode();return this.type===f.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};H.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===f.semi||this.canInsertSemicolon()||this.type!==f.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(f.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};H.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var iu=Xt.prototype;iu.raise=function(e,t){var i=_v(this.input,e);t+=" ("+i.line+":"+i.column+")",this.sourceFile&&(t+=" in "+this.sourceFile);var n=new SyntaxError(t);throw n.pos=e,n.loc=i,n.raisedAt=this.pos,n};iu.raiseRecoverable=iu.raise;iu.curPosition=function(){if(this.options.locations)return new ja(this.curLine,this.pos-this.lineStart)};var tr=Xt.prototype,UF=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};tr.enterScope=function(e){this.scopeStack.push(new UF(e))};tr.exitScope=function(){this.scopeStack.pop()};tr.treatFunctionsAsVarInScope=function(e){return e.flags&Vs||!this.inModule&&e.flags&za};tr.declareName=function(e,t,i){var n=!1;if(t===Bn){var r=this.currentScope();n=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&za&&delete this.undefinedExports[e]}else if(t===Iv){var s=this.currentScope();s.lexical.push(e)}else if(t===Sv){var a=this.currentScope();this.treatFunctionsAsVar?n=a.lexical.indexOf(e)>-1:n=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var c=this.scopeStack[o];if(c.lexical.indexOf(e)>-1&&!(c.flags&vv&&c.lexical[0]===e)||!this.treatFunctionsAsVarInScope(c)&&c.functions.indexOf(e)>-1){n=!0;break}if(c.var.push(e),this.inModule&&c.flags&za&&delete this.undefinedExports[e],c.flags&Lu)break}n&&this.raiseRecoverable(i,"Identifier '"+e+"' has already been declared")};tr.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};tr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};tr.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(Lu|ao|Br))return t}};tr.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(Lu|ao|Br)&&!(t.flags&nd))return t}};var Mu=function(t,i,n){this.type="",this.start=i,this.end=0,t.options.locations&&(this.loc=new ku(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[i,0])},oo=Xt.prototype;oo.startNode=function(){return new Mu(this,this.start,this.startLoc)};oo.startNodeAt=function(e,t){return new Mu(this,e,t)};function Ev(e,t,i,n){return e.type=t,e.end=i,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=i),e}oo.finishNode=function(e,t){return Ev.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};oo.finishNodeAt=function(e,t,i,n){return Ev.call(this,e,t,i,n)};oo.copyNode=function(e){var t=new Mu(this,e.start,this.startLoc);for(var i in e)t[i]=e[i];return t};var PF="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",Ov="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Tv=Ov+" Extended_Pictographic",Nv=Tv,Dv=Nv+" EBase EComp EMod EPres ExtPict",Fv=Dv,$F=Fv,VF={9:Ov,10:Tv,11:Nv,12:Dv,13:Fv,14:$F},jF="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",zF={9:"",10:"",11:"",12:"",13:"",14:jF},yy="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",kv="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Cv=kv+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Lv=Cv+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Rv=Lv+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Mv=Rv+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",WF=Mv+" "+PF,qF={9:kv,10:Cv,11:Lv,12:Rv,13:Mv,14:WF},Uv={};function YF(e){var t=Uv[e]={binary:Mn(VF[e]+" "+yy),binaryOfStrings:Mn(zF[e]),nonBinary:{General_Category:Mn(yy),Script:Mn(qF[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var gl=0,my=[9,10,11,12,13,14];gl<my.length;gl+=1){var HF=my[gl];YF(HF)}var S=Xt.prototype,nu=function(t,i){this.parent=t,this.base=i||this};nu.prototype.separatedFrom=function(t){for(var i=this;i;i=i.parent)for(var n=t;n;n=n.parent)if(i.base===n.base&&i!==n)return!0;return!1};nu.prototype.sibling=function(){return new nu(this.parent,this.base)};var qi=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Uv[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};qi.prototype.reset=function(t,i,n){var r=n.indexOf("v")!==-1,s=n.indexOf("u")!==-1;this.start=t|0,this.source=i+"",this.flags=n,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};qi.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};qi.prototype.at=function(t,i){i===void 0&&(i=!1);var n=this.source,r=n.length;if(t>=r)return-1;var s=n.charCodeAt(t);if(!(i||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var a=n.charCodeAt(t+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};qi.prototype.nextIndex=function(t,i){i===void 0&&(i=!1);var n=this.source,r=n.length;if(t>=r)return r;var s=n.charCodeAt(t),a;return!(i||this.switchU)||s<=55295||s>=57344||t+1>=r||(a=n.charCodeAt(t+1))<56320||a>57343?t+1:t+2};qi.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};qi.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};qi.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};qi.prototype.eat=function(t,i){return i===void 0&&(i=!1),this.current(i)===t?(this.advance(i),!0):!1};qi.prototype.eatChars=function(t,i){i===void 0&&(i=!1);for(var n=this.pos,r=0,s=t;r<s.length;r+=1){var a=s[r],o=this.at(n,i);if(o===-1||o!==a)return!1;n=this.nextIndex(n,i)}return this.pos=n,!0};S.validateRegExpFlags=function(e){for(var t=e.validFlags,i=e.flags,n=!1,r=!1,s=0;s<i.length;s++){var a=i.charAt(s);t.indexOf(a)===-1&&this.raise(e.start,"Invalid regular expression flag"),i.indexOf(a,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),a==="u"&&(n=!0),a==="v"&&(r=!0)}this.options.ecmaVersion>=15&&n&&r&&this.raise(e.start,"Invalid regular expression flag")};function GF(e){for(var t in e)return!0;return!1}S.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&GF(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};S.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,i=e.backReferenceNames;t<i.length;t+=1){var n=i[t];e.groupNames[n]||e.raise("Invalid named capture referenced")}};S.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new nu(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};S.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};S.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};S.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!i,!0}return e.pos=t,!1};S.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};S.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};S.regexp_eatBracedQuantifier=function(e,t){var i=e.pos;if(e.eat(123)){var n=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(n=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<n&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=i}return!1};S.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};S.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};S.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var i=this.regexp_eatModifiers(e),n=e.eat(45);if(i||n){for(var r=0;r<i.length;r++){var s=i.charAt(r);i.indexOf(s,r+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(n){var a=this.regexp_eatModifiers(e);!i&&!a&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var c=a.charAt(o);(a.indexOf(c,o+1)>-1||i.indexOf(c)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1};S.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};S.regexp_eatModifiers=function(e){for(var t="",i=0;(i=e.current())!==-1&&KF(i);)t+=mn(i),e.advance();return t};function KF(e){return e===105||e===109||e===115}S.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};S.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};S.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Pv(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Pv(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}S.regexp_eatPatternCharacters=function(e){for(var t=e.pos,i=0;(i=e.current())!==-1&&!Pv(i);)e.advance();return e.pos!==t};S.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};S.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,i=e.groupNames[e.lastStringValue];if(i)if(t)for(var n=0,r=i;n<r.length;n+=1){var s=r[n];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(i||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};S.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};S.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=mn(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=mn(e.lastIntValue);return!0}return!1};S.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,i=this.options.ecmaVersion>=11,n=e.current(i);return e.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)&&(n=e.lastIntValue),JF(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)};function JF(e){return yn(e,!0)||e===36||e===95}S.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,i=this.options.ecmaVersion>=11,n=e.current(i);return e.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)&&(n=e.lastIntValue),QF(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)};function QF(e){return Os(e,!0)||e===36||e===95||e===8204||e===8205}S.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};S.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var i=e.lastIntValue;if(e.switchU)return i>e.maxBackReference&&(e.maxBackReference=i),!0;if(i<=e.numCapturingParens)return!0;e.pos=t}return!1};S.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};S.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};S.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};S.regexp_eatZero=function(e){return e.current()===48&&!Uu(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};S.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};S.regexp_eatControlLetter=function(e){var t=e.current();return $v(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function $v(e){return e>=65&&e<=90||e>=97&&e<=122}S.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var i=e.pos,n=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(n&&r>=55296&&r<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=r}return!0}if(n&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&XF(e.lastIntValue))return!0;n&&e.raise("Invalid unicode escape"),e.pos=i}return!1};function XF(e){return e>=0&&e<=1114111}S.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};S.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var Vv=0,gn=1,qe=2;S.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(ZF(t))return e.lastIntValue=-1,e.advance(),gn;var i=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((i=t===80)||t===112)){e.lastIntValue=-1,e.advance();var n;if(e.eat(123)&&(n=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return i&&n===qe&&e.raise("Invalid property name"),n;e.raise("Invalid property name")}return Vv};function ZF(e){return e===100||e===68||e===115||e===83||e===119||e===87}S.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var i=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,i,n),gn}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r)}return Vv};S.regexp_validateUnicodePropertyNameAndValue=function(e,t,i){$s(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(i)||e.raise("Invalid property value")};S.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return gn;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return qe;e.raise("Invalid property name")};S.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";jv(t=e.current());)e.lastStringValue+=mn(t),e.advance();return e.lastStringValue!==""};function jv(e){return $v(e)||e===95}S.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";tk(t=e.current());)e.lastStringValue+=mn(t),e.advance();return e.lastStringValue!==""};function tk(e){return jv(e)||Uu(e)}S.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};S.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),i=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&i===qe&&e.raise("Negated character class may contain strings"),!0}return!1};S.regexp_classContents=function(e){return e.current()===93?gn:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),gn)};S.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var i=e.lastIntValue;e.switchU&&(t===-1||i===-1)&&e.raise("Invalid character class"),t!==-1&&i!==-1&&t>i&&e.raise("Range out of order in character class")}}};S.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var i=e.current();(i===99||qv(i))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var n=e.current();return n!==93?(e.lastIntValue=n,e.advance(),!0):!1};S.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};S.regexp_classSetExpression=function(e){var t=gn,i;if(!this.regexp_eatClassSetRange(e))if(i=this.regexp_eatClassSetOperand(e)){i===qe&&(t=qe);for(var n=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(i=this.regexp_eatClassSetOperand(e))){i!==qe&&(t=gn);continue}e.raise("Invalid character in character class")}if(n!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(n!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(i=this.regexp_eatClassSetOperand(e),!i)return t;i===qe&&(t=qe)}};S.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var i=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;return i!==-1&&n!==-1&&i>n&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};S.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?gn:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};S.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var i=e.eat(94),n=this.regexp_classContents(e);if(e.eat(93))return i&&n===qe&&e.raise("Negated character class may contain strings"),n;e.pos=t}if(e.eat(92)){var r=this.regexp_eatCharacterClassEscape(e);if(r)return r;e.pos=t}return null};S.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var i=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return i}else e.raise("Invalid escape");e.pos=t}return null};S.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===qe&&(t=qe);return t};S.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?gn:qe};S.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var i=e.current();return i<0||i===e.lookahead()&&ek(i)||ik(i)?!1:(e.advance(),e.lastIntValue=i,!0)};function ek(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function ik(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}S.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return nk(t)?(e.lastIntValue=t,e.advance(),!0):!1};function nk(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}S.regexp_eatClassControlLetter=function(e){var t=e.current();return Uu(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};S.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};S.regexp_eatDecimalDigits=function(e){var t=e.pos,i=0;for(e.lastIntValue=0;Uu(i=e.current());)e.lastIntValue=10*e.lastIntValue+(i-48),e.advance();return e.pos!==t};function Uu(e){return e>=48&&e<=57}S.regexp_eatHexDigits=function(e){var t=e.pos,i=0;for(e.lastIntValue=0;zv(i=e.current());)e.lastIntValue=16*e.lastIntValue+Wv(i),e.advance();return e.pos!==t};function zv(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Wv(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}S.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var i=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+i*8+e.lastIntValue:e.lastIntValue=t*8+i}else e.lastIntValue=t;return!0}return!1};S.regexp_eatOctalDigit=function(e){var t=e.current();return qv(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function qv(e){return e>=48&&e<=55}S.regexp_eatFixedHexDigits=function(e,t){var i=e.pos;e.lastIntValue=0;for(var n=0;n<t;++n){var r=e.current();if(!zv(r))return e.pos=i,!1;e.lastIntValue=16*e.lastIntValue+Wv(r),e.advance()}return!0};var od=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new ku(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},it=Xt.prototype;it.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new od(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};it.getToken=function(){return this.next(),new od(this)};typeof Symbol<"u"&&(it[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===f.eof,value:t}}}});it.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(f.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};it.readToken=function(e){return yn(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};it.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};it.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(i===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var n=void 0,r=t;(n=yv(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=n;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,i),t,this.pos,e,this.curPosition())};it.skipLineComment=function(e){for(var t=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Ps(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,i,this.curPosition())};it.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&mv.test(String.fromCharCode(e)))++this.pos;else break t}}};it.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=e,this.value=t,this.updateContext(i)};it.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(f.ellipsis)):(++this.pos,this.finishToken(f.dot))};it.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(f.assign,2):this.finishOp(f.slash,1)};it.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),i=1,n=e===42?f.star:f.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++i,n=f.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(f.assign,i+1):this.finishOp(n,i)};it.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(f.assign,3)}return this.finishOp(e===124?f.logicalOR:f.logicalAND,2)}return t===61?this.finishOp(f.assign,2):this.finishOp(e===124?f.bitwiseOR:f.bitwiseAND,1)};it.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(f.assign,2):this.finishOp(f.bitwiseXOR,1)};it.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||ti.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(f.incDec,2):t===61?this.finishOp(f.assign,2):this.finishOp(f.plusMin,1)};it.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),i=1;return t===e?(i=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+i)===61?this.finishOp(f.assign,i+1):this.finishOp(f.bitShift,i)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(i=2),this.finishOp(f.relational,i))};it.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(f.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(f.arrow)):this.finishOp(e===61?f.eq:f.prefix,1)};it.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(f.questionDot,2)}if(t===63){if(e>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(f.assign,3)}return this.finishOp(f.coalesce,2)}}return this.finishOp(f.question,1)};it.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),yn(t,!0)||t===92))return this.finishToken(f.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+mn(t)+"'")};it.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(f.parenL);case 41:return++this.pos,this.finishToken(f.parenR);case 59:return++this.pos,this.finishToken(f.semi);case 44:return++this.pos,this.finishToken(f.comma);case 91:return++this.pos,this.finishToken(f.bracketL);case 93:return++this.pos,this.finishToken(f.bracketR);case 123:return++this.pos,this.finishToken(f.braceL);case 125:return++this.pos,this.finishToken(f.braceR);case 58:return++this.pos,this.finishToken(f.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(f.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(f.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+mn(e)+"'")};it.finishOp=function(e,t){var i=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,i)};it.readRegexp=function(){for(var e,t,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(ti.test(n)&&this.raise(i,"Unterminated regular expression"),e)e=!1;else{if(n==="[")t=!0;else if(n==="]"&&t)t=!1;else if(n==="/"&&!t)break;e=n==="\\"}++this.pos}var r=this.input.slice(i,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new qi(this));o.reset(i,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(r,a)}catch{}return this.finishToken(f.regexp,{pattern:r,flags:a,value:c})};it.readInt=function(e,t,i){for(var n=this.options.ecmaVersion>=12&&t===void 0,r=i&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,c=0,u=t??1/0;c<u;++c,++this.pos){var l=this.input.charCodeAt(this.pos),h=void 0;if(n&&l===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),c===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?h=l-97+10:l>=65?h=l-65+10:l>=48&&l<=57?h=l-48:h=1/0,h>=e)break;o=l,a=a*e+h}return n&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:a};function rk(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function Yv(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}it.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var i=this.readInt(e);return i==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(i=Yv(this.input.slice(t,this.pos)),++this.pos):yn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(f.num,i)};it.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var i=this.pos-t>=2&&this.input.charCodeAt(t)===48;i&&this.strict&&this.raise(t,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!i&&!e&&this.options.ecmaVersion>=11&&n===110){var r=Yv(this.input.slice(t,this.pos));return++this.pos,yn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(f.num,r)}i&&/[89]/.test(this.input.slice(t,this.pos))&&(i=!1),n===46&&!i&&(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),(n===69||n===101)&&!i&&(n=this.input.charCodeAt(++this.pos),(n===43||n===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),yn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=rk(this.input.slice(t,this.pos),i);return this.finishToken(f.num,s)};it.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else t=this.readHexChar(4);return t};it.readString=function(e){for(var t="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;n===92?(t+=this.input.slice(i,this.pos),t+=this.readEscapedChar(!1),i=this.pos):n===8232||n===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ps(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(i,this.pos++),this.finishToken(f.string,t)};var Hv={};it.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===Hv)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};it.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Hv;this.raise(e,t)};it.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(i===96||i===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===f.template||this.type===f.invalidTemplate)?i===36?(this.pos+=2,this.finishToken(f.dollarBraceL)):(++this.pos,this.finishToken(f.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(f.template,e));if(i===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Ps(i)){switch(e+=this.input.slice(t,this.pos),++this.pos,i){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(i);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};it.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(f.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};it.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return mn(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),(n!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Ps(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};it.readHexChar=function(e){var t=this.pos,i=this.readInt(16,e);return i===null&&this.invalidStringToken(t,"Bad character escape sequence"),i};it.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,i=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(Os(r,n))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(i,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?yn:Os)(a,n)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=mn(a),i=this.pos}else break;t=!1}return e+this.input.slice(i,this.pos)};it.readWord=function(){var e=this.readWord1(),t=f.name;return this.keywords.test(e)&&(t=ed[e]),this.finishToken(t,e)};var sk="8.14.1";Xt.acorn={Parser:Xt,version:sk,defaultOptions:ch,Position:ja,SourceLocation:ku,getLineInfo:_v,Node:Mu,TokenType:ct,tokTypes:f,keywordTypes:ed,TokContext:ii,tokContexts:Tt,isIdentifierChar:Os,isIdentifierStart:yn,Token:od,isNewLine:Ps,lineBreak:ti,lineBreakG:EF,nonASCIIwhitespace:mv};function ak(e,t){return Xt.parse(e,t)}const cd={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},ok={ecmaVersion:11},gy="$",ck="d",uk="d1",lk="d2",te=e=>(t,i)=>i.error(t,e+" not allowed"),hk=te("Aggregate function"),fk=te("Window function"),dk="Invalid argument",ud="Invalid column reference",pk=ud+" (must be input to an aggregate function)",Gv="Invalid function call",yk="Invalid member expression",mk="Invalid operator parameter",gk="Invalid param reference",_k="Invalid variable reference",bk="Variable not accessible in operator call",vk="Unsupported variable declaration",wk="Unsupported destructuring pattern",Kv="Table expressions do not support closures",Jv="Use aq.escape(fn) to use a function as-is (including closures)",Sk="use table.params({ name: value }) to define dynamic parameters",Ik="use aq.addFunction(name, fn) to add new op functions",xk=`
Note: ${Kv}. ${Jv}, or ${Sk}.`,Qv=`
Note: ${Kv}. ${Jv}, or ${Ik}.`,Ak=`The ${H0} method is not valid in multi-table expressions.`;function Bk(e,t){const i=Ek(t);let n=e.root=i;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,gF(n)?(Tk(n,e),n=n.body):e.join?(e.scope.add(e.tuple1=uk),e.scope.add(e.tuple2=lk),e.scope.add(e.$param=gy)):(e.scope.add(e.tuple=ck),e.scope.add(e.$param=gy)),at(n,e,ld),e.root}function Ek(e){try{const t=e.field?Ok(e):ht(e)?Pi(e):e;return ak(`expr=(${t})`,ok).body[0].expression.right}catch{Q(`Expression parse error: ${e+""}`)}}function Ok(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const ld={FunctionDeclaration:te("Function definitions"),ForStatement:te("For loops"),ForOfStatement:te("For-of loops"),ForInStatement:te("For-in loops"),WhileStatement:te("While loops"),DoWhileStatement:te("Do-while loops"),AwaitExpression:te("Await expressions"),ArrowFunctionExpression:te("Function definitions"),AssignmentExpression:te("Assignments"),FunctionExpression:te("Function definitions"),NewExpression:te('Use of "new"'),UpdateExpression:te("Update expressions"),VariableDeclarator(e,t){dh(e.id,t)},Identifier(e,t,i){t1(e,t,i)&&!t.scope.has(e.name)&&t.error(e,_k,xk)},CallExpression(e,t){const i=Xv(e.callee),n=W0(i)||q0(i);if(n){if((t.join||t.aggregate===!1)&&tf(i)&&hk(e,t),(t.join||t.window===!1)&&ef(i)&&fk(e,t),t.$op=1,t.ast)fh(e,i,t),e.arguments.forEach(r=>at(r,t,hh));else{const r=t.op(Nk(t,n,i,e.arguments));Object.assign(e,{type:P0,name:r.id})}return t.$op=0,!1}else z0(i)?fh(e,i,t):t.error(e,Gv,Qv)},MemberExpression(e,t,i){const{object:n,property:r}=e;if(!Jt(Un,n))return;const{name:s}=n;if(Zv(e)&&Jt(Un,r)&&fi(cd,r.name)){n1(e,r.name);return}const a=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(a>=0)return _y(e,a,t,e1,i);if(s===t.$param)return _y(e,a,t,Fk);t.paramsRef.has(s)?Wa(e,t.paramsRef.get(s)):t.columnRef.has(s)?i1(n,s,t,e):fi(t.params,s)&&Wa(n,s)}};function _y(e,t,i,n,r){const{property:s,computed:a}=e;let o;if(!a)o=s.name;else if(Jt(ks,s))o=s.value;else try{at(s,i,ld,e),o=i.param(s)}catch{i.error(e,yk)}return n(e,o,t,i,r),!1}const hh={...ld,VariableDeclarator:te("Variable declaration in operator call"),Identifier(e,t,i){t1(e,t,i)&&t.error(e,bk)},CallExpression(e,t){const i=Xv(e.callee);z0(i)?fh(e,i,t):t.error(e,Gv,Qv)}};function Tk(e,t){e.generator&&te("Generator functions")(e,t),e.async&&te("Async functions")(e,t);const{params:i}=e,n=i.length,r=a=>(o,c)=>t.columnRef.set(o,[c,a]),s=(a,o)=>t.paramsRef.set(a,o);n&&(t.join?(Qs(t,i[0],"tuple1",r(1)),n>1&&Qs(t,i[1],"tuple2",r(2)),n>2&&Qs(t,i[2],"$param",s)):(Qs(t,i[0],"tuple",r(0)),n>1&&Qs(t,i[1],"$param",s))),t.root=e.body}function Qs(e,t,i,n){Jt(Un,t)?(e.scope.add(t.name),e[i]=t.name):Jt(M0,t)&&t.properties.forEach(r=>{const s=Jt(Un,r.key)?r.key.name:Jt(ks,r.key)?r.key.value:e.error(r,dk);Jt(Un,r.value)||e.error(r.value,wk),n(r.value.name,s)})}function Nk(e,t,i,n){const r=[],s=[],a=t.param[0]||0,o=a+(t.param[1]||0);return n.forEach((c,u)=>{u<a?(at(c,e,hh),r.push(e.field(c))):u<o?(at(c,e,hh),s.push(e.param(c))):e.error(c,mk)}),{name:i,fields:r,params:s,...e.spec.window||{}}}function Xv(e){return Jt(Un,e)?e.name:Jt(R0,e)?Zv(e)?Dk(e.property.name):e.property.name:null}function Zv(e){return Jt(Un,e.object)&&e.object.name==="Math"}function Dk(e){return e==="max"?"greatest":e==="min"?"least":e}function t1(e,t,i){const{name:n}=e;if(!(Jt(R0,i)&&i.property===e)){if(!(Jt(U0,i)&&i.key===e))if(t.paramsRef.has(n))Wa(e,t.paramsRef.get(n));else if(t.columnRef.has(n))i1(e,n,t,i);else if(fi(t.params,n))Wa(e,n);else if(fi(cd,n))n1(e,n);else return!0}}function e1(e,t,i,n,r){const s=i===0?n.table:i>0?n.join[i-1]:null,a=s&&s.column(t);s&&!a&&n.error(e,ud),n.aggronly&&!n.$op&&n.error(e,pk),Y0(e,t,i,a,r)}function i1(e,t,i,n){const[r,s]=i.columnRef.get(t);e1(e,r,s,i,n)}function Fk(e,t,i,n){n.params&&!fi(n.params,t)&&n.error(e,gk),Wa(e,t)}function Wa(e,t){e.type=OO,e.name=t}function n1(e,t){e.type=AO,e.name=t,e.raw=cd[t]}function fh(e,t,i){if(t===H0){const n=i.table;n||i.error(e,Ak),G0(e,e.arguments.length?e.arguments.map(r=>{const s=i.param(r),a=le(s)?n.columnName(s):s;return n.column(a)||i.error(r,ud),a}):n.columnNames())}else e.callee={type:EO,name:t}}function dh(e,t){Jt(Un,e)?t.scope.add(e.name):Jt(wO,e)?e.elements.forEach(i=>dh(i,t)):Jt(M0,e)?e.properties.forEach(i=>dh(i.value,t)):t.error(e.id,vk)}const kk={[to]:1,[P0]:1};function Ee(e,t={}){const i=t.generate||Mc,n=t.compiler||nf,r=Lk(t),s={},a={},o=[],c=[];let u=0,l=-1;const h=t.join?n.join:t.index==1?n.expr2:n.expr,d={op(_){const b=Ck(_);return a[b]||(_.id=++l,a[b]=_)},field(_){const b=i(_);return s[b]||(s[b]=++u)},param(_){return Jt(ks,_)?_.value:n.param(i(_),r)},value(_,b){o.push(_);const w=b.escape||(t.ast?mF(b):h(i(b),r));c.push(w),kk[b.type]&&w!==b&&ce(w)&&(w.field=b.name)},error(_,b,w=""){const G=_.start-6,dt=_.end-6,L=String(d.spec).slice(G,dt);Q(`${b}: "${L}"${w}`)}};Object.assign(d,t,{params:r});for(const[_,b]of bu(e))d.value(_+"",b.escape?vF(d,b,r):Bk(d,b));if(t.ast)return{names:o,exprs:c};const y=[];for(const _ in s)y[s[_]]=n.expr(_,r);const g=Object.values(a);return g.forEach(_=>_.fields=_.fields.map(b=>y[b])),{names:o,exprs:c,ops:g}}function Ck(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const i=e.frame.map(n=>Number.isFinite(n)?Math.abs(n):-1);t+=`[${i},${!!e.peers}]`}return t}function Lk(e){return(e.table?_l(e.table):e.join?{..._l(e.join[1]),..._l(e.join[0])}:{})||{}}function _l(e){return e&&Ot(e.params)?e.params():{}}const r1="Expr",ni="ExprList",s1="ExprNumber",va="ExprObject",es="JoinKeys",ru="JoinValues",$e="Options",hd="OrderKeys",Fn="SelectionList",dr="TableRef",is="TableRefList",Rk="Descending",Mk="Query",Uk="Selection",Pk="Verb",$k="Window";function fd(e,t){return e&&e.expr?new by({...e,...t}):new by(t,e)}class by{constructor(t,i){this.expr=i,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Ot(this.expr)?{func:!0}:{}}}}function Vk(e){return fd(e,{desc:!0})}function Ir(e,t,i=0){const n=i?{field:!0,table:i}:{field:!0};return fd(e,t?{expr:t,...n}:n)}function jk(e,t,i){return fd(e,{window:{frame:t||[-1/0,0],peers:!!i}})}function zk(e){const t=i=>i;return t.toString=()=>e,t}function vy(e,t){return t=t&&Ot(t.query)?t.query():t,t&&Ot(t.evaluate)?t.evaluate(null,e):e(t)}function a1(e){return ce(e)&&(ht(e.all)||ht(e.matches)||ht(e.not)||ht(e.range))}function qa(e){return e&&Ot(e.toObject)?e.toObject():Ot(e)?{expr:String(e),func:!0}:ht(e)?e.map(qa):ce(e)?Du(e,t=>qa(t)):e}function dd(e){return ht(e)?e.map(dd):ce(e)?ht(e.verbs)?co.from(e):ht(e.all)?Es():ht(e.range)?hF(...e.range):ht(e.match)?fF(RegExp(...e.match)):ht(e.not)?hv(e.not.map(qa)):Wk(e):e}function Wk(e){let t=e,i=e.expr;if(i!=null){if(e.field===!0?t=i=Ir(i):e.func===!0&&(t=i=zk(i)),ce(e.window)){const{frame:n,peers:r}=e.window;t=i=jk(i,n,r)}e.desc===!0&&(t=Vk(i))}return e===t?Du(e,n=>dd(n)):t}function qk(e){return ht(e)?e.map(Yk):e}function Yk(e){const t=[];return Ae(e).forEach(i=>{le(i)?t.push(i):ne(i)?t.push(Ir(i,null)):ce(i)&&i.expr||Ot(i)?t.push(i):Q(`Invalid key value: ${i+""}`)}),t}function Hk(e){return ht(e)?e.map(Gk):e}function Gk(e,t){return t<2?Ae(e):e}function Kk(e){const t=[];return e.forEach(i=>{const n=i.expr!=null?i.expr:i;if(ce(n)&&!Ot(n))for(const r in n)t.push(n[r]);else i=le(n)?n:ne(n)?Ir(i):Ot(n)?i:Q(`Invalid orderby field: ${i+""}`),t.push(i)}),t}const Jk={[r1]:l1,[ni]:Ts,[s1]:iC,[va]:Jn,[es]:nC,[ru]:rC,[hd]:Ts,[Fn]:tC};function Qk(e,t,i){return t===dr?wy(e):t===is?e.map(wy):o1(qa(e),t,i)}function o1(e,t,i){return t===$e?e&&Xk(e,i):Jk[t](e)}function Xk(e,t={}){const i={};for(const n in e){const r=e[n];i[n]=t[n]?o1(r,t[n]):r}return i}function Zk(e,t){return Ee({expr:e},{...t,ast:!0}).exprs[0]}function pd(e){return{type:to,name:e}}function c1(e){return{type:to,index:e}}function Jn(e,t){if(ne(e))return Zk(e,t);if(e.expr){let i;if(e.field===!0?i=pd(e.expr):e.func===!0&&(i=Jn(e.expr,t)),i)return e.desc&&(i={type:Rk,expr:i}),e.window&&(i={type:$k,expr:i,...e.window}),i}return Object.keys(e).map(i=>({...Jn(e[i],t),as:i}))}function u1(e){const t=Uk;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Ts(e.not)}:e.range?{type:t,operator:"range",arguments:Ts(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Q("Invalid input")}function tC(e){return Ae(e).map(eC).flat()}function eC(e){return a1(e)?u1(e):le(e)?c1(e):ne(e)?pd(e):ce(e)?Object.keys(e).map(t=>({type:to,name:t,as:e[t]})):Q("Invalid input")}function l1(e){return a1(e)?u1(e):le(e)?c1(e):ne(e)?pd(e):ce(e)?Jn(e):Q("Invalid input")}function Ts(e){return Ae(e).map(l1).flat()}function iC(e){return le(e)?e:Jn(e)}function nC(e){return ht(e)?e.map(Ts):Jn(e,{join:!0})}function rC(e){return ht(e)?e.map((t,i)=>i<2?Ts(t):Jn(t,{join:!0})):Jn(e,{join:!0})}function wy(e){return e&&Ot(e.toAST)?e.toAST():e}class h1{constructor(t,i=[],n=[]){this.verb=t,this.schema=i,i.forEach((r,s)=>{const a=r.type,o=n[s],c=a===es?qk(o):a===ru?Hk(o):a===hd?Kk(o):o;this[r.name]=c!==void 0?c:r.default})}static from(t){const i=ph[t.verb],n=(i.schema||[]).map(({name:r})=>dd(t[r]));return i(...n)}evaluate(t,i){const n=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===dr?vy(i,a):s===is?a.map(o=>vy(i,o)):a});return t[this.verb](...n)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:i})=>{t[i]=qa(this[i])}),t}toAST(){const t={type:Pk,verb:this.verb};return this.schema.forEach(({name:i,type:n,props:r})=>{t[i]=Qk(this[i],n,r)}),t}}function wt(e,t){return Object.assign((...i)=>new h1(e,t,i),{schema:t})}const ph={count:wt("count",[{name:"options",type:$e}]),derive:wt("derive",[{name:"values",type:va},{name:"options",type:$e,props:{before:Fn,after:Fn}}]),filter:wt("filter",[{name:"criteria",type:va}]),groupby:wt("groupby",[{name:"keys",type:ni}]),orderby:wt("orderby",[{name:"keys",type:hd}]),relocate:wt("relocate",[{name:"columns",type:Fn},{name:"options",type:$e,props:{before:Fn,after:Fn}}]),rename:wt("rename",[{name:"columns",type:Fn}]),rollup:wt("rollup",[{name:"values",type:va}]),sample:wt("sample",[{name:"size",type:s1},{name:"options",type:$e,props:{weight:r1}}]),select:wt("select",[{name:"columns",type:Fn}]),ungroup:wt("ungroup"),unorder:wt("unorder"),reify:wt("reify"),dedupe:wt("dedupe",[{name:"keys",type:ni,default:[]}]),impute:wt("impute",[{name:"values",type:va},{name:"options",type:$e,props:{expand:ni}}]),fold:wt("fold",[{name:"values",type:ni},{name:"options",type:$e}]),pivot:wt("pivot",[{name:"keys",type:ni},{name:"values",type:ni},{name:"options",type:$e}]),spread:wt("spread",[{name:"values",type:ni},{name:"options",type:$e}]),unroll:wt("unroll",[{name:"values",type:ni},{name:"options",type:$e,props:{drop:ni}}]),lookup:wt("lookup",[{name:"table",type:dr},{name:"on",type:es},{name:"values",type:ni}]),join:wt("join",[{name:"table",type:dr},{name:"on",type:es},{name:"values",type:ru},{name:"options",type:$e}]),cross:wt("cross",[{name:"table",type:dr},{name:"values",type:ru},{name:"options",type:$e}]),semijoin:wt("semijoin",[{name:"table",type:dr},{name:"on",type:es}]),antijoin:wt("antijoin",[{name:"table",type:dr},{name:"on",type:es}]),concat:wt("concat",[{name:"tables",type:is}]),union:wt("union",[{name:"tables",type:is}]),intersect:wt("intersect",[{name:"tables",type:is}]),except:wt("except",[{name:"tables",type:is}])};class co extends I0{constructor(t,i,n){super(i),this._verbs=t||[],this._table=n}static from({verbs:t,table:i,params:n}){return new co(t.map(h1.from),n,i)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,i){t=t||i(this._table);for(const n of this._verbs)t=n.evaluate(t.params(this._params),i);return t}toObject(){return Sy(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Sy(this,"toAST",{type:Mk})}}function Sy(e,t,i){return{...i,verbs:e._verbs.map(n=>n[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function sC(e,t){return new co(e._verbs.concat(t),e._params,e._table)}for(const e in ph){const t=ph[e];co.prototype["__"+e]=function(i,...n){return sC(i,t(...n))}}function zs(e,t,...i){const n=["_","$"],r=n.slice(0,i.length);return r.push('"use strict"; const '+i.map((s,a)=>s.map((o,c)=>`${n[a]}${c} = ${n[a]}[${c}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...r)(...i)}function aC(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function yd(e,t){const i=Le();return t.forEach((n,r)=>{const s=ne(n)?n:r;if(s){const a=e.column(r)||Q(`Unrecognized column: ${r}`);i.add(s,a)}}),e.create(i)}function f1(e,t,{before:i,after:n}={}){const r=i!=null,s=n!=null;r||s||Q("relocate requires a before or after option."),r&&s&&Q("relocate accepts only one of the before or after options."),t=pn(e,t);const a=[...pn(e,r?i:n).keys()],o=r?a[0]:a.pop(),c=new Map;return e.columnNames().forEach(u=>{const l=!t.has(u);if(u===o){s&&l&&c.set(u,u);for(const[h,d]of t)c.set(h,d);if(s)return}l&&c.set(u,u)}),yd(e,c)}function uo(e,t=n=>n,i=""){const n=e.length;if(!n)return"";let r=t(e[0],0);for(let s=1;s<n;++s)r+=i+t(e[s],s);return r}function md(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function oC(e,t=0,i=e.length){let n=i?e[t++]:ut;for(let r=t;r<i;++r)n>e[r]&&(n=e[r]);return n}function cC(e,t=0,i=e.length){let n=i?e[t++]:ut;for(let r=t;r<i;++r)n<e[r]&&(n=e[r]);return n}function So(e){return La(e)?e:+e}function uC(e,t){const i=e.length;if(!i)return ut;if((t=+t)<=0||i<2)return So(e[0]);if(t>=1)return So(e[i-1]);const n=(i-1)*t,r=Math.floor(n),s=So(e[r]);return La(s)?s:s+(So(e[r+1])-s)*(n-r)}class lC{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:oC(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:cC(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(md)),uC(this._sorted,t)}}const su=(e,t,i)=>zs(t,"{"+uo(e,(n,r)=>`_${r}.${i}(${t});`)+"}",e);function hC(e,t){const{ops:i,output:n}=fC(e,t),r=e[0].fields,s=r.length,a=s===0?gd:s===1?dC:s===2?pC:Q("Unsupported field count: "+s);return new a(r,i,n,t)}function fC(e,t){const i={},n=[];function r(a,o=[]){const c=a+":"+o;if(i[c])return i[c];const u=W0(a),l=u.create(...o);return t<0&&u.stream&&u.stream.forEach(h=>r(h,[])),u.req&&u.req.forEach(h=>r(h,[])),i[c]=l,n.push(l),l}const s=e.map(a=>{const o=r(a.name,a.params);return o.output=a.id,o});return{ops:n,output:s}}class gd extends pF{constructor(t,i,n,r){super(n),this._op=i,this._fields=t,this._stream=!!r}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(i=>i.init(t)),t.values&&(t.list=new lC),t}write(t,i,n){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)i[r[a].output][n]=r[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class dC extends gd{constructor(t,i,n,r){super(t,i,n,r);const s=["state","v1","v2"];this._add=su(i,s,"add"),this._rem=su(i,s,"rem")}add(t,i,n){const r=this._fields[0](i,n);++t.count,ci(r)&&(++t.valid,t.list&&t.list.add(r),this._add(t,r))}rem(t,i,n){const r=this._fields[0](i,n);--t.count,ci(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r))}}class pC extends gd{constructor(t,i,n,r){super(t,i,n,r);const s=["state","v1","v2"];this._add=su(i,s,"add"),this._rem=su(i,s,"rem")}add(t,i,n){const r=this._fields[0](i,n),s=this._fields[1](i,n);++t.count,ci(r)&&ci(s)&&(++t.valid,t.list&&t.list.add([r,s]),this._add(t,r,s))}rem(t,i,n){const r=this._fields[0](i,n),s=this._fields[1](i,n);--t.count,ci(r)&&ci(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r,s))}}function Er(e,t,i){if(t.length){const n=e.data(),{keys:r}=e.groups()||{},s=Ws(e,t),a=r?(o,c)=>s[o][r[c]]:o=>s[o][0];i=i.map(o=>c=>o(c,n,a))}return i}function Ws(e,t,i){if(!t.length)return i;const n=d1(t),r=e.groups(),s=r?r.size:1;return i=i||gu(t.length,()=>Array(s)),s>1?n.forEach(a=>{const o=y1(e,a,r);for(let c=0;c<s;++c)a.write(o[c],i,c)}):n.forEach(a=>{const o=p1(e,a);a.write(o,i,0)}),i}function d1(e,t){const i=[],n={};for(const r of e){const s=r.fields.map(a=>a+"").join(",");(n[s]||(n[s]=[])).push(r)}for(const r in n)i.push(hC(n[r],t));return i}function p1(e,t){const i=t.init(),n=e.totalRows(),r=e.data(),s=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<n;++o)t.add(i,a[o],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))t.add(i,a,r);else for(let a=0;a<n;++a)t.add(i,a,r);return i}function y1(e,t,i){const{keys:n,size:r}=i,s=gu(r,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),c=o.length;for(let u=0;u<c;++u){const l=o[u];t.add(s[n[l]],l,a)}}else if(e.isFiltered()){const o=e.mask();for(let c=o.next(0);c>=0;c=o.next(c+1))t.add(s[n[c]],c,a)}else{const o=e.totalRows();for(let c=0;c<o;++c)t.add(s[n[c]],c,a)}return s}function m1(e,t){const{get:i,names:n,rows:r,size:s}=t,a=n.length;for(let o=0;o<a;++o){const c=e.add(n[o],Array(s)),u=i[o];for(let l=0;l<s;++l)c[l]=u(r[l])}}function g1(e){return{left(t,i,n,r){for(n==null&&(n=0),r==null&&(r=t.length);n<r;){const s=n+r>>>1;e(t[s],i)<0?n=s+1:r=s}return n},right(t,i,n,r){for(n==null&&(n=0),r==null&&(r=t.length);n<r;){const s=n+r>>>1;e(t[s],i)>0?r=s:n=s+1}return n}}}const Iy=g1(md);function yC(e,t,i,n,r){let s,a,o,c,u;const l=_=>a[_-1]===a[_],h=n.length,d=r.length,y=n.length?zs(["w","r","k"],"{"+uo(n,(_,b)=>`r[_${b}.id][k]=_${b}.value(w,_${b}.get);`)+"}",n):()=>{},g={i0:0,i1:0,index:0,size:0,peer:l,init(_,b,w,G){g.index=g.i0=g.i1=0,g.size=b.length,s=_,a=b,c=w,u=G,o=r?r.map(dt=>dt.init()):null;for(let dt=0;dt<h;++dt)n[dt].init();return g},value(_,b){return b(s[_],e)},step(_){const[b,w]=t,G=g.size,dt=g.i0,L=g.i1;g.i0=b!=null?Math.max(0,_-Math.abs(b)):0,g.i1=w!=null?Math.min(G,_+Math.abs(w)+1):G,g.index=_,i&&(g.i0>0&&l(g.i0)&&(g.i0=Iy.left(a,a[g.i0])),g.i1<G&&l(g.i1)&&(g.i1=Iy.right(a,a[g.i1-1])));for(let Et=0;Et<d;++Et){const et=r[Et],Zt=o[Et];for(let bt=dt;bt<g.i0;++bt)et.rem(Zt,s[bt],e);for(let bt=L;bt<g.i1;++bt)et.add(Zt,s[bt],e);et.write(Zt,c,u)}return y(g,c,u),c}};return g}const mC=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),gC=e=>!!e.peers;function _C(e){const{id:t,name:i,fields:n=[],params:r=[]}=e,s=q0(i).create(...r);return n.length&&(s.get=n[0]),s.id=t,s}function bC(e,t,i,n={},r){const s=e.data(),a=vC(r,s),o=a.length,c=zs(["r","d","op"],"{"+uo(t,(u,l)=>`_${l}[r] = $${l}(r, d, op);`)+"}",t,i);e.partitions().forEach((u,l)=>{const h=u.length,d=wC(e,u);for(let g=0;g<o;++g)a[g].init(u,d,n,l);const y=g=>n[g][l];for(let g=0;g<h;++g){for(let _=0;_<o;++_)a[_].step(g);c(u[g],s,y)}})}function vC(e,t){const i={};return e.forEach(n=>{const r=mC(n),s=gC(n),a=`${r},${s}`,{aggOps:o,winOps:c}=i[a]||(i[a]={frame:r,peers:s,aggOps:[],winOps:[]});tf(n.name)?o.push(n):c.push(_C(n))}),Object.values(i).map(n=>yC(t,n.frame,n.peers,n.winOps,d1(n.aggOps,n.frame[0]!=null?-1:1)))}function wC(e,t){if(e.isOrdered()){const i=e.comparator(),n=e.data(),r=t.length,s=new Uint32Array(r);for(let a=1,o=0;a<r;++a)s[a]=i(t[a-1],t[a],n)?++o:o;return s}else return t}function SC(e){return ef(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function _d(e,{names:t,exprs:i,ops:n},r={}){const s=e.totalRows(),a=Le(r.drop?null:e),o=t.map(d=>a.add(d,Array(s))),[c,u]=IC(n),l=e.isGrouped()?e.groups().size:1,h=Ws(e,c,gu(n.length,()=>Array(l)));return u.length?bC(e,o,i,h,u):xC(e,o,i,h),e.create(a)}function IC(e){const t=[],i=[],n=e.length;for(let r=0;r<n;++r){const s=e[r];s.id=r,(SC(s)?i:t).push(s)}return[t,i]}function xC(e,t,i,n){const r=e.mask(),s=e.data(),{keys:a}=e.groups()||{},o=a?(u,l)=>n[u][a[l]]:u=>n[u][0],c=t.length;for(let u=0;u<c;++u){const l=i[u],h=t[u];if(r)for(let d=r.next(0);d>=0;d=r.next(d+1))h[d]=l(d,s,o);else{const d=e.totalRows();for(let y=0;y<d;++y)h[y]=l(y,s,o)}}}function AC(e,t,i={}){const n=_d(e,Ee(t,{table:e}),i);return i.drop||i.before==null&&i.after==null?n:f1(n,Object.keys(t).filter(r=>!e.column(r)),i)}function BC(e,t){if(t.length===0)return e;const i=e.columnNames();return t.reduce((n,r)=>n.antijoin(r.select(i)),e).dedupe()}const Io=2147483648,EC=4294967295;class _1{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let i=0;for(let n=0;n<t;++n)for(let r=this._bits[n];r;++i)r&=r-1;return i}get(t){return this._bits[t>>5]&Io>>>t}set(t){this._bits[t>>5]|=Io>>>t}clear(t){this._bits[t>>5]&=~(Io>>>t)}scan(t){for(let i=this.next(0);i>=0;i=this.next(i+1))t(i)}next(t){const i=this._bits,n=i.length;let r=t>>5,s=i[r]&EC>>>t;for(;r<n;s=i[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(t){let i=this.next(0);for(;t--&&i>=0;)i=this.next(i+1);return i}not(){const t=this._bits,i=t.length;for(let r=0;r<i;++r)t[r]=~t[r];const n=this._size%32;return n&&(t[i-1]&=Io>>n-1),this}and(t){if(t){const i=this._bits,n=t._bits,r=i.length;for(let s=0;s<r;++s)i[s]&=n[s]}return this}or(t){if(t){const i=this._bits,n=t._bits,r=i.length;for(let s=0;s<r;++s)i[s]|=n[s]}return this}}function OC(e,t){const i=e.totalRows(),n=e.mask(),r=e.data(),s=new _1(i);if(n)for(let a=n.next(0);a>=0;a=n.next(a+1))t(a,r)&&s.set(a);else for(let a=0;a<i;++a)t(a,r)&&s.set(a);return e.create({filter:s})}function TC(e,t){const i=Ee({p:t},{table:e});let n=i.exprs[0];if(i.ops.length){const{data:r}=_d(e,i,{drop:!0}).column("p");n=s=>r[s]}return OC(e,n)}function b1(e,{names:t=[],exprs:i=[],ops:n=[]},r={}){if(!t.length)return e;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,o=new Set(r.drop),c=Er(e,n,i),u=Le(),l=new Set(t),h=[],d=[],y=[];e.columnNames().forEach(L=>{if(!o.has(L)){const Et=u.add(L,[]);l.has(L)||(h.push(e.column(L)),d.push(Et))}}),t.forEach(L=>{o.has(L)||(u.has(L)||u.add(L,[]),y.push(u.data[L]))});const g=a?u.add(a,[]):null;let _=0;const b=h.length,w=y.length,G=(L,Et)=>{for(let et=0;et<b;++et)d[et].length=_+Et,d[et].fill(h[et].get(L),_,_+Et)},dt=g?(L,Et)=>{for(let et=0;et<Et;++et)g[L+et]=et}:()=>{};if(w===1){const L=c[0],Et=y[0];e.scan((et,Zt)=>{const bt=Ae(L(et,Zt)),Te=Math.min(bt.length,s);G(et,Te);for(let gi=0;gi<Te;++gi)Et[_+gi]=bt[gi];dt(_,Te),_+=Te})}else e.scan((L,Et)=>{let et=0;const Zt=c.map(bt=>{const Te=Ae(bt(L,Et));return et=Math.min(Math.max(et,Te.length),s),Te});G(L,et);for(let bt=0;bt<w;++bt){const Te=y[bt],gi=Zt[bt];for(let er=0;er<et;++er)Te[_+er]=gi[er]}dt(_,et),_+=et});return e.create(u.new())}function NC(e,{names:t=[],exprs:i=[],ops:n=[]},r={}){if(t.length===0)return e;const[s="key",a="value"]=r.as||[],o=Er(e,n,i);return b1(e,{names:[s,a],exprs:[()=>t,(c,u)=>o.map(l=>l(c,u))]},{...r,drop:t})}function di(e,t,i,n={window:!1}){const r=new Map,s=a=>{a=le(a)?t.columnName(a):a,ne(a)?r.set(a,Ir(a)):Ot(a)?pn(t,a).forEach(s):ce(a)?uv(r,a):Q(`Invalid ${e} value: ${a+""}`)};return Ae(i).forEach(s),n.preparse&&n.preparse(r),Ee(r,{table:t,...n})}function DC(e,t,i){return NC(e,di("fold",e,t),i)}function xy(e,t,i,n){const r=i&&i.length;return FC(r?kC(e,i,n):e,t,r)}function FC(e,{names:t,exprs:i,ops:n},r){const s=Er(e,n,i),a=r?null:Le(e),o=e.totalRows();return t.forEach((c,u)=>{const l=e.column(c),h=r?l.data:a.add(c,Array(o)),d=s[u];e.scan(y=>{const g=l.get(y);h[y]=ci(g)?g:d(y)})}),r?e:e.create(a)}function kC(e,t,i){const n=e.groups(),r=e.data(),s=(n?n.names:[]).concat(t),a=(n?n.get:[]).concat(t.map(g=>e.getter(g))),o=new Set,c=Uc(a);e.scan((g,_)=>o.add(c(g,_)));const u=e.columnNames(),l=Le(),h=u.map(g=>l.add(g,[]));u.forEach((g,_)=>{const b=r[g],w=h[_];e.scan(G=>w.push(b.get(G)))});const d=Uc(a.map((g,_)=>b=>b[_])),y=zs("v","{"+h.map((g,_)=>`_${_}.push(v[$${_}]);`).join("")+"}",h,u.map(g=>s.indexOf(g)));if(n){let g=n.keys.length;const _=i.reduce((w,G)=>w*G.length,n.size),b=new Uint32Array(_+(g-o.size));b.set(n.keys),Ay(n,i,(w,G)=>{o.has(d(w))||(y(w),b[g++]=G[0])}),l.groupby({...n,keys:b})}else Ay(n,i,g=>{o.has(d(g))||y(g)});return e.create(l.new())}function Ay(e,t,i){const n=e?e.get.length:0,r=e?1:0,s=r+t.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(e){const{get:l,rows:h,size:d}=e;a[0]=d,c.push((y,g)=>{const _=h[g];for(let b=0;b<n;++b)y[b]=l[b](_)})}t.forEach((l,h)=>{const d=h+n;a[h+r]=l.length,c.push((y,g)=>y[d]=l[g])});const u=Array(n+t.length);for(let l=0;l<s;++l)c[l](u,0);i(u,o);for(let l=s-1;l>=0;){const h=++o[l];h<a[l]?(c[l](u,h),i(u,o),l=s-1):(o[l]=0,c[l](u,0),--l)}}function bd(e,{names:t,exprs:i,ops:n}){const r=Le(),s=e.groups();return s&&m1(r,s),CC(t,i,s,Ws(e,n),r),e.create(r.new())}function CC(e,t,i,n=[],r){if(!t.length)return;const s=i?i.size:1,a=(c,u)=>n[c][u],o=e.length;for(let c=0;c<o;++c){const u=t[c];if(u.field!=null)r.add(e[c],n[u.field]);else if(s>1){const l=r.add(e[c],Array(s));for(let h=0;h<s;++h)l[h]=u(h,null,a)}else r.add(e[c],[u(0,null,a)])}}function LC(e,t,i={}){if(t=Ee(t,{table:e}),t.names.forEach(n=>e.column(n)?0:Q(`Invalid impute column ${Pi(n)}`)),i.expand){const n={preparse:RC,aggronly:!0},r=di("impute",e,i.expand,n),s=bd(e.ungroup(),r);return xy(e,t,r.names,r.names.map(a=>s.get(a,0)))}else return xy(e,t)}function RC(e){e.forEach((t,i)=>t.field?e.set(i,F0(t+"")):0)}function MC(e,t){const i=e.columnNames();return t.length?t.reduce((n,r)=>n.semijoin(r.select(i)),e).dedupe():e.reify([])}function v1(e,t){const i=new Map;return e.scan((n,r)=>{const s=t(n,r);s!=null&&s===s&&i.set(s,n)}),i}function UC(e,t,i){const n=new Map,r=e.length;for(let s=0;s<r;++s){const a=e[s],o=i(a,t);o!=null&&o===o&&(n.has(o)?n.get(o).push(s):n.set(o,[s]))}return n}function PC(e,t){const i=["i","a","j","b"];return zs(i,"{"+uo(e,(n,r)=>`_${r}.push($${r}(${i}));`)+"}",e,t)}function $C(e,t,i,{names:n,exprs:r},s={}){const a=e.data(),o=e.indices(!1),c=o.length,u=new Int32Array(c),l=t.data(),h=t.indices(!1),d=h.length,y=new Int32Array(d),g=n.length,_=Le(),b=Array(g),w=Array(g);for(let L=0;L<n.length;++L)b[L]=_.add(n[L],[]),w[L]=r[L];const G=PC(b,w);if((ht(i)?jC:VC)(G,i,a,l,o,h,u,y,c,d),s.left)for(let L=0;L<c;++L)u[L]||G(o[L],a,-1,l);if(s.right)for(let L=0;L<d;++L)y[L]||G(-1,a,h[L],l);return e.create(_.new())}function VC(e,t,i,n,r,s,a,o,c,u){for(let l=0;l<c;++l){const h=r[l];for(let d=0;d<u;++d){const y=s[d];t(h,i,y,n)&&(e(h,i,y,n),a[l]=1,o[d]=1)}}}function jC(e,[t,i],n,r,s,a,o,c,u,l){let h,d,y,g,_,b,w,G,dt=e;u>=l?(h=n,d=t,y=o,g=s,_=r,b=i,w=c,G=a):(h=r,d=i,y=c,g=a,_=n,b=t,w=o,G=s,dt=(et,Zt,bt,Te)=>e(bt,Te,et,Zt));const L=UC(G,_,b),Et=g.length;for(let et=0;et<Et;++et){const Zt=g[et],bt=L.get(d(Zt,h));if(bt){const Te=bt.length;for(let gi=0;gi<Te;++gi){const er=bt[gi];dt(Zt,h,G[er],_),w[er]=1}y[et]=1}}}function au(e,t,i){const n=new Map;Ae(i).forEach((s,a)=>{s=le(s)?t.columnName(s):s,ne(s)?n.set(a,Ir(s)):Ot(s)||ce(s)&&s.expr?n.set(a,s):Q(`Invalid ${e} key value: ${s+""}`)});const r=Ee(n,{table:t,aggregate:!1,window:!1});return Uc(r.exprs,!0)}function zC(e,t){const i=new Set(t);return e.filter(n=>i.has(n))}function vd(e,t,i){if(i)ne(i)?i=[i,i]:ht(i)&&i.length===1&&(i=[i[0],i[0]]);else{const n=zC(e.columnNames(),t.columnNames());n.length||Q("Natural join requires shared column names."),i=[n,n]}return i}function w1(e,t,i,n){return i.length!==n.length&&Q("Mismatched number of join keys"),[au("join",e,i),au("join",t,n)]}const WC={aggregate:!1,window:!1},qC={...WC,index:1};function By(e,t,i,n,r={}){i=vd(e,t,i);const s={join:[e,t]};let a;if(ht(i)){const[o,c]=i.map(Ae);a=w1(e,t,o,c),n||(n=YC(e,o,c,r))}else a=Ee({on:i},s).exprs[0],n||(n=[Es(),Es()]);return $C(e,t,a,HC(e,t,n,s,r&&r.suffix),r)}function YC(e,t,i,n){const r=[];t.forEach((a,o)=>ne(a)&&a===i[o]?r.push(a):0);const s=hv(r);if(n.left&&n.right){const a=new Set(r);return[e.columnNames().map(o=>{const c=`[${Pi(o)}]`;return a.has(o)?{[o]:`(a, b) => a${c} == null ? b${c} : a${c}`}:o}),s]}return n.right?[s,Es()]:[Es(),s]}function HC(e,t,i,n,r=[]){if(ht(i)){let s,a,o,c=i.length;s=a=o={names:[],exprs:[]},c--&&(s=di("join",e,i[0],n)),c--&&(a=di("join",t,i[1],qC)),c--&&(o=Ee(i[2],n));const u=new Set,l=new Set(s.names);return a.names.forEach(h=>{l.has(h)&&u.add(h)}),u.size&&(r[0]!==""&&Ey(s.names,u,r[0]||"_1"),r[1]!==""&&Ey(a.names,u,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}else return Ee(i,n)}function Ey(e,t,i){e.forEach((n,r)=>t.has(n)?e[r]=n+i:0)}function GC(e,t,i,n={}){const r=new _1(e.totalRows());return(ht(i)?KC:JC)(r,e,t,i),n.anti&&r.not().and(e.mask()),e.create({filter:r})}function KC(e,t,i,[n,r]){const s=v1(i,r);t.scan((a,o)=>{s.get(n(a,o))>=0&&e.set(a)})}function JC(e,t,i,n){const r=t.numRows(),s=i.numRows(),a=t.data(),o=i.data();if(t.isFiltered()||i.isFiltered()){const c=t.indices(!1),u=i.indices(!1);for(let l=0;l<r;++l){const h=c[l];for(let d=0;d<s;++d)if(n(h,a,u[d],o)){e.set(h);break}}}else for(let c=0;c<r;++c)for(let u=0;u<s;++u)if(n(c,a,u,o)){e.set(c);break}}function Oy(e,t,i,n){i=vd(e,t,i);const r=ht(i)?w1(e,t,...i.map(Ae)):Ee({on:i},{join:[e,t]}).exprs[0];return GC(e,t,r,n)}function QC(e,t,[i,n],{names:r,exprs:s,ops:a}){const o=Le(e),c=e.totalRows();r.forEach(d=>o.add(d,Array(c).fill(ut)));const u=v1(t,n),l=zs(["lr","rr","data"],"{"+uo(r,(d,y)=>`_[${y}][lr] = $[${y}](rr, data);`)+"}",r.map(d=>o.data[d]),Er(t,a,s)),h=t.data();return e.scan((d,y)=>{const g=u.get(i(d,y));g>=0&&l(d,g,h)}),e.create(o)}function XC(e,t,i,n){return i=vd(e,t,i),QC(e,t,[au("lookup",e,i[0]),au("lookup",t,i[1])],di("lookup",t,n))}const yh=(e,t)=>e??t;function ZC(e,t,i,n={}){const{keys:r,keyColumn:s}=t3(e,t,n),a=yh(n.valueSeparator,"_"),o=i.names.length>1?(u,l)=>l+a+r[u]:u=>r[u],c=r.map(u=>Ws(e,i.ops.map(l=>{if(l.name==="count"){const d=y=>u===s[y]?1:NaN;return d.toString=()=>u+":1",{...l,name:"sum",fields:[d]}}const h=l.fields.map(d=>{const y=(g,_)=>u===s[g]?d(g,_):NaN;return y.toString=()=>u+":"+d,y});return{...l,fields:h}})));return e.create(e3(i,o,e.groups(),c))}function t3(e,t,i){const n=i.limit>0?+i.limit:1/0,r=yh(i.sort,!0),s=yh(i.keySeparator,"_"),a=Er(e,t.ops,t.exprs),o=a.length===1?a[0]:(h,d)=>a.map(y=>y(h,d)).join(s),c=Array(e.totalRows());e.scan((h,d)=>c[h]=o(h,d));const u=Ws(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>c[h]],params:[]}])[0][0],l=r?u.sort():u;return{keys:Number.isFinite(n)?l.slice(0,n):l,keyColumn:c}}function e3({names:e,exprs:t},i,n,r){const s=n?n.size:1,a=Le(),o=r.length,c=e.length;let u;const l=(h,d)=>u[h][d];n&&m1(a,n);for(let h=0;h<c;++h){const d=t[h];if(d.field!=null)for(let y=0;y<o;++y)a.add(i(y,e[h]),r[y][d.field]);else if(s>1)for(let y=0;y<o;++y){u=r[y];const g=a.add(i(y,e[h]),Array(s));for(let _=0;_<s;++_)g[_]=d(_,null,l)}else for(let y=0;y<o;++y)u=r[y],a.add(i(y,e[h]),[d(0,null,l)])}return a.new()}function i3(e,t,i,n){return ZC(e,di("fold",e,t),di("fold",e,i,{preparse:n3,aggronly:!0}),n)}function n3(e){e.forEach((t,i)=>t.field?e.set(i,T0(t+"")):0)}function r3(e,t){const i=new Map;return e.columnNames(n=>(i.set(n,n),0)),yd(e,pn(e,t,i))}function Ty(e,t){return bd(e,Ee(t,{table:e,aggronly:!0,window:!1}))}function s3(e,t,i,n){return(t?n?o3:a3:n?u3:c3)(e.length,e,i,n)}function a3(e,t,i){const n=i.length;for(let r=0;r<e;++r)t[r]=i[n*Fs()|0];return t}function o3(e,t,i,n){const r=i.length,s=new Float64Array(r);let a=0;for(let c=0;c<r;++c)s[c]=a+=n(i[c]);const o=g1(md).right;for(let c=0;c<e;++c)t[c]=i[o(s,a*Fs())];return t}function c3(e,t,i){const n=i.length;if(e>=n)return i;for(let r=0;r<e;++r)t[r]=i[r];for(let r=e;r<n;++r){const s=r*Fs();s<e&&(t[s|0]=i[r])}return t}function u3(e,t,i,n){const r=i.length;if(e>=r)return i;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(Fs())/n(i[o]);a.sort((o,c)=>s[o]-s[c]);for(let o=0;o<e;++o)t[o]=i[a[o]];return t}function l3(e,t=0,i=e.length){let n=i-(t=+t);for(;n;){const r=Fs()*n--|0,s=e[n+t];e[n+t]=e[r+t],e[r+t]=s}return e}function h3(e,t,i,n={}){const{replace:r,shuffle:s}=n,a=e.partitions(!1);let o=0;t=a.map((l,h)=>{let d=t(h);return o+=d=r?d:Math.min(l.length,d),d});const c=new Uint32Array(o);let u=0;return a.forEach((l,h)=>{const d=t[h],y=c.subarray(u,u+=d);!r&&d===l.length?y.set(l):s3(y,r,l,i)}),s!==!1&&(a.length>1||!r)&&l3(c),e.reify(c)}function f3(e,t,i={}){return h3(e,d3(e,t),p3(e,i.weight),i)}const S1=e=>t=>e.get(t)||0;function d3(e,t){return le(t)?()=>t:S1(bd(e,Ee({size:t},{table:e,window:!1})).column("size"))}function p3(e,t){return t==null?null:(t=le(t)?e.columnName(t):t,S1(ne(t)?e.column(t):_d(e,Ee({w:t},{table:e}),{drop:!0}).column("w")))}function y3(e,t){return yd(e,pn(e,t))}function m3(e,{names:t,exprs:i,ops:n=[]},r={}){if(t.length===0)return e;const s=t.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,o=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),c=Er(e,n,i),u=Le(),l=t.reduce((d,y,g)=>d.set(y,g),new Map),h=(d,y)=>{const g=g3(e,c[d],o),_=g.length;for(let b=0;b<_;++b)u.add(s[b]||`${y}_${b+1}`,g[b])};return e.columnNames().forEach(d=>{l.has(d)?(a||u.add(d,e.column(d)),h(l.get(d),d),l.delete(d)):u.add(d,e.column(d))}),l.forEach(h),e.create(u)}function g3(e,t,i){const n=e.totalRows(),r=[];return e.scan((s,a)=>{const o=Ae(t(s,a)),c=Math.min(o.length,i);for(;r.length<c;)r.push(Array(n).fill(ut));for(let u=0;u<c;++u)r[u][s]=o[u]}),r}function _3(e,t,i){return m3(e,di("spread",e,t),i)}function b3(e,t){return e.concat(t).dedupe()}function v3(e,t,i){return b1(e,di("unroll",e,t),i&&i.drop?{...i,drop:di("unroll",e,i.drop).names}:i)}function w3(e,t){return e.create({groups:S3(e,t)})}function S3(e,{names:t=[],exprs:i=[],ops:n=[]}){const r=t.length;if(r===0)return null;if(r===1&&!e.isFiltered()&&i[0].field){const y=e.column(i[0].field);if(y.groups)return y.groups(t)}let s=Er(e,n,i);const a=Uc(s),o=e.totalRows(),c=new Uint32Array(o),u={},l=[],h=e.data(),d=e.mask();if(d)for(let y=d.next(0);y>=0;y=d.next(y+1)){const g=a(y,h)+"",_=u[g];c[y]=_??(u[g]=l.push(y)-1)}else for(let y=0;y<o;++y){const g=a(y,h)+"",_=u[g];c[y]=_??(u[g]=l.push(y)-1)}return n.length||(s=s.map(y=>g=>y(g,h))),{keys:c,get:s,names:t,rows:l,size:l.length}}function I3(e,t){return w3(e,di("groupby",e,t))}function x3(e,t){return e.create({order:t})}const A3=(e,t,i,n)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${i}
    : (u > v || v == null) && u != null ? ${n}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${i}
    : v !== v && u === u ? ${n} : `;function B3(e,t){const i=[],n=[],r=[];let s=null,a="0",o="0";e.isGrouped()&&(s=e.groups().keys,a="ka",o="kb");const{ops:c}=Ee(t,{table:e,value:(y,g)=>{if(i.push(y),g.escape){const _=b=>`fn[${r.length}](${b}, data)`;n.push([_("a"),_("b")]),r.push(g.escape)}else n.push([Mc(g,{index:"a",op:a}),Mc(g,{index:"b",op:o})])},window:!1}),u=Ws(e,c),l=(y,g)=>u[y][g],h=i.length;let d="return (a, b) => {"+(l&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let y=0;y<h;++y){const g=t.get(i[y]).desc?-1:1,[_,b]=n[y];d+=A3(_,b,-g,g)}return d+="0;};",Function("op","keys","fn","data",d)(l,s,r,e.data())}function E3(e,t){return x3(e,O3(e,t))}function O3(e,t){let i=-1;const n=new Map,r=s=>n.set(++i+"",s);return t.forEach(s=>{const a=s.expr!=null?s.expr:s;if(ce(a)&&!Ot(a))for(const o in a)r(a[o]);else r(le(a)?Ir(s,e.columnName(a)):ne(a)?Ir(s):Ot(a)?s:Q(`Invalid orderby field: ${s+""}`))}),B3(e,n)}function T3(e,t){const i=e.numRows(),n=i+t.reduce((a,o)=>a+o.numRows(),0);if(i===n)return e;const r=[e,...t],s=Le();return e.columnNames().forEach(a=>{const o=Array(n);let c=0;r.forEach(u=>{const l=u.column(a)||{get:()=>ut};u.scan(h=>o[c++]=l.get(h))}),s.add(a,o)}),e.create(s.new())}function N3(e,t){const i=Le(),n=e.groups(),{get:r,names:s=[],rows:a,size:o=1}=n||{},c=new Uint32Array(o+1);s.forEach(d=>i.add(d,null));const u=n?y1(e,t,n):[p1(e,t)];t.outputs().map(d=>i.add(d,[]));const l=c.length-1;let h=0;for(let d=0;d<l;++d)h+=c[d+1]=t.write(u[d],i.data,c[d]);if(n){const d=e.data();s.forEach((y,g)=>{const _=i.data[y]=Array(h),b=r[g];for(let w=0,G=0;w<o;++w)_.fill(b(a[w],d),G,G+=c[w+1])})}return e.create(i.new())}function D3(e){return e.isGrouped()?e.create({groups:null}):e}function F3(e){return e.isOrdered()?e.create({order:null}):e}const k3={__antijoin:(e,t,i)=>Oy(e,t,i,{anti:!0}),__count:(e,t={})=>Ty(e,{[t.as||"count"]:N0()}),__cross:(e,t,i,n)=>By(e,t,()=>!0,i,{...n,left:!0,right:!0}),__concat:T3,__dedupe:aC,__derive:AC,__except:BC,__filter:TC,__fold:DC,__impute:LC,__intersect:MC,__join:By,__lookup:XC,__pivot:i3,__relocate:f1,__rename:r3,__rollup:Ty,__sample:f3,__select:y3,__semijoin:Oy,__spread:_3,__union:b3,__unroll:v3,__groupby:I3,__orderby:E3,__ungroup:D3,__unorder:F3,__reduce:N3};Object.assign(on.prototype,k3);function C3(e,t){return on.from(e,t)}on.prototype;class L3 extends zi{constructor(t){super(),this.function_store=t.matching,this.func_elected=t.default_func,this.ignore_cols=t.ignore_cols,this.backend=t.backend,this.params=t.defaults??{}}snapshot(){return{params:Qo(this.params),func_elected:Qo(this.func_elected)}}restoreSnapshot(t){this.params=t.params,this.func_elected=t.func_elected}async _execute(t=null){if(Jo(t))return;t.length==1&&yw("func_elected",t[0])?this.func_elected=t[0].func_elected:ww(t)||t.forEach(c=>{this.params=vh(this.params,c)});let i=await this.backend.execute(this.params),n=C3(i),r=n.columnNames();r=aw(r,this.ignore_cols);let s=Lw(r,r),a=this.function_store[0][this.func_elected],o=[];s.forEach(([c,u])=>{let l=a(c,n.array(c),u,n.array(u));o.push({x:c,y:u,value:l})}),this.emit("data",o,"matching_table")}}class R3 extends zi{constructor(){super(),this.overlays={}}snapshot(){return Qo(this.overlays)}restoreSnapshot(t){this.overlays=t}async _execute(t,i){t.forEach(r=>{this.overlays=Aw(this.overlays,r)});let n=[];Py(({left:r,right:s},a)=>{n.push({key:a,left:r,right:s})},this.overlays),this.emit("data",n,"overlay")}}class M3 extends zi{constructor(t){super(),this.backend=t.backend,this.name=t.name,this.params=t.params}async execute(t){this.params=t??this.params;const i=await this.backend.execute(this.params);let n=[];for(const s of i){let a=JSON.parse(s.feature);n.push(a)}const r={type:"FeatureCollection",name:this.name,features:n};return this.emit("data",r,this.name),r}}let Ny={array:yA,url:mA,duckdb:kE,cdt:LE,identity:RE,random:ME,query:UE,matching:L3,overlay:R3,map:M3},U3=0;class KL extends Map{get backends(){return Ly(this)}registerClass(t,i){Ny[t]=i}createBackends(t){for(const i of t)this.createBackend(i)}createBackend(t){t.id=t.id??`_backendid_${U3++}`;let i=Ny[t.type];if(!i)throw new Error(`Backend type ${t.type} not found`);let n=new i(t);return n.id=t.id,this[t.id]=n,console.info("createBackend",t.id,n),n}}export{Vy as $,cn as A,KL as B,ou as C,rw as D,Z1 as E,aw as F,mI as G,Ih as H,Zy as I,Ha as J,EI as K,tc as L,L3 as M,Aa as N,R3 as O,xh as P,UE as Q,Se as R,hi as S,kn as T,Ea as U,jd as V,MI as W,TI as X,im as Y,V3 as Z,Wt as _,W3 as a,KI as a0,j3 as a1,ec as a2,jy as a3,kd as a4,zi as a5,Qo as a6,kw as a7,fA as b,Pt as c,bh as d,ww as e,Py as f,Ew as g,Ly as h,K1 as i,nw as j,xa as k,Jo as l,vh as m,Nt as n,gh as o,wd as p,E1 as q,ky as r,Dy as s,A1 as t,R1 as u,z3 as v,cu as w,Fy as x,P1 as y,vl as z};
