import{w as nh,b as kv}from"./paths.7ae5d3da.js";import{D as Cv}from"./index.ff7e3b01.js";function Ot(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function Pt(e){return function t(n){return arguments.length===0||Ot(n)?t:e.apply(this,arguments)}}function Mt(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return Ot(n)?t:Pt(function(r){return e(n,r)});default:return Ot(n)&&Ot(i)?t:Ot(n)?Pt(function(r){return e(r,i)}):Ot(i)?Pt(function(r){return e(n,r)}):e(n,i)}}}function Rv(e,t){e=e||[],t=t||[];var n,i=e.length,r=t.length,s=[];for(n=0;n<i;)s[s.length]=e[n],n+=1;for(n=0;n<r;)s[s.length]=t[n],n+=1;return s}function ih(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,i){return t.apply(this,arguments)};case 3:return function(n,i,r){return t.apply(this,arguments)};case 4:return function(n,i,r,s){return t.apply(this,arguments)};case 5:return function(n,i,r,s,a){return t.apply(this,arguments)};case 6:return function(n,i,r,s,a,o){return t.apply(this,arguments)};case 7:return function(n,i,r,s,a,o,c){return t.apply(this,arguments)};case 8:return function(n,i,r,s,a,o,c,u){return t.apply(this,arguments)};case 9:return function(n,i,r,s,a,o,c,u,l){return t.apply(this,arguments)};case 10:return function(n,i,r,s,a,o,c,u,l,h){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Zc(e){return function t(n,i,r){switch(arguments.length){case 0:return t;case 1:return Ot(n)?t:Mt(function(s,a){return e(n,s,a)});case 2:return Ot(n)&&Ot(i)?t:Ot(n)?Mt(function(s,a){return e(s,i,a)}):Ot(i)?Mt(function(s,a){return e(n,s,a)}):Pt(function(s){return e(n,i,s)});default:return Ot(n)&&Ot(i)&&Ot(r)?t:Ot(n)&&Ot(i)?Mt(function(s,a){return e(s,a,r)}):Ot(n)&&Ot(r)?Mt(function(s,a){return e(s,i,a)}):Ot(i)&&Ot(r)?Mt(function(s,a){return e(n,s,a)}):Ot(n)?Pt(function(s){return e(s,i,r)}):Ot(i)?Pt(function(s){return e(n,s,r)}):Ot(r)?Pt(function(s){return e(n,i,s)}):e(n,i,r)}}}const tu=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Mv(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function Lv(e,t,n){return function(){if(arguments.length===0)return n();var i=arguments[arguments.length-1];if(!tu(i)){for(var r=0;r<e.length;){if(typeof i[e[r]]=="function")return i[e[r]].apply(i,Array.prototype.slice.call(arguments,0,-1));r+=1}if(Mv(i)){var s=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(i)}}return n.apply(this,arguments)}}const fd={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function cy(e){return Object.prototype.toString.call(e)==="[object String]"}var uy=Pt(function(t){return tu(t)?!0:!t||typeof t!="object"||cy(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),Uv=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},e}();function Pv(e){return new Uv(e)}var $v=Mt(function(t,n){return ih(t.length,function(){return t.apply(n,arguments)})});function Vv(e,t,n){for(var i=0,r=n.length;i<r;){if(t=e["@@transducer/step"](t,n[i]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i+=1}return e["@@transducer/result"](t)}function dd(e,t,n){for(var i=n.next();!i.done;){if(t=e["@@transducer/step"](t,i.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i=n.next()}return e["@@transducer/result"](t)}function pd(e,t,n,i){return e["@@transducer/result"](n[i]($v(e["@@transducer/step"],e),t))}var yd=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function ly(e,t,n){if(typeof e=="function"&&(e=Pv(e)),uy(n))return Vv(e,t,n);if(typeof n["fantasy-land/reduce"]=="function")return pd(e,t,n,"fantasy-land/reduce");if(n[yd]!=null)return dd(e,t,n[yd]());if(typeof n.next=="function")return dd(e,t,n);if(typeof n.reduce=="function")return pd(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}function li(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var md=Object.prototype.toString,hy=function(){return md.call(arguments)==="[object Arguments]"?function(t){return md.call(t)==="[object Arguments]"}:function(t){return li("callee",t)}}(),jv=!{toString:null}.propertyIsEnumerable("toString"),gd=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],_d=function(){return arguments.propertyIsEnumerable("length")}(),zv=function(t,n){for(var i=0;i<t.length;){if(t[i]===n)return!0;i+=1}return!1},Wv=Pt(typeof Object.keys=="function"&&!_d?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,i,r=[],s=_d&&hy(t);for(n in t)li(n,t)&&(!s||n!=="length")&&(r[r.length]=n);if(jv)for(i=gd.length-1;i>=0;)n=gd[i],li(n,t)&&!zv(r,n)&&(r[r.length]=n),i-=1;return r});const _a=Wv;var qv=Zc(ly);const Yv=qv;var Gv=Pt(function(t){for(var n=_a(t),i=n.length,r=[],s=0;s<i;)r[s]=t[n[s]],s+=1;return r});const fy=Gv;var Hv=Pt(function(t){return t==null});const jo=Hv;function Kv(e){return function t(n){for(var i,r,s,a=[],o=0,c=n.length;o<c;){if(uy(n[o]))for(i=e?t(n[o]):n[o],s=0,r=i.length;s<r;)a[a.length]=i[s],s+=1;else a[a.length]=n[o];o+=1}return a}}function Jv(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var cl=Pt(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function dy(e,t,n,i){var r=function(a){for(var o=t.length,c=0;c<o;){if(e===t[c])return n[c];c+=1}t[c]=e,n[c]=a;for(var u in e)e.hasOwnProperty(u)&&(a[u]=i?dy(e[u],t,n,!0):e[u]);return a};switch(cl(e)){case"Object":return r(Object.create(Object.getPrototypeOf(e)));case"Array":return r([]);case"Date":return new Date(e.valueOf());case"RegExp":return Jv(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var Qv=Pt(function(t){return t!=null&&typeof t.clone=="function"?t.clone():dy(t,[],[],!0)});const zo=Qv;function Xv(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function py(e,t){return function(){var n=arguments.length;if(n===0)return t();var i=arguments[n-1];return tu(i)||typeof i[e]!="function"?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var Zv=Zc(py("slice",function(t,n,i){return Array.prototype.slice.call(i,t,n)})),t1=Pt(py("tail",Zv(1,1/0)));const e1=t1;function n1(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return ih(arguments[0].length,Yv(Xv,arguments[0],e1(arguments)))}function i1(e){return e}var r1=Pt(i1);const s1=r1;function bd(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function vd(e,t,n){for(var i=0,r=n.length;i<r;){if(e(t,n[i]))return!0;i+=1}return!1}function a1(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function o1(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const Bu=typeof Object.is=="function"?Object.is:o1;function wd(e,t,n,i){var r=bd(e),s=bd(t);function a(o,c){return rh(o,c,n.slice(),i.slice())}return!vd(function(o,c){return!vd(a,c,o)},s,r)}function rh(e,t,n,i){if(Bu(e,t))return!0;var r=cl(e);if(r!==cl(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(r){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&a1(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Bu(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Bu(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var s=n.length-1;s>=0;){if(n[s]===e)return i[s]===t;s-=1}switch(r){case"Map":return e.size!==t.size?!1:wd(e.entries(),t.entries(),n.concat([e]),i.concat([t]));case"Set":return e.size!==t.size?!1:wd(e.values(),t.values(),n.concat([e]),i.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=_a(e);if(a.length!==_a(t).length)return!1;var o=n.concat([e]),c=i.concat([t]);for(s=a.length-1;s>=0;){var u=a[s];if(!(li(u,t)&&rh(t[u],e[u],o,c)))return!1;s-=1}return!0}var yy=Mt(function(t,n){return rh(t,n,[],[])});function c1(e,t,n){var i,r;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(i=1/t;n<e.length;){if(r=e[n],r===0&&1/r===i)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(r=e[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(yy(e[n],t))return n;n+=1}return-1}function ul(e,t){return c1(t,e,0)>=0}function u1(e,t){for(var n=0,i=t.length,r=[];n<i;)e(t[n])&&(r[r.length]=t[n]),n+=1;return r}function Wo(e){return Object.prototype.toString.call(e)==="[object Object]"}var l1=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=fd.init,e.prototype["@@transducer/result"]=fd.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},e}(),h1=Mt(function(t,n){return new l1(t,n)}),f1=Mt(Lv(["fantasy-land/filter","filter"],h1,function(e,t){return Wo(t)?ly(function(n,i){return e(t[i])&&(n[i]=t[i]),n},{},_a(t)):u1(e,t)}));const d1=f1;var p1=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!Sd(t,!0,this)},e.prototype.has=function(t){return Sd(t,!1,this)},e}();function Sd(e,t,n){var i=typeof e,r,s;switch(i){case"string":case"number":return e===0&&1/e===-1/0?n._items["-0"]?!0:(t&&(n._items["-0"]=!0),!1):n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?e in n._items[i]?!0:(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var a=e?1:0;return n._items[i][a]?!0:(t&&(n._items[i][a]=!0),!1)}else return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?ul(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return n._items[i]?!0:(t&&(n._items[i]=!0),!1);case"object":if(e===null)return n._items.null?!0:(t&&(n._items.null=!0),!1);default:return i=Object.prototype.toString.call(e),i in n._items?ul(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var y1=Mt(function(t,n){for(var i=[],r=0,s=t.length,a=n.length,o=new p1,c=0;c<a;c+=1)o.add(n[c]);for(;r<s;)o.add(t[r])&&(i[i.length]=t[r]),r+=1;return i});const m1=y1;function g1(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}var _1=Pt(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():tu(t)?[]:cy(t)?"":Wo(t)?{}:hy(t)?function(){return arguments}():g1(t)?t.constructor.from(""):void 0}),b1=Pt(Kv(!0));const v1=b1;var w1=Mt(function(t,n){for(var i=_a(n),r=0;r<i.length;){var s=i[r];t(n[s],s,n),r+=1}return n});const my=w1;var S1=Pt(function(t){for(var n={},i=0;i<t.length;)n[t[i][0]]=t[i][1],i+=1;return n});const I1=S1;var x1=Mt(function(t,n){return jo(n)?!1:t in n});const A1=x1;var E1=Mt(ul);const T1=E1;function O1(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,i=arguments.length;n<i;){var r=arguments[n];if(r!=null)for(var s in r)li(s,r)&&(t[s]=r[s]);n+=1}return t}const gy=typeof Object.assign=="function"?Object.assign:O1;var B1=Mt(function(t,n){return n instanceof t||n!=null&&(n.constructor===t||t.name==="Object"&&typeof n=="object")});const sh=B1;var N1=Pt(function(t){return t!=null&&yy(t,_1(t))});const F1=N1;var D1=Zc(function(t,n,i){var r={},s;for(s in n)li(s,n)&&(r[s]=li(s,i)?t(s,n[s],i[s]):n[s]);for(s in i)li(s,i)&&!li(s,r)&&(r[s]=i[s]);return r}),k1=Zc(function e(t,n,i){return D1(function(r,s,a){return Wo(s)&&Wo(a)?e(t,s,a):t(r,s,a)},n,i)}),C1=Mt(function(t,n){return k1(function(i,r,s){return s},t,n)});const R1=C1;var M1=Mt(function(t,n){return gy({},n,t)});const L1=M1;var U1=Mt(function(t,n){return gy({},t,n)});const ah=U1;function P1(e){return Mt(function(t,n){return ih(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var $1=P1(Rv);const V1=$1;var j1=Mt(function(t,n){var i=Number(n),r=0,s;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(s=new Array(i);r<i;)s[r]=t(r),r+=1;return s});const z1=j1;var W1=Mt(function(t,n){for(var i=0,r=t.length,s,a=n.length,o=[];i<r;){for(s=0;s<a;)o[o.length]=[t[i],n[s]],s+=1;i+=1}return o});const q1=W1;var Y1={value:()=>{}};function _y(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new vo(n)}function vo(e){this._=e}function G1(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}vo.prototype=_y.prototype={constructor:vo,on:function(e,t){var n=this._,i=G1(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=H1(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=Id(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Id(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vo(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function H1(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Id(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Y1,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ll="http://www.w3.org/1999/xhtml";const xd={svg:"http://www.w3.org/2000/svg",xhtml:ll,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xd.hasOwnProperty(t)?{space:xd[t],local:e}:e}function K1(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ll&&t.documentElement.namespaceURI===ll?t.createElement(e):t.createElementNS(n,e)}}function J1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function by(e){var t=eu(e);return(t.local?J1:K1)(t)}function Q1(){}function oh(e){return e==null?Q1:function(){return this.querySelector(e)}}function X1(e){typeof e!="function"&&(e=oh(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=new Array(a),c,u,l=0;l<a;++l)(c=s[l])&&(u=e.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),o[l]=u);return new on(i,this._parents)}function Z1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tw(){return[]}function vy(e){return e==null?tw:function(){return this.querySelectorAll(e)}}function ew(e){return function(){return Z1(e.apply(this,arguments))}}function nw(e){typeof e=="function"?e=ew(e):e=vy(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var a=t[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&(i.push(e.call(c,c.__data__,u,a)),r.push(c));return new on(i,r)}function wy(e){return function(){return this.matches(e)}}function Sy(e){return function(t){return t.matches(e)}}var iw=Array.prototype.find;function rw(e){return function(){return iw.call(this.children,e)}}function sw(){return this.firstElementChild}function aw(e){return this.select(e==null?sw:rw(typeof e=="function"?e:Sy(e)))}var ow=Array.prototype.filter;function cw(){return Array.from(this.children)}function uw(e){return function(){return ow.call(this.children,e)}}function lw(e){return this.selectAll(e==null?cw:uw(typeof e=="function"?e:Sy(e)))}function hw(e){typeof e!="function"&&(e=wy(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],c,u=0;u<a;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new on(i,this._parents)}function Iy(e){return new Array(e.length)}function fw(){return new on(this._enter||this._groups.map(Iy),this._parents)}function qo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qo.prototype={constructor:qo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dw(e){return function(){return e}}function pw(e,t,n,i,r,s){for(var a=0,o,c=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):n[a]=new qo(e,s[a]);for(;a<c;++a)(o=t[a])&&(r[a]=o)}function yw(e,t,n,i,r,s,a){var o,c,u=new Map,l=t.length,h=s.length,d=new Array(l),p;for(o=0;o<l;++o)(c=t[o])&&(d[o]=p=a.call(c,c.__data__,o,t)+"",u.has(p)?r[o]=c:u.set(p,c));for(o=0;o<h;++o)p=a.call(e,s[o],o,s)+"",(c=u.get(p))?(i[o]=c,c.__data__=s[o],u.delete(p)):n[o]=new qo(e,s[o]);for(o=0;o<l;++o)(c=t[o])&&u.get(d[o])===c&&(r[o]=c)}function mw(e){return e.__data__}function gw(e,t){if(!arguments.length)return Array.from(this,mw);var n=t?yw:pw,i=this._parents,r=this._groups;typeof e!="function"&&(e=dw(e));for(var s=r.length,a=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var l=i[u],h=r[u],d=h.length,p=_w(e.call(l,l&&l.__data__,u,i)),g=p.length,_=o[u]=new Array(g),b=a[u]=new Array(g),w=c[u]=new Array(d);n(l,h,_,b,w,p,t);for(var L=0,lt=0,E,St;L<g;++L)if(E=_[L]){for(L>=lt&&(lt=L+1);!(St=b[lt])&&++lt<g;);E._next=St||null}}return a=new on(a,i),a._enter=o,a._exit=c,a}function _w(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bw(){return new on(this._exit||this._groups.map(Iy),this._parents)}function vw(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function ww(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var u=n[c],l=i[c],h=u.length,d=o[c]=new Array(h),p,g=0;g<h;++g)(p=u[g]||l[g])&&(d[g]=p);for(;c<r;++c)o[c]=n[c];return new on(o,this._parents)}function Sw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Iw(e){e||(e=xw);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,c=r[s]=new Array(o),u,l=0;l<o;++l)(u=a[l])&&(c[l]=u);c.sort(t)}return new on(r,this._parents).order()}function xw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Aw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ew(){return Array.from(this)}function Tw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function Ow(){let e=0;for(const t of this)++e;return e}function Bw(){return!this.node()}function Nw(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,a=r.length,o;s<a;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function Fw(e){return function(){this.removeAttribute(e)}}function Dw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kw(e,t){return function(){this.setAttribute(e,t)}}function Cw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Rw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Mw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Lw(e,t){var n=eu(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Dw:Fw:typeof t=="function"?n.local?Mw:Rw:n.local?Cw:kw)(n,t))}function xy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uw(e){return function(){this.style.removeProperty(e)}}function Pw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $w(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Vw(e,t,n){return arguments.length>1?this.each((t==null?Uw:typeof t=="function"?$w:Pw)(e,t,n??"")):ys(this.node(),e)}function ys(e,t){return e.style.getPropertyValue(t)||xy(e).getComputedStyle(e,null).getPropertyValue(t)}function jw(e){return function(){delete this[e]}}function zw(e,t){return function(){this[e]=t}}function Ww(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qw(e,t){return arguments.length>1?this.each((t==null?jw:typeof t=="function"?Ww:zw)(e,t)):this.node()[e]}function Ay(e){return e.trim().split(/^|\s+/)}function ch(e){return e.classList||new Ey(e)}function Ey(e){this._node=e,this._names=Ay(e.getAttribute("class")||"")}Ey.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ty(e,t){for(var n=ch(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Oy(e,t){for(var n=ch(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Yw(e){return function(){Ty(this,e)}}function Gw(e){return function(){Oy(this,e)}}function Hw(e,t){return function(){(t.apply(this,arguments)?Ty:Oy)(this,e)}}function Kw(e,t){var n=Ay(e+"");if(arguments.length<2){for(var i=ch(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Hw:t?Yw:Gw)(n,t))}function Jw(){this.textContent=""}function Qw(e){return function(){this.textContent=e}}function Xw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Zw(e){return arguments.length?this.each(e==null?Jw:(typeof e=="function"?Xw:Qw)(e)):this.node().textContent}function tS(){this.innerHTML=""}function eS(e){return function(){this.innerHTML=e}}function nS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function iS(e){return arguments.length?this.each(e==null?tS:(typeof e=="function"?nS:eS)(e)):this.node().innerHTML}function rS(){this.nextSibling&&this.parentNode.appendChild(this)}function sS(){return this.each(rS)}function aS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oS(){return this.each(aS)}function cS(e){var t=typeof e=="function"?e:by(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uS(){return null}function lS(e,t){var n=typeof e=="function"?e:by(e),i=t==null?uS:typeof t=="function"?t:oh(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function hS(){var e=this.parentNode;e&&e.removeChild(this)}function fS(){return this.each(hS)}function dS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yS(e){return this.select(e?pS:dS)}function mS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function gS(e){return function(t){e.call(this,t,this.__data__)}}function _S(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function bS(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function vS(e,t,n){return function(){var i=this.__on,r,s=gS(t);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function wS(e,t,n){var i=_S(e+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,l;c<u;++c)for(r=0,l=o[c];r<s;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value}return}for(o=t?vS:bS,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function By(e,t,n){var i=xy(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function SS(e,t){return function(){return By(this,e,t)}}function IS(e,t){return function(){return By(this,e,t.apply(this,arguments))}}function xS(e,t){return this.each((typeof t=="function"?IS:SS)(e,t))}function*AS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var ES=[null];function on(e,t){this._groups=e,this._parents=t}function ja(){return new on([[document.documentElement]],ES)}function TS(){return this}on.prototype=ja.prototype={constructor:on,select:X1,selectAll:nw,selectChild:aw,selectChildren:lw,filter:hw,data:gw,enter:fw,exit:bw,join:vw,merge:ww,selection:TS,order:Sw,sort:Iw,call:Aw,nodes:Ew,node:Tw,size:Ow,empty:Bw,each:Nw,attr:Lw,style:Vw,property:qw,classed:Kw,text:Zw,html:iS,raise:sS,lower:oS,append:cS,insert:lS,remove:fS,clone:yS,datum:mS,on:wS,dispatch:xS,[Symbol.iterator]:AS};function uh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ny(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function za(){}var ba=.7,Yo=1/ba,rs="\\s*([+-]?\\d+)\\s*",va="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OS=/^#([0-9a-f]{3,8})$/,BS=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),NS=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),FS=new RegExp(`^rgba\\(${rs},${rs},${rs},${va}\\)$`),DS=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${va}\\)$`),kS=new RegExp(`^hsl\\(${va},${Mn},${Mn}\\)$`),CS=new RegExp(`^hsla\\(${va},${Mn},${Mn},${va}\\)$`),Ad={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uh(za,wa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ed,formatHex:Ed,formatHex8:RS,formatHsl:MS,formatRgb:Td,toString:Td});function Ed(){return this.rgb().formatHex()}function RS(){return this.rgb().formatHex8()}function MS(){return Fy(this).formatHsl()}function Td(){return this.rgb().formatRgb()}function wa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=OS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Od(t):n===3?new ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BS.exec(e))?new ye(t[1],t[2],t[3],1):(t=NS.exec(e))?new ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=FS.exec(e))?oo(t[1],t[2],t[3],t[4]):(t=DS.exec(e))?oo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kS.exec(e))?Fd(t[1],t[2]/100,t[3]/100,1):(t=CS.exec(e))?Fd(t[1],t[2]/100,t[3]/100,t[4]):Ad.hasOwnProperty(e)?Od(Ad[e]):e==="transparent"?new ye(NaN,NaN,NaN,0):null}function Od(e){return new ye(e>>16&255,e>>8&255,e&255,1)}function oo(e,t,n,i){return i<=0&&(e=t=n=NaN),new ye(e,t,n,i)}function LS(e){return e instanceof za||(e=wa(e)),e?(e=e.rgb(),new ye(e.r,e.g,e.b,e.opacity)):new ye}function Go(e,t,n,i){return arguments.length===1?LS(e):new ye(e,t,n,i??1)}function ye(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}uh(ye,Go,Ny(za,{brighter(e){return e=e==null?Yo:Math.pow(Yo,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ba:Math.pow(ba,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ye(Or(this.r),Or(this.g),Or(this.b),Ho(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bd,formatHex:Bd,formatHex8:US,formatRgb:Nd,toString:Nd}));function Bd(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}`}function US(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}${vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nd(){const e=Ho(this.opacity);return`${e===1?"rgb(":"rgba("}${Or(this.r)}, ${Or(this.g)}, ${Or(this.b)}${e===1?")":`, ${e})`}`}function Ho(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Or(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vr(e){return e=Or(e),(e<16?"0":"")+e.toString(16)}function Fd(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new en(e,t,n,i)}function Fy(e){if(e instanceof en)return new en(e.h,e.s,e.l,e.opacity);if(e instanceof za||(e=wa(e)),!e)return new en;if(e instanceof en)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,c=(s+r)/2;return o?(t===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-t)/o+2:a=(t-n)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new en(a,o,c,e.opacity)}function PS(e,t,n,i){return arguments.length===1?Fy(e):new en(e,t,n,i??1)}function en(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}uh(en,PS,Ny(za,{brighter(e){return e=e==null?Yo:Math.pow(Yo,e),new en(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ba:Math.pow(ba,e),new en(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new ye(Nu(e>=240?e-240:e+120,r,i),Nu(e,r,i),Nu(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new en(Dd(this.h),co(this.s),co(this.l),Ho(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ho(this.opacity);return`${e===1?"hsl(":"hsla("}${Dd(this.h)}, ${co(this.s)*100}%, ${co(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dd(e){return e=(e||0)%360,e<0?e+360:e}function co(e){return Math.max(0,Math.min(1,e||0))}function Nu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function $S(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function VS(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return $S((n-i/t)*t,a,r,s,o)}}const lh=e=>()=>e;function Dy(e,t){return function(n){return e+n*t}}function jS(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function yR(e,t){var n=t-e;return n?Dy(e,n>180||n<-180?n-360*Math.round(n/360):n):lh(isNaN(e)?t:e)}function zS(e){return(e=+e)==1?ky:function(t,n){return n-t?jS(t,n,e):lh(isNaN(t)?n:t)}}function ky(e,t){var n=t-e;return n?Dy(e,n):lh(isNaN(e)?t:e)}const kd=function e(t){var n=zS(t);function i(r,s){var a=n((r=Go(r)).r,(s=Go(s)).r),o=n(r.g,s.g),c=n(r.b,s.b),u=ky(r.opacity,s.opacity);return function(l){return r.r=a(l),r.g=o(l),r.b=c(l),r.opacity=u(l),r+""}}return i.gamma=e,i}(1);function WS(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=Go(t[a]),i[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return i=e(i),r=e(r),s=e(s),o.opacity=1,function(c){return o.r=i(c),o.g=r(c),o.b=s(c),o+""}}}var mR=WS(VS);function ki(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fu=new RegExp(hl.source,"g");function qS(e){return function(){return e}}function YS(e){return function(t){return e(t)+""}}function GS(e,t){var n=hl.lastIndex=Fu.lastIndex=0,i,r,s,a=-1,o=[],c=[];for(e=e+"",t=t+"";(i=hl.exec(e))&&(r=Fu.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,c.push({i:a,x:ki(i,r)})),n=Fu.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?YS(c[0].x):qS(t):(t=c.length,function(u){for(var l=0,h;l<t;++l)o[(h=c[l]).i]=h.x(u);return o.join("")})}var Cd=180/Math.PI,fl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cy(e,t,n,i,r,s){var a,o,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,c/=o),e*i<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Cd,skewX:Math.atan(c)*Cd,scaleX:a,scaleY:o}}var uo;function HS(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fl:Cy(t.a,t.b,t.c,t.d,t.e,t.f)}function KS(e){return e==null||(uo||(uo=document.createElementNS("http://www.w3.org/2000/svg","g")),uo.setAttribute("transform",e),!(e=uo.transform.baseVal.consolidate()))?fl:(e=e.matrix,Cy(e.a,e.b,e.c,e.d,e.e,e.f))}function Ry(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,l,h,d,p,g){if(u!==h||l!==d){var _=p.push("translate(",null,t,null,n);g.push({i:_-4,x:ki(u,h)},{i:_-2,x:ki(l,d)})}else(h||d)&&p.push("translate("+h+t+d+n)}function a(u,l,h,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:ki(u,l)})):l&&h.push(r(h)+"rotate("+l+i)}function o(u,l,h,d){u!==l?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:ki(u,l)}):l&&h.push(r(h)+"skewX("+l+i)}function c(u,l,h,d,p,g){if(u!==h||l!==d){var _=p.push(r(p)+"scale(",null,",",null,")");g.push({i:_-4,x:ki(u,h)},{i:_-2,x:ki(l,d)})}else(h!==1||d!==1)&&p.push(r(p)+"scale("+h+","+d+")")}return function(u,l){var h=[],d=[];return u=e(u),l=e(l),s(u.translateX,u.translateY,l.translateX,l.translateY,h,d),a(u.rotate,l.rotate,h,d),o(u.skewX,l.skewX,h,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,d),u=l=null,function(p){for(var g=-1,_=d.length,b;++g<_;)h[(b=d[g]).i]=b.x(p);return h.join("")}}}var JS=Ry(HS,"px, ","px)","deg)"),QS=Ry(KS,", ",")",")"),ms=0,ea=0,Hs=0,My=1e3,Ko,na,Jo=0,Nr=0,nu=0,Sa=typeof performance=="object"&&performance.now?performance:Date,Ly=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hh(){return Nr||(Ly(XS),Nr=Sa.now()+nu)}function XS(){Nr=0}function Qo(){this._call=this._time=this._next=null}Qo.prototype=Uy.prototype={constructor:Qo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?hh():+n)+(t==null?0:+t),!this._next&&na!==this&&(na?na._next=this:Ko=this,na=this),this._call=e,this._time=n,dl()},stop:function(){this._call&&(this._call=null,this._time=1/0,dl())}};function Uy(e,t,n){var i=new Qo;return i.restart(e,t,n),i}function ZS(){hh(),++ms;for(var e=Ko,t;e;)(t=Nr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ms}function Rd(){Nr=(Jo=Sa.now())+nu,ms=ea=0;try{ZS()}finally{ms=0,eI(),Nr=0}}function tI(){var e=Sa.now(),t=e-Jo;t>My&&(nu-=t,Jo=e)}function eI(){for(var e,t=Ko,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ko=n);na=e,dl(i)}function dl(e){if(!ms){ea&&(ea=clearTimeout(ea));var t=e-Nr;t>24?(e<1/0&&(ea=setTimeout(Rd,e-Sa.now()-nu)),Hs&&(Hs=clearInterval(Hs))):(Hs||(Jo=Sa.now(),Hs=setInterval(tI,My)),ms=1,Ly(Rd))}}function Md(e,t,n){var i=new Qo;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var nI=_y("start","end","cancel","interrupt"),iI=[],Py=0,Ld=1,pl=2,wo=3,Ud=4,yl=5,So=6;function iu(e,t,n,i,r,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;rI(e,n,{name:t,index:i,group:r,on:nI,tween:iI,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Py})}function fh(e,t){var n=fn(e,t);if(n.state>Py)throw new Error("too late; already scheduled");return n}function Yn(e,t){var n=fn(e,t);if(n.state>wo)throw new Error("too late; already running");return n}function fn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rI(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Uy(s,0,n.time);function s(u){n.state=Ld,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var l,h,d,p;if(n.state!==Ld)return c();for(l in i)if(p=i[l],p.name===n.name){if(p.state===wo)return Md(a);p.state===Ud?(p.state=So,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[l]):+l<t&&(p.state=So,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[l])}if(Md(function(){n.state===wo&&(n.state=Ud,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=pl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===pl){for(n.state=wo,r=new Array(d=n.tween.length),l=0,h=-1;l<d;++l)(p=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=p);r.length=h+1}}function o(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=yl,1),h=-1,d=r.length;++h<d;)r[h].call(e,l);n.state===yl&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=So,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function sI(e,t){var n=e.__transition,i,r,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}r=i.state>pl&&i.state<yl,i.state=So,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function aI(e){return this.each(function(){sI(this,e)})}function oI(e,t){var n,i;return function(){var r=Yn(this,e),s=r.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function cI(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Yn(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=o;break}c===u&&r.push(o)}s.tween=r}}function uI(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=fn(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?oI:cI)(n,e,t))}function dh(e,t,n){var i=e._id;return e.each(function(){var r=Yn(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return fn(r,i).value[t]}}function $y(e,t){var n;return(typeof t=="number"?ki:t instanceof wa?kd:(n=wa(t))?(t=n,kd):GS)(e,t)}function lI(e){return function(){this.removeAttribute(e)}}function hI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fI(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===i?s:s=t(i=a,n)}}function dI(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?s:s=t(i=a,n)}}function pI(e,t,n){var i,r,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o)))}}function yI(e,t,n){var i,r,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o)))}}function mI(e,t){var n=eu(e),i=n==="transform"?QS:$y;return this.attrTween(e,typeof t=="function"?(n.local?yI:pI)(n,i,dh(this,"attr."+e,t)):t==null?(n.local?hI:lI)(n):(n.local?dI:fI)(n,i,t))}function gI(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _I(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bI(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&_I(e,s)),n}return r._value=t,r}function vI(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&gI(e,s)),n}return r._value=t,r}function wI(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=eu(e);return this.tween(n,(i.local?bI:vI)(i,t))}function SI(e,t){return function(){fh(this,e).delay=+t.apply(this,arguments)}}function II(e,t){return t=+t,function(){fh(this,e).delay=t}}function xI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SI:II)(t,e)):fn(this.node(),t).delay}function AI(e,t){return function(){Yn(this,e).duration=+t.apply(this,arguments)}}function EI(e,t){return t=+t,function(){Yn(this,e).duration=t}}function TI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?AI:EI)(t,e)):fn(this.node(),t).duration}function OI(e,t){if(typeof t!="function")throw new Error;return function(){Yn(this,e).ease=t}}function BI(e){var t=this._id;return arguments.length?this.each(OI(t,e)):fn(this.node(),t).ease}function NI(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Yn(this,e).ease=n}}function FI(e){if(typeof e!="function")throw new Error;return this.each(NI(this._id,e))}function DI(e){typeof e!="function"&&(e=wy(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],c,u=0;u<a;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new fi(i,this._parents,this._name,this._id)}function kI(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var c=t[o],u=n[o],l=c.length,h=a[o]=new Array(l),d,p=0;p<l;++p)(d=c[p]||u[p])&&(h[p]=d);for(;o<i;++o)a[o]=t[o];return new fi(a,this._parents,this._name,this._id)}function CI(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function RI(e,t,n){var i,r,s=CI(t)?fh:Yn;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}function MI(e,t){var n=this._id;return arguments.length<2?fn(this.node(),n).on.on(e):this.each(RI(n,e,t))}function LI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function UI(){return this.on("end.remove",LI(this._id))}function PI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oh(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],c=o.length,u=s[a]=new Array(c),l,h,d=0;d<c;++d)(l=o[d])&&(h=e.call(l,l.__data__,d,o))&&("__data__"in l&&(h.__data__=l.__data__),u[d]=h,iu(u[d],t,n,d,u,fn(l,n)));return new fi(s,this._parents,t,n)}function $I(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vy(e));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var c=i[o],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var d=e.call(l,l.__data__,h,c),p,g=fn(l,n),_=0,b=d.length;_<b;++_)(p=d[_])&&iu(p,t,n,_,d,g);s.push(d),a.push(l)}return new fi(s,a,t,n)}var VI=ja.prototype.constructor;function jI(){return new VI(this._groups,this._parents)}function zI(e,t){var n,i,r;return function(){var s=ys(this,e),a=(this.style.removeProperty(e),ys(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function Vy(e){return function(){this.style.removeProperty(e)}}function WI(e,t,n){var i,r=n+"",s;return function(){var a=ys(this,e);return a===r?null:a===i?s:s=t(i=a,n)}}function qI(e,t,n){var i,r,s;return function(){var a=ys(this,e),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),ys(this,e))),a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o))}}function YI(e,t){var n,i,r,s="style."+t,a="end."+s,o;return function(){var c=Yn(this,e),u=c.on,l=c.value[s]==null?o||(o=Vy(t)):void 0;(u!==n||r!==l)&&(i=(n=u).copy()).on(a,r=l),c.on=i}}function GI(e,t,n){var i=(e+="")=="transform"?JS:$y;return t==null?this.styleTween(e,zI(e,i)).on("end.style."+e,Vy(e)):typeof t=="function"?this.styleTween(e,qI(e,i,dh(this,"style."+e,t))).each(YI(this._id,e)):this.styleTween(e,WI(e,i,t),n).on("end.style."+e,null)}function HI(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function KI(e,t,n){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&HI(e,a,n)),i}return s._value=t,s}function JI(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,KI(e,t,n??""))}function QI(e){return function(){this.textContent=e}}function XI(e){return function(){var t=e(this);this.textContent=t??""}}function ZI(e){return this.tween("text",typeof e=="function"?XI(dh(this,"text",e)):QI(e==null?"":e+""))}function tx(e){return function(t){this.textContent=e.call(this,t)}}function ex(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&tx(r)),t}return i._value=e,i}function nx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ex(e))}function ix(){for(var e=this._name,t=this._id,n=jy(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,u=0;u<o;++u)if(c=a[u]){var l=fn(c,t);iu(c,e,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new fi(i,this._parents,e,n)}function rx(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--r===0&&s()}};n.each(function(){var u=Yn(this,i),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),r===0&&s()})}var sx=0;function fi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function jy(){return++sx}var Jn=ja.prototype;fi.prototype={constructor:fi,select:PI,selectAll:$I,selectChild:Jn.selectChild,selectChildren:Jn.selectChildren,filter:DI,merge:kI,selection:jI,transition:ix,call:Jn.call,nodes:Jn.nodes,node:Jn.node,size:Jn.size,empty:Jn.empty,each:Jn.each,on:MI,attr:mI,attrTween:wI,style:GI,styleTween:JI,text:ZI,textTween:nx,remove:UI,tween:uI,delay:xI,duration:TI,ease:BI,easeVarying:FI,end:rx,[Symbol.iterator]:Jn[Symbol.iterator]};function ax(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ox={time:null,delay:0,duration:250,ease:ax};function cx(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ux(e){var t,n;e instanceof fi?(t=e._id,e=e._name):(t=jy(),(n=ox).time=hh(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&iu(c,e,t,u,a,n||cx(c,t));return new fi(i,this._parents,e,t)}ja.prototype.interrupt=aI;ja.prototype.transition=ux;var Pd={},Du={},ku=34,Ks=10,Cu=13;function zy(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function lx(e,t){var n=zy(e);return function(i,r){return t(n(i),r,e)}}function $d(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ue(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function hx(e){return e<0?"-"+ue(-e,6):e>9999?"+"+ue(e,6):ue(e,4)}function fx(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":hx(e.getUTCFullYear())+"-"+ue(e.getUTCMonth()+1,2)+"-"+ue(e.getUTCDate(),2)+(r?"T"+ue(t,2)+":"+ue(n,2)+":"+ue(i,2)+"."+ue(r,3)+"Z":i?"T"+ue(t,2)+":"+ue(n,2)+":"+ue(i,2)+"Z":n||t?"T"+ue(t,2)+":"+ue(n,2)+"Z":"")}function dx(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,d){var p,g,_=r(h,function(b,w){if(p)return p(b,w-1);g=b,p=d?lx(b,d):zy(b)});return _.columns=g||[],_}function r(h,d){var p=[],g=h.length,_=0,b=0,w,L=g<=0,lt=!1;h.charCodeAt(g-1)===Ks&&--g,h.charCodeAt(g-1)===Cu&&--g;function E(){if(L)return Du;if(lt)return lt=!1,Pd;var Z,Ht=_,mt;if(h.charCodeAt(Ht)===ku){for(;_++<g&&h.charCodeAt(_)!==ku||h.charCodeAt(++_)===ku;);return(Z=_)>=g?L=!0:(mt=h.charCodeAt(_++))===Ks?lt=!0:mt===Cu&&(lt=!0,h.charCodeAt(_)===Ks&&++_),h.slice(Ht+1,Z-1).replace(/""/g,'"')}for(;_<g;){if((mt=h.charCodeAt(Z=_++))===Ks)lt=!0;else if(mt===Cu)lt=!0,h.charCodeAt(_)===Ks&&++_;else if(mt!==n)continue;return h.slice(Ht,Z)}return L=!0,h.slice(Ht,g)}for(;(w=E())!==Du;){for(var St=[];w!==Pd&&w!==Du;)St.push(w),w=E();d&&(St=d(St,b++))==null||p.push(St)}return p}function s(h,d){return h.map(function(p){return d.map(function(g){return l(p[g])}).join(e)})}function a(h,d){return d==null&&(d=$d(h)),[d.map(l).join(e)].concat(s(h,d)).join(`
`)}function o(h,d){return d==null&&(d=$d(h)),s(h,d).join(`
`)}function c(h){return h.map(u).join(`
`)}function u(h){return h.map(l).join(e)}function l(h){return h==null?"":h instanceof Date?fx(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:a,formatBody:o,formatRows:c,formatRow:u,formatValue:l}}var px=dx(","),yx=px.parse;function mx(e){for(var t in e){var n=e[t].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))gx&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const gx=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function _x(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function bx(e,t){return fetch(e,t).then(_x)}function vx(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),bx(t,n).then(function(r){return e(r,i)})}}var wx=vx(yx);function ia(e,t,n){this.k=e,this.x=t,this.y=n}ia.prototype={constructor:ia,scale:function(e){return e===1?this:new ia(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ia(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ia.prototype;let Sx=nh(null),gR=nh(null),_R=nh(null),Ix=0;class xx{constructor(){this.listeners={}}on(t,n){let i=Ix++;return this.listeners[t]=this.listeners[t]||{},this.listeners[t][i]=n,()=>{delete this.listeners[t][i]}}emit(t,...n){(fy(this.listeners[t])??[]).forEach(r=>{r(...n)})}}L1(void 0);class Gn extends xx{constructor(){super(),this.registeredViews=[],this.on("data",(t,...n)=>{this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{if(jo(i))return;let a=n1(...r)(t);i instanceof Function?i(a,...n):i.render(a,...n)})})}snapshot(){}restoreSnapshot(t){}async init(){}registerView(t,n){console.log("Backend.registerView",t,n),n=v1([n??s1]),this.registeredViews.push({view:t,postprocessFuncs:n})}addPostprocessing(t,n){this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{var s;((s=i.spec)==null?void 0:s.id)==t&&r.push(n)})}async execute(t,n){return jo(t)&&(t=[]),sh(Array,t)||(t=[t]),this._execute(t,n)}async _execute(t,n){}}class Ax extends Gn{constructor(t){super(),this.data=t.data||[]}async _execute(t,...n){this.emit("data",this.data,...n)}}class Ex extends Gn{constructor(t){super(),this.data=null,this.promise=null,this.promise=wx(t.url,mx)}async _execute(t,n){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,n)}}function x(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(l){try{u(i.next(l))}catch(h){a(h)}}function c(l){try{u(i.throw(l))}catch(h){a(h)}}function u(l){l.done?s(l.value):r(l.value).then(o,c)}u((i=i.apply(e,t||[])).next())})}function Vd(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function Jt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,s=[];return r={},o("next"),o("throw"),o("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(p){return function(g){return Promise.resolve(g).then(p,h)}}function o(p,g){i[p]&&(r[p]=function(_){return new Promise(function(b,w){s.push([p,_,b,w])>1||c(p,_)})},g&&(r[p]=g(r[p])))}function c(p,g){try{u(i[p](g))}catch(_){d(s[0][3],_)}}function u(p){p.value instanceof v?Promise.resolve(p.value.v).then(l,h):d(s[0][2],p)}function l(p){c("next",p)}function h(p){c("throw",p)}function d(p,g){p(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Br(e){var t,n;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,s){t[r]=e[r]?function(a){return(n=!n)?{value:v(e[r](a)),done:!1}:s?s(a):a}:s}}function qe(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vd=="function"?Vd(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,c){a=e[s](a),r(o,c,a.done,a.value)})}}function r(s,a,o,c){Promise.resolve(c).then(function(u){s({value:u,done:o})},a)}}const Tx=new TextDecoder("utf-8"),ml=e=>Tx.decode(e),Ox=new TextEncoder,ph=e=>Ox.encode(e),Bx=e=>typeof e=="number",Wy=e=>typeof e=="boolean",Vt=e=>typeof e=="function",ge=e=>e!=null&&Object(e)===e,Fr=e=>ge(e)&&Vt(e.then),Wa=e=>ge(e)&&Vt(e[Symbol.iterator]),Rs=e=>ge(e)&&Vt(e[Symbol.asyncIterator]),gl=e=>ge(e)&&ge(e.schema),qy=e=>ge(e)&&"done"in e&&"value"in e,Yy=e=>ge(e)&&Vt(e.stat)&&Bx(e.fd),Gy=e=>ge(e)&&yh(e.body),ru=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Nx=e=>ge(e)&&Vt(e.abort)&&Vt(e.getWriter)&&!ru(e),yh=e=>ge(e)&&Vt(e.cancel)&&Vt(e.getReader)&&!ru(e),Fx=e=>ge(e)&&Vt(e.end)&&Vt(e.write)&&Wy(e.writable)&&!ru(e),Hy=e=>ge(e)&&Vt(e.read)&&Vt(e.pipe)&&Wy(e.readable)&&!ru(e),Dx=e=>ge(e)&&Vt(e.clear)&&Vt(e.bytes)&&Vt(e.position)&&Vt(e.setPosition)&&Vt(e.capacity)&&Vt(e.getBufferIdentifier)&&Vt(e.createLong),mh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function kx(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,c=0,u=0,l=e.length;++c<l;){if(a=t[u],o=e[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,n,i-n+s)}return t}function jd(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function Ln(e,t){const n=kx(e),i=n.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const l=n.length;++c<l;){if(r=n[c],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?jd(a,s,o):a=s;break}jd(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function vt(e,t){let n=qy(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=ph(n)),n instanceof ArrayBuffer?new e(n):n instanceof mh?new e(n):Dx(n)?vt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Js=e=>vt(Int32Array,e),ht=e=>vt(Uint8Array,e),_l=e=>(e.next(),e);function*Cx(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof mh?n(t):Wa(t)?t:n(t);return yield*_l(function*(r){let s=null;do s=r.next(yield vt(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const Rx=e=>Cx(Uint8Array,e);function Ky(e,t){return Jt(this,arguments,function*(){if(Fr(t))return yield v(yield v(yield*Br(qe(Ky(e,yield v(t))))));const i=function(a){return Jt(this,arguments,function*(){yield yield v(yield v(a))})},r=function(a){return Jt(this,arguments,function*(){yield v(yield*Br(qe(_l(function*(o){let c=null;do c=o.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof mh?i(t):Wa(t)?r(t):Rs(t)?t:i(t);return yield v(yield*Br(qe(_l(function(a){return Jt(this,arguments,function*(){let o=null;do o=yield v(a.next(yield yield v(vt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield v(new e)})}const Mx=e=>Ky(Uint8Array,e);function gh(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let i=-1;++i<=t;)n[i]+=e}return n}function Lx(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const Pe={fromIterable(e){return lo(Ux(e))},fromAsyncIterable(e){return lo(Px(e))},fromDOMStream(e){return lo($x(e))},fromNodeStream(e){return lo(jx(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},lo=e=>(e.next(),e);function*Ux(e){let t,n=!1,i=[],r,s,a,o=0;function c(){return s==="peek"?Ln(i,a)[0]:([r,i,o]=Ln(i,a),r)}({cmd:s,size:a}=yield null);const u=Rx(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield c());while(a<o);while(!t)}catch(l){(n=!0)&&typeof u.throw=="function"&&u.throw(l)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function Px(e){return Jt(this,arguments,function*(){let n,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Ln(r,o)[0]:([s,r,c]=Ln(r,o),s)}({cmd:a,size:o}=yield yield v(null));const l=Mx(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.next()):yield v(l.next(o-c)),!n&&s.byteLength>0&&(r.push(s),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&typeof l.throw=="function"&&(yield v(l.throw(h)))}finally{i===!1&&typeof l.return=="function"&&(yield v(l.return(new Uint8Array(0))))}return yield v(null)})}function $x(e){return Jt(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Ln(r,o)[0]:([s,r,c]=Ln(r,o),s)}({cmd:a,size:o}=yield yield v(null));const l=new Vx(e);try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.read()):yield v(l.read(o-c)),!n&&s.byteLength>0&&(r.push(ht(s)),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&(yield v(l.cancel(h)))}finally{i===!1?yield v(l.cancel()):e.locked&&l.releaseLock()}return yield v(null)})}let Vx=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return x(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return x(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ht(n)),n})}};const Ru=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function jx(e){return Jt(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,c=0,u=[],l;function h(){return a==="peek"?Ln(u,o)[0]:([l,u,c]=Ln(u,o),l)}if({cmd:a,size:o}=yield yield v(null),e.isTTY)return yield yield v(new Uint8Array(0)),yield v(null);try{n[0]=Ru(e,"end"),n[1]=Ru(e,"error");do{if(n[2]=Ru(e,"readable"),[i,s]=yield v(Promise.race(n.map(p=>p[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-c)?(l=ht(e.read(o-c)),l.byteLength<o-c&&(l=ht(e.read()))):l=ht(e.read()),l.byteLength>0&&(u.push(l),c+=l.byteLength)),r||o<=c)do({cmd:a,size:o}=yield yield v(h()));while(o<c)}while(!r)}finally{yield v(d(n,i==="error"?s:null))}return yield v(null);function d(p,g){return l=u=null,new Promise((_,b)=>{for(const[w,L]of p)e.off(w,L);try{const w=e.destroy;w&&w.call(e,g),g=void 0}catch(w){g=w||g}finally{g!=null?b(g):_()}})}})}var Be;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Be||(Be={}));var Ne;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Ne||(Ne={}));var me;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(me||(me={}));var di;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(di||(di={}));var ft;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ft||(ft={}));var Ui;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ui||(Ui={}));var pt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(pt||(pt={}));var m;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(m||(m={}));var ei;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ei||(ei={}));const zx=void 0;function Ia(e){if(e===null)return"null";if(e===zx)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Ia(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Wx=Symbol.for("isArrowBigNum");function dn(e,...t){return t.length===0?Object.setPrototypeOf(vt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}dn.prototype[Wx]=!0;dn.prototype.toJSON=function(){return`"${Aa(this)}"`};dn.prototype.valueOf=function(){return Jy(this)};dn.prototype.toString=function(){return Aa(this)};dn.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Jy(this);case"string":return Aa(this);case"default":return qx(this)}return Aa(this)};function ss(...e){return dn.apply(this,e)}function as(...e){return dn.apply(this,e)}function xa(...e){return dn.apply(this,e)}Object.setPrototypeOf(ss.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(as.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(xa.prototype,Object.create(Uint32Array.prototype));Object.assign(ss.prototype,dn.prototype,{constructor:ss,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(as.prototype,dn.prototype,{constructor:as,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(xa.prototype,dn.prototype,{constructor:xa,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function Jy(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new BigUint64Array(t,n,i),a=r&&s.at(-1)&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),c=BigInt(0);if(a){for(const u of s)o+=~u*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const u of s)o+=u*(BigInt(1)<<BigInt(32)*c++);return o}const Aa=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Mu(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Mu(e);t=t.slice();let i=1;for(let s=0;s<t.length;s++){const a=t[s],o=~a+i;t[s]=o,i&=a===0?1:0}return`-${Mu(t)}`},qx=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Aa(e);function Mu(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}let Yx=class Qy{static new(t,n){switch(n){case!0:return new ss(t);case!1:return new as(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ss(t)}return t.byteLength===16?new xa(t):new as(t)}static signed(t){return new ss(t)}static unsigned(t){return new as(t)}static decimal(t){return new xa(t)}constructor(t,n){return Qy.new(t,n)}};function cn(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var Xy,Zy,tm,em,nm,im,rm,sm,am,om,cm,um,lm,hm,fm,dm,pm,ym,mm;let K=class bl{static isNull(t){return(t==null?void 0:t.typeId)===m.Null}static isInt(t){return(t==null?void 0:t.typeId)===m.Int}static isFloat(t){return(t==null?void 0:t.typeId)===m.Float}static isBinary(t){return(t==null?void 0:t.typeId)===m.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===m.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===m.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===m.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===m.Date}static isTime(t){return(t==null?void 0:t.typeId)===m.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===m.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===m.Interval}static isList(t){return(t==null?void 0:t.typeId)===m.List}static isStruct(t){return(t==null?void 0:t.typeId)===m.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===m.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===m.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===m.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===m.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===m.Dictionary}static isDenseUnion(t){return bl.isUnion(t)&&t.mode===Ne.Dense}static isSparseUnion(t){return bl.isUnion(t)&&t.mode===Ne.Sparse}get typeId(){return m.NONE}};Xy=Symbol.toStringTag;K[Xy]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(K.prototype);let Pi=class extends K{toString(){return"Null"}get typeId(){return m.Null}};Zy=Symbol.toStringTag;Pi[Zy]=(e=>e[Symbol.toStringTag]="Null")(Pi.prototype);let $i=class extends K{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return m.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};tm=Symbol.toStringTag;$i[tm]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))($i.prototype);let Ea=class extends $i{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(Ea.prototype,"ArrayType",{value:Int32Array});let Ta=class extends K{constructor(t){super(),this.precision=t}get typeId(){return m.Float}get ArrayType(){switch(this.precision){case me.HALF:return Uint16Array;case me.SINGLE:return Float32Array;case me.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};em=Symbol.toStringTag;Ta[em]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Ta.prototype);let Xo=class extends K{constructor(){super()}get typeId(){return m.Binary}toString(){return"Binary"}};nm=Symbol.toStringTag;Xo[nm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Xo.prototype);let Zo=class extends K{constructor(){super()}get typeId(){return m.Utf8}toString(){return"Utf8"}};im=Symbol.toStringTag;Zo[im]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Zo.prototype);let tc=class extends K{constructor(){super()}get typeId(){return m.Bool}toString(){return"Bool"}};rm=Symbol.toStringTag;tc[rm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(tc.prototype);let ec=class extends K{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return m.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};sm=Symbol.toStringTag;ec[sm]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(ec.prototype);let nc=class extends K{constructor(t){super(),this.unit=t}get typeId(){return m.Date}toString(){return`Date${(this.unit+1)*32}<${di[this.unit]}>`}};am=Symbol.toStringTag;nc[am]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(nc.prototype);let Oa=class extends K{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return m.Time}toString(){return`Time${this.bitWidth}<${ft[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};om=Symbol.toStringTag;Oa[om]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Oa.prototype);let ic=class extends K{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return m.Timestamp}toString(){return`Timestamp<${ft[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};cm=Symbol.toStringTag;ic[cm]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(ic.prototype);let rc=class extends K{constructor(t){super(),this.unit=t}get typeId(){return m.Interval}toString(){return`Interval<${Ui[this.unit]}>`}};um=Symbol.toStringTag;rc[um]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(rc.prototype);let sc=class extends K{constructor(t){super(),this.children=[t]}get typeId(){return m.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};lm=Symbol.toStringTag;sc[lm]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(sc.prototype);let ne=class extends K{constructor(t){super(),this.children=t}get typeId(){return m.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};hm=Symbol.toStringTag;ne[hm]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ne.prototype);let ac=class extends K{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return m.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};fm=Symbol.toStringTag;ac[fm]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(ac.prototype);let oc=class extends K{constructor(t){super(),this.byteWidth=t}get typeId(){return m.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};dm=Symbol.toStringTag;oc[dm]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(oc.prototype);let cc=class extends K{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return m.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};pm=Symbol.toStringTag;cc[pm]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(cc.prototype);let uc=class extends K{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return m.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};ym=Symbol.toStringTag;uc[ym]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(uc.prototype);const Gx=(e=>()=>++e)(-1);let gs=class extends K{constructor(t,n,i,r){super(),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?Gx():cn(i)}get typeId(){return m.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};mm=Symbol.toStringTag;gs[mm]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(gs.prototype);function ni(e){const t=e;switch(e.typeId){case m.Decimal:return e.bitWidth/32;case m.Timestamp:return 2;case m.Date:return 1+t.unit;case m.Interval:return 1+t.unit;case m.FixedSizeList:return t.listSize;case m.FixedSizeBinary:return t.byteWidth;default:return 1}}let it=class{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Hx(this,t,n)}getVisitFnByTypeId(t,n=!0){return Ur(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function Hx(e,t,n=!0){return typeof t=="number"?Ur(e,t,n):typeof t=="string"&&t in m?Ur(e,m[t],n):t&&t instanceof K?Ur(e,zd(t),n):t!=null&&t.type&&t.type instanceof K?Ur(e,zd(t.type),n):Ur(e,m.NONE,n)}function Ur(e,t,n=!0){let i=null;switch(t){case m.Null:i=e.visitNull;break;case m.Bool:i=e.visitBool;break;case m.Int:i=e.visitInt;break;case m.Int8:i=e.visitInt8||e.visitInt;break;case m.Int16:i=e.visitInt16||e.visitInt;break;case m.Int32:i=e.visitInt32||e.visitInt;break;case m.Int64:i=e.visitInt64||e.visitInt;break;case m.Uint8:i=e.visitUint8||e.visitInt;break;case m.Uint16:i=e.visitUint16||e.visitInt;break;case m.Uint32:i=e.visitUint32||e.visitInt;break;case m.Uint64:i=e.visitUint64||e.visitInt;break;case m.Float:i=e.visitFloat;break;case m.Float16:i=e.visitFloat16||e.visitFloat;break;case m.Float32:i=e.visitFloat32||e.visitFloat;break;case m.Float64:i=e.visitFloat64||e.visitFloat;break;case m.Utf8:i=e.visitUtf8;break;case m.Binary:i=e.visitBinary;break;case m.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case m.Date:i=e.visitDate;break;case m.DateDay:i=e.visitDateDay||e.visitDate;break;case m.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case m.Timestamp:i=e.visitTimestamp;break;case m.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case m.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case m.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case m.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case m.Time:i=e.visitTime;break;case m.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case m.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case m.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case m.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case m.Decimal:i=e.visitDecimal;break;case m.List:i=e.visitList;break;case m.Struct:i=e.visitStruct;break;case m.Union:i=e.visitUnion;break;case m.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case m.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case m.Dictionary:i=e.visitDictionary;break;case m.Interval:i=e.visitInterval;break;case m.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case m.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case m.FixedSizeList:i=e.visitFixedSizeList;break;case m.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${m[t]}'`)}function zd(e){switch(e.typeId){case m.Null:return m.Null;case m.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?m.Int8:m.Uint8;case 16:return n?m.Int16:m.Uint16;case 32:return n?m.Int32:m.Uint32;case 64:return n?m.Int64:m.Uint64}return m.Int}case m.Float:switch(e.precision){case me.HALF:return m.Float16;case me.SINGLE:return m.Float32;case me.DOUBLE:return m.Float64}return m.Float;case m.Binary:return m.Binary;case m.Utf8:return m.Utf8;case m.Bool:return m.Bool;case m.Decimal:return m.Decimal;case m.Time:switch(e.unit){case ft.SECOND:return m.TimeSecond;case ft.MILLISECOND:return m.TimeMillisecond;case ft.MICROSECOND:return m.TimeMicrosecond;case ft.NANOSECOND:return m.TimeNanosecond}return m.Time;case m.Timestamp:switch(e.unit){case ft.SECOND:return m.TimestampSecond;case ft.MILLISECOND:return m.TimestampMillisecond;case ft.MICROSECOND:return m.TimestampMicrosecond;case ft.NANOSECOND:return m.TimestampNanosecond}return m.Timestamp;case m.Date:switch(e.unit){case di.DAY:return m.DateDay;case di.MILLISECOND:return m.DateMillisecond}return m.Date;case m.Interval:switch(e.unit){case Ui.DAY_TIME:return m.IntervalDayTime;case Ui.YEAR_MONTH:return m.IntervalYearMonth}return m.Interval;case m.Map:return m.Map;case m.List:return m.List;case m.Struct:return m.Struct;case m.Union:switch(e.mode){case Ne.Dense:return m.DenseUnion;case Ne.Sparse:return m.SparseUnion}return m.Union;case m.FixedSizeBinary:return m.FixedSizeBinary;case m.FixedSizeList:return m.FixedSizeList;case m.Dictionary:return m.Dictionary}throw new Error(`Unrecognized type '${m[e.typeId]}'`)}it.prototype.visitInt8=null;it.prototype.visitInt16=null;it.prototype.visitInt32=null;it.prototype.visitInt64=null;it.prototype.visitUint8=null;it.prototype.visitUint16=null;it.prototype.visitUint32=null;it.prototype.visitUint64=null;it.prototype.visitFloat16=null;it.prototype.visitFloat32=null;it.prototype.visitFloat64=null;it.prototype.visitDateDay=null;it.prototype.visitDateMillisecond=null;it.prototype.visitTimestampSecond=null;it.prototype.visitTimestampMillisecond=null;it.prototype.visitTimestampMicrosecond=null;it.prototype.visitTimestampNanosecond=null;it.prototype.visitTimeSecond=null;it.prototype.visitTimeMillisecond=null;it.prototype.visitTimeMicrosecond=null;it.prototype.visitTimeNanosecond=null;it.prototype.visitDenseUnion=null;it.prototype.visitSparseUnion=null;it.prototype.visitIntervalDayTime=null;it.prototype.visitIntervalYearMonth=null;const gm=new Float64Array(1),Mr=new Uint32Array(gm.buffer);function _m(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function Kx(e){if(e!==e)return 32256;gm[0]=e;const t=(Mr[1]&2147483648)>>16&65535;let n=Mr[1]&2146435072,i=0;return n>=1089470464?Mr[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Mr[1]&1048575)>>10):n<=1056964608?(i=1048576+(Mr[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Mr[1]&1048575)+512>>10),t|n|i&65535}let W=class extends it{};function H(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const Jx=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},_h=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Qx=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Xx=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},bm=(e,t,n,i)=>{if(n+1<t.length){const{[n]:r,[n+1]:s}=t;e.set(i.subarray(0,s-r),r)}},Zx=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},vi=({values:e},t,n)=>{e[t]=n},bh=({values:e},t,n)=>{e[t]=n},vm=({values:e},t,n)=>{e[t]=Kx(n)},tA=(e,t,n)=>{switch(e.type.precision){case me.HALF:return vm(e,t,n);case me.SINGLE:case me.DOUBLE:return bh(e,t,n)}},wm=({values:e},t,n)=>{Jx(e,t,n.valueOf())},Sm=({values:e},t,n)=>{_h(e,t*2,n.valueOf())},eA=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},nA=({values:e,valueOffsets:t},n,i)=>bm(e,t,n,i),iA=({values:e,valueOffsets:t},n,i)=>{bm(e,t,n,ph(i))},rA=(e,t,n)=>{e.type.unit===di.DAY?wm(e,t,n):Sm(e,t,n)},Im=({values:e},t,n)=>_h(e,t*2,n/1e3),xm=({values:e},t,n)=>_h(e,t*2,n),Am=({values:e},t,n)=>Qx(e,t*2,n),Em=({values:e},t,n)=>Xx(e,t*2,n),sA=(e,t,n)=>{switch(e.type.unit){case ft.SECOND:return Im(e,t,n);case ft.MILLISECOND:return xm(e,t,n);case ft.MICROSECOND:return Am(e,t,n);case ft.NANOSECOND:return Em(e,t,n)}},Tm=({values:e},t,n)=>{e[t]=n},Om=({values:e},t,n)=>{e[t]=n},Bm=({values:e},t,n)=>{e[t]=n},Nm=({values:e},t,n)=>{e[t]=n},aA=(e,t,n)=>{switch(e.type.unit){case ft.SECOND:return Tm(e,t,n);case ft.MILLISECOND:return Om(e,t,n);case ft.MICROSECOND:return Bm(e,t,n);case ft.NANOSECOND:return Nm(e,t,n)}},oA=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},cA=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=Ge.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n.get(++a))},uA=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=Ge.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const u of c)if(s(i,a,u),++a>=o)break},lA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),hA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),fA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),dA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),pA=(e,t,n)=>{const i=e.type.children.map(s=>Ge.getVisitFn(s.type)),r=n instanceof Map?fA(t,n):n instanceof Nt?hA(t,n):Array.isArray(n)?lA(t,n):dA(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},yA=(e,t,n)=>{e.type.mode===Ne.Dense?Fm(e,t,n):Dm(e,t,n)},Fm=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];Ge.visit(r,e.valueOffsets[t],n)},Dm=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];Ge.visit(r,t,n)},mA=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},gA=(e,t,n)=>{e.type.unit===Ui.DAY_TIME?km(e,t,n):Cm(e,t,n)},km=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},Cm=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},_A=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=Ge.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};W.prototype.visitBool=H(Zx);W.prototype.visitInt=H(vi);W.prototype.visitInt8=H(vi);W.prototype.visitInt16=H(vi);W.prototype.visitInt32=H(vi);W.prototype.visitInt64=H(vi);W.prototype.visitUint8=H(vi);W.prototype.visitUint16=H(vi);W.prototype.visitUint32=H(vi);W.prototype.visitUint64=H(vi);W.prototype.visitFloat=H(tA);W.prototype.visitFloat16=H(vm);W.prototype.visitFloat32=H(bh);W.prototype.visitFloat64=H(bh);W.prototype.visitUtf8=H(iA);W.prototype.visitBinary=H(nA);W.prototype.visitFixedSizeBinary=H(eA);W.prototype.visitDate=H(rA);W.prototype.visitDateDay=H(wm);W.prototype.visitDateMillisecond=H(Sm);W.prototype.visitTimestamp=H(sA);W.prototype.visitTimestampSecond=H(Im);W.prototype.visitTimestampMillisecond=H(xm);W.prototype.visitTimestampMicrosecond=H(Am);W.prototype.visitTimestampNanosecond=H(Em);W.prototype.visitTime=H(aA);W.prototype.visitTimeSecond=H(Tm);W.prototype.visitTimeMillisecond=H(Om);W.prototype.visitTimeMicrosecond=H(Bm);W.prototype.visitTimeNanosecond=H(Nm);W.prototype.visitDecimal=H(oA);W.prototype.visitList=H(cA);W.prototype.visitStruct=H(pA);W.prototype.visitUnion=H(yA);W.prototype.visitDenseUnion=H(Fm);W.prototype.visitSparseUnion=H(Dm);W.prototype.visitDictionary=H(mA);W.prototype.visitInterval=H(gA);W.prototype.visitIntervalDayTime=H(km);W.prototype.visitIntervalYearMonth=H(Cm);W.prototype.visitFixedSizeList=H(_A);W.prototype.visitMap=H(uA);const Ge=new W,Ze=Symbol.for("parent"),os=Symbol.for("rowIndex");let vh=class{constructor(t,n){return this[Ze]=t,this[os]=n,new Proxy(this,new vA)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[os],n=this[Ze],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=_e.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${Ia(t)}: ${Ia(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new bA(this[Ze],this[os])}},bA=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,_e.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(vh.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ze]:{writable:!0,enumerable:!1,configurable:!1,value:null},[os]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let vA=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ze].type.children.map(n=>n.name)}has(t,n){return t[Ze].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ze].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[Ze].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=_e.visit(t[Ze].children[i],t[os]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[Ze].type.children.findIndex(s=>s.name===n);return r!==-1?(Ge.visit(t[Ze].children[r],t[os],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}},P=class extends it{};function q(e){return(t,n)=>t.getValid(n)?e(t,n):null}const wA=(e,t)=>864e5*e[t],wh=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),SA=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,IA=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Rm=e=>new Date(e),xA=(e,t)=>Rm(wA(e,t)),AA=(e,t)=>Rm(wh(e,t)),EA=(e,t)=>null,Mm=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],r=t[n+1];return e.subarray(i,r)},TA=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},Lm=({values:e},t)=>xA(e,t),Um=({values:e},t)=>AA(e,t*2),tr=({stride:e,values:t},n)=>t[e*n],OA=({stride:e,values:t},n)=>_m(t[e*n]),Pm=({values:e},t)=>e[t],BA=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),NA=({values:e,valueOffsets:t},n)=>Mm(e,t,n),FA=({values:e,valueOffsets:t},n)=>{const i=Mm(e,t,n);return i!==null?ml(i):null},DA=({values:e},t)=>e[t],kA=({type:e,values:t},n)=>e.precision!==me.HALF?t[n]:_m(t[n]),CA=(e,t)=>e.type.unit===di.DAY?Lm(e,t):Um(e,t),$m=({values:e},t)=>1e3*wh(e,t*2),Vm=({values:e},t)=>wh(e,t*2),jm=({values:e},t)=>SA(e,t*2),zm=({values:e},t)=>IA(e,t*2),RA=(e,t)=>{switch(e.type.unit){case ft.SECOND:return $m(e,t);case ft.MILLISECOND:return Vm(e,t);case ft.MICROSECOND:return jm(e,t);case ft.NANOSECOND:return zm(e,t)}},Wm=({values:e},t)=>e[t],qm=({values:e},t)=>e[t],Ym=({values:e},t)=>e[t],Gm=({values:e},t)=>e[t],MA=(e,t)=>{switch(e.type.unit){case ft.SECOND:return Wm(e,t);case ft.MILLISECOND:return qm(e,t);case ft.MICROSECOND:return Ym(e,t);case ft.NANOSECOND:return Gm(e,t)}},LA=({values:e,stride:t},n)=>Yx.decimal(e.subarray(t*n,t*(n+1))),UA=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,c=r[0].slice(s,a-s);return new Nt([c])},PA=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new Sh(a.slice(r,s-r))},$A=(e,t)=>new vh(e,t),VA=(e,t)=>e.type.mode===Ne.Dense?Hm(e,t):Km(e,t),Hm=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return _e.visit(i,e.valueOffsets[t])},Km=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return _e.visit(i,t)},jA=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},zA=(e,t)=>e.type.unit===Ui.DAY_TIME?Jm(e,t):Qm(e,t),Jm=({values:e},t)=>e.subarray(2*t,2*(t+1)),Qm=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},WA=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new Nt([s])};P.prototype.visitNull=q(EA);P.prototype.visitBool=q(TA);P.prototype.visitInt=q(DA);P.prototype.visitInt8=q(tr);P.prototype.visitInt16=q(tr);P.prototype.visitInt32=q(tr);P.prototype.visitInt64=q(Pm);P.prototype.visitUint8=q(tr);P.prototype.visitUint16=q(tr);P.prototype.visitUint32=q(tr);P.prototype.visitUint64=q(Pm);P.prototype.visitFloat=q(kA);P.prototype.visitFloat16=q(OA);P.prototype.visitFloat32=q(tr);P.prototype.visitFloat64=q(tr);P.prototype.visitUtf8=q(FA);P.prototype.visitBinary=q(NA);P.prototype.visitFixedSizeBinary=q(BA);P.prototype.visitDate=q(CA);P.prototype.visitDateDay=q(Lm);P.prototype.visitDateMillisecond=q(Um);P.prototype.visitTimestamp=q(RA);P.prototype.visitTimestampSecond=q($m);P.prototype.visitTimestampMillisecond=q(Vm);P.prototype.visitTimestampMicrosecond=q(jm);P.prototype.visitTimestampNanosecond=q(zm);P.prototype.visitTime=q(MA);P.prototype.visitTimeSecond=q(Wm);P.prototype.visitTimeMillisecond=q(qm);P.prototype.visitTimeMicrosecond=q(Ym);P.prototype.visitTimeNanosecond=q(Gm);P.prototype.visitDecimal=q(LA);P.prototype.visitList=q(UA);P.prototype.visitStruct=q($A);P.prototype.visitUnion=q(VA);P.prototype.visitDenseUnion=q(Hm);P.prototype.visitSparseUnion=q(Km);P.prototype.visitDictionary=q(jA);P.prototype.visitInterval=q(zA);P.prototype.visitIntervalDayTime=q(Jm);P.prototype.visitIntervalYearMonth=q(Qm);P.prototype.visitFixedSizeList=q(WA);P.prototype.visitMap=q(PA);const _e=new P,En=Symbol.for("keys"),cs=Symbol.for("vals");let Sh=class{constructor(t){return this[En]=new Nt([t.children[0]]).memoize(),this[cs]=t.children[1],new Proxy(this,new YA)}[Symbol.iterator](){return new qA(this[En],this[cs])}get size(){return this[En].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[En],n=this[cs],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=_e.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${Ia(t)}: ${Ia(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},qA=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),_e.visit(this.vals,t)]})}},YA=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[En].toArray().map(String)}has(t,n){return t[En].includes(n)}getOwnPropertyDescriptor(t,n){if(t[En].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[En].indexOf(n);if(i!==-1){const r=_e.visit(Reflect.get(t,cs),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[En].indexOf(n);return r!==-1?(Ge.visit(Reflect.get(t,cs),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}};Object.defineProperties(Sh.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[En]:{writable:!0,enumerable:!1,configurable:!1,value:null},[cs]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Wd;function Xm(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Wd=s,s=a,a=Wd),a>r&&(a=r),i?i(e,s,a):[s,a]}const qd=e=>e!==e;function Ms(e){if(typeof e!=="object"||e===null)return qd(e)?qd:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Lx(e,n):!1:e instanceof Map?HA(e):Array.isArray(e)?GA(e):e instanceof Nt?KA(e):JA(e,!0)}function GA(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ms(e[n]);return su(t)}function HA(e){let t=-1;const n=[];for(const i of e.values())n[++t]=Ms(i);return su(n)}function KA(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ms(e.get(n));return su(t)}function JA(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=Ms(e[n[r]]);return su(i,n)}function su(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return QA(e,n);case Map:return Yd(e,n,n.keys());case Sh:case vh:case Object:case void 0:return Yd(e,n,t||Object.keys(n))}return n instanceof Nt?XA(e,n):!1}}function QA(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function XA(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function Yd(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let c=s.next(),u=i.next(),l=r.next();for(;a<o&&!u.done&&!l.done&&!c.done&&!(u.value!==l.value||!e[a](c.value));++a,u=i.next(),l=r.next(),c=s.next());return a===o&&u.done&&l.done&&c.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function Zm(e,t,n,i){return(n&1<<i)!==0}function ZA(e,t,n,i){return(n&1<<i)>>i}function Ih(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):lc(new xh(n,e,t,null,Zm)).subarray(0,i)),r}return n}function lc(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let xh=class{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function vl(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new xh(e,t,n-t,e,ZA))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return vl(e,t,r)+vl(e,i,n)+t2(e,r>>3,i-r>>3)}function t2(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=Lu(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=Lu(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=Lu(s.getUint8(r)),r+=1;return i}function Lu(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const e2=-1;let Et=class wl{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=e2&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-vl(n,this.offset,this.offset+this.length)),t}constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof wl?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=ni(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+t>>3,a=(r+t)%8,o=i[s]>>a&1;return n?o===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):o===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new wl(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,c=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===m.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(Ih(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ei.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[ei.TYPE])&&(a[ei.TYPE]=s.subarray(t,t+n)),(s=a[ei.OFFSET])&&(a[ei.OFFSET]=s.subarray(t,t+n+1))||(s=a[ei.DATA])&&(a[ei.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}};Et.prototype.children=Object.freeze([]);let n2=class Io extends it{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new Et(n,i,r,0)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.data),s=ht(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.data),s=ht(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/ni(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/ni(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/ni(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/ni(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/ni(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=ht(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=ht(t.nullBitmap),{length:a=r.reduce((c,{length:u})=>Math.max(c,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=ht(t.nullBitmap),a=vt(n.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;if(K.isSparseUnion(n))return new Et(n,i,o,c,[void 0,void 0,s,a],r);const u=Js(t.valueOffsets);return new Et(n,i,o,c,[u,void 0,s,a],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.indices.ArrayType,t.data),{["dictionary"]:a=new Nt([new Io().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=ht(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/ni(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Io().visit({type:n.valueType})}=t,s=ht(t.nullBitmap),{["length"]:a=r.length/ni(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Io().visit({type:n.childType})}=t,s=ht(t.nullBitmap),a=Js(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,void 0,s],[r])}};function nt(e){return new n2().visit(e)}let Gd=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function t0(e){return e.reduce((t,n)=>t+n.nullCount,0)}function e0(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function n0(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],c=t[s],{length:u}=o;if(c>=i)break;if(n>=c+u)continue;if(c>=n&&c+u<=i){r.push(o);continue}const l=Math.max(0,n-c),h=Math.min(i-c,u);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function Ah(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function Eh(e,t){return e.getValid(t)}function us(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return Ah(i,this._offsets,n,t)}}function i0(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=Ah(s,this._offsets,i,n);return t=void 0,a}}function r0(e){let t;function n(i,r,s){let a=s,o=0,c=0;for(let u=r-1,l=i.length;++u<l;){const h=i[u];if(~(o=e(h,t,a)))return c+o;a=0,c+=h.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):Ah(s,this._offsets,r,n);return t=void 0,a}}let $=class extends it{};function i2(e,t){return t===null&&e.length>0?0:-1}function r2(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new xh(n,e.offset+(t||0),e.length,n,Zm)){if(!r)return i;++i}return-1}function Q(e,t,n){if(t===void 0)return-1;if(t===null)return r2(e,n);const i=_e.getVisitFn(e),r=Ms(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function s0(e,t,n){const i=_e.getVisitFn(e),r=Ms(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}$.prototype.visitNull=i2;$.prototype.visitBool=Q;$.prototype.visitInt=Q;$.prototype.visitInt8=Q;$.prototype.visitInt16=Q;$.prototype.visitInt32=Q;$.prototype.visitInt64=Q;$.prototype.visitUint8=Q;$.prototype.visitUint16=Q;$.prototype.visitUint32=Q;$.prototype.visitUint64=Q;$.prototype.visitFloat=Q;$.prototype.visitFloat16=Q;$.prototype.visitFloat32=Q;$.prototype.visitFloat64=Q;$.prototype.visitUtf8=Q;$.prototype.visitBinary=Q;$.prototype.visitFixedSizeBinary=Q;$.prototype.visitDate=Q;$.prototype.visitDateDay=Q;$.prototype.visitDateMillisecond=Q;$.prototype.visitTimestamp=Q;$.prototype.visitTimestampSecond=Q;$.prototype.visitTimestampMillisecond=Q;$.prototype.visitTimestampMicrosecond=Q;$.prototype.visitTimestampNanosecond=Q;$.prototype.visitTime=Q;$.prototype.visitTimeSecond=Q;$.prototype.visitTimeMillisecond=Q;$.prototype.visitTimeMicrosecond=Q;$.prototype.visitTimeNanosecond=Q;$.prototype.visitDecimal=Q;$.prototype.visitList=Q;$.prototype.visitStruct=Q;$.prototype.visitUnion=Q;$.prototype.visitDenseUnion=s0;$.prototype.visitSparseUnion=s0;$.prototype.visitDictionary=Q;$.prototype.visitInterval=Q;$.prototype.visitIntervalDayTime=Q;$.prototype.visitIntervalYearMonth=Q;$.prototype.visitFixedSizeList=Q;$.prototype.visitMap=Q;const hc=new $;let V=class extends it{};function Y(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===m.Timestamp||t instanceof $i&&t.bitWidth!==64||t instanceof Oa&&t.bitWidth!==64||t instanceof Ta&&t.precision!==me.HALF))return new Gd(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Gd(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new s2(a)})}let s2=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};V.prototype.visitNull=Y;V.prototype.visitBool=Y;V.prototype.visitInt=Y;V.prototype.visitInt8=Y;V.prototype.visitInt16=Y;V.prototype.visitInt32=Y;V.prototype.visitInt64=Y;V.prototype.visitUint8=Y;V.prototype.visitUint16=Y;V.prototype.visitUint32=Y;V.prototype.visitUint64=Y;V.prototype.visitFloat=Y;V.prototype.visitFloat16=Y;V.prototype.visitFloat32=Y;V.prototype.visitFloat64=Y;V.prototype.visitUtf8=Y;V.prototype.visitBinary=Y;V.prototype.visitFixedSizeBinary=Y;V.prototype.visitDate=Y;V.prototype.visitDateDay=Y;V.prototype.visitDateMillisecond=Y;V.prototype.visitTimestamp=Y;V.prototype.visitTimestampSecond=Y;V.prototype.visitTimestampMillisecond=Y;V.prototype.visitTimestampMicrosecond=Y;V.prototype.visitTimestampNanosecond=Y;V.prototype.visitTime=Y;V.prototype.visitTimeSecond=Y;V.prototype.visitTimeMillisecond=Y;V.prototype.visitTimeMicrosecond=Y;V.prototype.visitTimeNanosecond=Y;V.prototype.visitDecimal=Y;V.prototype.visitList=Y;V.prototype.visitStruct=Y;V.prototype.visitUnion=Y;V.prototype.visitDenseUnion=Y;V.prototype.visitSparseUnion=Y;V.prototype.visitDictionary=Y;V.prototype.visitInterval=Y;V.prototype.visitIntervalDayTime=Y;V.prototype.visitIntervalYearMonth=Y;V.prototype.visitFixedSizeList=Y;V.prototype.visitMap=Y;const Th=new V,a2=(e,t)=>e+t;let er=class extends it{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===ft.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((i,r)=>i+Un.visit(r,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,r)=>i+Un.visit(r,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}};const o2=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),c2=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),u2=({valueOffsets:e,stride:t,children:n},i)=>{const r=n[0],{[i*t]:s}=e,{[i*t+1]:a}=e,o=Un.getVisitFn(r.type),c=r.slice(s,a-s);let u=8;for(let l=-1,h=a-s;++l<h;)u+=o(c,l);return u},l2=({stride:e,children:t},n)=>{const i=t[0],r=i.slice(n*e,e),s=Un.getVisitFn(i.type);let a=0;for(let o=-1,c=r.length;++o<c;)a+=s(r,o);return a},h2=(e,t)=>e.type.mode===Ne.Dense?a0(e,t):o0(e,t),a0=({type:e,children:t,typeIds:n,valueOffsets:i},r)=>{const s=e.typeIdToChildIndex[n[r]];return 8+Un.visit(t[s],i[r])},o0=({children:e},t)=>4+Un.visitMany(e,e.map(()=>t)).reduce(a2,0);er.prototype.visitUtf8=o2;er.prototype.visitBinary=c2;er.prototype.visitList=u2;er.prototype.visitFixedSizeList=l2;er.prototype.visitUnion=h2;er.prototype.visitDenseUnion=a0;er.prototype.visitSparseUnion=o0;const Un=new er;var c0;const u0={},l0={};let Nt=class ur{constructor(t){var n,i,r;const s=t[0]instanceof ur?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof Et)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:c,indexOf:u,byteLength:l}=u0[a.typeId],h=s[0];this.isValid=d=>Eh(h,d),this.get=d=>o(h,d),this.set=(d,p)=>c(h,d,p),this.indexOf=d=>u(h,d),this.getByteLength=d=>l(h,d),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,l0[a.typeId]),this._offsets=e0(s);break}this.data=s,this.type=a,this.stride=ni(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=t0(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${m[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return Th.visit(this)}concat(...t){return new ur(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ur(Xm(this,t,n,({data:i,_offsets:r},s,a)=>n0(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case m.Int:case m.Float:case m.Decimal:case m.Time:case m.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o,length:c})=>(a.array.set(o.subarray(0,c*r),a.offset),a.offset+=c*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ur(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return K.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(K.isDictionary(this.type)){const t=new Hd(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new ur(n)}return new Hd(this)}unmemoize(){if(K.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new ur(n)}return this}};c0=Symbol.toStringTag;Nt[c0]=(e=>{e.type=K.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(m).map(n=>m[n]).filter(n=>typeof n=="number"&&n!==m.NONE);for(const n of t){const i=_e.getVisitFnByTypeId(n),r=Ge.getVisitFnByTypeId(n),s=hc.getVisitFnByTypeId(n),a=Un.getVisitFnByTypeId(n);u0[n]={get:i,set:r,indexOf:s,byteLength:a},l0[n]=Object.create(e,{isValid:{value:us(Eh)},get:{value:us(_e.getVisitFnByTypeId(n))},set:{value:i0(Ge.getVisitFnByTypeId(n))},indexOf:{value:r0(hc.getVisitFnByTypeId(n))},getByteLength:{value:us(Un.getVisitFnByTypeId(n))}})}return"Vector"})(Nt.prototype);let Hd=class h0 extends Nt{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const c=n.call(this,a);return s[a]=c,c}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new h0(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Nt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},Sl=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(BigInt(r??0)),t.pad(4),t.writeInt32(i),t.writeInt64(BigInt(n??0)),t.offset()}};const Uu=2,Tn=4,oi=4,A=4,Ci=new Int32Array(2),Kd=new Float32Array(Ci.buffer),Jd=new Float64Array(Ci.buffer),ho=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Il;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Il||(Il={}));let Vi=class f0{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new f0(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ci[0]=this.readInt32(t),Kd[0]}readFloat64(t){return Ci[ho?0:1]=this.readInt32(t),Ci[ho?1:0]=this.readInt32(t+4),Jd[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Kd[0]=n,this.writeInt32(t,Ci[0])}writeFloat64(t,n){Jd[0]=n,this.writeInt32(t,Ci[ho?0:1]),this.writeInt32(t+4,Ci[ho?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Tn+oi)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<oi;n++)t+=String.fromCharCode(this.readInt8(this.position_+Tn+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);t+=Tn;const r=this.bytes_.subarray(t,t+i);return n===Il.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Tn}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=oi)throw new Error("FlatBuffers: file identifier must be length "+oi);for(let n=0;n<oi;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Tn+n))return!1;return!0}createScalarList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s)}return i}createObjList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s.unpack())}return i}},au=class d0{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=Vi.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const r=this.bb.capacity();this.bb=d0.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||n!==i)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=Vi.allocate(i);return r.setPosition(i-n),r.bytes().set(t.bytes(),i-n),r}addOffset(t){this.prep(Tn,0),this.writeInt32(this.offset()-t+Tn)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const r=2;this.addInt16(t-this.object_start);const s=(i+r)*Uu;this.addInt16(s);let a=0;const o=this.space;t:for(n=0;n<this.vtables.length;n++){const c=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(c)){for(let u=Uu;u<s;u+=Uu)if(this.bb.readInt16(o+u)!=this.bb.readInt16(c+u))continue t;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const r=i?A:0;if(n){const s=n;if(this.prep(this.minalign,Tn+oi+r),s.length!=oi)throw new TypeError("FlatBuffers: file identifier must be length "+oi);for(let a=oi-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Tn+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,r=i-this.bb.readInt32(i);if(!(n<this.bb.readInt16(r)&&this.bb.readInt16(r+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Tn,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const r=t[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}},We=class lr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new lr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+A),(n||new lr).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return lr.startKeyValue(t),lr.addKey(t,n),lr.addValue(t,i),lr.endKeyValue(t)}};var _s;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(_s||(_s={}));var bs;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(bs||(bs={}));var fc;(function(e){e[e.DenseArray=0]="DenseArray"})(fc||(fc={}));let Zr=class hr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new hr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+A),(n||new hr).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return hr.startInt(t),hr.addBitWidth(t,n),hr.addIsSigned(t,i),hr.endInt(t)}},Pr=class xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+A),(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Zr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):fc.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,fc.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},Qd=class ra{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+A),(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return ra.startBinary(t),ra.endBinary(t)}},Xd=class sa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+A),(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return sa.startBool(t),sa.endBool(t)}};var dc;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(dc||(dc={}));let xo=class $r{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new $r).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+A),(n||new $r).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dc.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,dc.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return $r.startDate(t),$r.addUnit(t,n),$r.endDate(t)}},Vr=class Ni{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ni).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+A),(n||new Ni).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return Ni.startDecimal(t),Ni.addPrecision(t,n),Ni.addScale(t,i),Ni.addBitWidth(t,r),Ni.endDecimal(t)}};var vs;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(vs||(vs={}));let Ao=class jr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new jr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+A),(n||new jr).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return jr.startFixedSizeBinary(t),jr.addByteWidth(t,n),jr.endFixedSizeBinary(t)}},Eo=class zr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new zr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+A),(n||new zr).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return zr.startFixedSizeList(t),zr.addListSize(t,n),zr.endFixedSizeList(t)}};var pc;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(pc||(pc={}));let To=class Wr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Wr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+A),(n||new Wr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pc.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,pc.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Wr.startFloatingPoint(t),Wr.addPrecision(t,n),Wr.endFloatingPoint(t)}};var yc;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(yc||(yc={}));let Oo=class qr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new qr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+A),(n||new qr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yc.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,yc.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return qr.startInterval(t),qr.addUnit(t,n),qr.endInterval(t)}},Zd=class aa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new aa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+A),(n||new aa).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return aa.startList(t),aa.endList(t)}},Bo=class Yr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Yr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+A),(n||new Yr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Yr.startMap(t),Yr.addKeysSorted(t,n),Yr.endMap(t)}},tp=class oa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new oa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+A),(n||new oa).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return oa.startNull(t),oa.endNull(t)}},ep=class ca{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+A),(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ca.startStruct_(t),ca.endStruct_(t)}},ua=class fr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new fr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+A),(n||new fr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vs.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,vs.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return fr.startTime(t),fr.addUnit(t,n),fr.addBitWidth(t,i),fr.endTime(t)}},la=class dr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new dr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+A),(n||new dr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vs.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,vs.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return dr.startTimestamp(t),dr.addUnit(t,n),dr.addTimezone(t,i),dr.endTimestamp(t)}};var mc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(mc||(mc={}));let pr=class yr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new yr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+A),(n||new yr).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mc.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,mc.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return yr.startUnion(t),yr.addMode(t,n),yr.addTypeIds(t,i),yr.endUnion(t)}},np=class ha{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new ha).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+A),(n||new ha).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ha.startUtf8(t),ha.endUtf8(t)}};var Tt;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Tt||(Tt={}));let Me=class No{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new No).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+A),(n||new No).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Tt.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Pr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new No).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Tt.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},vn=class Qn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Qn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+A),(n||new Qn).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bs.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Me).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,bs.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return Qn.startSchema(t),Qn.addEndianness(t,n),Qn.addFields(t,i),Qn.addCustomMetadata(t,r),Qn.addFeatures(t,s),Qn.endSchema(t)}},mn=class Al{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+A),(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_s.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Sl).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Sl).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,_s.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},Bt=class mr{constructor(t=[],n,i){this.fields=t||[],this.metadata=n||new Map,i||(i=Tl(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new mr(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new mr(n,this.metadata)}assign(...t){const n=t[0]instanceof mr?t[0]:Array.isArray(t[0])?new mr(t[0]):new mr(t),i=[...this.fields],r=fo(fo(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const c=i.findIndex(u=>u.name===o.name);return~c?(i[c]=o.clone({metadata:fo(fo(new Map,i[c].metadata),o.metadata)}))&&!1:!0}),a=Tl(s,new Map);return new mr([...i,...s],r,new Map([...this.dictionaries,...a]))}};Bt.prototype.fields=null;Bt.prototype.metadata=null;Bt.prototype.dictionaries=null;let Ct=class El{static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new El(`${n}`,i,r,s)}constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],El.new(n,i,r,s)}};Ct.prototype.type=null;Ct.prototype.name=null;Ct.prototype.nullable=null;Ct.prototype.metadata=null;function fo(e,t){return new Map([...e||new Map,...t||new Map])}function Tl(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(K.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Tl(s.children,t)}return t}var f2=au,d2=Vi;let Ba=class{static decode(t){t=new d2(ht(t));const n=mn.getRootAsFooter(t),i=Bt.decode(n.schema());return new p2(i,n)}static encode(t){const n=new f2,i=Bt.encode(n,t.schema);mn.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())ws.encode(n,a);const r=n.endVector();mn.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())ws.encode(n,a);const s=n.endVector();return mn.startFooter(n),mn.addSchema(n,i),mn.addVersion(n,Be.V4),mn.addRecordBatches(n,r),mn.addDictionaries(n,s),mn.finishFooterBuffer(n,mn.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Be.V4,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},p2=class extends Ba{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return ws.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return ws.decode(n)}return null}},ws=class p0{static decode(t){return new p0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=BigInt(n.offset),s=BigInt(n.bodyLength);return Sl.createBlock(t,r,i,s)}constructor(t,n,i){this.metaDataLength=t,this.offset=cn(i),this.bodyLength=cn(n)}};const Ft=Object.freeze({done:!0,value:void 0});class ip{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}let Oh=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},y2=class extends Oh{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return x(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ft);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Pe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Pe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return x(this,void 0,void 0,function*(){return yield this.abort(t),Ft})}return(t){return x(this,void 0,void 0,function*(){return yield this.close(),Ft})}read(t){return x(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return x(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(Ft)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Fo=class extends y2{write(t){if((t=ht(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?ml(this.toUint8Array(!0)):this.toUint8Array(!1).then(ml)}toUint8Array(t=!1){return t?Ln(this._values)[0]:(()=>x(this,void 0,void 0,function*(){var n,i,r,s;const a=[];let o=0;try{for(var c=!0,u=qe(this),l;l=yield u.next(),n=l.done,!n;c=!0){s=l.value,c=!1;const h=s;a.push(h),o+=h.byteLength}}catch(h){i={error:h}}finally{try{!c&&!n&&(r=u.return)&&(yield r.call(u))}finally{if(i)throw i.error}}return Ln(a,o)[0]}))()}};class gc{constructor(t){t&&(this.source=new m2(Pe.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Ss{constructor(t){t instanceof Ss?this.source=t.source:t instanceof Fo?this.source=new cr(Pe.fromAsyncIterable(t)):Hy(t)?this.source=new cr(Pe.fromNodeStream(t)):yh(t)?this.source=new cr(Pe.fromDOMStream(t)):Gy(t)?this.source=new cr(Pe.fromDOMStream(t.body)):Wa(t)?this.source=new cr(Pe.fromIterable(t)):Fr(t)?this.source=new cr(Pe.fromAsyncIterable(t)):Rs(t)&&(this.source=new cr(Pe.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class m2{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ft)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ft)}}class cr{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return x(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return x(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return x(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return x(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return x(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ft;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return x(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ft;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class rp extends gc{constructor(t,n){super(),this.position=0,this.buffer=ht(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,t)),n.subarray(r,this.position)):null}readAt(t,n){const i=this.buffer,r=Math.min(this.size,t+n);return i?i.subarray(t,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class _c extends Ss{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=(()=>x(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return x(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return x(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return x(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,a=0,o=0;const c=Math.min(i,s+Math.min(i-s,t)),u=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=o)<c&&(a+=o)<u.byteLength;)({bytesRead:o}=yield n.read(u,a,u.byteLength-a,s));return u}return null})}readAt(t,n){return x(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&t+n<r){const s=Math.min(r,t+n),a=new Uint8Array(s-t);return(yield i.read(a,0,n,t)).buffer}return new Uint8Array(n)})}close(){return x(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return x(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return x(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const g2=65536;function ts(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Is=8,Bh=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class y0{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?g2:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${ts(this.buffer[1])} ${ts(this.buffer[0])}`}}let Ut=class Xn extends y0{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Xn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Xn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,r=new Xn(n);for(let s=0;s<i;){const a=Is<i-s?Is:i-s,o=new Xn(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),c=new Xn(new Uint32Array([Bh[a],0]));r.times(c),r.plus(o),s+=a}return r}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Xn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Xn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Xn(new Uint32Array(t.buffer)).plus(n)}},ya=class Zn extends y0{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Zn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Zn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),r=t.length,s=new Zn(n);for(let a=i?1:0;a<r;){const o=Is<r-a?Is:r-a,c=new Zn(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0])),u=new Zn(new Uint32Array([Bh[o],0]));s.times(u),s.plus(c),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Zn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Zn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Zn(new Uint32Array(t.buffer)).plus(n)}};class wn{constructor(t){this.buffer=t}high(){return new ya(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ya(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new Ut(new Uint32Array([this.buffer[3],0])),i=new Ut(new Uint32Array([this.buffer[2],0])),r=new Ut(new Uint32Array([this.buffer[1],0])),s=new Ut(new Uint32Array([this.buffer[0],0])),a=new Ut(new Uint32Array([t.buffer[3],0])),o=new Ut(new Uint32Array([t.buffer[2],0])),c=new Ut(new Uint32Array([t.buffer[1],0])),u=new Ut(new Uint32Array([t.buffer[0],0]));let l=Ut.multiply(s,u);this.buffer[0]=l.low();const h=new Ut(new Uint32Array([l.high(),0]));return l=Ut.multiply(r,u),h.plus(l),l=Ut.multiply(s,c),h.plus(l),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(l)?1:0,this.buffer[2]=h.high(),new Ut(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Ut.multiply(i,u)).plus(Ut.multiply(r,c)).plus(Ut.multiply(s,o)),this.buffer[3]+=Ut.multiply(n,u).plus(Ut.multiply(i,c)).plus(Ut.multiply(r,o)).plus(Ut.multiply(s,a)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${ts(this.buffer[3])} ${ts(this.buffer[2])} ${ts(this.buffer[1])} ${ts(this.buffer[0])}`}static multiply(t,n){return new wn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new wn(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return wn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return wn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),r=t.length,s=new wn(n);for(let a=i?1:0;a<r;){const o=Is<r-a?Is:r-a,c=new wn(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0,0,0])),u=new wn(new Uint32Array([Bh[o],0,0,0]));s.times(u),s.plus(c),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,r=t.length;++i<r;)wn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class m0 extends it{constructor(t,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(t){return super.visit(t instanceof Ct?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return nt({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Ne.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class _2 extends m0{constructor(t,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):lc(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return vt(Uint8Array,vt(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return vt(Uint8Array,vt(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return K.isTimestamp(t)||(K.isInt(t)||K.isTime(t))&&t.bitWidth===64||K.isDate(t)&&t.unit===di.MILLISECOND?vt(Uint8Array,ya.convertArray(i[n])):K.isDecimal(t)?vt(Uint8Array,wn.convertArray(i[n])):K.isBinary(t)||K.isFixedSizeBinary(t)?b2(i[n]):K.isBool(t)?lc(i[n]):K.isUtf8(t)?ph(i[n].join("")):vt(Uint8Array,vt(t.ArrayType,i[n].map(r=>+r)))}}function b2(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}let j=class extends it{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function Ie(e,t){return t instanceof e.constructor}function qa(e,t){return e===t||Ie(e,t)}function wi(e,t){return e===t||Ie(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function ou(e,t){return e===t||Ie(e,t)&&e.precision===t.precision}function v2(e,t){return e===t||Ie(e,t)&&e.byteWidth===t.byteWidth}function Nh(e,t){return e===t||Ie(e,t)&&e.unit===t.unit}function Ya(e,t){return e===t||Ie(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ga(e,t){return e===t||Ie(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function w2(e,t){return e===t||Ie(e,t)&&e.children.length===t.children.length&&ji.compareManyFields(e.children,t.children)}function S2(e,t){return e===t||Ie(e,t)&&e.children.length===t.children.length&&ji.compareManyFields(e.children,t.children)}function Fh(e,t){return e===t||Ie(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&ji.compareManyFields(e.children,t.children)}function I2(e,t){return e===t||Ie(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ji.visit(e.indices,t.indices)&&ji.visit(e.dictionary,t.dictionary)}function Dh(e,t){return e===t||Ie(e,t)&&e.unit===t.unit}function x2(e,t){return e===t||Ie(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ji.compareManyFields(e.children,t.children)}function A2(e,t){return e===t||Ie(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ji.compareManyFields(e.children,t.children)}j.prototype.visitNull=qa;j.prototype.visitBool=qa;j.prototype.visitInt=wi;j.prototype.visitInt8=wi;j.prototype.visitInt16=wi;j.prototype.visitInt32=wi;j.prototype.visitInt64=wi;j.prototype.visitUint8=wi;j.prototype.visitUint16=wi;j.prototype.visitUint32=wi;j.prototype.visitUint64=wi;j.prototype.visitFloat=ou;j.prototype.visitFloat16=ou;j.prototype.visitFloat32=ou;j.prototype.visitFloat64=ou;j.prototype.visitUtf8=qa;j.prototype.visitBinary=qa;j.prototype.visitFixedSizeBinary=v2;j.prototype.visitDate=Nh;j.prototype.visitDateDay=Nh;j.prototype.visitDateMillisecond=Nh;j.prototype.visitTimestamp=Ya;j.prototype.visitTimestampSecond=Ya;j.prototype.visitTimestampMillisecond=Ya;j.prototype.visitTimestampMicrosecond=Ya;j.prototype.visitTimestampNanosecond=Ya;j.prototype.visitTime=Ga;j.prototype.visitTimeSecond=Ga;j.prototype.visitTimeMillisecond=Ga;j.prototype.visitTimeMicrosecond=Ga;j.prototype.visitTimeNanosecond=Ga;j.prototype.visitDecimal=qa;j.prototype.visitList=w2;j.prototype.visitStruct=S2;j.prototype.visitUnion=Fh;j.prototype.visitDenseUnion=Fh;j.prototype.visitSparseUnion=Fh;j.prototype.visitDictionary=I2;j.prototype.visitInterval=Dh;j.prototype.visitIntervalDayTime=Dh;j.prototype.visitIntervalYearMonth=Dh;j.prototype.visitFixedSizeList=x2;j.prototype.visitMap=A2;const ji=new j;function Ol(e,t){return ji.compareSchemas(e,t)}function Pu(e,t){return E2(e,t.map(n=>n.data.concat()))}function E2(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,o=-1;const c=t.length;let u,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=T2(n,a,l,t,r),a>0&&(i[s++]=nt({type:new ne(n),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(n),i.map(h=>new fe(e,h))]}function T2(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,c=i.length;++o<c;){const u=n[o],l=u==null?void 0:u.length;if(l>=t)l===t?n[o]=u:(n[o]=u.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(u.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),n[o]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:nt({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var g0;let zi=class gr{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new Bt([]),this._offsets=[0],this;let r,s;t[0]instanceof Bt&&(r=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const a=c=>{if(c){if(c instanceof fe)return[c];if(c instanceof gr)return c.batches;if(c instanceof Et){if(c.type instanceof ne)return[new fe(new Bt(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(u=>a(u));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(u=>a(u));if(typeof c=="object"){const u=Object.keys(c),l=u.map(p=>new Nt([c[p]])),h=new Bt(u.map((p,g)=>new Ct(String(p),l[g].type))),[,d]=Pu(h,l);return d.length===0?[new fe(c)]:d}}}return[]},o=t.flatMap(c=>a(c));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new Bt([]),!(r instanceof Bt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of o){if(!(c instanceof fe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ol(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??e0(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=t0(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Th.visit(new Nt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new gr(n,i.map(r=>new fe(n,r)))}slice(t,n){const i=this.schema;[t,n]=Xm({length:this.numRows},t,n);const r=n0(this.data,this._offsets,t,n);return new gr(i,r.map(s=>new fe(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=nt({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new Nt(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Nt([nt({type:new Pi,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((c,u)=>this.getChildAt(u));[s[t],o[t]]=[a,n],[i,r]=Pu(i,o)}return new gr(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new gr(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,c,u)=>{const[l,h]=o,d=n.findIndex(p=>p.name===c.name);return~d?h[d]=u:l.push(u),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,c)=>[c,r[c]]).map(([o,c])=>c===void 0?this.getChildAt(o):t.getChildAt(c)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new gr(...Pu(s,a))}};g0=Symbol.toStringTag;zi[g0]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=us(Eh),e.get=us(_e.getVisitFn(m.Struct)),e.set=i0(Ge.getVisitFn(m.Struct)),e.indexOf=r0(hc.getVisitFn(m.Struct)),e.getByteLength=us(Un.getVisitFn(m.Struct)),"Table"))(zi.prototype);var _0;let fe=class fa{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Bt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=nt({nullCount:0,type:new ne(this.schema.fields),children:this.schema.fields.map(n=>nt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Et))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=sp(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((c,u,l)=>(c.children[l]=n[u],c.length=Math.max(c.length,n[u].length),c.fields[l]=Ct.new({name:u,type:n[u].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new Bt(i),o=nt({type:new ne(i),length:s,children:r,nullCount:0});[this.schema,this.data]=sp(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=b0(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return _e.visit(this.data,t)}set(t,n){return Ge.visit(this.data,t,n)}indexOf(t,n){return hc.visit(this.data,t,n)}getByteLength(t){return Un.visit(this.data,t)}[Symbol.iterator](){return Th.visit(new Nt([this.data]))}toArray(){return[...this]}concat(...t){return new zi(this.schema,[this,...t])}slice(t,n){const[i]=new Nt([this.data]).slice(t,n).data;return new fa(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Nt([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new Nt([nt({type:new Pi,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new Bt(s,new Map(this.schema.metadata)),r=nt({type:new ne(s),children:a})}return new fa(i,r)}select(t){const n=this.schema.select(t),i=new ne(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new fa(n,nt({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=nt({type:new ne(n.fields),length:this.numRows,children:i});return new fa(n,r)}};_0=Symbol.toStringTag;fe[_0]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(fe.prototype);function sp(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,c]of e.fields.entries()){const u=t[o];(!u||u.length!==n)&&(r[o]=c.clone({nullable:!0}),s[o]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:nt({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),nt({type:new ne(r),length:n,children:s})]}function b0(e,t,n=new Map){for(let i=-1,r=e.length;++i<r;){const a=e[i].type,o=t[i];if(K.isDictionary(a)){if(!n.has(a.id))o.dictionary&&n.set(a.id,o.dictionary);else if(n.get(a.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&b0(a.children,o.children,n)}return n}let kh=class extends fe{constructor(t){const n=t.fields.map(r=>nt({type:r.type})),i=nt({type:new ne(t.fields),nullCount:0,children:n});super(t,i)}};var bc;(function(e){e[e.BUFFER=0]="BUFFER"})(bc||(bc={}));var vc;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(vc||(vc={}));let O2=class _r{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new _r).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+A),(n||new _r).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):vc.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):bc.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,vc.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,bc.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return _r.startBodyCompression(t),_r.addCodec(t,n),_r.addMethod(t,i),_r.endBodyCompression(t)}},v0=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},w0=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},ii=class Bl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Bl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+A),(n||new Bl).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new w0).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new v0).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new O2).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Gr=class Nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+A),(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ii).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var wc;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(wc||(wc={}));let Oi=class _n{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new _n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+A),(n||new _n).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_s.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):wc.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,_s.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,wc.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return _n.startMessage(t),_n.addVersion(t,n),_n.addHeaderType(t,i),_n.addHeader(t,r),_n.addBodyLength(t,s),_n.addCustomMetadata(t,a),_n.endMessage(t)}},B2=class extends it{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return tp.startNull(n),tp.endNull(n)}visitInt(t,n){return Zr.startInt(n),Zr.addBitWidth(n,t.bitWidth),Zr.addIsSigned(n,t.isSigned),Zr.endInt(n)}visitFloat(t,n){return To.startFloatingPoint(n),To.addPrecision(n,t.precision),To.endFloatingPoint(n)}visitBinary(t,n){return Qd.startBinary(n),Qd.endBinary(n)}visitBool(t,n){return Xd.startBool(n),Xd.endBool(n)}visitUtf8(t,n){return np.startUtf8(n),np.endUtf8(n)}visitDecimal(t,n){return Vr.startDecimal(n),Vr.addScale(n,t.scale),Vr.addPrecision(n,t.precision),Vr.addBitWidth(n,t.bitWidth),Vr.endDecimal(n)}visitDate(t,n){return xo.startDate(n),xo.addUnit(n,t.unit),xo.endDate(n)}visitTime(t,n){return ua.startTime(n),ua.addUnit(n,t.unit),ua.addBitWidth(n,t.bitWidth),ua.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return la.startTimestamp(n),la.addUnit(n,t.unit),i!==void 0&&la.addTimezone(n,i),la.endTimestamp(n)}visitInterval(t,n){return Oo.startInterval(n),Oo.addUnit(n,t.unit),Oo.endInterval(n)}visitList(t,n){return Zd.startList(n),Zd.endList(n)}visitStruct(t,n){return ep.startStruct_(n),ep.endStruct_(n)}visitUnion(t,n){pr.startTypeIdsVector(n,t.typeIds.length);const i=pr.createTypeIdsVector(n,t.typeIds);return pr.startUnion(n),pr.addMode(n,t.mode),pr.addTypeIds(n,i),pr.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return Pr.startDictionaryEncoding(n),Pr.addId(n,BigInt(t.id)),Pr.addIsOrdered(n,t.isOrdered),i!==void 0&&Pr.addIndexType(n,i),Pr.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ao.startFixedSizeBinary(n),Ao.addByteWidth(n,t.byteWidth),Ao.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Eo.startFixedSizeList(n),Eo.addListSize(n,t.listSize),Eo.endFixedSizeList(n)}visitMap(t,n){return Bo.startMap(n),Bo.addKeysSorted(n,t.keysSorted),Bo.endMap(n)}};const $u=new B2;function N2(e,t=new Map){return new Bt(D2(e,t),Do(e.customMetadata),t)}function S0(e){return new Fe(e.count,I0(e.columns),x0(e.columns))}function F2(e){return new Pn(S0(e.data),e.id,e.isDelta)}function D2(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ct.fromJSON(n,t))}function ap(e,t){return(e.children||[]).filter(Boolean).map(n=>Ct.fromJSON(n,t))}function I0(e){return(e||[]).reduce((t,n)=>[...t,new Cr(n.count,k2(n.VALIDITY)),...I0(n.children)],[])}function x0(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new Cn(t.length,r.VALIDITY.length)),r.TYPE&&t.push(new Cn(t.length,r.TYPE.length)),r.OFFSET&&t.push(new Cn(t.length,r.OFFSET.length)),r.DATA&&t.push(new Cn(t.length,r.DATA.length)),t=x0(r.children,t)}return t}function k2(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function C2(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=cp(e,ap(e,t)),r=new Ct(e.name,a,e.nullable,Do(e.customMetadata))):t.has(n=s.id)?(i=(i=s.indexType)?op(i):new Ea,o=new gs(t.get(n),i,n,s.isOrdered),r=new Ct(e.name,o,e.nullable,Do(e.customMetadata))):(i=(i=s.indexType)?op(i):new Ea,t.set(n,a=cp(e,ap(e,t))),o=new gs(a,i,n,s.isOrdered),r=new Ct(e.name,o,e.nullable,Do(e.customMetadata))),r||null}function Do(e){return new Map(Object.entries(e||{}))}function op(e){return new $i(e.isSigned,e.bitWidth)}function cp(e,t){const n=e.type.name;switch(n){case"NONE":return new Pi;case"null":return new Pi;case"binary":return new Xo;case"utf8":return new Zo;case"bool":return new tc;case"list":return new sc((t||[])[0]);case"struct":return new ne(t||[]);case"struct_":return new ne(t||[])}switch(n){case"int":{const i=e.type;return new $i(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new Ta(me[i.precision])}case"decimal":{const i=e.type;return new ec(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new nc(di[i.unit])}case"time":{const i=e.type;return new Oa(ft[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new ic(ft[i.unit],i.timezone)}case"interval":{const i=e.type;return new rc(Ui[i.unit])}case"union":{const i=e.type;return new ac(Ne[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new oc(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new cc(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new uc((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var R2=au,M2=Vi;let hi=class Hr{static fromJSON(t,n){const i=new Hr(0,Be.V4,n);return i._createHeader=L2(t,n),i}static decode(t){t=new M2(ht(t));const n=Oi.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new Hr(i,r,s);return a._createHeader=U2(n,s),a}static encode(t){const n=new R2;let i=-1;return t.isSchema()?i=Bt.encode(n,t.header()):t.isRecordBatch()?i=Fe.encode(n,t.header()):t.isDictionaryBatch()&&(i=Pn.encode(n,t.header())),Oi.startMessage(n),Oi.addVersion(n,Be.V4),Oi.addHeader(n,i),Oi.addHeaderType(n,t.headerType),Oi.addBodyLength(n,BigInt(t.bodyLength)),Oi.finishMessageBuffer(n,Oi.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Bt)return new Hr(0,Be.V4,pt.Schema,t);if(t instanceof Fe)return new Hr(n,Be.V4,pt.RecordBatch,t);if(t instanceof Pn)return new Hr(n,Be.V4,pt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===pt.Schema}isRecordBatch(){return this.headerType===pt.RecordBatch}isDictionaryBatch(){return this.headerType===pt.DictionaryBatch}constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=cn(t)}},Fe=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=cn(t)}},Pn=class{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=cn(n)}},Cn=class{constructor(t,n){this.offset=cn(t),this.length=cn(n)}},Cr=class{constructor(t,n){this.length=cn(t),this.nullCount=cn(n)}};function L2(e,t){return()=>{switch(t){case pt.Schema:return Bt.fromJSON(e);case pt.RecordBatch:return Fe.fromJSON(e);case pt.DictionaryBatch:return Pn.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${pt[t]}, type: ${t} }`)}}function U2(e,t){return()=>{switch(t){case pt.Schema:return Bt.decode(e.header(new vn));case pt.RecordBatch:return Fe.decode(e.header(new ii),e.version());case pt.DictionaryBatch:return Pn.decode(e.header(new Gr),e.version())}throw new Error(`Unrecognized Message type: { name: ${pt[t]}, type: ${t} }`)}}Ct.encode=K2;Ct.decode=G2;Ct.fromJSON=C2;Bt.encode=H2;Bt.decode=P2;Bt.fromJSON=N2;Fe.encode=J2;Fe.decode=$2;Fe.fromJSON=S0;Pn.encode=Q2;Pn.decode=V2;Pn.fromJSON=F2;Cr.encode=X2;Cr.decode=z2;Cn.encode=Z2;Cn.decode=j2;function P2(e,t=new Map){const n=Y2(e,t);return new Bt(n,ko(e),t)}function $2(e,t=Be.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Fe(e.length(),W2(e),q2(e,t))}function V2(e,t=Be.V4){return new Pn(Fe.decode(e.data(),t),e.id(),e.isDelta())}function j2(e){return new Cn(e.offset(),e.length())}function z2(e){return new Cr(e.length(),e.nullCount())}function W2(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=Cr.decode(n));return t}function q2(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<Be.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Cn.decode(i));return n}function Y2(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=Ct.decode(i,t));return n}function up(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=Ct.decode(i,t));return n}function G2(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=hp(e,up(e,t)),i=new Ct(e.name(),r,e.nullable(),ko(e))):t.has(n=cn(o.id()))?(s=(s=o.indexType())?lp(s):new Ea,a=new gs(t.get(n),s,n,o.isOrdered()),i=new Ct(e.name(),a,e.nullable(),ko(e))):(s=(s=o.indexType())?lp(s):new Ea,t.set(n,r=hp(e,up(e,t))),a=new gs(r,s,n,o.isOrdered()),i=new Ct(e.name(),a,e.nullable(),ko(e))),i||null}function ko(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function lp(e){return new $i(e.isSigned(),e.bitWidth())}function hp(e,t){const n=e.typeType();switch(n){case Tt.NONE:return new Pi;case Tt.Null:return new Pi;case Tt.Binary:return new Xo;case Tt.Utf8:return new Zo;case Tt.Bool:return new tc;case Tt.List:return new sc((t||[])[0]);case Tt.Struct_:return new ne(t||[])}switch(n){case Tt.Int:{const i=e.type(new Zr);return new $i(i.isSigned(),i.bitWidth())}case Tt.FloatingPoint:{const i=e.type(new To);return new Ta(i.precision())}case Tt.Decimal:{const i=e.type(new Vr);return new ec(i.scale(),i.precision(),i.bitWidth())}case Tt.Date:{const i=e.type(new xo);return new nc(i.unit())}case Tt.Time:{const i=e.type(new ua);return new Oa(i.unit(),i.bitWidth())}case Tt.Timestamp:{const i=e.type(new la);return new ic(i.unit(),i.timezone())}case Tt.Interval:{const i=e.type(new Oo);return new rc(i.unit())}case Tt.Union:{const i=e.type(new pr);return new ac(i.mode(),i.typeIdsArray()||[],t||[])}case Tt.FixedSizeBinary:{const i=e.type(new Ao);return new oc(i.byteWidth())}case Tt.FixedSizeList:{const i=e.type(new Eo);return new cc(i.listSize(),(t||[])[0])}case Tt.Map:{const i=e.type(new Bo);return new uc((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Tt[n]}" (${n})`)}function H2(e,t){const n=t.fields.map(s=>Ct.encode(e,s));vn.startFieldsVector(e,n.length);const i=vn.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?vn.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),c=e.createString(`${a}`);return We.startKeyValue(e),We.addKey(e,o),We.addValue(e,c),We.endKeyValue(e)})):-1;return vn.startSchema(e),vn.addFields(e,i),vn.addEndianness(e,tE?bs.Little:bs.Big),r!==-1&&vn.addCustomMetadata(e,r),vn.endSchema(e)}function K2(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;K.isDictionary(s)?(a=s.dictionary.typeId,r=$u.visit(s,e),i=$u.visit(s.dictionary,e)):i=$u.visit(s,e);const o=(s.children||[]).map(l=>Ct.encode(e,l)),c=Me.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?Me.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const d=e.createString(`${l}`),p=e.createString(`${h}`);return We.startKeyValue(e),We.addKey(e,d),We.addValue(e,p),We.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Me.startField(e),Me.addType(e,i),Me.addTypeType(e,a),Me.addChildren(e,c),Me.addNullable(e,!!t.nullable),n!==-1&&Me.addName(e,n),r!==-1&&Me.addDictionary(e,r),u!==-1&&Me.addCustomMetadata(e,u),Me.endField(e)}function J2(e,t){const n=t.nodes||[],i=t.buffers||[];ii.startNodesVector(e,n.length);for(const a of n.slice().reverse())Cr.encode(e,a);const r=e.endVector();ii.startBuffersVector(e,i.length);for(const a of i.slice().reverse())Cn.encode(e,a);const s=e.endVector();return ii.startRecordBatch(e),ii.addLength(e,BigInt(t.length)),ii.addNodes(e,r),ii.addBuffers(e,s),ii.endRecordBatch(e)}function Q2(e,t){const n=Fe.encode(e,t.data);return Gr.startDictionaryBatch(e),Gr.addId(e,BigInt(t.id)),Gr.addIsDelta(e,t.isDelta),Gr.addData(e,n),Gr.endDictionaryBatch(e)}function X2(e,t){return w0.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Z2(e,t){return v0.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const tE=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Ch=e=>`Expected ${pt[e]} Message in stream, but was null or length 0.`,Rh=e=>`Header pointer of flatbuffer-encoded ${pt[e]} Message is null or length 0.`,A0=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,E0=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class T0{constructor(t){this.source=t instanceof gc?t:new gc(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ft:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Ch(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=ht(this.source.read(t));if(n.byteLength<t)throw new Error(E0(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=pt.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(Rh(n));return r}readMetadataLength(){const t=this.source.read(cu),n=t&&new Vi(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return Ft;if(n.byteLength<t)throw new Error(A0(t,n.byteLength));return{done:!1,value:hi.decode(n)}}}class eE{constructor(t,n){this.source=t instanceof Ss?t:Yy(t)?new _c(t,n):new Ss(t)}[Symbol.asyncIterator](){return this}next(){return x(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ft:t})}throw(t){return x(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return x(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return x(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Ch(t));return n.value})}readMessageBody(t){return x(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=ht(yield this.source.read(t));if(n.byteLength<t)throw new Error(E0(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return x(this,void 0,void 0,function*(){const n=pt.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(Rh(n));return r})}readMetadataLength(){return x(this,void 0,void 0,function*(){const t=yield this.source.read(cu),n=t&&new Vi(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(t){return x(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ft;if(n.byteLength<t)throw new Error(A0(t,n.byteLength));return{done:!1,value:hi.decode(n)}})}}class nE extends T0{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof ip?t:new ip(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:hi.fromJSON(t.schema,pt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:hi.fromJSON(n,pt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:hi.fromJSON(n,pt.RecordBatch)}}return this._body=[],Ft}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Ch(t));return n.value}readSchema(){const t=pt.Schema,n=this.readMessage(t),i=n==null?void 0:n.header();if(!n||!i)throw new Error(Rh(t));return i}}const cu=4,Fl="ARROW1",Na=new Uint8Array(Fl.length);for(let e=0;e<Fl.length;e+=1)Na[e]=Fl.codePointAt(e);function Mh(e,t=0){for(let n=-1,i=Na.length;++n<i;)if(Na[n]!==e[t+n])return!1;return!0}const Ha=Na.length,O0=Ha+cu,iE=Ha*2+cu;class Ye extends Oh{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Fr(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Pe.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Pe.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ye?t:gl(t)?oE(t):Yy(t)?lE(t):Fr(t)?(()=>x(this,void 0,void 0,function*(){return yield Ye.from(yield t)}))():Gy(t)||yh(t)||Hy(t)||Rs(t)?uE(new Ss(t)):cE(new gc(t))}static readAll(t){return t instanceof Ye?t.isSync()?fp(t):dp(t):gl(t)||ArrayBuffer.isView(t)||Wa(t)||qy(t)?fp(t):dp(t)}}class Sc extends Ye{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Jt(this,arguments,function*(){yield v(yield*Br(qe(this[Symbol.iterator]())))})}}class Ic extends Ye{constructor(t){super(t),this._impl=t}readAll(){var t,n,i,r;return x(this,void 0,void 0,function*(){const s=new Array;try{for(var a=!0,o=qe(this),c;c=yield o.next(),t=c.done,!t;a=!0){r=c.value,a=!1;const u=r;s.push(u)}}catch(u){n={error:u}}finally{try{!a&&!t&&(i=o.return)&&(yield i.call(o))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class B0 extends Sc{constructor(t){super(t),this._impl=t}}class rE extends Ic{constructor(t){super(t),this._impl=t}}class N0{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),r=nt({type:new ne(this.schema.fields),length:t.length,children:i});return new fe(this.schema,r)}_loadDictionaryBatch(t,n){const{id:i,isDelta:r}=t,{dictionaries:s,schema:a}=this,o=s.get(i);if(r||!o){const c=a.dictionaries.get(i),u=this._loadVectors(t.data,n,[c]);return(o&&r?o.concat(new Nt(u)):new Nt(u)).memoize()}return o.memoize()}_loadVectors(t,n,i){return new m0(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class xc extends N0{constructor(t,n){super(n),this._reader=gl(t)?new nE(this._handle=t):new T0(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=D0(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ft}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ft}next(){if(this.closed)return Ft;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kh(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Ac extends N0{constructor(t,n){super(n),this._reader=new eE(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return x(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return x(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=D0(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return x(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ft})}return(t){return x(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ft})}next(){return x(this,void 0,void 0,function*(){if(this.closed)return Ft;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kh(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return x(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class F0 extends xc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof rp?t:new rp(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(pt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(pt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}}_readFooter(){const{_handle:t}=this,n=t.size-O0,i=t.readInt32(n),r=t.readAt(n-i,i);return Ba.decode(r)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class sE extends Ac{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(t instanceof _c?t:new _c(t,i),r)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return x(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return x(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(pt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(t){var n;return x(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(pt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}})}_readFooter(){return x(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-O0,i=yield t.readInt32(n),r=yield t.readAt(n-i,i);return Ba.decode(r)})}_readNextMessageAndValidate(t){return x(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class aE extends xc{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new _2(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function D0(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*fp(e){const t=Ye.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function dp(e){return Jt(this,arguments,function*(){const n=yield v(Ye.from(e));try{if(!(yield v(n.open({autoDestroy:!1}))).closed)do yield yield v(n);while(!(yield v(n.reset().open())).closed)}finally{yield v(n.cancel())}})}function oE(e){return new Sc(new aE(e))}function cE(e){const t=e.peek(Ha+7&-8);return t&&t.byteLength>=4?Mh(t)?new B0(new F0(e.read())):new Sc(new xc(e)):new Sc(new xc(function*(){}()))}function uE(e){return x(this,void 0,void 0,function*(){const t=yield e.peek(Ha+7&-8);return t&&t.byteLength>=4?Mh(t)?new B0(new F0(yield e.read())):new Ic(new Ac(e)):new Ic(new Ac(function(){return Jt(this,arguments,function*(){})}()))})}function lE(e){return x(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new _c(e,t);return t>=iE&&Mh(yield n.readAt(0,Ha+7&-8))?new rE(new sE(n)):new Ic(new Ac(n))})}let Gt=class k0 extends it{static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof fe?s.data.children:s.data),i=new k0;return i.visitMany(n(t)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Nt)return this.visitMany(t.data),this;const{type:n}=t;if(!K.isDictionary(n)){const{length:i,nullCount:r}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");K.isNull(n)||sn.call(this,r<=0?new Uint8Array(0):Ih(t.offset,i,t.nullBitmap)),this.nodes.push(new Cr(i,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function sn(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Cn(this._byteLength,t)),this._byteLength+=t,this}function hE(e){const{type:t,length:n,typeIds:i,valueOffsets:r}=e;if(sn.call(this,i),t.mode===Ne.Sparse)return Dl.call(this,e);if(t.mode===Ne.Dense){if(e.offset<=0)return sn.call(this,r),Dl.call(this,e);{const s=i.reduce((l,h)=>Math.max(l,h),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(n),u=gh(-r[0],n,r);for(let l,h,d=-1;++d<n;)(h=o[l=i[d]])===-1&&(h=o[l]=u[l]),c[d]=u[d]-h,++a[l];sn.call(this,c);for(let l,h=-1,d=t.children.length;++h<d;)if(l=e.children[h]){const p=t.typeIds[h],g=Math.min(n,a[p]);this.visit(l.slice(o[p],g))}}}return this}function fE(e){let t;return e.nullCount>=e.length?sn.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?sn.call(this,Ih(e.offset,e.length,t)):sn.call(this,lc(e.values))}function nr(e){return sn.call(this,e.values.subarray(0,e.length*e.stride))}function C0(e){const{length:t,values:n,valueOffsets:i}=e,r=i[0],s=i[t],a=Math.min(s-r,n.byteLength-r);return sn.call(this,gh(-i[0],t,i)),sn.call(this,n.subarray(r,r+a)),this}function Lh(e){const{length:t,valueOffsets:n}=e;return n&&sn.call(this,gh(n[0],t,n)),this.visit(e.children[0])}function Dl(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Gt.prototype.visitBool=fE;Gt.prototype.visitInt=nr;Gt.prototype.visitFloat=nr;Gt.prototype.visitUtf8=C0;Gt.prototype.visitBinary=C0;Gt.prototype.visitFixedSizeBinary=nr;Gt.prototype.visitDate=nr;Gt.prototype.visitTimestamp=nr;Gt.prototype.visitTime=nr;Gt.prototype.visitDecimal=nr;Gt.prototype.visitList=Lh;Gt.prototype.visitStruct=Dl;Gt.prototype.visitUnion=hE;Gt.prototype.visitInterval=nr;Gt.prototype.visitFixedSizeList=Lh;Gt.prototype.visitMap=Lh;let R0=class extends Oh{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Fo,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ge(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Fr(t)?t.then(n=>this.writeAll(n)):Rs(t)?Ph(this,t):Uh(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Fo?this._sink=t:(this._sink=new Fo,t&&Nx(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Fx(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Ol(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof zi&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof fe&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Ol(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof fe?t instanceof kh||this._writeRecordBatch(t):t instanceof zi?this.writeAll(t.batches):Wa(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=hi.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,c=o-s-a;return t.headerType===pt.RecordBatch?this._recordBatchBlocks.push(new ws(o,t.bodyLength,this._position)):t.headerType===pt.DictionaryBatch&&this._dictionaryBlocks.push(new ws(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(c)}_write(t){if(this._started){const n=ht(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(hi.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Na)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=Gt.assemble(t),a=new Fe(t.numRows,i,r),o=hi.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=Gt.assemble(new Nt([t])),c=new Fe(t.length,s,a),u=new Pn(c,n,i),l=hi.from(u,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}},dE=class M0 extends R0{static writeAll(t,n){const i=new M0(n);return Fr(t)?t.then(r=>i.writeAll(r)):Rs(t)?Ph(i,t):Uh(i,t)}},pE=class L0 extends R0{static writeAll(t){const n=new L0;return Fr(t)?t.then(i=>n.writeAll(i)):Rs(t)?Ph(n,t):Uh(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Ba.encode(new Ba(t,Be.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}};function Uh(e,t){let n=t;t instanceof zi&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function Ph(e,t){var n,i,r,s,a,o,c;return x(this,void 0,void 0,function*(){try{for(n=!0,i=qe(t);r=yield i.next(),s=r.done,!s;n=!0){c=r.value,n=!1;const u=c;e.write(u)}}catch(u){a={error:u}}finally{try{!n&&!s&&(o=i.return)&&(yield o.call(i))}finally{if(a)throw a.error}}return e.finish()})}function yE(e,t="stream"){return(t==="stream"?dE:pE).writeAll(e).toUint8Array(!0)}var mE=Object.create,U0=Object.defineProperty,gE=Object.getOwnPropertyDescriptor,_E=Object.getOwnPropertyNames,bE=Object.getPrototypeOf,vE=Object.prototype.hasOwnProperty,wE=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),SE=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of _E(t))!vE.call(e,r)&&r!==n&&U0(e,r,{get:()=>t[r],enumerable:!(i=gE(t,r))||i.enumerable});return e},IE=(e,t,n)=>(n=e!=null?mE(bE(e)):{},SE(t||!e||!e.__esModule?U0(n,"default",{value:e,enumerable:!0}):n,e)),xE=wE((e,t)=>{t.exports=Worker}),AE=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(AE||{}),EE=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(EE||{}),TE=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(TE||{}),OE=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(OE||{}),BE=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(BE||{}),NE=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(NE||{}),FE=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},DE=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(DE||{}),kE=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=Ye.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new zi(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new P0(this._bindings,this._conn,t),i=await Ye.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new CE(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=yE(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},P0=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},CE=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=Ye.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new zi(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new P0(this.bindings,this.connectionId,t),i=await Ye.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},RE=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(RE||{}),ME=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(ME||{}),rt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,i)=>{this.promiseResolver=n,this.promiseRejecter=i})}};function Co(e){switch(e.typeId){case m.Binary:return{sqlType:"binary"};case m.Bool:return{sqlType:"bool"};case m.Date:return{sqlType:"date"};case m.DateDay:return{sqlType:"date32[d]"};case m.DateMillisecond:return{sqlType:"date64[ms]"};case m.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case m.Float:return{sqlType:"float"};case m.Float16:return{sqlType:"float16"};case m.Float32:return{sqlType:"float32"};case m.Float64:return{sqlType:"float64"};case m.Int:return{sqlType:"int32"};case m.Int16:return{sqlType:"int16"};case m.Int32:return{sqlType:"int32"};case m.Int64:return{sqlType:"int64"};case m.Uint16:return{sqlType:"uint16"};case m.Uint32:return{sqlType:"uint32"};case m.Uint64:return{sqlType:"uint64"};case m.Uint8:return{sqlType:"uint8"};case m.IntervalDayTime:return{sqlType:"interval[dt]"};case m.IntervalYearMonth:return{sqlType:"interval[m]"};case m.List:return{sqlType:"list",valueType:Co(e.valueType)};case m.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case m.Null:return{sqlType:"null"};case m.Utf8:return{sqlType:"utf8"};case m.Struct:return{sqlType:"struct",fields:e.children.map(t=>kl(t.name,t.type))};case m.Map:{let t=e;return{sqlType:"map",keyType:Co(t.keyType),valueType:Co(t.valueType)}}case m.Time:return{sqlType:"time[s]"};case m.TimeMicrosecond:return{sqlType:"time[us]"};case m.TimeMillisecond:return{sqlType:"time[ms]"};case m.TimeNanosecond:return{sqlType:"time[ns]"};case m.TimeSecond:return{sqlType:"time[s]"};case m.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case m.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case m.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case m.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case m.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function kl(e,t){let n=Co(t);return n.name=e,n}var LE=new TextEncoder,UE=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let r of this._onInstantiationProgress)r(n.data);return}}let i=this._pendingRequests.get(n.requestId);if(!i){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let r=new Error(n.data.message);r.name=n.data.name,(t=Object.getOwnPropertyDescriptor(r,"stack"))!=null&&t.writable&&(r.stack=n.data.stack),i.promiseRejecter(r);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){i.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){i.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){i.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){i.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){i.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){i.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){i.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){i.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){i.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){i.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){i.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){i.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){i.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(n.data);return}break}i.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new rt("RESET",null);return await this.postTask(e)}async ping(){let e=new rt("PING",null);await this.postTask(e)}async dropFile(e){let t=new rt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new rt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new rt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new rt("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new rt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new rt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new rt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new rt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new rt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new kE(this,e)}async disconnect(e){let t=new rt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new rt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new rt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new rt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new rt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new rt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new rt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new rt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new rt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new rt("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new rt("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new rt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=LE.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){t===void 0&&(t=e);let r=new rt("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(e){let t=new rt("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new rt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let r=new rt("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(r,[])}async collectFileStatistics(e,t){let n=new rt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new rt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new rt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new rt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let i=new rt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(kl(s,a))}n.columnsFlat=r,delete n.columns}let i=new rt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(kl(s,a))}n.columnsFlat=r,delete n.columns}let i=new rt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}},PE=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),$E=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),VE=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),jE=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),zE={name:"@duckdb/duckdb-wasm",version:"1.28.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^13.0.0"},devDependencies:{"@types/emscripten":"^1.39.8","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^6.5.0","@typescript-eslint/parser":"^6.7.3",esbuild:"^0.19.5",eslint:"^8.50.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.33.2","fast-glob":"^3.3.1",jasmine:"^5.1.0","jasmine-core":"^5.1.1","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.0.2",puppeteer:"^21.1.1",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.2",typescript:"^5.2.2","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},$h=zE.version.split(".");$h[0];$h[1];$h[2];var WE=()=>typeof navigator>"u",Vu=null,ju=null,zu=null,Wu=null,qu=null;async function qE(){return Vu==null&&(Vu=typeof BigInt64Array<"u"),ju==null&&(ju=await $E()),zu==null&&(zu=await jE()),Wu==null&&(Wu=await VE()),qu==null&&(qu=await PE()),{bigInt64Array:Vu,crossOriginIsolated:WE()||globalThis.crossOriginIsolated||!1,wasmExceptions:ju,wasmSIMD:Wu,wasmThreads:zu,wasmBulkMemory:qu}}async function YE(e){let t=await qE();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}IE(xE());function GE(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}GE();var HE=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(HE||{});const KE=""+new URL("../assets/duckdb-mvp.d4199293.wasm",import.meta.url).href,JE=""+new URL("../assets/duckdb-browser-mvp.worker.48e59965.js",import.meta.url).href,QE=""+new URL("../assets/duckdb-eh.053f5ea4.wasm",import.meta.url).href,XE=""+new URL("../assets/duckdb-browser-eh.worker.f47868c8.js",import.meta.url).href;class ZE extends Gn{constructor(t){super(),this.sources=[],this.db=null,this.conn=null,t.sources?this.sources.push.apply(this.sources,t.sources):t.name&&this.sources.push(t)}register(t){this.sources.push(t)}async query(t){return await this.conn.query(t)}async init(){const n=await YE({mvp:{mainModule:KE,mainWorker:JE},eh:{mainModule:QE,mainWorker:XE}}),i=new Worker(n.mainWorker),r=new FE;this.db=new UE(r,i),await this.db.instantiate(n.mainModule,n.pthreadWorker),this.conn=await this.db.connect();for(let s of this.sources)await this.load(s)}async load(t){let n=t.name;if(t.csv)await this.db.registerFileText(n,t.csv),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0});else if(t.url){let r=await(await fetch(t.url)).arrayBuffer();const s=new Uint8Array(r);await this.db.registerFileBuffer(n,s),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0})}else if(t.parquet){const i=`${kv}/${t.parquet}`;console.log("parquet_name and registration path:",t.parquet,i),await this.db.registerFileURL(t.parquet,i,4,!1);const r=`CREATE TABLE ${t.name} AS SELECT * FROM parquet_scan(${t.parquet})`;console.log("parquet loading query:",r),await this.query(r);const a=(await this.conn.query("SHOW ALL TABLES")).toArray().map(Object.fromEntries);console.log("database DIAGNOSTIC: ",a)}return this}async _execute(t,...n){for(const i of t){const r=i.q;let s=await this.conn.query(r),a=s.toArray().map(Object.fromEntries);return a.columns=s.schema.fields.map(o=>o.name),console.debug("duckdb.execute",r,a,...n),this.emit("data",a,...n),this.emit("debug",a),a}}}var Fi=(e=>(e.LITERAL="literal",e.AST="ast",e.LIST="list",e.ANY="any",e.OPT="opt",e.FIXEDMULTI="fixedmulti",e.MULTI="multi",e))(Fi||{});let pp=d1(e=>e.length>0);class tT{constructor(t){this.binding={},this.spec={},this.spec=t}update(t){return this.binding=ah(this.binding,t),this}snapshot(){return this.binding}restoreSnapshot(t){this.binding=t}toSQL(){return Cl(this.binding,this.spec)}}function Cl(e,t){let n=t.children??[],i=V1(Cl,[e]),r=[],s;switch(t==null?void 0:t.type){case Fi.LITERAL:return t.value;case Fi.AST:return r=n.map(i),pp(r).join("");case Fi.LIST:return r=n.map(i),pp(r).join(t.delim);case Fi.ANY:if(s=e[t.id]??t.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=n.length?a:i(n[a]);case Fi.OPT:return s=e[t.id]??t.default??0,T1(s,[1,"selected"])?i(n[0]):"";case Fi.FIXEDMULTI:case Fi.MULTI:let o=e[t.id]??t.default??[];return sh(Array,o)||(o=[o]),o.map(c=>Cl(c,n[0])).join(t.delim??"");default:return""}}class eT extends Gn{constructor(t){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=t,this.dt=new tT(t.difftree),this.backend=sh(String,t.backend)?Cv(Sx)[t.backend]:t.backend,this.backend&&this.backend.on("data",n=>{this.emit("data",n)})}snapshot(){return this.dt.snapshot()}async _execute(t,n){let i=t[0]??{};const r=this.dt.update(i).toSQL();if(console.log("ClientDT.execute",r,i),this.emit("debug",r),this.backend)return this.backend.execute(r,n)}}class nT extends Gn{constructor(t){super(),this.q=[],this.q=t.data??[]}async execute(t,n){this.emit("data",t??this.q,n)}}class iT extends Gn{constructor(t){super();let n=t.attrs??[];this.gen=i=>{let r=n.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",i]),I1(r)}}async _execute(t,...n){this.emit("data",z1(this.gen,10),...n)}}class rT extends Gn{constructor(t){super(),this.backend=t.backend,this.query=t.query,this.name=t.name,this.params=t.defaults??{}}snapshot(){return zo(this.params)}restoreSnapshot(t){this.params=t}prepareQuery(t,n){let i=t;return my((r,s)=>{i=i.replaceAll(`var(${s})`,r)},n),i}async _execute(t){t=Array.isArray(t)?t:[t],t.forEach(r=>{this.params=ah(this.params,r)});let n=this.prepareQuery(this.query,this.params),i=await this.backend._execute([{q:n}],this.name);return this.emit("data",i,this.name),i}}const ct=Array.isArray;function be(e){return e!=null?ct(e)?e:[e]:[]}function sT(e=0,t=1/0){return`${yp(e)} < row_number() && row_number() <= ${yp(t)}`}function yp(e){return e<0?`count() + ${e}`:e}class $0{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(sT(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,be(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,i){return this.__pivot(this,t,n,i)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...i){return this.__lookup(this,t,n,i.flat())}join(t,n,i,r){return this.__join(this,t,n,i,r)}join_left(t,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,t,n,i,s)}join_right(t,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,t,n,i,s)}join_full(t,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,t,n,i,s)}cross(t,n,i){return this.__cross(this,t,n,i)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function J(e){throw Error(e)}function re(e){return typeof e=="number"}function It(e){return typeof e=="function"}function uu(e,t){const n=Array(e);if(It(t))for(let i=0;i<e;++i)n[i]=t(i);else n.fill(t);return n}let aT=class extends $0{constructor(t,n,i,r,s,a,o){super(o),this._names=Object.freeze(t),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(t){J("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){J("Not implemented")}*values(t){const n=this.getter(t),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(t,n=0){J("Not implemented")}getter(t){J("Not implemented")}objects(t){J("Not implemented")}object(t){J("Not implemented")}[Symbol.iterator](){J("Not implemented")}print(t={}){re(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(i),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))i[++a]=o;else for(let o=0;o<n;++o)i[++a]=o;if(t&&r){const o=this._order,c=this._data;i.sort((u,l)=>o(u,l,c))}return(t||!r)&&(this._index=i),i}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:i}=this._group,r=uu(i,()=>[]),s=this._index,a=this.mask(),o=this.numRows();if(s&&this.isOrdered())for(let c=0,u;c<o;++c)u=s[c],r[n[u]].push(u);else if(a)for(let c=a.next(0);c>=0;c=a.next(c+1))r[n[c]].push(c);else for(let c=0;c<o;++c)r[n[c]].push(c);if(t&&!s&&this.isOrdered()){const c=this._order,u=this._data;for(let l=0;l<i;++l)r[l].sort((h,d)=>c(h,d,u))}return(t||!this.isOrdered())&&(this._partitions=r),r}scan(t,n,i=1/0,r=0){const s=this._mask,a=this._nrows,o=this._data;let c=r||0;if(c>a)return;const u=Math.min(a,c+i),l=()=>c=this._total;if(n&&this.isOrdered()||s&&this._index){const h=this.indices(),d=this._data;for(;c<u;++c)t(h[c],d,l)}else if(s){let h=u-c+1;for(c=s.nth(c);--h&&c>-1;c=s.next(c+1))t(c,o,l)}else for(;c<u;++c)t(c,o,l)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const i=[],r=this.numRows();return t=Math.max(0,t+(t<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-t,t),this.reify(i)}reduce(t){return this.__reduce(this,t)}},oT=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},cT=function(e){return e&&It(e.get)?e:new oT(e)};function pi(e){return e instanceof Date}function ee(e){return e===Object(e)}function Ec(e){return e instanceof RegExp}function Xt(e){return typeof e=="string"}function uT(e,t){const n=i=>J(`Illegal argument type: ${i||typeof e}`);return e instanceof Map?mp(e.entries(),t):pi(e)?n("Date"):Ec(e)?n("RegExp"):Xt(e)?n():ct(e)?lT(e,t):It(e[Symbol.iterator])?hT(e,t):ee(e)?mp(Object.entries(e),t):n()}function mp(e,t=["key","value"]){const n=[],i=[];for(const[s,a]of e)n.push(s),i.push(a);const r={};return t[0]&&(r[t[0]]=n),t[1]&&(r[t[1]]=i),r}function lT(e,t){const n=e.length,i={},r=s=>i[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(r),a=s.length;for(let o=0;o<n;++o){const c=e[o];for(let u=0;u<a;++u)s[u][o]=c[t[u]]}}else t&&t.forEach(r);return i}function hT(e,t){const n={},i=a=>n[a]=[];let r,s;for(const a of e){r||(t=t||Object.keys(a),r=t.map(i),s=r.length);for(let o=0;o<s;++o)r[o].push(a[t[o]])}return!r&&t&&t.forEach(i),n}const{hasOwnProperty:fT}=Object.prototype;function un(e,t){return fT.call(e,t)}function ke(e){return e?new gp({...e.data()},e.columnNames()):new gp}class gp{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return un(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ot=void 0,dT=Object.getPrototypeOf(Int8Array);function Ka(e){return e instanceof dT}function wr(e){return ct(e)||Ka(e)}function rn(e){return e!=null&&e===e}const Qs=e=>wr(e)||Xt(e),pT={compact:e=>wr(e)?e.filter(t=>rn(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>Qs(e)?e.includes(t,n):!1,indexof:(e,t)=>Qs(e)?e.indexOf(t):-1,join:(e,t)=>wr(e)?e.join(t):ot,lastindexof:(e,t)=>Qs(e)?e.lastIndexOf(t):-1,length:e=>Qs(e)?e.length:0,pluck:(e,t)=>wr(e)?e.map(n=>rn(n)?n[t]:ot):ot,reverse:e=>wr(e)?e.slice().reverse():Xt(e)?e.split("").reverse().join(""):ot,slice:(e,t,n)=>Qs(e)?e.slice(t,n):ot};function yT(e,t,n,i,r){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+i*Math.floor(1e-14+(e-t)/i+(r||0)))}function Ro(e,t,n="0"){const i=e+"",r=i.length;return r<t?Array(t-r+1).join(n)+i:i}const gn=e=>(e<10?"0":"")+e,mT=e=>e<0?"-"+Ro(-e,6):e>9999?"+"+Ro(e,6):Ro(e,4);function V0(e,t,n,i,r,s,a,o,c){const u=o?"Z":"";return mT(e)+"-"+gn(t+1)+"-"+gn(n)+(!c||a?"T"+gn(i)+":"+gn(r)+":"+gn(s)+"."+Ro(a,3)+u:s?"T"+gn(i)+":"+gn(r)+":"+gn(s)+u:r||i||!o?"T"+gn(i)+":"+gn(r)+u:"")}function j0(e,t){return isNaN(e)?"Invalid Date":V0(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function lu(e,t){return isNaN(e)?"Invalid Date":V0(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const gT=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function _T(e){return e.match(gT)&&!isNaN(Date.parse(e))}function bT(e,t=Date.parse){return _T(e)?t(e):e}const z0=6e4,W0=864e5,q0=6048e5,Dt=new Date,kt=new Date,Rt=e=>(Dt.setTime(typeof e=="string"?bT(e):e),Dt);function vT(e,t,n,i,r,s,a){return arguments.length?new Date(e,t||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function wT(e,t,n,i,r,s,a){return arguments.length?new Date(Date.UTC(e,t||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function ST(e){kt.setTime(+e),kt.setHours(0,0,0,0),Dt.setTime(+kt),Dt.setMonth(0),Dt.setDate(1);const t=(kt.getTimezoneOffset()-Dt.getTimezoneOffset())*z0;return Math.floor(1+(kt-Dt-t)/W0)}function IT(e){kt.setTime(+e),kt.setUTCHours(0,0,0,0);const t=Date.UTC(kt.getUTCFullYear(),0,1);return Math.floor(1+(kt-t)/W0)}function xT(e,t){const n=t||0;kt.setTime(+e),kt.setDate(kt.getDate()-(kt.getDay()+7-n)%7),kt.setHours(0,0,0,0),Dt.setTime(+e),Dt.setMonth(0),Dt.setDate(1),Dt.setDate(1-(Dt.getDay()+7-n)%7),Dt.setHours(0,0,0,0);const i=(kt.getTimezoneOffset()-Dt.getTimezoneOffset())*z0;return Math.floor((1+(kt-Dt)-i)/q0)}function AT(e,t){const n=t||0;return kt.setTime(+e),kt.setUTCDate(kt.getUTCDate()-(kt.getUTCDay()+7-n)%7),kt.setUTCHours(0,0,0,0),Dt.setTime(+e),Dt.setUTCMonth(0),Dt.setUTCDate(1),Dt.setUTCDate(1-(Dt.getUTCDay()+7-n)%7),Dt.setUTCHours(0,0,0,0),Math.floor((1+(kt-Dt))/q0)}const ET={format_date:(e,t)=>j0(Rt(e),!t),format_utcdate:(e,t)=>lu(Rt(e),!t),timestamp:e=>+Rt(e),year:e=>Rt(e).getFullYear(),quarter:e=>Math.floor(Rt(e).getMonth()/3),month:e=>Rt(e).getMonth(),date:e=>Rt(e).getDate(),dayofweek:e=>Rt(e).getDay(),hours:e=>Rt(e).getHours(),minutes:e=>Rt(e).getMinutes(),seconds:e=>Rt(e).getSeconds(),milliseconds:e=>Rt(e).getMilliseconds(),utcyear:e=>Rt(e).getUTCFullYear(),utcquarter:e=>Math.floor(Rt(e).getUTCMonth()/3),utcmonth:e=>Rt(e).getUTCMonth(),utcdate:e=>Rt(e).getUTCDate(),utcdayofweek:e=>Rt(e).getUTCDay(),utchours:e=>Rt(e).getUTCHours(),utcminutes:e=>Rt(e).getUTCMinutes(),utcseconds:e=>Rt(e).getUTCSeconds(),utcmilliseconds:e=>Rt(e).getUTCMilliseconds(),datetime:vT,dayofyear:ST,week:xT,utcdatetime:wT,utcdayofyear:IT,utcweek:AT,now:Date.now};function Vh(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:pi(e)||pi(t)?+e==+t:Ec(e)&&Ec(t)?e+""==t+"":ee(e)&&ee(t)?TT(e,t):!1}function TT(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return _p(e,t);const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length||(n.sort(),i.sort(),!_p(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!Vh(e[a],t[a]))return!1}return!0}function _p(e,t,n=Vh){const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;++r)if(!n(e[r],t[r]))return!1;return!0}const OT={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let BT=Math.random;function Ls(){return BT()}const NT={random:Ls,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function jh(e){return e instanceof Map}function FT(e){return e instanceof Set}function Mo(e){return jh(e)||FT(e)}function Yu(e){return Array.from(e)}const DT={has:(e,t)=>Mo(e)?e.has(t):e!=null?un(e,t):!1,keys:e=>jh(e)?Yu(e.keys()):e!=null?Object.keys(e):[],values:e=>Mo(e)?Yu(e.values()):e!=null?Object.values(e):[],entries:e=>Mo(e)?Yu(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ot};function kT(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(un(t,e))return t[e];return n!==void 0?n:e}function CT(e,t,n){let i=arguments.length;e=+e,t=+t,n=i<2?(t=e,e=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((t-e)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=e+s*n;return r}const RT={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const i=e==null?e:String(e).match(t);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},es={bin:yT,equal:Vh,recode:kT,sequence:CT,...pT,...ET,...OT,...NT,...DT,...RT};function Fa(e){return typeof e=="bigint"}function $n(e){return e===void 0?e+"":Fa(e)?e+"n":JSON.stringify(e)}function G(e,t=[],n=[]){return new MT(e,be(t),be(n))}let MT=class{constructor(t,n,i){this.name=t,this.fields=n,this.params=i}toString(){const t=[...this.fields.map(n=>`d[${$n(n)}]`),...this.params.map($n)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Y0=e=>G("any",e),G0=()=>G("count"),H0=e=>G("array_agg",e),K0=e=>G("array_agg_distinct",e),J0=(e,t)=>G("map_agg",[e,t]),Q0=(e,t)=>G("object_agg",[e,t]),X0=(e,t)=>G("entries_agg",[e,t]);({...es});function LT(e,t){e=Mo(e)?e:new Set(e);let n=t,i=0;for(;e.has(n);)n=t+ ++i;return n}function UT(e,t){if(!e||!t)return e;const{keys:n,rows:i,size:r}=e,s=new Int32Array(r);t.scan(l=>s[n[l]]=1);const a=s.reduce((l,h)=>l+h,0);if(a===r)return e;const o=Array(a);let c=0;for(let l=0;l<r;++l)s[l]&&(o[s[l]=c++]=i[l]);const u=new Uint32Array(n.length);return t.scan(l=>u[l]=s[n[l]]),{...e,keys:u,rows:o,size:c}}function PT(e,t,n,i){const{keys:r,rows:s,size:a}=e;let o=s,c=a,u=null;if(n){u=new Int32Array(a),t(g=>u[r[g]]=1);const p=u.reduce((g,_)=>g+_,0);if(p!==a){o=Array(p),c=0;for(let g=0;g<a;++g)u[g]&&(o[u[g]=c++]=s[g])}}let l=-1;const h=new Uint32Array(i);return t(c!==a?p=>h[++l]=u[r[p]]:p=>h[++l]=r[p]),{...e,keys:h,rows:o,size:c}}function $T(e,t,n,i){const r=i==="map"||i===!0?J0:i==="entries"?X0:i==="object"?Q0:J('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),a=LT(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:n}}).rollup({[a]:H0(a)});for(let c=s.length;--c>=0;)o=o.groupby(s.slice(0,c)).rollup({[a]:r(s[c],a)});return o.get(a)}const VT="ArrayPattern",jT="ArrowFunctionExpression",zT="FunctionExpression",Li="Identifier",Us="Literal",Z0="MemberExpression",WT="ObjectExpression",tg="ObjectPattern",eg="Property",Ja="Column",qT="Constant",YT="Dictionary",GT="Function",HT="Parameter",ng="Op",wt=(e,t)=>{const n=KT[e.type];return n?n(e,t):J(`Unsupported expression construct: ${e.type}`)},Gu=(e,t)=>"("+wt(e.left,t)+" "+e.operator+" "+wt(e.right,t)+")",Hu=(e,t)=>"("+Sn(e.params,t)+")=>"+wt(e.body,t),bp=(e,t)=>wt(e.callee,t)+"("+Sn(e.arguments,t)+")",Sn=(e,t,n=",")=>e.map(i=>wt(i,t)).join(n),ig=e=>e.computed?`[${$n(e.name)}]`:`.${e.name}`,vp=(e,t,n)=>{const i=e.table||"";return`data${i}${ig(e)}.${n}(${t.index}${i})`},KT={Constant:e=>e.raw,Column:(e,t)=>vp(e,t,"get"),Dictionary:(e,t)=>vp(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${ig(e)}`,Op:(e,t)=>`op(${$n(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:i}=e,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+wt(i[a],t)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,i=wt(e.object,t),r=wt(e.property,t);return i+(n?"."+r:"["+r+"]")},CallExpression:bp,NewExpression:(e,t)=>"new "+bp(e,t),ArrayExpression:(e,t)=>"["+Sn(e.elements,t)+"]",AssignmentExpression:Gu,BinaryExpression:Gu,LogicalExpression:Gu,UnaryExpression:(e,t)=>"("+e.operator+wt(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+wt(e.test,t)+"?"+wt(e.consequent,t)+":"+wt(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Sn(e.properties,t)+"})",Property:(e,t)=>{const n=wt(e.key,t);return(e.computed?`[${n}]`:n)+":"+wt(e.value,t)},ArrowFunctionExpression:Hu,FunctionExpression:Hu,FunctionDeclaration:Hu,ArrayPattern:(e,t)=>"["+Sn(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Sn(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Sn(e.declarations,t,","),VariableDeclarator:(e,t)=>wt(e.id,t)+"="+wt(e.init,t),SpreadElement:(e,t)=>"..."+wt(e.argument,t),BlockStatement:(e,t)=>"{"+Sn(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>wt(e.expression,t),IfStatement:(e,t)=>"if ("+wt(e.test,t)+")"+wt(e.consequent,t)+(e.alternate?" else "+wt(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+wt(e.discriminant,t)+") {"+Sn(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+wt(e.test,t):"default")+": "+Sn(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+wt(e.argument,t),Program:(e,t)=>wt(e.body[0],t)};function Tc(e,t={index:"row"}){return wt(e,t)}function JT(e,t,n=15,i=!0,r=0,s){const o=Math.LN10;if(s==null){const c=Math.ceil(Math.log(n)/o),u=t-e||Math.abs(e)||1,l=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(u)/o)-c));Math.ceil(u/s)>n;)s*=10;const h=l.length;for(let d=0;d<h;++d){const p=s/l[d];p>=r&&u/p<=n&&(s=p)}}if(i){let c=Math.log(s);const u=c>=0?0:~~(-c/o)+1,l=Math.pow(10,-u-1);c=Math.floor(e/s+l)*s,e=e<c?c-s:c,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function xs(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:pi(e)?+e:ct(e)||Ka(e)?`[${e.map(xs)}]`:Ec(e)?e+"":QT(e)}function QT(e){let t="{",n=-1;for(const i in e)++n>0&&(t+=","),t+=`"${i}":${xs(e[i])}`;return t+="}",t}function Oc(e,t){const n=e.length;return n===1?(i,r)=>xs(e[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const o=e[a](i,r);if(t&&(o==null||o!==o))return null;s+=xs(o)}return s}}function XT(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=xs(t),i=e.get(n);i?++i.n:e.set(n,{v:t,n:1})},decrement(t){const n=xs(t),i=e.get(n);i.n===1?e.delete(n):--i.n},forEach(t){e.forEach(({v:n,n:i})=>t(n,i))}}}function ai(){}function ZT(e,t=0,n=e.length){let i=e[t++];for(let r=t;r<n;++r)i*=e[r];return i}function $t(e){return e.init=e.init||ai,e.add=e.add||ai,e.rem=e.rem||ai,e}function wp(e,t){return e.product_v=!1,e.product=t}const rg={count:{create:()=>$t({value:e=>e.count}),param:[]},array_agg:{create:()=>$t({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>$t({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>$t({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>$t({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>$t({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ot}),param:[1]},valid:{create:()=>$t({value:e=>e.valid}),param:[1]},invalid:{create:()=>$t({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=XT(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>$t({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>$t({value:e=>{let t=ot,n=0;return e.distinct.forEach((i,r)=>{r>n&&(n=r,t=i)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ot,add:(e,t)=>Fa(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>wp(e,1),value:e=>e.valid?e.product_v?wp(e,ZT(e.list.values())):e.product:void 0,add:(e,t)=>Fa(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ot,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>$t({value:e=>e.valid?e.mean:ot}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ot,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>$t({value:e=>e.valid>1?e.dev/e.valid:ot}),param:[1],req:["variance"]},stdev:{create:()=>$t({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ot}),param:[1],req:["variance"]},stdevp:{create:()=>$t({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ot}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ot,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ot)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ot,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ot)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>$t({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>$t({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ot,add:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x+=i/e.valid,e.mean_y+=r/e.valid;const s=n-e.mean_y;e.dev_x+=i*(t-e.mean_x),e.dev_y+=r*s,e.cov+=i*s},rem:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x-=e.valid?i/e.valid:e.mean_x,e.mean_y-=e.valid?r/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=i*(t-e.mean_x),e.dev_y-=r*s,e.cov-=i*s}}),param:[2]},covariancep:{create:()=>$t({value:e=>e.valid>1?e.cov/e.valid:ot}),param:[2],req:["covariance"]},corr:{create:()=>$t({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ot}),param:[2],req:["covariance"]},bins:{create:(e,t,n,i)=>$t({value:r=>JT(r.min,r.max,e,t,n,i)}),param:[1,4],req:["min","max"]}},Sp={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Ip={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:i,size:r}=t;let s=n;if(e<s){for(;s+1<r&&i(s+1);)++s;e=s}return(1+e)/r}}},param:[]},sg={row_number:{create(){return{init:ai,value:e=>e.index+1}},param:[]},rank:Sp,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const i=n.index;if(i>=e){for(t=e=i+1;n.peer(e);t+=++e);t/=e-i}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Sp.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Ip,ntile:{create(e){e=+e,e>0||J("ntile num must be greater than zero.");const{init:t,value:n}=Ip.create();return{init:t,value:i=>Math.ceil(e*n(i))}},param:[0,1]},lag:{create(e,t=ot){return e=+e||1,{init:ai,value:(n,i)=>{const r=n.index-e;return r>=0?n.value(r,i):t}}},param:[1,2]},lead:{create(e,t=ot){return e=+e||1,{init:ai,value:(n,i)=>{const r=n.index+e;return r<n.size?n.value(r,i):t}}},param:[1,2]},first_value:{create(){return{init:ai,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:ai,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||J("nth_value nth must be greater than zero."),{init:ai,value:(t,n)=>{const i=t.i0+(e-1);return i<t.i1?t.value(i,n):ot}}},param:[1,1]},fill_down:{create(e=ot){let t;return{init:()=>t=e,value:(n,i)=>{const r=n.value(n.index,i);return rn(r)?t=r:t}}},param:[1,1]},fill_up:{create(e=ot){let t,n;return{init:()=>(t=e,n=-1),value:(i,r)=>i.index<=n?t:(n=tO(i,r,i.index))>=0?t=i.value(n,r):(n=i.size,t=e)}},param:[1,1]}};function tO(e,t,n){for(const i=e.size;n<i;++n)if(rn(e.value(n,t)))return n;return-1}function zh(e){return un(rg,e)}function Wh(e){return un(sg,e)}function ag(e){return un(es,e)||e==="row_object"}function og(e){return zh(e)&&rg[e]}function cg(e){return Wh(e)&&sg[e]}function Xs(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const qh={escape:(e,t,n)=>Xs(e,t,n),expr:(e,t)=>Xs(`(row,data,op)=>${e}`,es,t),expr2:(e,t)=>Xs(`(row0,data0,row,data)=>${e}`,es,t),join:(e,t)=>Xs(`(row1,data1,row2,data2)=>${e}`,es,t),param:(e,t)=>Xs(e,es,t)},eO={"==":1,"!=":1,"===":1,"!==":1};function ug(e,t,n=0,i,r){if(e.type=Ja,e.name=t,e.table=n,r&&i&&It(i.keyFor)){const s=eO[r.operator]?r.left===e?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===e?1:0]:null;s&&s.type===Us&&nO(r,e,s,i.keyFor(s.value))}return e}function nO(e,t,n,i){return i<0?(e.type=Us,e.value=!1,e.raw="false"):(t.type=YT,n.value=i,n.raw=i+""),!0}function hu(e){return ct(e)?e:jh(e)?e.entries():e?Object.entries(e):[]}const lg="row_object";function hg(e,t){e.type=WT;const n=e.properties=[];for(const i of hu(t)){const[r,s]=ct(i)?i:[i,i];n.push({type:eg,key:{type:Us,raw:$n(s)},value:ug({computed:!0},r)})}return e}function fg(e){return Tc(hg({},e))}function dg(e){return qh.expr(fg(e))}const iO=new TextDecoder("utf-8"),Rl=e=>iO.decode(e),rO=new TextEncoder,Yh=e=>rO.encode(e),sO=e=>typeof e=="boolean",le=e=>typeof e=="function",ir=e=>e!=null&&Object(e)===e,fu=e=>ir(e)&&le(e.then),Gh=e=>ir(e)&&le(e[Symbol.iterator]),du=e=>ir(e)&&le(e[Symbol.asyncIterator]),aO=e=>ir(e)&&"done"in e&&"value"in e,pg=e=>"_getDOMStream"in e&&"_getNodeStream"in e,oO=e=>ir(e)&&le(e.abort)&&le(e.getWriter)&&!pg(e),cO=e=>ir(e)&&le(e.end)&&le(e.write)&&sO(e.writable)&&!pg(e),uO=e=>ir(e)&&le(e.clear)&&le(e.bytes)&&le(e.position)&&le(e.setPosition)&&le(e.capacity)&&le(e.getBufferIdentifier)&&le(e.createLong),Hh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function lO(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,c=0,u=0,l=e.length;++c<l;){if(a=t[u],o=e[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,n,i-n+s)}return t}function Bc(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function Vn(e,t){const n=lO(e),i=n.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const l=n.length;++c<l;){if(r=n[c],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?Bc(a,s,o):a=s;break}Bc(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function qt(e,t){let n=aO(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Yh(n)),n instanceof ArrayBuffer?new e(n):n instanceof Hh?new e(n):uO(n)?qt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Zs=e=>qt(Int32Array,e),_t=e=>qt(Uint8Array,e),Ml=e=>(e.next(),e);function*hO(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Hh?n(t):Gh(t)?t:n(t);return yield*Ml(function*(r){let s=null;do s=r.next(yield qt(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const fO=e=>hO(Uint8Array,e);function yg(e,t){return Jt(this,arguments,function*(){if(fu(t))return yield v(yield v(yield*Br(qe(yg(e,yield v(t))))));const i=function(a){return Jt(this,arguments,function*(){yield yield v(yield v(a))})},r=function(a){return Jt(this,arguments,function*(){yield v(yield*Br(qe(Ml(function*(o){let c=null;do c=o.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Hh?i(t):Gh(t)?r(t):du(t)?t:i(t);return yield v(yield*Br(qe(Ml(function(a){return Jt(this,arguments,function*(){let o=null;do o=yield v(a.next(yield yield v(qt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield v(new e)})}const dO=e=>yg(Uint8Array,e);function mg(e,t,n){if(e!==0){n=n.slice(0,t);for(let i=-1,r=n.length;++i<r;)n[i]+=e}return n.subarray(0,t)}function pO(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const xp={fromIterable(e){return po(yO(e))},fromAsyncIterable(e){return po(mO(e))},fromDOMStream(e){return po(gO(e))},fromNodeStream(e){return po(bO(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},po=e=>(e.next(),e);function*yO(e){let t,n=!1,i=[],r,s,a,o=0;function c(){return s==="peek"?Vn(i,a)[0]:([r,i,o]=Vn(i,a),r)}({cmd:s,size:a}=yield null);const u=fO(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield c());while(a<o);while(!t)}catch(l){(n=!0)&&typeof u.throw=="function"&&u.throw(l)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function mO(e){return Jt(this,arguments,function*(){let n,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Vn(r,o)[0]:([s,r,c]=Vn(r,o),s)}({cmd:a,size:o}=yield yield v(null));const l=dO(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.next()):yield v(l.next(o-c)),!n&&s.byteLength>0&&(r.push(s),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&typeof l.throw=="function"&&(yield v(l.throw(h)))}finally{i===!1&&typeof l.return=="function"&&(yield v(l.return(new Uint8Array(0))))}return yield v(null)})}function gO(e){return Jt(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Vn(r,o)[0]:([s,r,c]=Vn(r,o),s)}({cmd:a,size:o}=yield yield v(null));const l=new _O(e);try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.read()):yield v(l.read(o-c)),!n&&s.byteLength>0&&(r.push(_t(s)),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&(yield v(l.cancel(h)))}finally{i===!1?yield v(l.cancel()):e.locked&&l.releaseLock()}return yield v(null)})}class _O{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return x(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return x(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=_t(n)),n})}}const Ku=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function bO(e){return Jt(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,c=0,u=[],l;function h(){return a==="peek"?Vn(u,o)[0]:([l,u,c]=Vn(u,o),l)}if({cmd:a,size:o}=yield yield v(null),e.isTTY)return yield yield v(new Uint8Array(0)),yield v(null);try{n[0]=Ku(e,"end"),n[1]=Ku(e,"error");do{if(n[2]=Ku(e,"readable"),[i,s]=yield v(Promise.race(n.map(p=>p[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-c)?(l=_t(e.read(o-c)),l.byteLength<o-c&&(l=_t(e.read()))):l=_t(e.read()),l.byteLength>0&&(u.push(l),c+=l.byteLength)),r||o<=c)do({cmd:a,size:o}=yield yield v(h()));while(o<c)}while(!r)}finally{yield v(d(n,i==="error"?s:null))}return yield v(null);function d(p,g){return l=u=null,new Promise((_,b)=>{for(const[w,L]of p)e.off(w,L);try{const w=e.destroy;w&&w.call(e,g),g=void 0}catch(w){g=w||g}finally{g!=null?b(g):_()}})}})}var ie;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ie||(ie={}));var ve;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ve||(ve={}));var Qt;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Qt||(Qt={}));var jn;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(jn||(jn={}));var T;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(T||(T={}));var zn;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(zn||(zn={}));var Yt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Yt||(Yt={}));var y;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(y||(y={}));var ri;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ri||(ri={}));const vO=void 0;function Dr(e){if(e===null)return"null";if(e===vO)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Dr(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const wO=Symbol.for("isArrowBigNum");function pn(e,...t){return t.length===0?Object.setPrototypeOf(qt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}pn.prototype[wO]=!0;pn.prototype.toJSON=function(){return`"${ka(this)}"`};pn.prototype.valueOf=function(){return gg(this)};pn.prototype.toString=function(){return ka(this)};pn.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return gg(this);case"string":return ka(this);case"default":return SO(this)}return ka(this)};function ls(...e){return pn.apply(this,e)}function hs(...e){return pn.apply(this,e)}function Da(...e){return pn.apply(this,e)}Object.setPrototypeOf(ls.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(hs.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Da.prototype,Object.create(Uint32Array.prototype));Object.assign(ls.prototype,pn.prototype,{constructor:ls,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(hs.prototype,pn.prototype,{constructor:hs,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Da.prototype,pn.prototype,{constructor:Da,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function gg(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new BigUint64Array(t,n,i),a=r&&s.at(-1)&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),c=BigInt(0);if(a){for(const u of s)o+=~u*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const u of s)o+=u*(BigInt(1)<<BigInt(32)*c++);return o}const ka=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Ju(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Ju(e);t=t.slice();let i=1;for(let s=0;s<t.length;s++){const a=t[s],o=~a+i;t[s]=o,i&=a===0?1:0}return`-${Ju(t)}`},SO=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:ka(e);function Ju(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}class Kh{static new(t,n){switch(n){case!0:return new ls(t);case!1:return new hs(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ls(t)}return t.byteLength===16?new Da(t):new hs(t)}static signed(t){return new ls(t)}static unsigned(t){return new hs(t)}static decimal(t){return new Da(t)}constructor(t,n){return Kh.new(t,n)}}function ln(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var _g,bg,vg,wg,Sg,Ig,xg,Ag,Eg,Tg,Og,Bg,Ng,Fg,Dg,kg,Cg,Rg,Mg,Lg;class z{static isNull(t){return(t==null?void 0:t.typeId)===y.Null}static isInt(t){return(t==null?void 0:t.typeId)===y.Int}static isFloat(t){return(t==null?void 0:t.typeId)===y.Float}static isBinary(t){return(t==null?void 0:t.typeId)===y.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===y.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===y.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===y.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===y.Date}static isTime(t){return(t==null?void 0:t.typeId)===y.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===y.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===y.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===y.Duration}static isList(t){return(t==null?void 0:t.typeId)===y.List}static isStruct(t){return(t==null?void 0:t.typeId)===y.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===y.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===y.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===y.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===y.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===y.Dictionary}static isDenseUnion(t){return z.isUnion(t)&&t.mode===ve.Dense}static isSparseUnion(t){return z.isUnion(t)&&t.mode===ve.Sparse}get typeId(){return y.NONE}}_g=Symbol.toStringTag;z[_g]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(z.prototype);let yi=class extends z{toString(){return"Null"}get typeId(){return y.Null}};bg=Symbol.toStringTag;yi[bg]=(e=>e[Symbol.toStringTag]="Null")(yi.prototype);class se extends z{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return y.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}vg=Symbol.toStringTag;se[vg]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(se.prototype);class Jh extends se{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Qh extends se{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Wi extends se{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Xh extends se{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Zh extends se{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class tf extends se{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class ef extends se{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class nf extends se{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Jh.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Qh.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Wi.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Xh.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Zh.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(tf.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ef.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(nf.prototype,"ArrayType",{value:BigUint64Array});class qi extends z{constructor(t){super(),this.precision=t}get typeId(){return y.Float}get ArrayType(){switch(this.precision){case Qt.HALF:return Uint16Array;case Qt.SINGLE:return Float32Array;case Qt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}wg=Symbol.toStringTag;qi[wg]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(qi.prototype);class Ug extends qi{constructor(){super(Qt.HALF)}}class rf extends qi{constructor(){super(Qt.SINGLE)}}class sf extends qi{constructor(){super(Qt.DOUBLE)}}Object.defineProperty(Ug.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(rf.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(sf.prototype,"ArrayType",{value:Float64Array});let Ca=class extends z{constructor(){super()}get typeId(){return y.Binary}toString(){return"Binary"}};Sg=Symbol.toStringTag;Ca[Sg]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Ca.prototype);let As=class extends z{constructor(){super()}get typeId(){return y.Utf8}toString(){return"Utf8"}};Ig=Symbol.toStringTag;As[Ig]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(As.prototype);let Ra=class extends z{constructor(){super()}get typeId(){return y.Bool}toString(){return"Bool"}};xg=Symbol.toStringTag;Ra[xg]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Ra.prototype);let Nc=class extends z{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return y.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Ag=Symbol.toStringTag;Nc[Ag]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Nc.prototype);class Es extends z{constructor(t){super(),this.unit=t}get typeId(){return y.Date}toString(){return`Date${(this.unit+1)*32}<${jn[this.unit]}>`}}Eg=Symbol.toStringTag;Es[Eg]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Es.prototype);class IO extends Es{constructor(){super(jn.DAY)}}class xO extends Es{constructor(){super(jn.MILLISECOND)}}class mi extends z{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return y.Time}toString(){return`Time${this.bitWidth}<${T[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Tg=Symbol.toStringTag;mi[Tg]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(mi.prototype);class AO extends mi{constructor(){super(T.SECOND,32)}}class EO extends mi{constructor(){super(T.MILLISECOND,32)}}class TO extends mi{constructor(){super(T.MICROSECOND,64)}}class OO extends mi{constructor(){super(T.NANOSECOND,64)}}class Fc extends z{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return y.Timestamp}toString(){return`Timestamp<${T[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Og=Symbol.toStringTag;Fc[Og]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Fc.prototype);class Ts extends z{constructor(t){super(),this.unit=t}get typeId(){return y.Interval}toString(){return`Interval<${zn[this.unit]}>`}}Bg=Symbol.toStringTag;Ts[Bg]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Ts.prototype);class BO extends Ts{constructor(){super(zn.DAY_TIME)}}class NO extends Ts{constructor(){super(zn.YEAR_MONTH)}}let Dc=class extends z{constructor(t){super(),this.unit=t}get typeId(){return y.Duration}toString(){return`Duration<${T[this.unit]}>`}};Ng=Symbol.toStringTag;Dc[Ng]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(Dc.prototype);let Os=class extends z{constructor(t){super(),this.children=[t]}get typeId(){return y.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Fg=Symbol.toStringTag;Os[Fg]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Os.prototype);class te extends z{constructor(t){super(),this.children=t}get typeId(){return y.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Dg=Symbol.toStringTag;te[Dg]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(te.prototype);class Ma extends z{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return y.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}kg=Symbol.toStringTag;Ma[kg]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Ma.prototype);let kc=class extends z{constructor(t){super(),this.byteWidth=t}get typeId(){return y.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Cg=Symbol.toStringTag;kc[Cg]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(kc.prototype);let Bs=class extends z{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return y.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Rg=Symbol.toStringTag;Bs[Rg]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Bs.prototype);class La extends z{constructor(t,n=!1){var i,r,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((i=t==null?void 0:t.type)===null||i===void 0)&&i.children)){const a=(r=t==null?void 0:t.type)===null||r===void 0?void 0:r.children[0];a&&(a.name="key");const o=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];o&&(o.name="value")}}get typeId(){return y.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Mg=Symbol.toStringTag;La[Mg]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(La.prototype);const FO=(e=>()=>++e)(-1);class Yi extends z{constructor(t,n,i,r){super(),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?FO():ln(i)}get typeId(){return y.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Lg=Symbol.toStringTag;Yi[Lg]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Yi.prototype);function An(e){const t=e;switch(e.typeId){case y.Decimal:return e.bitWidth/32;case y.Timestamp:return 2;case y.Date:return 1+t.unit;case y.Interval:return 1+t.unit;case y.FixedSizeList:return t.listSize;case y.FixedSizeBinary:return t.byteWidth;default:return 1}}class X{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return DO(this,t,n)}getVisitFnByTypeId(t,n=!0){return Kr(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function DO(e,t,n=!0){return typeof t=="number"?Kr(e,t,n):typeof t=="string"&&t in y?Kr(e,y[t],n):t&&t instanceof z?Kr(e,Ap(t),n):t!=null&&t.type&&t.type instanceof z?Kr(e,Ap(t.type),n):Kr(e,y.NONE,n)}function Kr(e,t,n=!0){let i=null;switch(t){case y.Null:i=e.visitNull;break;case y.Bool:i=e.visitBool;break;case y.Int:i=e.visitInt;break;case y.Int8:i=e.visitInt8||e.visitInt;break;case y.Int16:i=e.visitInt16||e.visitInt;break;case y.Int32:i=e.visitInt32||e.visitInt;break;case y.Int64:i=e.visitInt64||e.visitInt;break;case y.Uint8:i=e.visitUint8||e.visitInt;break;case y.Uint16:i=e.visitUint16||e.visitInt;break;case y.Uint32:i=e.visitUint32||e.visitInt;break;case y.Uint64:i=e.visitUint64||e.visitInt;break;case y.Float:i=e.visitFloat;break;case y.Float16:i=e.visitFloat16||e.visitFloat;break;case y.Float32:i=e.visitFloat32||e.visitFloat;break;case y.Float64:i=e.visitFloat64||e.visitFloat;break;case y.Utf8:i=e.visitUtf8;break;case y.Binary:i=e.visitBinary;break;case y.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case y.Date:i=e.visitDate;break;case y.DateDay:i=e.visitDateDay||e.visitDate;break;case y.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case y.Timestamp:i=e.visitTimestamp;break;case y.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case y.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case y.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case y.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case y.Time:i=e.visitTime;break;case y.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case y.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case y.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case y.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case y.Decimal:i=e.visitDecimal;break;case y.List:i=e.visitList;break;case y.Struct:i=e.visitStruct;break;case y.Union:i=e.visitUnion;break;case y.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case y.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case y.Dictionary:i=e.visitDictionary;break;case y.Interval:i=e.visitInterval;break;case y.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case y.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case y.Duration:i=e.visitDuration;break;case y.DurationSecond:i=e.visitDurationSecond||e.visitDuration;break;case y.DurationMillisecond:i=e.visitDurationMillisecond||e.visitDuration;break;case y.DurationMicrosecond:i=e.visitDurationMicrosecond||e.visitDuration;break;case y.DurationNanosecond:i=e.visitDurationNanosecond||e.visitDuration;break;case y.FixedSizeList:i=e.visitFixedSizeList;break;case y.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${y[t]}'`)}function Ap(e){switch(e.typeId){case y.Null:return y.Null;case y.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?y.Int8:y.Uint8;case 16:return n?y.Int16:y.Uint16;case 32:return n?y.Int32:y.Uint32;case 64:return n?y.Int64:y.Uint64}return y.Int}case y.Float:switch(e.precision){case Qt.HALF:return y.Float16;case Qt.SINGLE:return y.Float32;case Qt.DOUBLE:return y.Float64}return y.Float;case y.Binary:return y.Binary;case y.Utf8:return y.Utf8;case y.Bool:return y.Bool;case y.Decimal:return y.Decimal;case y.Time:switch(e.unit){case T.SECOND:return y.TimeSecond;case T.MILLISECOND:return y.TimeMillisecond;case T.MICROSECOND:return y.TimeMicrosecond;case T.NANOSECOND:return y.TimeNanosecond}return y.Time;case y.Timestamp:switch(e.unit){case T.SECOND:return y.TimestampSecond;case T.MILLISECOND:return y.TimestampMillisecond;case T.MICROSECOND:return y.TimestampMicrosecond;case T.NANOSECOND:return y.TimestampNanosecond}return y.Timestamp;case y.Date:switch(e.unit){case jn.DAY:return y.DateDay;case jn.MILLISECOND:return y.DateMillisecond}return y.Date;case y.Interval:switch(e.unit){case zn.DAY_TIME:return y.IntervalDayTime;case zn.YEAR_MONTH:return y.IntervalYearMonth}return y.Interval;case y.Duration:switch(e.unit){case T.SECOND:return y.DurationSecond;case T.MILLISECOND:return y.DurationMillisecond;case T.MICROSECOND:return y.DurationMicrosecond;case T.NANOSECOND:return y.DurationNanosecond}return y.Duration;case y.Map:return y.Map;case y.List:return y.List;case y.Struct:return y.Struct;case y.Union:switch(e.mode){case ve.Dense:return y.DenseUnion;case ve.Sparse:return y.SparseUnion}return y.Union;case y.FixedSizeBinary:return y.FixedSizeBinary;case y.FixedSizeList:return y.FixedSizeList;case y.Dictionary:return y.Dictionary}throw new Error(`Unrecognized type '${y[e.typeId]}'`)}X.prototype.visitInt8=null;X.prototype.visitInt16=null;X.prototype.visitInt32=null;X.prototype.visitInt64=null;X.prototype.visitUint8=null;X.prototype.visitUint16=null;X.prototype.visitUint32=null;X.prototype.visitUint64=null;X.prototype.visitFloat16=null;X.prototype.visitFloat32=null;X.prototype.visitFloat64=null;X.prototype.visitDateDay=null;X.prototype.visitDateMillisecond=null;X.prototype.visitTimestampSecond=null;X.prototype.visitTimestampMillisecond=null;X.prototype.visitTimestampMicrosecond=null;X.prototype.visitTimestampNanosecond=null;X.prototype.visitTimeSecond=null;X.prototype.visitTimeMillisecond=null;X.prototype.visitTimeMicrosecond=null;X.prototype.visitTimeNanosecond=null;X.prototype.visitDenseUnion=null;X.prototype.visitSparseUnion=null;X.prototype.visitIntervalDayTime=null;X.prototype.visitIntervalYearMonth=null;X.prototype.visitDuration=null;X.prototype.visitDurationSecond=null;X.prototype.visitDurationMillisecond=null;X.prototype.visitDurationMicrosecond=null;X.prototype.visitDurationNanosecond=null;const Pg=new Float64Array(1),Lr=new Uint32Array(Pg.buffer);function $g(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function Vg(e){if(e!==e)return 32256;Pg[0]=e;const t=(Lr[1]&2147483648)>>16&65535;let n=Lr[1]&2146435072,i=0;return n>=1089470464?Lr[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Lr[1]&1048575)>>10):n<=1056964608?(i=1048576+(Lr[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Lr[1]&1048575)+512>>10),t|n|i&65535}class D extends X{}function R(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const kO=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},af=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},CO=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},RO=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},jg=(e,t,n,i)=>{if(n+1<t.length){const{[n]:r,[n+1]:s}=t;e.set(i.subarray(0,s-r),r)}},MO=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},Si=({values:e},t,n)=>{e[t]=n},of=({values:e},t,n)=>{e[t]=n},zg=({values:e},t,n)=>{e[t]=Vg(n)},LO=(e,t,n)=>{switch(e.type.precision){case Qt.HALF:return zg(e,t,n);case Qt.SINGLE:case Qt.DOUBLE:return of(e,t,n)}},cf=({values:e},t,n)=>{kO(e,t,n.valueOf())},uf=({values:e},t,n)=>{af(e,t*2,n.valueOf())},Wg=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},UO=({values:e,valueOffsets:t},n,i)=>jg(e,t,n,i),PO=({values:e,valueOffsets:t},n,i)=>{jg(e,t,n,Yh(i))},qg=(e,t,n)=>{e.type.unit===jn.DAY?cf(e,t,n):uf(e,t,n)},lf=({values:e},t,n)=>af(e,t*2,n/1e3),hf=({values:e},t,n)=>af(e,t*2,n),ff=({values:e},t,n)=>CO(e,t*2,n),df=({values:e},t,n)=>RO(e,t*2,n),Yg=(e,t,n)=>{switch(e.type.unit){case T.SECOND:return lf(e,t,n);case T.MILLISECOND:return hf(e,t,n);case T.MICROSECOND:return ff(e,t,n);case T.NANOSECOND:return df(e,t,n)}},pf=({values:e},t,n)=>{e[t]=n},yf=({values:e},t,n)=>{e[t]=n},mf=({values:e},t,n)=>{e[t]=n},gf=({values:e},t,n)=>{e[t]=n},Gg=(e,t,n)=>{switch(e.type.unit){case T.SECOND:return pf(e,t,n);case T.MILLISECOND:return yf(e,t,n);case T.MICROSECOND:return mf(e,t,n);case T.NANOSECOND:return gf(e,t,n)}},Hg=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},$O=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=He.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n.get(++a))},VO=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=He.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const u of c)if(s(i,a,u),++a>=o)break},jO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),zO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),WO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),qO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),YO=(e,t,n)=>{const i=e.type.children.map(s=>He.getVisitFn(s.type)),r=n instanceof Map?WO(t,n):n instanceof ut?zO(t,n):Array.isArray(n)?jO(t,n):qO(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},GO=(e,t,n)=>{e.type.mode===ve.Dense?Kg(e,t,n):Jg(e,t,n)},Kg=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];He.visit(r,e.valueOffsets[t],n)},Jg=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];He.visit(r,t,n)},HO=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},Qg=(e,t,n)=>{e.type.unit===zn.DAY_TIME?_f(e,t,n):bf(e,t,n)},_f=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},bf=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},vf=({values:e},t,n)=>{e[t]=n},wf=({values:e},t,n)=>{e[t]=n},Sf=({values:e},t,n)=>{e[t]=n},If=({values:e},t,n)=>{e[t]=n},Xg=(e,t,n)=>{switch(e.type.unit){case T.SECOND:return vf(e,t,n);case T.MILLISECOND:return wf(e,t,n);case T.MICROSECOND:return Sf(e,t,n);case T.NANOSECOND:return If(e,t,n)}},KO=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=He.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};D.prototype.visitBool=R(MO);D.prototype.visitInt=R(Si);D.prototype.visitInt8=R(Si);D.prototype.visitInt16=R(Si);D.prototype.visitInt32=R(Si);D.prototype.visitInt64=R(Si);D.prototype.visitUint8=R(Si);D.prototype.visitUint16=R(Si);D.prototype.visitUint32=R(Si);D.prototype.visitUint64=R(Si);D.prototype.visitFloat=R(LO);D.prototype.visitFloat16=R(zg);D.prototype.visitFloat32=R(of);D.prototype.visitFloat64=R(of);D.prototype.visitUtf8=R(PO);D.prototype.visitBinary=R(UO);D.prototype.visitFixedSizeBinary=R(Wg);D.prototype.visitDate=R(qg);D.prototype.visitDateDay=R(cf);D.prototype.visitDateMillisecond=R(uf);D.prototype.visitTimestamp=R(Yg);D.prototype.visitTimestampSecond=R(lf);D.prototype.visitTimestampMillisecond=R(hf);D.prototype.visitTimestampMicrosecond=R(ff);D.prototype.visitTimestampNanosecond=R(df);D.prototype.visitTime=R(Gg);D.prototype.visitTimeSecond=R(pf);D.prototype.visitTimeMillisecond=R(yf);D.prototype.visitTimeMicrosecond=R(mf);D.prototype.visitTimeNanosecond=R(gf);D.prototype.visitDecimal=R(Hg);D.prototype.visitList=R($O);D.prototype.visitStruct=R(YO);D.prototype.visitUnion=R(GO);D.prototype.visitDenseUnion=R(Kg);D.prototype.visitSparseUnion=R(Jg);D.prototype.visitDictionary=R(HO);D.prototype.visitInterval=R(Qg);D.prototype.visitIntervalDayTime=R(_f);D.prototype.visitIntervalYearMonth=R(bf);D.prototype.visitDuration=R(Xg);D.prototype.visitDurationSecond=R(vf);D.prototype.visitDurationMillisecond=R(wf);D.prototype.visitDurationMicrosecond=R(Sf);D.prototype.visitDurationNanosecond=R(If);D.prototype.visitFixedSizeList=R(KO);D.prototype.visitMap=R(VO);const He=new D,tn=Symbol.for("parent"),fs=Symbol.for("rowIndex");class xf{constructor(t,n){return this[tn]=t,this[fs]=n,new Proxy(this,new QO)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[fs],n=this[tn],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=we.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${Dr(t)}: ${Dr(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new JO(this[tn],this[fs])}}class JO{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,we.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(xf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[tn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[fs]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class QO{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[tn].type.children.map(n=>n.name)}has(t,n){return t[tn].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[tn].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[tn].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=we.visit(t[tn].children[i],t[fs]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[tn].type.children.findIndex(s=>s.name===n);return r!==-1?(He.visit(t[tn].children[r],t[fs],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class O extends X{}function k(e){return(t,n)=>t.getValid(n)?e(t,n):null}const XO=(e,t)=>864e5*e[t],Af=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),ZO=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,tB=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Zg=e=>new Date(e),eB=(e,t)=>Zg(XO(e,t)),nB=(e,t)=>Zg(Af(e,t)),iB=(e,t)=>null,t_=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],r=t[n+1];return e.subarray(i,r)},rB=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},e_=({values:e},t)=>eB(e,t),n_=({values:e},t)=>nB(e,t*2),rr=({stride:e,values:t},n)=>t[e*n],sB=({stride:e,values:t},n)=>$g(t[e*n]),i_=({values:e},t)=>e[t],aB=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),oB=({values:e,valueOffsets:t},n)=>t_(e,t,n),cB=({values:e,valueOffsets:t},n)=>{const i=t_(e,t,n);return i!==null?Rl(i):null},uB=({values:e},t)=>e[t],lB=({type:e,values:t},n)=>e.precision!==Qt.HALF?t[n]:$g(t[n]),hB=(e,t)=>e.type.unit===jn.DAY?e_(e,t):n_(e,t),r_=({values:e},t)=>1e3*Af(e,t*2),s_=({values:e},t)=>Af(e,t*2),a_=({values:e},t)=>ZO(e,t*2),o_=({values:e},t)=>tB(e,t*2),fB=(e,t)=>{switch(e.type.unit){case T.SECOND:return r_(e,t);case T.MILLISECOND:return s_(e,t);case T.MICROSECOND:return a_(e,t);case T.NANOSECOND:return o_(e,t)}},c_=({values:e},t)=>e[t],u_=({values:e},t)=>e[t],l_=({values:e},t)=>e[t],h_=({values:e},t)=>e[t],dB=(e,t)=>{switch(e.type.unit){case T.SECOND:return c_(e,t);case T.MILLISECOND:return u_(e,t);case T.MICROSECOND:return l_(e,t);case T.NANOSECOND:return h_(e,t)}},pB=({values:e,stride:t},n)=>Kh.decimal(e.subarray(t*n,t*(n+1))),yB=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,c=r[0].slice(s,a-s);return new ut([c])},mB=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new pu(a.slice(r,s-r))},gB=(e,t)=>new xf(e,t),_B=(e,t)=>e.type.mode===ve.Dense?f_(e,t):d_(e,t),f_=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return we.visit(i,e.valueOffsets[t])},d_=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return we.visit(i,t)},bB=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},vB=(e,t)=>e.type.unit===zn.DAY_TIME?p_(e,t):y_(e,t),p_=({values:e},t)=>e.subarray(2*t,2*(t+1)),y_=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},m_=({values:e},t)=>e[t],g_=({values:e},t)=>e[t],__=({values:e},t)=>e[t],b_=({values:e},t)=>e[t],wB=(e,t)=>{switch(e.type.unit){case T.SECOND:return m_(e,t);case T.MILLISECOND:return g_(e,t);case T.MICROSECOND:return __(e,t);case T.NANOSECOND:return b_(e,t)}},SB=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new ut([s])};O.prototype.visitNull=k(iB);O.prototype.visitBool=k(rB);O.prototype.visitInt=k(uB);O.prototype.visitInt8=k(rr);O.prototype.visitInt16=k(rr);O.prototype.visitInt32=k(rr);O.prototype.visitInt64=k(i_);O.prototype.visitUint8=k(rr);O.prototype.visitUint16=k(rr);O.prototype.visitUint32=k(rr);O.prototype.visitUint64=k(i_);O.prototype.visitFloat=k(lB);O.prototype.visitFloat16=k(sB);O.prototype.visitFloat32=k(rr);O.prototype.visitFloat64=k(rr);O.prototype.visitUtf8=k(cB);O.prototype.visitBinary=k(oB);O.prototype.visitFixedSizeBinary=k(aB);O.prototype.visitDate=k(hB);O.prototype.visitDateDay=k(e_);O.prototype.visitDateMillisecond=k(n_);O.prototype.visitTimestamp=k(fB);O.prototype.visitTimestampSecond=k(r_);O.prototype.visitTimestampMillisecond=k(s_);O.prototype.visitTimestampMicrosecond=k(a_);O.prototype.visitTimestampNanosecond=k(o_);O.prototype.visitTime=k(dB);O.prototype.visitTimeSecond=k(c_);O.prototype.visitTimeMillisecond=k(u_);O.prototype.visitTimeMicrosecond=k(l_);O.prototype.visitTimeNanosecond=k(h_);O.prototype.visitDecimal=k(pB);O.prototype.visitList=k(yB);O.prototype.visitStruct=k(gB);O.prototype.visitUnion=k(_B);O.prototype.visitDenseUnion=k(f_);O.prototype.visitSparseUnion=k(d_);O.prototype.visitDictionary=k(bB);O.prototype.visitInterval=k(vB);O.prototype.visitIntervalDayTime=k(p_);O.prototype.visitIntervalYearMonth=k(y_);O.prototype.visitDuration=k(wB);O.prototype.visitDurationSecond=k(m_);O.prototype.visitDurationMillisecond=k(g_);O.prototype.visitDurationMicrosecond=k(__);O.prototype.visitDurationNanosecond=k(b_);O.prototype.visitFixedSizeList=k(SB);O.prototype.visitMap=k(mB);const we=new O,nn=Symbol.for("keys"),ds=Symbol.for("vals");class pu{constructor(t){return this[nn]=new ut([t.children[0]]).memoize(),this[ds]=t.children[1],new Proxy(this,new xB)}[Symbol.iterator](){return new IB(this[nn],this[ds])}get size(){return this[nn].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[nn],n=this[ds],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=we.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${Dr(t)}: ${Dr(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class IB{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),we.visit(this.vals,t)]})}}class xB{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[nn].toArray().map(String)}has(t,n){return t[nn].includes(n)}getOwnPropertyDescriptor(t,n){if(t[nn].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[nn].indexOf(n);if(i!==-1){const r=we.visit(Reflect.get(t,ds),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[nn].indexOf(n);return r!==-1?(He.visit(Reflect.get(t,ds),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(pu.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[nn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ds]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Ep;function v_(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Ep=s,s=a,a=Ep),a>r&&(a=r),i?i(e,s,a):[s,a]}const Tp=e=>e!==e;function Ps(e){if(typeof e!=="object"||e===null)return Tp(e)?Tp:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?pO(e,n):!1:e instanceof Map?EB(e):Array.isArray(e)?AB(e):e instanceof ut?TB(e):OB(e,!0)}function AB(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ps(e[n]);return yu(t)}function EB(e){let t=-1;const n=[];for(const i of e.values())n[++t]=Ps(i);return yu(n)}function TB(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ps(e.get(n));return yu(t)}function OB(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=Ps(e[n[r]]);return yu(i,n)}function yu(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return BB(e,n);case Map:return Op(e,n,n.keys());case pu:case xf:case Object:case void 0:return Op(e,n,t||Object.keys(n))}return n instanceof ut?NB(e,n):!1}}function BB(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function NB(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function Op(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let c=s.next(),u=i.next(),l=r.next();for(;a<o&&!u.done&&!l.done&&!c.done&&!(u.value!==l.value||!e[a](c.value));++a,u=i.next(),l=r.next(),c=s.next());return a===o&&u.done&&l.done&&c.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function w_(e,t,n,i){return(n&1<<i)!==0}function FB(e,t,n,i){return(n&1<<i)>>i}function Cc(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):S_(new Ef(n,e,t,null,w_)).subarray(0,i)),r}return n}function S_(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Ef{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ll(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new Ef(e,t,n-t,e,FB))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return Ll(e,t,r)+Ll(e,i,n)+DB(e,r>>3,i-r>>3)}function DB(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=Qu(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=Qu(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=Qu(s.getUint8(r)),r+=1;return i}function Qu(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const kB=-1;class gt{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return z.isSparseUnion(t)?this.children.some(n=>n.nullable):z.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){if(z.isUnion(this.type))return this.children.reduce((i,r)=>i+r.nullCount,0);let t=this._nullCount,n;return t<=kB&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Ll(n,this.offset,this.offset+this.length)),t}constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof gt?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=An(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c)))}getValid(t){const{type:n}=this;if(z.isUnion(n)){const i=n,r=this.children[i.typeIdToChildIndex[this.typeIds[t]]],s=i.mode===ve.Dense?this.valueOffsets[t]:t;return r.getValid(s)}if(this.nullable&&this.nullCount>0){const i=this.offset+t;return(this.nullBitmap[i>>3]&1<<i%8)!==0}return!0}setValid(t,n){let i;const{type:r}=this;if(z.isUnion(r)){const s=r,a=this.children[s.typeIdToChildIndex[this.typeIds[t]]],o=s.mode===ve.Dense?this.valueOffsets[t]:t;i=a.getValid(o),a.setValid(o,n)}else{let{nullBitmap:s}=this;const{offset:a,length:o}=this,c=a+t,u=1<<c%8,l=c>>3;(!s||s.byteLength<=l)&&(s=new Uint8Array((a+o+63&-64)>>3).fill(255),this.nullCount>0&&s.set(Cc(a,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const h=s[l];i=(h&u)!==0,n?s[l]=h|u:s[l]=h&~u}return i!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new gt(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,c=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===y.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(Cc(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ri.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[ri.TYPE])&&(a[ri.TYPE]=s.subarray(t,t+n)),(s=a[ri.OFFSET])&&(a[ri.OFFSET]=s.subarray(t,t+n+1))||(s=a[ri.DATA])&&(a[ri.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}}gt.prototype.children=Object.freeze([]);class ma extends X{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new gt(n,i,r,r)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.data),s=_t(t.nullBitmap),a=Zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new gt(n,i,o,c,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.data),s=_t(t.nullBitmap),a=Zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new gt(n,i,o,c,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length/An(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length/An(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length/An(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length/An(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length/An(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=_t(t.nullBitmap),a=Zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new gt(n,i,o,c,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=_t(t.nullBitmap),{length:a=r.reduce((c,{length:u})=>Math.max(c,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=qt(n.ArrayType,t.typeIds),{["length"]:a=s.length,["nullCount"]:o=-1}=t;if(z.isSparseUnion(n))return new gt(n,i,a,o,[void 0,void 0,void 0,s],r);const c=Zs(t.valueOffsets);return new gt(n,i,a,o,[c,void 0,void 0,s],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.indices.ArrayType,t.data),{["dictionary"]:a=new ut([new ma().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new gt(n,i,o,c,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length/An(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitDuration(t){const{["type"]:n,["offset"]:i=0}=t,r=_t(t.nullBitmap),s=qt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new ma().visit({type:n.valueType})}=t,s=_t(t.nullBitmap),{["length"]:a=r.length/An(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new gt(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new ma().visit({type:n.childType})}=t,s=_t(t.nullBitmap),a=Zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new gt(n,i,o,c,[a,void 0,s],[r])}}const CB=new ma;function Zt(e){return CB.visit(e)}class Bp{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function I_(e){return e.reduce((t,n)=>t+n.nullCount,0)}function x_(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function A_(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],c=t[s],{length:u}=o;if(c>=i)break;if(n>=c+u)continue;if(c>=n&&c+u<=i){r.push(o);continue}const l=Math.max(0,n-c),h=Math.min(i-c,u);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function Tf(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function Of(e,t){return e.getValid(t)}function ps(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return Tf(i,this._offsets,n,t)}}function E_(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=Tf(s,this._offsets,i,n);return t=void 0,a}}function T_(e){let t;function n(i,r,s){let a=s,o=0,c=0;for(let u=r-1,l=i.length;++u<l;){const h=i[u];if(~(o=e(h,t,a)))return c+o;a=0,c+=h.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):Tf(s,this._offsets,r,n);return t=void 0,a}}class B extends X{}function RB(e,t){return t===null&&e.length>0?0:-1}function MB(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new Ef(n,e.offset+(t||0),e.length,n,w_)){if(!r)return i;++i}return-1}function U(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case y.Union:break;case y.Dictionary:break;default:return MB(e,n)}const i=we.getVisitFn(e),r=Ps(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function O_(e,t,n){const i=we.getVisitFn(e),r=Ps(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}B.prototype.visitNull=RB;B.prototype.visitBool=U;B.prototype.visitInt=U;B.prototype.visitInt8=U;B.prototype.visitInt16=U;B.prototype.visitInt32=U;B.prototype.visitInt64=U;B.prototype.visitUint8=U;B.prototype.visitUint16=U;B.prototype.visitUint32=U;B.prototype.visitUint64=U;B.prototype.visitFloat=U;B.prototype.visitFloat16=U;B.prototype.visitFloat32=U;B.prototype.visitFloat64=U;B.prototype.visitUtf8=U;B.prototype.visitBinary=U;B.prototype.visitFixedSizeBinary=U;B.prototype.visitDate=U;B.prototype.visitDateDay=U;B.prototype.visitDateMillisecond=U;B.prototype.visitTimestamp=U;B.prototype.visitTimestampSecond=U;B.prototype.visitTimestampMillisecond=U;B.prototype.visitTimestampMicrosecond=U;B.prototype.visitTimestampNanosecond=U;B.prototype.visitTime=U;B.prototype.visitTimeSecond=U;B.prototype.visitTimeMillisecond=U;B.prototype.visitTimeMicrosecond=U;B.prototype.visitTimeNanosecond=U;B.prototype.visitDecimal=U;B.prototype.visitList=U;B.prototype.visitStruct=U;B.prototype.visitUnion=U;B.prototype.visitDenseUnion=O_;B.prototype.visitSparseUnion=O_;B.prototype.visitDictionary=U;B.prototype.visitInterval=U;B.prototype.visitIntervalDayTime=U;B.prototype.visitIntervalYearMonth=U;B.prototype.visitDuration=U;B.prototype.visitDurationSecond=U;B.prototype.visitDurationMillisecond=U;B.prototype.visitDurationMicrosecond=U;B.prototype.visitDurationNanosecond=U;B.prototype.visitFixedSizeList=U;B.prototype.visitMap=U;const Rc=new B;class N extends X{}function C(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===y.Timestamp||t instanceof se&&t.bitWidth!==64||t instanceof mi&&t.bitWidth!==64||t instanceof qi&&t.precision!==Qt.HALF))return new Bp(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Bp(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new LB(a)})}class LB{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}N.prototype.visitNull=C;N.prototype.visitBool=C;N.prototype.visitInt=C;N.prototype.visitInt8=C;N.prototype.visitInt16=C;N.prototype.visitInt32=C;N.prototype.visitInt64=C;N.prototype.visitUint8=C;N.prototype.visitUint16=C;N.prototype.visitUint32=C;N.prototype.visitUint64=C;N.prototype.visitFloat=C;N.prototype.visitFloat16=C;N.prototype.visitFloat32=C;N.prototype.visitFloat64=C;N.prototype.visitUtf8=C;N.prototype.visitBinary=C;N.prototype.visitFixedSizeBinary=C;N.prototype.visitDate=C;N.prototype.visitDateDay=C;N.prototype.visitDateMillisecond=C;N.prototype.visitTimestamp=C;N.prototype.visitTimestampSecond=C;N.prototype.visitTimestampMillisecond=C;N.prototype.visitTimestampMicrosecond=C;N.prototype.visitTimestampNanosecond=C;N.prototype.visitTime=C;N.prototype.visitTimeSecond=C;N.prototype.visitTimeMillisecond=C;N.prototype.visitTimeMicrosecond=C;N.prototype.visitTimeNanosecond=C;N.prototype.visitDecimal=C;N.prototype.visitList=C;N.prototype.visitStruct=C;N.prototype.visitUnion=C;N.prototype.visitDenseUnion=C;N.prototype.visitSparseUnion=C;N.prototype.visitDictionary=C;N.prototype.visitInterval=C;N.prototype.visitIntervalDayTime=C;N.prototype.visitIntervalYearMonth=C;N.prototype.visitDuration=C;N.prototype.visitDurationSecond=C;N.prototype.visitDurationMillisecond=C;N.prototype.visitDurationMicrosecond=C;N.prototype.visitDurationNanosecond=C;N.prototype.visitFixedSizeList=C;N.prototype.visitMap=C;const Bf=new N,UB=(e,t)=>e+t;class sr extends X{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===T.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((i,r)=>i+Wn.visit(r,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,r)=>i+Wn.visit(r,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}}const PB=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),$B=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),VB=({valueOffsets:e,stride:t,children:n},i)=>{const r=n[0],{[i*t]:s}=e,{[i*t+1]:a}=e,o=Wn.getVisitFn(r.type),c=r.slice(s,a-s);let u=8;for(let l=-1,h=a-s;++l<h;)u+=o(c,l);return u},jB=({stride:e,children:t},n)=>{const i=t[0],r=i.slice(n*e,e),s=Wn.getVisitFn(i.type);let a=0;for(let o=-1,c=r.length;++o<c;)a+=s(r,o);return a},zB=(e,t)=>e.type.mode===ve.Dense?B_(e,t):N_(e,t),B_=({type:e,children:t,typeIds:n,valueOffsets:i},r)=>{const s=e.typeIdToChildIndex[n[r]];return 8+Wn.visit(t[s],i[r])},N_=({children:e},t)=>4+Wn.visitMany(e,e.map(()=>t)).reduce(UB,0);sr.prototype.visitUtf8=PB;sr.prototype.visitBinary=$B;sr.prototype.visitList=VB;sr.prototype.visitFixedSizeList=jB;sr.prototype.visitUnion=zB;sr.prototype.visitDenseUnion=B_;sr.prototype.visitSparseUnion=N_;const Wn=new sr;var F_;const D_={},k_={};class ut{constructor(t){var n,i,r;const s=t[0]instanceof ut?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof gt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:c,indexOf:u,byteLength:l}=D_[a.typeId],h=s[0];this.isValid=d=>Of(h,d),this.get=d=>o(h,d),this.set=(d,p)=>c(h,d,p),this.indexOf=d=>u(h,d),this.getByteLength=d=>l(h,d),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,k_[a.typeId]),this._offsets=x_(s);break}this.data=s,this.type=a,this.stride=An(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return I_(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${y[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Bf.visit(this)}concat(...t){return new ut(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ut(v_(this,t,n,({data:i,_offsets:r},s,a)=>A_(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case y.Int:case y.Float:case y.Decimal:case y.Time:case y.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o,length:c})=>(a.array.set(o.subarray(0,c*r),a.offset),a.offset+=c*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ut(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return z.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(z.isDictionary(this.type)){const t=new Mc(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new ut(n)}return new Mc(this)}unmemoize(){if(z.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new ut(n)}return this}}F_=Symbol.toStringTag;ut[F_]=(e=>{e.type=z.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(y).map(n=>y[n]).filter(n=>typeof n=="number"&&n!==y.NONE);for(const n of t){const i=we.getVisitFnByTypeId(n),r=He.getVisitFnByTypeId(n),s=Rc.getVisitFnByTypeId(n),a=Wn.getVisitFnByTypeId(n);D_[n]={get:i,set:r,indexOf:s,byteLength:a},k_[n]=Object.create(e,{isValid:{value:ps(Of)},get:{value:ps(we.getVisitFnByTypeId(n))},set:{value:E_(He.getVisitFnByTypeId(n))},indexOf:{value:T_(Rc.getVisitFnByTypeId(n))},getByteLength:{value:ps(Wn.getVisitFnByTypeId(n))}})}return"Vector"})(ut.prototype);class Mc extends ut{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const c=n.call(this,a);return s[a]=c,c}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new Mc(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ut(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function WB(e){if(!e||e.length<=0)return function(r){return!0};let t="";const n=e.filter(i=>i===i);return n.length>0&&(t=`
    switch (x) {${n.map(i=>`
        case ${qB(i)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function qB(e){return typeof e!="bigint"?Dr(e):`${Dr(e)}n`}const Xu=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,YB=(e,t=0)=>e.length>=t?e.subarray(0,t):Bc(new e.constructor(t),e,0);class mu{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?Xu(i*1,this.BYTES_PER_ELEMENT):Xu(i*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Xu(t*this.stride,this.BYTES_PER_ELEMENT);const n=YB(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Bc(new this.ArrayType(t),this.buffer)}}mu.prototype.offset=0;class Qa extends mu{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class C_ extends Qa{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:i}=this.reserve(t-this.length+1),r=t>>3,s=t%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class R_ extends Qa{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const i=this.length-1,r=this.reserve(t-i+1).buffer;return i<t++&&r.fill(r[i],i,t),r[t]=r[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let xe=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=An(t),this._nulls=new C_,n&&n.length>0&&(this._isValid=WB(n))}toVector(){return new ut([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),a.reduce((o,c)=>o+c.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,i,r;const{type:s,length:a,nullCount:o,_typeIds:c,_offsets:u,_values:l,_nulls:h}=this;(n=c==null?void 0:c.flush(a))?r=u==null?void 0:u.flush(a):(r=u==null?void 0:u.flush(a))?t=l==null?void 0:l.flush(u.last()):t=l==null?void 0:l.flush(a),o>0&&(i=h==null?void 0:h.flush(a));const d=this.children.map(p=>p.flush());return this.clear(),Zt({type:s,length:a,nullCount:o,children:d,child:d[0],data:t,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,i,r;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};xe.prototype.length=1;xe.prototype.stride=1;xe.prototype.children=null;xe.prototype.finished=!1;xe.prototype.nullValues=null;xe.prototype._isValid=()=>!0;class Ii extends xe{constructor(t){super(t),this._values=new Qa(new this.ArrayType(0),this.stride)}setValue(t,n){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,n)}}class gu extends xe{constructor(t){super(t),this._pendingLength=0,this._offsets=new R_}setValue(t,n){const i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof pu?n[nn].length:n.length,i.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(BigInt(r??0)),t.pad(4),t.writeInt32(i),t.writeInt64(BigInt(n??0)),t.offset()}}class jt{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new jt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+A),(n||new jt).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return jt.startKeyValue(t),jt.addKey(t,n),jt.addValue(t,i),jt.endKeyValue(t)}}var Ns;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ns||(Ns={}));var Fs;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Fs||(Fs={}));var Lc;(function(e){e[e.DenseArray=0]="DenseArray"})(Lc||(Lc={}));class Te{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Te).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+A),(n||new Te).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return Te.startInt(t),Te.addBitWidth(t,n),Te.addIsSigned(t,i),Te.endInt(t)}}class ci{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new ci).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+A),(n||new ci).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Te).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Lc.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Lc.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Sr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+A),(n||new Sr).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Sr.startBinary(t),Sr.endBinary(t)}}class Ir{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Ir).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+A),(n||new Ir).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Ir.startBool(t),Ir.endBool(t)}}var Uc;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Uc||(Uc={}));let Lo=class Jr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Jr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+A),(n||new Jr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Uc.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Uc.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Jr.startDate(t),Jr.addUnit(t,n),Jr.endDate(t)}};class he{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new he).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+A),(n||new he).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return he.startDecimal(t),he.addPrecision(t,n),he.addScale(t,i),he.addBitWidth(t,r),he.endDecimal(t)}}var Gi;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Gi||(Gi={}));class On{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new On).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+A),(n||new On).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gi.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Gi.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return On.startDuration(t),On.addUnit(t,n),On.endDuration(t)}}class Bn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Bn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+A),(n||new Bn).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Bn.startFixedSizeBinary(t),Bn.addByteWidth(t,n),Bn.endFixedSizeBinary(t)}}class Nn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Nn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+A),(n||new Nn).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Nn.startFixedSizeList(t),Nn.addListSize(t,n),Nn.endFixedSizeList(t)}}var Pc;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Pc||(Pc={}));class Fn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Fn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+A),(n||new Fn).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Pc.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Pc.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Fn.startFloatingPoint(t),Fn.addPrecision(t,n),Fn.endFloatingPoint(t)}}var $c;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})($c||($c={}));class Dn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Dn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+A),(n||new Dn).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$c.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,$c.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Dn.startInterval(t),Dn.addUnit(t,n),Dn.endInterval(t)}}class xr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new xr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+A),(n||new xr).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return xr.startList(t),xr.endList(t)}}let Uo=class Qr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Qr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+A),(n||new Qr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Qr.startMap(t),Qr.addKeysSorted(t,n),Qr.endMap(t)}};class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+A),(n||new Ar).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Ar.startNull(t),Ar.endNull(t)}}class Er{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+A),(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Er.startStruct_(t),Er.endStruct_(t)}}class $e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new $e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+A),(n||new $e).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gi.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Gi.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return $e.startTime(t),$e.addUnit(t,n),$e.addBitWidth(t,i),$e.endTime(t)}}class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+A),(n||new Ve).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gi.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Gi.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return Ve.startTimestamp(t),Ve.addUnit(t,n),Ve.addTimezone(t,i),Ve.endTimestamp(t)}}var Vc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Vc||(Vc={}));class de{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new de).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+A),(n||new de).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vc.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Vc.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return de.startUnion(t),de.addMode(t,n),de.addTypeIds(t,i),de.endUnion(t)}}class Tr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Tr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+A),(n||new Tr).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Tr.startUtf8(t),Tr.endUtf8(t)}}var xt;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(xt||(xt={}));let Le=class Po{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new Po).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+A),(n||new Po).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):xt.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new ci).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Po).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new jt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,xt.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},In=class ti{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new ti).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+A),(n||new ti).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fs.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Le).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new jt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Fs.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return ti.startSchema(t),ti.addEndianness(t,n),ti.addFields(t,i),ti.addCustomMetadata(t,r),ti.addFeatures(t,s),ti.endSchema(t)}};class Ee{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Ee).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+A),(n||new Ee).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ns.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new In).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Ul).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Ul).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new jt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ns.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class yt{constructor(t=[],n,i,r=ie.V5){this.fields=t||[],this.metadata=n||new Map,i||(i=Pl(t)),this.dictionaries=i,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new yt(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new yt(n,this.metadata)}assign(...t){const n=t[0]instanceof yt?t[0]:Array.isArray(t[0])?new yt(t[0]):new yt(t),i=[...this.fields],r=yo(yo(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const c=i.findIndex(u=>u.name===o.name);return~c?(i[c]=o.clone({metadata:yo(yo(new Map,i[c].metadata),o.metadata)}))&&!1:!0}),a=Pl(s,new Map);return new yt([...i,...s],r,new Map([...this.dictionaries,...a]))}}yt.prototype.fields=null;yt.prototype.metadata=null;yt.prototype.dictionaries=null;class dt{static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new dt(`${n}`,i,r,s)}constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],dt.new(n,i,r,s)}}dt.prototype.type=null;dt.prototype.name=null;dt.prototype.nullable=null;dt.prototype.metadata=null;function yo(e,t){return new Map([...e||new Map,...t||new Map])}function Pl(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(z.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Pl(s.children,t)}return t}var GB=au,HB=Vi;class $l{static decode(t){t=new HB(_t(t));const n=Ee.getRootAsFooter(t),i=yt.decode(n.schema(),new Map,n.version());return new KB(i,n)}static encode(t){const n=new GB,i=yt.encode(n,t.schema);Ee.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())Hi.encode(n,a);const r=n.endVector();Ee.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())Hi.encode(n,a);const s=n.endVector();return Ee.startFooter(n),Ee.addSchema(n,i),Ee.addVersion(n,ie.V5),Ee.addRecordBatches(n,r),Ee.addDictionaries(n,s),Ee.finishFooterBuffer(n,Ee.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=ie.V5,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class KB extends $l{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Hi.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Hi.decode(n)}return null}}class Hi{static decode(t){return new Hi(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=BigInt(n.offset),s=BigInt(n.bodyLength);return Ul.createBlock(t,r,i,s)}constructor(t,n,i){this.metaDataLength=t,this.offset=ln(i),this.bodyLength=ln(n)}}const mo=Object.freeze({done:!0,value:void 0});class M_{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class JB extends M_{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return x(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(mo);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return xp.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return xp.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return x(this,void 0,void 0,function*(){return yield this.abort(t),mo})}return(t){return x(this,void 0,void 0,function*(){return yield this.close(),mo})}read(t){return x(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return x(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(mo)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Zu extends JB{write(t){if((t=_t(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Rl(this.toUint8Array(!0)):this.toUint8Array(!1).then(Rl)}toUint8Array(t=!1){return t?Vn(this._values)[0]:(()=>x(this,void 0,void 0,function*(){var n,i,r,s;const a=[];let o=0;try{for(var c=!0,u=qe(this),l;l=yield u.next(),n=l.done,!n;c=!0){s=l.value,c=!1;const h=s;a.push(h),o+=h.byteLength}}catch(h){i={error:h}}finally{try{!c&&!n&&(r=u.return)&&(yield r.call(u))}finally{if(i)throw i.error}}return Vn(a,o)[0]}))()}}class L_ extends gu{constructor(t){super(t),this._values=new mu(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,_t(n))}_flushPending(t,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,o]of t)if(o===void 0)i.set(a,0);else{const c=o.length;r.set(o,s),i.set(a,c),s+=c}}}class QB extends xe{constructor(t){super(t),this._values=new C_}setValue(t,n){this._values.set(t,+n)}}class _u extends Ii{}_u.prototype._setValue=qg;class U_ extends _u{}U_.prototype._setValue=cf;class P_ extends _u{}P_.prototype._setValue=uf;class $_ extends Ii{}$_.prototype._setValue=Hg;class XB extends xe{constructor({type:t,nullValues:n,dictionaryHashFunction:i}){super({type:new Yi(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=jc({type:this.type.indices,nullValues:n}),this.dictionary=jc({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const i=this.indices;return n=i.setValid(t,n),this.length=i.length,n}setValue(t,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(t);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class V_ extends Ii{}V_.prototype._setValue=Wg;class ZB extends xe{setValue(t,n){const[i]=this.children,r=t*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new Bs(this.type.listSize,new dt(n,t.type,!0)),i}}class bu extends Ii{setValue(t,n){this._values.set(t,n)}}class tN extends bu{setValue(t,n){super.setValue(t,Vg(n))}}class eN extends bu{}class nN extends bu{}class vu extends Ii{}vu.prototype._setValue=Qg;class j_ extends vu{}j_.prototype._setValue=_f;class z_ extends vu{}z_.prototype._setValue=bf;class $s extends Ii{}$s.prototype._setValue=Xg;class W_ extends $s{}W_.prototype._setValue=vf;class q_ extends $s{}q_.prototype._setValue=wf;class Y_ extends $s{}Y_.prototype._setValue=Sf;class G_ extends $s{}G_.prototype._setValue=If;class xi extends Ii{setValue(t,n){this._values.set(t,n)}}class iN extends xi{}class rN extends xi{}class sN extends xi{}class aN extends xi{}class oN extends xi{}class cN extends xi{}class uN extends xi{}class lN extends xi{}class hN extends gu{constructor(t){super(t),this._offsets=new R_}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Os(new dt(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(typeof s>"u")n.set(r,0);else{const a=s,o=a.length,c=n.set(r,o).buffer[r];for(let u=-1;++u<o;)i.set(c+u,a[u])}}}class fN extends gu{set(t,n){return super.set(t,n)}setValue(t,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(t,i)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new La(new dt(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:o}=n.set(r,s.size).buffer;for(const c of s.entries())if(i.set(a,c),++a>=o)break}}}class dN extends xe{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class pN extends xe{setValue(t,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(t,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(t,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(i=>i.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const i=this.children.push(t);return this.type=new te([...this.type.children,new dt(n,t.type,!0)]),i}}class Vs extends Ii{}Vs.prototype._setValue=Yg;class H_ extends Vs{}H_.prototype._setValue=lf;class K_ extends Vs{}K_.prototype._setValue=hf;class J_ extends Vs{}J_.prototype._setValue=ff;class Q_ extends Vs{}Q_.prototype._setValue=df;class js extends Ii{}js.prototype._setValue=Gg;class X_ extends js{}X_.prototype._setValue=pf;class Z_ extends js{}Z_.prototype._setValue=yf;class tb extends js{}tb.prototype._setValue=mf;class eb extends js{}eb.prototype._setValue=gf;class Nf extends xe{constructor(t){super(t),this._typeIds=new Qa(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,i),this}setValue(t,n,i){this._typeIds.set(t,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const i=this.children.push(t),{type:{children:r,mode:s,typeIds:a}}=this,o=[...r,new dt(n,t.type)];return this.type=new Ma(s,[...a,i],o),i}_valueToChildTypeId(t,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class yN extends Nf{}class mN extends Nf{constructor(t){super(t),this._offsets=new Qa(new Int32Array(0))}setValue(t,n,i){const r=this._typeIds.set(t,i).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(t,s.length).buffer[t];s==null||s.set(a,n)}}class nb extends gu{constructor(t){super(t),this._values=new mu(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Yh(n))}_flushPending(t,n){}}nb.prototype._flushPending=L_.prototype._flushPending;class gN extends X{visitNull(){return dN}visitBool(){return QB}visitInt(){return xi}visitInt8(){return iN}visitInt16(){return rN}visitInt32(){return sN}visitInt64(){return aN}visitUint8(){return oN}visitUint16(){return cN}visitUint32(){return uN}visitUint64(){return lN}visitFloat(){return bu}visitFloat16(){return tN}visitFloat32(){return eN}visitFloat64(){return nN}visitUtf8(){return nb}visitBinary(){return L_}visitFixedSizeBinary(){return V_}visitDate(){return _u}visitDateDay(){return U_}visitDateMillisecond(){return P_}visitTimestamp(){return Vs}visitTimestampSecond(){return H_}visitTimestampMillisecond(){return K_}visitTimestampMicrosecond(){return J_}visitTimestampNanosecond(){return Q_}visitTime(){return js}visitTimeSecond(){return X_}visitTimeMillisecond(){return Z_}visitTimeMicrosecond(){return tb}visitTimeNanosecond(){return eb}visitDecimal(){return $_}visitList(){return hN}visitStruct(){return pN}visitUnion(){return Nf}visitDenseUnion(){return mN}visitSparseUnion(){return yN}visitDictionary(){return XB}visitInterval(){return vu}visitIntervalDayTime(){return j_}visitIntervalYearMonth(){return z_}visitDuration(){return $s}visitDurationSecond(){return W_}visitDurationMillisecond(){return q_}visitDurationMicrosecond(){return Y_}visistDurationNanosecond(){return G_}visitFixedSizeList(){return ZB}visitMap(){return fN}}const _N=new gN;class F extends X{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ae(e,t){return t instanceof e.constructor}function Xa(e,t){return e===t||ae(e,t)}function Ai(e,t){return e===t||ae(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function wu(e,t){return e===t||ae(e,t)&&e.precision===t.precision}function bN(e,t){return e===t||ae(e,t)&&e.byteWidth===t.byteWidth}function Ff(e,t){return e===t||ae(e,t)&&e.unit===t.unit}function Za(e,t){return e===t||ae(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function to(e,t){return e===t||ae(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function vN(e,t){return e===t||ae(e,t)&&e.children.length===t.children.length&&Ki.compareManyFields(e.children,t.children)}function wN(e,t){return e===t||ae(e,t)&&e.children.length===t.children.length&&Ki.compareManyFields(e.children,t.children)}function Df(e,t){return e===t||ae(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&Ki.compareManyFields(e.children,t.children)}function SN(e,t){return e===t||ae(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ki.visit(e.indices,t.indices)&&Ki.visit(e.dictionary,t.dictionary)}function kf(e,t){return e===t||ae(e,t)&&e.unit===t.unit}function eo(e,t){return e===t||ae(e,t)&&e.unit===t.unit}function IN(e,t){return e===t||ae(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ki.compareManyFields(e.children,t.children)}function xN(e,t){return e===t||ae(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ki.compareManyFields(e.children,t.children)}F.prototype.visitNull=Xa;F.prototype.visitBool=Xa;F.prototype.visitInt=Ai;F.prototype.visitInt8=Ai;F.prototype.visitInt16=Ai;F.prototype.visitInt32=Ai;F.prototype.visitInt64=Ai;F.prototype.visitUint8=Ai;F.prototype.visitUint16=Ai;F.prototype.visitUint32=Ai;F.prototype.visitUint64=Ai;F.prototype.visitFloat=wu;F.prototype.visitFloat16=wu;F.prototype.visitFloat32=wu;F.prototype.visitFloat64=wu;F.prototype.visitUtf8=Xa;F.prototype.visitBinary=Xa;F.prototype.visitFixedSizeBinary=bN;F.prototype.visitDate=Ff;F.prototype.visitDateDay=Ff;F.prototype.visitDateMillisecond=Ff;F.prototype.visitTimestamp=Za;F.prototype.visitTimestampSecond=Za;F.prototype.visitTimestampMillisecond=Za;F.prototype.visitTimestampMicrosecond=Za;F.prototype.visitTimestampNanosecond=Za;F.prototype.visitTime=to;F.prototype.visitTimeSecond=to;F.prototype.visitTimeMillisecond=to;F.prototype.visitTimeMicrosecond=to;F.prototype.visitTimeNanosecond=to;F.prototype.visitDecimal=Xa;F.prototype.visitList=vN;F.prototype.visitStruct=wN;F.prototype.visitUnion=Df;F.prototype.visitDenseUnion=Df;F.prototype.visitSparseUnion=Df;F.prototype.visitDictionary=SN;F.prototype.visitInterval=kf;F.prototype.visitIntervalDayTime=kf;F.prototype.visitIntervalYearMonth=kf;F.prototype.visitDuration=eo;F.prototype.visitDurationSecond=eo;F.prototype.visitDurationMillisecond=eo;F.prototype.visitDurationMicrosecond=eo;F.prototype.visitDurationNanosecond=eo;F.prototype.visitFixedSizeList=IN;F.prototype.visitMap=xN;const Ki=new F;function Vl(e,t){return Ki.compareSchemas(e,t)}function jc(e){const t=e.type,n=new(_N.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],r={nullValues:e.nullValues},s=Array.isArray(i)?(a,o)=>i[o]||r:({name:a})=>i[a]||r;for(const[a,o]of t.children.entries()){const{type:c}=o,u=s(o,a);n.children.push(jc(Object.assign(Object.assign({},u),{type:c})))}}return n}function tl(e,t){return AN(e,t.map(n=>n.data.concat()))}function AN(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,o=-1;const c=t.length;let u,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=EN(n,a,l,t,r),a>0&&(i[s++]=Zt({type:new te(n),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(n),i.map(h=>new Oe(e,h))]}function EN(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,c=i.length;++o<c;){const u=n[o],l=u==null?void 0:u.length;if(l>=t)l===t?n[o]=u:(n[o]=u.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(u.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),n[o]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Zt({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var ib;class pe{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new yt([]),this._offsets=[0],this;let r,s;t[0]instanceof yt&&(r=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const a=c=>{if(c){if(c instanceof Oe)return[c];if(c instanceof pe)return c.batches;if(c instanceof gt){if(c.type instanceof te)return[new Oe(new yt(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(u=>a(u));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(u=>a(u));if(typeof c=="object"){const u=Object.keys(c),l=u.map(p=>new ut([c[p]])),h=new yt(u.map((p,g)=>new dt(String(p),l[g].type))),[,d]=tl(h,l);return d.length===0?[new Oe(c)]:d}}}return[]},o=t.flatMap(c=>a(c));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new yt([]),!(r instanceof yt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of o){if(!(c instanceof Oe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Vl(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??x_(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=I_(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Bf.visit(new ut(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new pe(n,i.map(r=>new Oe(n,r)))}slice(t,n){const i=this.schema;[t,n]=v_({length:this.numRows},t,n);const r=A_(this.data,this._offsets,t,n);return new pe(i,r.map(s=>new Oe(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=Zt({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new ut(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new ut([Zt({type:new yi,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((c,u)=>this.getChildAt(u));[s[t],o[t]]=[a,n],[i,r]=tl(i,o)}return new pe(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new pe(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,c,u)=>{const[l,h]=o,d=n.findIndex(p=>p.name===c.name);return~d?h[d]=u:l.push(u),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,c)=>[c,r[c]]).map(([o,c])=>c===void 0?this.getChildAt(o):t.getChildAt(c)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new pe(...tl(s,a))}}ib=Symbol.toStringTag;pe[ib]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=ps(Of),e.get=ps(we.getVisitFn(y.Struct)),e.set=E_(He.getVisitFn(y.Struct)),e.indexOf=T_(Rc.getVisitFn(y.Struct)),e.getByteLength=ps(Wn.getVisitFn(y.Struct)),"Table"))(pe.prototype);var rb;let Oe=class da{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof yt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Zt({nullCount:0,type:new te(this.schema.fields),children:this.schema.fields.map(n=>Zt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof gt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Np(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((c,u,l)=>(c.children[l]=n[u],c.length=Math.max(c.length,n[u].length),c.fields[l]=dt.new({name:u,type:n[u].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new yt(i),o=Zt({type:new te(i),length:s,children:r,nullCount:0});[this.schema,this.data]=Np(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=sb(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return we.visit(this.data,t)}set(t,n){return He.visit(this.data,t,n)}indexOf(t,n){return Rc.visit(this.data,t,n)}getByteLength(t){return Wn.visit(this.data,t)}[Symbol.iterator](){return Bf.visit(new ut([this.data]))}toArray(){return[...this]}concat(...t){return new pe(this.schema,[this,...t])}slice(t,n){const[i]=new ut([this.data]).slice(t,n).data;return new da(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ut([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new ut([Zt({type:new yi,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new yt(s,new Map(this.schema.metadata)),r=Zt({type:new te(s),children:a})}return new da(i,r)}select(t){const n=this.schema.select(t),i=new te(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new da(n,Zt({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=Zt({type:new te(n.fields),length:this.numRows,children:i});return new da(n,r)}};rb=Symbol.toStringTag;Oe[rb]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Oe.prototype);function Np(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,c]of e.fields.entries()){const u=t[o];(!u||u.length!==n)&&(r[o]=c.clone({nullable:!0}),s[o]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Zt({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),Zt({type:new te(r),length:n,children:s})]}function sb(e,t,n=new Map){var i,r;if(((i=e==null?void 0:e.length)!==null&&i!==void 0?i:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,a=e.length;++s<a;){const{type:o}=e[s],c=t[s];for(const u of[c,...((r=c==null?void 0:c.dictionary)===null||r===void 0?void 0:r.data)||[]])sb(o.children,u==null?void 0:u.children,n);if(z.isDictionary(o)){const{id:u}=o;if(!n.has(u))c!=null&&c.dictionary&&n.set(u,c.dictionary);else if(n.get(u)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class TN extends Oe{constructor(t){const n=t.fields.map(r=>Zt({type:r.type})),i=Zt({type:new te(t.fields),nullCount:0,children:n});super(t,i)}}var zc;(function(e){e[e.BUFFER=0]="BUFFER"})(zc||(zc={}));var Wc;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Wc||(Wc={}));class Ri{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ri).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+A),(n||new Ri).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Wc.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):zc.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Wc.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,zc.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return Ri.startBodyCompression(t),Ri.addCodec(t,n),Ri.addMethod(t,i),Ri.endBodyCompression(t)}}class ab{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let ob=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},si=class jl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new jl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+A),(n||new jl).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new ob).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new ab).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ri).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Xr=class zl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new zl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+A),(n||new zl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new si).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var qc;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(qc||(qc={}));let Bi=class bn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new bn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+A),(n||new bn).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ns.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):qc.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new jt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ns.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,qc.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return bn.startMessage(t),bn.addVersion(t,n),bn.addHeaderType(t,i),bn.addHeader(t,r),bn.addBodyLength(t,s),bn.addCustomMetadata(t,a),bn.endMessage(t)}};class ON extends X{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Ar.startNull(n),Ar.endNull(n)}visitInt(t,n){return Te.startInt(n),Te.addBitWidth(n,t.bitWidth),Te.addIsSigned(n,t.isSigned),Te.endInt(n)}visitFloat(t,n){return Fn.startFloatingPoint(n),Fn.addPrecision(n,t.precision),Fn.endFloatingPoint(n)}visitBinary(t,n){return Sr.startBinary(n),Sr.endBinary(n)}visitBool(t,n){return Ir.startBool(n),Ir.endBool(n)}visitUtf8(t,n){return Tr.startUtf8(n),Tr.endUtf8(n)}visitDecimal(t,n){return he.startDecimal(n),he.addScale(n,t.scale),he.addPrecision(n,t.precision),he.addBitWidth(n,t.bitWidth),he.endDecimal(n)}visitDate(t,n){return Lo.startDate(n),Lo.addUnit(n,t.unit),Lo.endDate(n)}visitTime(t,n){return $e.startTime(n),$e.addUnit(n,t.unit),$e.addBitWidth(n,t.bitWidth),$e.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return Ve.startTimestamp(n),Ve.addUnit(n,t.unit),i!==void 0&&Ve.addTimezone(n,i),Ve.endTimestamp(n)}visitInterval(t,n){return Dn.startInterval(n),Dn.addUnit(n,t.unit),Dn.endInterval(n)}visitDuration(t,n){return On.startDuration(n),On.addUnit(n,t.unit),On.endDuration(n)}visitList(t,n){return xr.startList(n),xr.endList(n)}visitStruct(t,n){return Er.startStruct_(n),Er.endStruct_(n)}visitUnion(t,n){de.startTypeIdsVector(n,t.typeIds.length);const i=de.createTypeIdsVector(n,t.typeIds);return de.startUnion(n),de.addMode(n,t.mode),de.addTypeIds(n,i),de.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return ci.startDictionaryEncoding(n),ci.addId(n,BigInt(t.id)),ci.addIsOrdered(n,t.isOrdered),i!==void 0&&ci.addIndexType(n,i),ci.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Bn.startFixedSizeBinary(n),Bn.addByteWidth(n,t.byteWidth),Bn.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Nn.startFixedSizeList(n),Nn.addListSize(n,t.listSize),Nn.endFixedSizeList(n)}visitMap(t,n){return Uo.startMap(n),Uo.addKeysSorted(n,t.keysSorted),Uo.endMap(n)}}const el=new ON;function BN(e,t=new Map){return new yt(FN(e,t),$o(e.metadata),t)}function cb(e){return new De(e.count,ub(e.columns),lb(e.columns))}function NN(e){return new qn(cb(e.data),e.id,e.isDelta)}function FN(e,t){return(e.fields||[]).filter(Boolean).map(n=>dt.fromJSON(n,t))}function Fp(e,t){return(e.children||[]).filter(Boolean).map(n=>dt.fromJSON(n,t))}function ub(e){return(e||[]).reduce((t,n)=>[...t,new Ji(n.count,DN(n.VALIDITY)),...ub(n.children)],[])}function lb(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new Rn(t.length,r.VALIDITY.length)),r.TYPE_ID&&t.push(new Rn(t.length,r.TYPE_ID.length)),r.OFFSET&&t.push(new Rn(t.length,r.OFFSET.length)),r.DATA&&t.push(new Rn(t.length,r.DATA.length)),t=lb(r.children,t)}return t}function DN(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function kN(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=kp(e,Fp(e,t)),r=new dt(e.name,a,e.nullable,$o(e.metadata))):t.has(n=s.id)?(i=(i=s.indexType)?Dp(i):new Wi,o=new Yi(t.get(n),i,n,s.isOrdered),r=new dt(e.name,o,e.nullable,$o(e.metadata))):(i=(i=s.indexType)?Dp(i):new Wi,t.set(n,a=kp(e,Fp(e,t))),o=new Yi(a,i,n,s.isOrdered),r=new dt(e.name,o,e.nullable,$o(e.metadata))),r||null}function $o(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Dp(e){return new se(e.isSigned,e.bitWidth)}function kp(e,t){const n=e.type.name;switch(n){case"NONE":return new yi;case"null":return new yi;case"binary":return new Ca;case"utf8":return new As;case"bool":return new Ra;case"list":return new Os((t||[])[0]);case"struct":return new te(t||[]);case"struct_":return new te(t||[])}switch(n){case"int":{const i=e.type;return new se(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new qi(Qt[i.precision])}case"decimal":{const i=e.type;return new Nc(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new Es(jn[i.unit])}case"time":{const i=e.type;return new mi(T[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new Fc(T[i.unit],i.timezone)}case"interval":{const i=e.type;return new Ts(zn[i.unit])}case"duration":{const i=e.type;return new Dc(T[i.unit])}case"union":{const i=e.type,[r,...s]=(i.mode+"").toLowerCase(),a=r.toUpperCase()+s.join("");return new Ma(ve[a],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new kc(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new Bs(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new La((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var CN=au,RN=Vi;class kn{static fromJSON(t,n){const i=new kn(0,ie.V5,n);return i._createHeader=MN(t,n),i}static decode(t){t=new RN(_t(t));const n=Bi.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new kn(i,r,s);return a._createHeader=LN(n,s),a}static encode(t){const n=new CN;let i=-1;return t.isSchema()?i=yt.encode(n,t.header()):t.isRecordBatch()?i=De.encode(n,t.header()):t.isDictionaryBatch()&&(i=qn.encode(n,t.header())),Bi.startMessage(n),Bi.addVersion(n,ie.V5),Bi.addHeader(n,i),Bi.addHeaderType(n,t.headerType),Bi.addBodyLength(n,BigInt(t.bodyLength)),Bi.finishMessageBuffer(n,Bi.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof yt)return new kn(0,ie.V5,Yt.Schema,t);if(t instanceof De)return new kn(n,ie.V5,Yt.RecordBatch,t);if(t instanceof qn)return new kn(n,ie.V5,Yt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Yt.Schema}isRecordBatch(){return this.headerType===Yt.RecordBatch}isDictionaryBatch(){return this.headerType===Yt.DictionaryBatch}constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=ln(t)}}class De{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=ln(t)}}class qn{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=ln(n)}}class Rn{constructor(t,n){this.offset=ln(t),this.length=ln(n)}}class Ji{constructor(t,n){this.length=ln(t),this.nullCount=ln(n)}}function MN(e,t){return()=>{switch(t){case Yt.Schema:return yt.fromJSON(e);case Yt.RecordBatch:return De.fromJSON(e);case Yt.DictionaryBatch:return qn.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Yt[t]}, type: ${t} }`)}}function LN(e,t){return()=>{switch(t){case Yt.Schema:return yt.decode(e.header(new In),new Map,e.version());case Yt.RecordBatch:return De.decode(e.header(new si),e.version());case Yt.DictionaryBatch:return qn.decode(e.header(new Xr),e.version())}throw new Error(`Unrecognized Message type: { name: ${Yt[t]}, type: ${t} }`)}}dt.encode=HN;dt.decode=YN;dt.fromJSON=kN;yt.encode=GN;yt.decode=UN;yt.fromJSON=BN;De.encode=KN;De.decode=PN;De.fromJSON=cb;qn.encode=JN;qn.decode=$N;qn.fromJSON=NN;Ji.encode=QN;Ji.decode=jN;Rn.encode=XN;Rn.decode=VN;function UN(e,t=new Map,n=ie.V5){const i=qN(e,t);return new yt(i,Vo(e),t,n)}function PN(e,t=ie.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new De(e.length(),zN(e),WN(e,t))}function $N(e,t=ie.V5){return new qn(De.decode(e.data(),t),e.id(),e.isDelta())}function VN(e){return new Rn(e.offset(),e.length())}function jN(e){return new Ji(e.length(),e.nullCount())}function zN(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=Ji.decode(n));return t}function WN(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<ie.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Rn.decode(i));return n}function qN(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=dt.decode(i,t));return n}function Cp(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=dt.decode(i,t));return n}function YN(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=Mp(e,Cp(e,t)),i=new dt(e.name(),r,e.nullable(),Vo(e))):t.has(n=ln(o.id()))?(s=(s=o.indexType())?Rp(s):new Wi,a=new Yi(t.get(n),s,n,o.isOrdered()),i=new dt(e.name(),a,e.nullable(),Vo(e))):(s=(s=o.indexType())?Rp(s):new Wi,t.set(n,r=Mp(e,Cp(e,t))),a=new Yi(r,s,n,o.isOrdered()),i=new dt(e.name(),a,e.nullable(),Vo(e))),i||null}function Vo(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function Rp(e){return new se(e.isSigned(),e.bitWidth())}function Mp(e,t){const n=e.typeType();switch(n){case xt.NONE:return new yi;case xt.Null:return new yi;case xt.Binary:return new Ca;case xt.Utf8:return new As;case xt.Bool:return new Ra;case xt.List:return new Os((t||[])[0]);case xt.Struct_:return new te(t||[])}switch(n){case xt.Int:{const i=e.type(new Te);return new se(i.isSigned(),i.bitWidth())}case xt.FloatingPoint:{const i=e.type(new Fn);return new qi(i.precision())}case xt.Decimal:{const i=e.type(new he);return new Nc(i.scale(),i.precision(),i.bitWidth())}case xt.Date:{const i=e.type(new Lo);return new Es(i.unit())}case xt.Time:{const i=e.type(new $e);return new mi(i.unit(),i.bitWidth())}case xt.Timestamp:{const i=e.type(new Ve);return new Fc(i.unit(),i.timezone())}case xt.Interval:{const i=e.type(new Dn);return new Ts(i.unit())}case xt.Duration:{const i=e.type(new On);return new Dc(i.unit())}case xt.Union:{const i=e.type(new de);return new Ma(i.mode(),i.typeIdsArray()||[],t||[])}case xt.FixedSizeBinary:{const i=e.type(new Bn);return new kc(i.byteWidth())}case xt.FixedSizeList:{const i=e.type(new Nn);return new Bs(i.listSize(),(t||[])[0])}case xt.Map:{const i=e.type(new Uo);return new La((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${xt[n]}" (${n})`)}function GN(e,t){const n=t.fields.map(s=>dt.encode(e,s));In.startFieldsVector(e,n.length);const i=In.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?In.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),c=e.createString(`${a}`);return jt.startKeyValue(e),jt.addKey(e,o),jt.addValue(e,c),jt.endKeyValue(e)})):-1;return In.startSchema(e),In.addFields(e,i),In.addEndianness(e,ZN?Fs.Little:Fs.Big),r!==-1&&In.addCustomMetadata(e,r),In.endSchema(e)}function HN(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;z.isDictionary(s)?(a=s.dictionary.typeId,r=el.visit(s,e),i=el.visit(s.dictionary,e)):i=el.visit(s,e);const o=(s.children||[]).map(l=>dt.encode(e,l)),c=Le.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?Le.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const d=e.createString(`${l}`),p=e.createString(`${h}`);return jt.startKeyValue(e),jt.addKey(e,d),jt.addValue(e,p),jt.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Le.startField(e),Le.addType(e,i),Le.addTypeType(e,a),Le.addChildren(e,c),Le.addNullable(e,!!t.nullable),n!==-1&&Le.addName(e,n),r!==-1&&Le.addDictionary(e,r),u!==-1&&Le.addCustomMetadata(e,u),Le.endField(e)}function KN(e,t){const n=t.nodes||[],i=t.buffers||[];si.startNodesVector(e,n.length);for(const a of n.slice().reverse())Ji.encode(e,a);const r=e.endVector();si.startBuffersVector(e,i.length);for(const a of i.slice().reverse())Rn.encode(e,a);const s=e.endVector();return si.startRecordBatch(e),si.addLength(e,BigInt(t.length)),si.addNodes(e,r),si.addBuffers(e,s),si.endRecordBatch(e)}function JN(e,t){const n=De.encode(e,t.data);return Xr.startDictionaryBatch(e),Xr.addId(e,BigInt(t.id)),Xr.addIsDelta(e,t.isDelta),Xr.addData(e,n),Xr.endDictionaryBatch(e)}function QN(e,t){return ob.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function XN(e,t){return ab.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const ZN=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Wl="ARROW1",Cf=new Uint8Array(Wl.length);for(let e=0;e<Wl.length;e+=1)Cf[e]=Wl.codePointAt(e);Cf.length;class Lt extends X{static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof Oe?s.data.children:s.data),i=new Lt;return i.visitMany(n(t)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ut)return this.visitMany(t.data),this;const{type:n}=t;if(!z.isDictionary(n)){const{length:i}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(z.isUnion(n))this.nodes.push(new Ji(i,0));else{const{nullCount:r}=t;z.isNull(n)||an.call(this,r<=0?new Uint8Array(0):Cc(t.offset,i,t.nullBitmap)),this.nodes.push(new Ji(i,r))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function an(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Rn(this._byteLength,t)),this._byteLength+=t,this}function tF(e){var t;const{type:n,length:i,typeIds:r,valueOffsets:s}=e;if(an.call(this,r),n.mode===ve.Sparse)return ql.call(this,e);if(n.mode===ve.Dense){if(e.offset<=0)return an.call(this,s),ql.call(this,e);{const a=new Int32Array(i),o=Object.create(null),c=Object.create(null);for(let u,l,h=-1;++h<i;)(u=r[h])!==void 0&&((l=o[u])===void 0&&(l=o[u]=s[h]),a[h]=s[h]-l,c[u]=((t=c[u])!==null&&t!==void 0?t:0)+1);an.call(this,a),this.visitMany(e.children.map((u,l)=>{const h=n.typeIds[l],d=o[h],p=c[h];return u.slice(d,Math.min(i,p))}))}}return this}function eF(e){let t;return e.nullCount>=e.length?an.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?an.call(this,Cc(e.offset,e.length,t)):an.call(this,S_(e.values))}function Ei(e){return an.call(this,e.values.subarray(0,e.length*e.stride))}function hb(e){const{length:t,values:n,valueOffsets:i}=e,{[0]:r,[t]:s}=i,a=Math.min(s-r,n.byteLength-r);return an.call(this,mg(-r,t+1,i)),an.call(this,n.subarray(r,r+a)),this}function Rf(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:i,[t]:r}=n;return an.call(this,mg(-i,t+1,n)),this.visit(e.children[0].slice(i,r-i))}return this.visit(e.children[0])}function ql(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Lt.prototype.visitBool=eF;Lt.prototype.visitInt=Ei;Lt.prototype.visitFloat=Ei;Lt.prototype.visitUtf8=hb;Lt.prototype.visitBinary=hb;Lt.prototype.visitFixedSizeBinary=Ei;Lt.prototype.visitDate=Ei;Lt.prototype.visitTimestamp=Ei;Lt.prototype.visitTime=Ei;Lt.prototype.visitDecimal=Ei;Lt.prototype.visitList=Rf;Lt.prototype.visitStruct=ql;Lt.prototype.visitUnion=tF;Lt.prototype.visitInterval=Ei;Lt.prototype.visitDuration=Ei;Lt.prototype.visitFixedSizeList=Rf;Lt.prototype.visitMap=Rf;class fb extends M_{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Zu,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ir(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return fu(t)?t.then(n=>this.writeAll(n)):du(t)?Pf(this,t):Uf(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Zu?this._sink=t:(this._sink=new Zu,t&&oO(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&cO(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Vl(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof pe&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Oe&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Vl(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Oe?t instanceof TN||this._writeRecordBatch(t):t instanceof pe?this.writeAll(t.batches):Gh(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=kn.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,c=o-s-a;return t.headerType===Yt.RecordBatch?this._recordBatchBlocks.push(new Hi(o,t.bodyLength,this._position)):t.headerType===Yt.DictionaryBatch&&this._dictionaryBlocks.push(new Hi(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(c)}_write(t){if(this._started){const n=_t(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(kn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Cf)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=Lt.assemble(t),a=new De(t.numRows,i,r),o=kn.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=Lt.assemble(new ut([t])),c=new De(t.length,s,a),u=new qn(c,n,i),l=kn.from(u,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class Mf extends fb{static writeAll(t,n){const i=new Mf(n);return fu(t)?t.then(r=>i.writeAll(r)):du(t)?Pf(i,t):Uf(i,t)}}class Lf extends fb{static writeAll(t){const n=new Lf;return fu(t)?t.then(i=>n.writeAll(i)):du(t)?Pf(n,t):Uf(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=$l.encode(new $l(t,ie.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Uf(e,t){let n=t;t instanceof pe&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function Pf(e,t){var n,i,r,s,a,o,c;return x(this,void 0,void 0,function*(){try{for(n=!0,i=qe(t);r=yield i.next(),s=r.done,!s;n=!0){c=r.value,n=!1;const u=c;e.write(u)}}catch(u){a={error:u}}finally{try{!n&&!s&&(o=i.return)&&(yield o.call(i))}finally{if(a)throw a.error}}return e.finish()})}function nF(e,t="stream"){return(t==="stream"?Mf:Lf).writeAll(e).toUint8Array(!0)}function $f(e,t=1){return(e*t+63&-64||64)/t}function Qi(e,t,n=e.BYTES_PER_ELEMENT){return new e($f(t,n))}function Vf(e){return e instanceof gt?e:new gt(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function iF(e){return new ut([Vf(e)])}const jf=new TextEncoder;function rF(e,t,n){const i=jf.encode(n);return e.set(i,t),i.length}function sF(e,t,n){return jf.encodeInto(n,e.subarray(t)).written}const aF=jf.encodeInto?sF:rF;function Lp(e,t){const n=Qi(e.ArrayType,t);return{set(i,r){n[r]=i},data:()=>({type:e,length:t,buffers:[null,n]})}}function oF(e,t){const n=Qi(e.ArrayType,t/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function cF(e,t){const n=Qi(e.ArrayType,t);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function uF(e,t){const n=Qi(e.ArrayType,t<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function lF(e){const t=jc({type:e,nullValues:[null,void 0]});return{set(n,i){t.set(i,n)},data:()=>t.finish().flush()}}function hF(e,t,n){const i=Qi(Int32Array,t+1),r=Qi(Uint8Array,3*n);let s=0;return{set(a,o){s+=aF(r,s,a),i[o+1]=s},data:()=>{const a=$f(s),o=r.length>a?r.subarray(0,a):r;return{type:e,length:t,buffers:[i,o]}}}}function fF(e,t){const n=[],i=Qi(e.indices.ArrayType,t),r=Object.create(null);let s=-1,a=0;return{set(o,c){const u=String(o);let l=r[u];l===void 0&&(a+=u.length,r[u]=l=++s,n.push(u)),i[c]=l},data:()=>({type:e,length:t,buffers:[null,i],dict:dF(e.dictionary,n,a)})}}function dF(e,t,n){const i=hF(e,t.length,n);return t.forEach(i.set),iF(i.data())}function pF(e,t){const n=Qi(Uint8Array,t/8);let i=0;return{set(r,s){r==null?++i:(e.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=e.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function yF(e,t,n=!0){let i;switch(e.typeId){case y.Int:i=e.bitWidth<64?Lp:null;break;case y.Float:i=e.precision>0?Lp:null;break;case y.Dictionary:i=e.dictionary.typeId===y.Utf8&&e.indices.typeId===y.Int&&e.indices.bitWidth<64?fF:null;break;case y.Bool:i=oF;break;case y.Date:i=e.unit?uF:cF;break}return i==null?lF(e):n?pF(i(e,t),t):i(e,t)}function mF(e,t){const n=e.length,i=$f(n,e.BYTES_PER_ELEMENT);let r=e;return n!==i&&(r=new e.constructor(i),r.set(e)),Vf({type:t,length:n,buffers:[null,r]})}function db(e,t,n,i,r=!0){const s=yF(i,e,r);return t(n,s.set),Vf(s.data())}function zf(e){if(e instanceof z||e==null)return e;switch(e){case y.Binary:return new Ca;case y.Bool:return new Ra;case y.DateDay:return new IO;case y.DateMillisecond:case y.Date:return new xO;case y.Dictionary:return new Yi(new As,new Wi);case y.Float16:return new Ug;case y.Float32:return new rf;case y.Float64:case y.Float:return new sf;case y.Int8:return new Jh;case y.Int16:return new Qh;case y.Int32:case y.Int:return new Wi;case y.Int64:return new Xh;case y.IntervalDayTime:return new BO;case y.Interval:case y.IntervalYearMonth:return new NO;case y.Null:return new yi;case y.TimeMicrosecond:return new TO;case y.TimeMillisecond:case y.Time:return new EO;case y.TimeNanosecond:return new OO;case y.TimeSecond:return new AO;case y.Uint8:return new Zh;case y.Uint16:return new tf;case y.Uint32:return new ef;case y.Uint64:return new nf;case y.Utf8:return new As;default:J(`Unsupported type code: ${$n(e)}. Use a data type constructor instead?`)}}function gF(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function pb(e,t){const n=Yl();return e(t,n.add),n}function Yl(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(pi(t))++e.dates,gF(t)&&++e.utcdays;else if(wr(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const i=e.array_prof||(e.array_prof=Yl());t.forEach(i.add)}else{++e.structs;const i=e.struct_prof||(e.struct_prof={});for(const r in t)(i[r]||(i[r]=Yl())).add(t[r])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return zf(_F(e))}};return e}function _F(e){const t=e.count-e.nulls;if(t===0)return y.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?y.Float64:n<128?y.Int8:n<32768?y.Int16:y.Int32:n>=2**32?y.Float64:n<256?y.Uint8:n<65536?y.Uint16:y.Uint32}else{if(e.nums===t)return y.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?y.Int64:J(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?y.Uint64:J(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return y.Bool;if(e.utcdays===t)return y.DateDay;if(e.dates===t)return y.DateMillisecond;if(e.arrays===t){const n=dt.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Bs(e.minlen,n):new Os(n)}else if(e.structs===t){const n=e.struct_prof;return new te(Object.keys(n).map(i=>dt.new(i,n[i].type(),!0)))}else{if(e.strings>0)return y.Dictionary;J("Type inference failure")}}}}function bF(e,t,n,i,r,s=!0){if(r=zf(r),!r){const a=pb(i,t);s=a.nulls>0,r=a.type()}return db(n,i,t,r,s)}function vF(e,t,n,i,r,s=!0){r=zf(r);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),c=wF(a);if(c&&o&&Up(c.type,r))return c;const u=a.data;if(Ka(u)){const l=SF(u);if(o&&l&&Up(l,r))return mF(u,l);r=r||l,s=!1}if(!r){const l=pb(i,a);s=l.nulls>0,r=l.type()}return db(n,i,a,r,s)}function wF(e){return e instanceof ut?e:e.vector instanceof ut?e.vector:null}function SF(e){const n={Float32Array:rf,Float64Array:sf,Int8Array:Jh,Int16Array:Qh,Int32Array:Wi,Uint8Array:Zh,Uint16Array:tf,Uint32Array:ef,BigInt64Array:Xh,BigUint64Array:nf}[e.constructor.name];return n?new n:null}function Up(e,t){return!e||!t?!0:e.compareTo(t)}function IF(e,t,n){const i=Math.min(e.length,n+t);return(r,s)=>{for(let a=n;a<i;++a)s(e[a][r],a)}}function xF(e,t,n){const i=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(r,s)=>{let a=-1;i&&wr(r.data)?r.data.forEach(s):e.scan(o=>s(r.get(o),++a),!0,t,n)}}const AF=()=>J("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function EF(){try{return pe}catch{AF()}}function yb(e,t={}){const{types:n={}}=t,{dataFrom:i,names:r,nrows:s,scan:a}=TF(e,t),o={};r.forEach(u=>{const l=i(e,u,s,a,n[u]);l.length!==s&&J("Column length mismatch"),o[u]=l});const c=EF();return new c(o)}function TF(e,t){const{columns:n,limit:i=1/0,offset:r=0}=t,s=It(n)?n(e):ct(n)?n:null;if(ct(e))return{dataFrom:bF,names:s||Object.keys(e[0]),nrows:Math.min(i,e.length-r),scan:IF(e,i,r)};if(OF(e))return{dataFrom:vF,names:s||e.columnNames(),nrows:Math.min(i,e.numRows()-r),scan:xF(e,i,r)};J("Unsupported input data type")}function OF(e){return e&&It(e.reify)}function BF(e,t={}){const{format:n,...i}=t,r=n||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return nF(yb(e,i),n)}function NF(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function FF(e,t={}){let n=0,i=0,r=0,s=0,a=0,o=0;return e(c=>{if(++n,c==null){++i;return}const u=typeof c;if(u==="object"&&pi(c))++r,NF(c)&&++s;else if(u==="number"&&(++a,c===c&&(c|0)!==c)){const l=c+"",h=l.indexOf(".");if(h>=0){const d=l.indexOf("e"),p=d>0?d:l.length;o=Math.max(o,p-h-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,t.maxdigits||6)}}}function Su(e,t){return It(t)?t(e):t||e.columnNames()}function mb(e,t,n){const i=n.format||{},r=n.align||{},s={},a={};return t.forEach(o=>{const c=FF(DF(e,o),n);a[o]=r[o]||c.align,s[o]=i[o]||c.format}),{align:a,format:s}}function DF(e,t){const n=e.column(t);return i=>e.scan(r=>i(n.get(r)))}function Wf(e,t,n=100,i,r){const s=e.data(),a=t.length;e.scan(o=>{r.row(o);for(let c=0;c<a;++c){const u=t[c];r.cell(s[t[c]].get(o),u,c)}},!0,n,i)}function kF(e,t={}){const n=Su(e,t.columns),i=t.format||{},r=t.delimiter||",",s=new RegExp(`["${r}
\r]`),a=u=>u==null?"":pi(u)?lu(u,!0):s.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,o=n.map(a);let c="";return Wf(e,n,t.limit||1/0,t.offset,{row(){c+=o.join(r)+`
`},cell(u,l,h){o[h]=a(i[l]?i[l](u):u)}}),c+o.join(r)}function gb(e,t={}){if(It(t))return t(e)+"";const n=typeof e;if(n==="object"){if(pi(e))return t.utc?lu(e):j0(e);{const i=JSON.stringify(e,(s,a)=>Ka(a)?Array.from(a):a),r=t.maxlen||30;return i.length>r?i.slice(0,28)+""+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=t.digits||0;let r;return e!==0&&((r=Math.abs(e))>=1e18||r<Math.pow(10,-i))?e.toExponential(i):e.toFixed(i)}else return e+""}function Iu(e,t,n={}){for(const i in e)n[i]=t(e[i],i);return n}function CF(e,t={}){const n=Su(e,t.columns),{align:i,format:r}=mb(e,n,t),s=RF(t),a=t.null,o=_=>_==="c"?"center":_==="r"?"right":"left",c=_=>_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(_,b)=>c(gb(_,b)),l=a?(_,b)=>_==null?a(_):u(_,b):u;let h=-1,d=-1;const p=(_,b,w)=>{const L=w?o(i[b]):"",lt=s[_]&&s[_](b,d,h)||"",E=(L?`text-align: ${L};`+(lt?" ":""):"")+lt;return`<${_}${E?` style="${E}"`:""}>`};let g=p("table")+p("thead")+p("tr",h)+n.map(_=>`${p("th",_,1)}${_}</th>`).join("")+"</tr></thead>"+p("tbody");return Wf(e,n,t.limit,t.offset,{row(_){h=_,g+=(++d?"</tr>":"")+p("tr")},cell(_,b){g+=p("td",b,1)+l(_,r[b])+"</td>"}}),g+"</tr></tbody></table>"}function RF(e){return Iu(e.style,t=>It(t)?t:()=>t)}function MF(e,t=!0,n=!1){return e===void 0||e?t:n}const LF=e=>pi(e)?lu(e,!0):e;function UF(e,t={}){const n=MF(t.schema),i=t.format||{},r=Su(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,o)=>{s+=(o?",":"")+JSON.stringify(a)+":[";const c=e.column(a),u=i[a]||LF;let l=-1;e.scan(h=>{const d=c.get(h);s+=(++l?",":"")+JSON.stringify(u(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function PF(e,t={}){const n=Su(e,t.columns),{align:i,format:r}=mb(e,n,t),s=c=>c==="c"?":-:":c==="r"?"-:":":-",a=c=>c.replace(/\|/g,"\\|");let o="|"+n.map(a).join("|")+`|
|`+n.map(c=>s(i[c])).join("|")+"|";return Wf(e,n,t.limit,t.offset,{row(){o+=`
|`},cell(c,u){o+=a(gb(c,r[u]))+"|"}}),o+`
`}function _b(e,t){for(const[n,i]of hu(t))e.set(n,i);return e}function $F(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function gi(e,t,n=new Map){return t=re(t)?e.columnName(t):t,Xt(t)?n.set(t,t):ct(t)?t.forEach(i=>gi(e,i,n)):It(t)?gi(e,t(e),n):ee(t)?_b(n,t):J(`Invalid column selection: ${$n(t)}`),n}function xu(e,t){return e.toObject=t,e}function bb(e){return ct(e)?e.map(bb):e&&e.toObject?e.toObject():e}function Ds(){return xu(e=>e.columnNames(),()=>({all:[]}))}function vb(...e){return e=e.flat(),xu(t=>{const n=gi(t,e);return t.columnNames(i=>!n.has(i))},()=>({not:bb(e)}))}function VF(e,t){return xu(n=>{let i=re(e)?e:n.columnIndex(e),r=re(t)?t:n.columnIndex(t);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[e,t]}))}function jF(e){return Xt(e)&&(e=RegExp($F(e))),xu(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function zF(e){return Ka(e.data)?e.data.constructor:Array}class ui extends aT{static from(t,n){return new ui(uT(t,n),n)}static new(t,n){if(t instanceof ui)return t;const i={},r=[];for(const[s,a]of hu(t))i[s]=a,r.push(s);return new ui(i,n||r)}constructor(t,n,i,r,s,a){Iu(t,cT,t),n=n||Object.keys(t);const o=n.length?t[n[0]].length:0;super(n,o,t,i,r,s,a)}create({data:t,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new ui(t||this._data,n||(t?null:this._names),a,r!==void 0?r:UT(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),i=this.reify(),r=ke(i).groupby(i.groups());return t.forEach(s=>{s=ui.new(s),s.numRows()!==n&&J("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const i=this.column(t),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(t,n=0){const i=this.column(t);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(t){const n=this.column(t),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):J(`Unrecognized column: ${t}`)}object(t=0){return Pp(this)(t)}objects(t={}){const{grouped:n,limit:i,offset:r}=t,s=gi(this,t.columns||Ds()),a=dg(s),o=[];if(this.scan((c,u)=>o.push(a(c,u)),!0,i,r),n&&this.isGrouped()){const c=[];return this.scan(u=>c.push(u),!0,i,r),$T(this,c,o,n)}return o}*[Symbol.iterator](){const t=Pp(this),n=this.numRows();for(let i=0;i<n;++i)yield t(i)}reify(t){const n=t?t.length:this.numRows(),i=this._names;let r,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=t?c=>t.forEach(c):c=>this.scan(c,!0),o=i.length;r={};for(let c=0;c<o;++c){const u=i[c],l=this.column(u),h=r[u]=new(zF(l))(n);let d=-1;a(p=>h[++d]=l.get(p))}this.isGrouped()&&(s=PT(this.groups(),a,!!t,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,i)=>i(n),this)}toArrow(t){return yb(this,t)}toArrowBuffer(t){return BF(this,t)}toCSV(t){return kF(this,t)}toHTML(t){return CF(this,t)}toJSON(t){return UF(this,t)}toMarkdown(t){return PF(this,t)}}function Pp(e){let t=e._builder;if(!t){const n=dg(e.columnNames()),i=e.data();if(e.isOrdered()||e.isFiltered()){const r=e.indices();t=s=>n(r[s],i)}else t=r=>n(r,i);e._builder=t}return t}class WF{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function st(e,t,n,i){const r=n[e.type]||n.Default;if(r&&r(e,t,i)===!1)return;const s=qF[e.type];s&&s(e,t,n)}const go=(e,t,n)=>{st(e.argument,t,n,e)},nl=(e,t,n)=>{st(e.left,t,n,e),st(e.right,t,n,e)},$p=(e,t,n)=>{st(e.test,t,n,e),st(e.consequent,t,n,e),e.alternate&&st(e.alternate,t,n,e)},il=(e,t,n)=>{xn(e.params,t,n,e),st(e.body,t,n,e)},Vp=(e,t,n)=>{st(e.callee,t,n,e),xn(e.arguments,t,n,e)},xn=(e,t,n,i)=>{e.forEach(r=>st(r,t,n,i))},qF={TemplateLiteral:(e,t,n)=>{xn(e.expressions,t,n,e),xn(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{st(e.object,t,n,e),st(e.property,t,n,e)},CallExpression:Vp,NewExpression:Vp,ArrayExpression:(e,t,n)=>{xn(e.elements,t,n,e)},AssignmentExpression:nl,AwaitExpression:go,BinaryExpression:nl,LogicalExpression:nl,UnaryExpression:go,UpdateExpression:go,ConditionalExpression:$p,ObjectExpression:(e,t,n)=>{xn(e.properties,t,n,e)},Property:(e,t,n)=>{st(e.key,t,n,e),st(e.value,t,n,e)},ArrowFunctionExpression:il,FunctionExpression:il,FunctionDeclaration:il,VariableDeclaration:(e,t,n)=>{xn(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{st(e.id,t,n,e),st(e.init,t,n,e)},SpreadElement:(e,t,n)=>{st(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{xn(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{st(e.expression,t,n,e)},IfStatement:$p,ForStatement:(e,t,n)=>{st(e.init,t,n,e),st(e.test,t,n,e),st(e.update,t,n,e),st(e.body,t,n,e)},WhileStatement:(e,t,n)=>{st(e.test,t,n,e),st(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{st(e.body,t,n,e),st(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{st(e.discriminant,t,n,e),xn(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&st(e.test,t,n,e),xn(e.consequent,t,n,e)},ReturnStatement:go,Program:(e,t,n)=>{st(e.body[0],t,n,e)}};function wb(e){delete e.start,delete e.end,delete e.optional}function jp(e){wb(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function YF(e){return st(e,null,{Column:jp,Constant:jp,Default:wb}),e}function zt(e,t){return t&&t.type===e}function GF(e){return zt(zT,e)||zt(jT,e)}function HF(e){return It(e)?e:()=>e}const KF="Escaped functions are not valid as rollup or pivot values.";function JF(e,t,n){e.aggronly&&J(KF);const i="(row,data)=>fn("+fg(e.table.columnNames())+",$)";return{escape:qh.escape(i,HF(t.expr),n)}}var QF=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Sb=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],XF="-----------------------------------------------------------------------------------------------------------------------------------------------------",Ib="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",rl={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},sl="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",ZF={5:sl,"5module":sl+" export import",6:sl+" const class extends export import super"},tD=/^in(stanceof)?$/,eD=new RegExp("["+Ib+"]"),nD=new RegExp("["+Ib+XF+"]");function Gl(e,t){for(var n=65536,i=0;i<t.length;i+=2){if(n+=t[i],n>e)return!1;if(n+=t[i+1],n>=e)return!0}return!1}function _i(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&eD.test(String.fromCharCode(e)):t===!1?!1:Gl(e,Sb)}function ks(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nD.test(String.fromCharCode(e)):t===!1?!1:Gl(e,Sb)||Gl(e,QF)}var at=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Ce(e,t){return new at(e,{beforeExpr:!0,binop:t})}var Re={beforeExpr:!0},ce={startsExpr:!0},qf={};function et(e,t){return t===void 0&&(t={}),t.keyword=e,qf[e]=new at(e,t)}var f={num:new at("num",ce),regexp:new at("regexp",ce),string:new at("string",ce),name:new at("name",ce),privateId:new at("privateId",ce),eof:new at("eof"),bracketL:new at("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new at("]"),braceL:new at("{",{beforeExpr:!0,startsExpr:!0}),braceR:new at("}"),parenL:new at("(",{beforeExpr:!0,startsExpr:!0}),parenR:new at(")"),comma:new at(",",Re),semi:new at(";",Re),colon:new at(":",Re),dot:new at("."),question:new at("?",Re),questionDot:new at("?."),arrow:new at("=>",Re),template:new at("template"),invalidTemplate:new at("invalidTemplate"),ellipsis:new at("...",Re),backQuote:new at("`",ce),dollarBraceL:new at("${",{beforeExpr:!0,startsExpr:!0}),eq:new at("=",{beforeExpr:!0,isAssign:!0}),assign:new at("_=",{beforeExpr:!0,isAssign:!0}),incDec:new at("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new at("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ce("||",1),logicalAND:Ce("&&",2),bitwiseOR:Ce("|",3),bitwiseXOR:Ce("^",4),bitwiseAND:Ce("&",5),equality:Ce("==/!=/===/!==",6),relational:Ce("</>/<=/>=",7),bitShift:Ce("<</>>/>>>",8),plusMin:new at("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ce("%",10),star:Ce("*",10),slash:Ce("/",10),starstar:new at("**",{beforeExpr:!0}),coalesce:Ce("??",1),_break:et("break"),_case:et("case",Re),_catch:et("catch"),_continue:et("continue"),_debugger:et("debugger"),_default:et("default",Re),_do:et("do",{isLoop:!0,beforeExpr:!0}),_else:et("else",Re),_finally:et("finally"),_for:et("for",{isLoop:!0}),_function:et("function",ce),_if:et("if"),_return:et("return",Re),_switch:et("switch"),_throw:et("throw",Re),_try:et("try"),_var:et("var"),_const:et("const"),_while:et("while",{isLoop:!0}),_with:et("with"),_new:et("new",{beforeExpr:!0,startsExpr:!0}),_this:et("this",ce),_super:et("super",ce),_class:et("class",ce),_extends:et("extends",Re),_export:et("export"),_import:et("import",ce),_null:et("null",ce),_true:et("true",ce),_false:et("false",ce),_in:et("in",{beforeExpr:!0,binop:7}),_instanceof:et("instanceof",{beforeExpr:!0,binop:7}),_typeof:et("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:et("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:et("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ke=/\r\n?|\n|\u2028|\u2029/,iD=new RegExp(Ke.source,"g");function zs(e){return e===10||e===13||e===8232||e===8233}function xb(e,t,n){n===void 0&&(n=e.length);for(var i=t;i<n;i++){var r=e.charCodeAt(i);if(zs(r))return i<n-1&&r===13&&e.charCodeAt(i+1)===10?i+2:i+1}return-1}var Ab=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,je=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Eb=Object.prototype,rD=Eb.hasOwnProperty,sD=Eb.toString,no=Object.hasOwn||function(e,t){return rD.call(e,t)},zp=Array.isArray||function(e){return sD.call(e)==="[object Array]"},Wp=Object.create(null);function Mi(e){return Wp[e]||(Wp[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Xi(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var aD=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ua=function(t,n){this.line=t,this.column=n};Ua.prototype.offset=function(t){return new Ua(this.line,this.column+t)};var Au=function(t,n,i){this.start=n,this.end=i,t.sourceFile!==null&&(this.source=t.sourceFile)};function Tb(e,t){for(var n=1,i=0;;){var r=xb(e,i,t);if(r<0)return new Ua(n,t-i);++n,i=r}}var Hl={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},qp=!1;function oD(e){var t={};for(var n in Hl)t[n]=e&&no(e,n)?e[n]:Hl[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!qp&&typeof console=="object"&&console.warn&&(qp=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),zp(t.onToken)){var i=t.onToken;t.onToken=function(r){return i.push(r)}}return zp(t.onComment)&&(t.onComment=cD(t,t.onComment)),t}function cD(e,t){return function(n,i,r,s,a,o){var c={type:n?"Block":"Line",value:i,start:r,end:s};e.locations&&(c.loc=new Au(this,a,o)),e.ranges&&(c.range=[r,s]),t.push(c)}}var Pa=1,Ws=2,Yf=4,Ob=8,Bb=16,Nb=32,Gf=64,Fb=128,io=256,Hf=Pa|Ws|io;function Kf(e,t){return Ws|(e?Yf:0)|(t?Ob:0)}var Yc=0,Jf=1,Ti=2,Db=3,kb=4,Cb=5,Wt=function(t,n,i){this.options=t=oD(t),this.sourceFile=t.sourceFile,this.keywords=Mi(ZF[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=rl[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=Mi(r);var s=(r?r+" ":"")+rl.strict;this.reservedWordsStrict=Mi(s),this.reservedWordsStrictBind=Mi(s+" "+rl.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ke).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=f.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Pa),this.regexpState=null,this.privateNameStack=[]},Hn={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Wt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Hn.inFunction.get=function(){return(this.currentVarScope().flags&Ws)>0};Hn.inGenerator.get=function(){return(this.currentVarScope().flags&Ob)>0&&!this.currentVarScope().inClassFieldInit};Hn.inAsync.get=function(){return(this.currentVarScope().flags&Yf)>0&&!this.currentVarScope().inClassFieldInit};Hn.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&io)return!1;if(t.flags&Ws)return(t.flags&Yf)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Hn.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Gf)>0||n||this.options.allowSuperOutsideMethod};Hn.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Fb)>0};Hn.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Hn.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Ws|io))>0||n};Hn.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&io)>0};Wt.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i};Wt.parse=function(t,n){return new this(n,t).parse()};Wt.parseExpressionAt=function(t,n,i){var r=new this(i,t,n);return r.nextToken(),r.parseExpression()};Wt.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Wt.prototype,Hn);var oe=Wt.prototype,uD=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/s;oe.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){je.lastIndex=e,e+=je.exec(this.input)[0].length;var t=uD.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){je.lastIndex=e+t[0].length;var n=je.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||Ke.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}e+=t[0].length,je.lastIndex=e,e+=je.exec(this.input)[0].length,this.input[e]===";"&&e++}};oe.eat=function(e){return this.type===e?(this.next(),!0):!1};oe.isContextual=function(e){return this.type===f.name&&this.value===e&&!this.containsEsc};oe.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};oe.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};oe.canInsertSemicolon=function(){return this.type===f.eof||this.type===f.braceR||Ke.test(this.input.slice(this.lastTokEnd,this.start))};oe.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};oe.semicolon=function(){!this.eat(f.semi)&&!this.insertSemicolon()&&this.unexpected()};oe.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};oe.expect=function(e){this.eat(e)||this.unexpected()};oe.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Eu=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};oe.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};oe.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,i=e.doubleProto;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};oe.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};oe.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var I=Wt.prototype;I.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==f.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Qf={kind:"loop"},lD={kind:"switch"};I.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;je.lastIndex=this.pos;var t=je.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(i===91||i===92)return!0;if(e)return!1;if(i===123||i>55295&&i<56320)return!0;if(_i(i,!0)){for(var r=n+1;ks(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!tD.test(s))return!0}return!1};I.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;je.lastIndex=this.pos;var e=je.exec(this.input),t=this.pos+e[0].length,n;return!Ke.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(ks(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};I.parseStatement=function(e,t,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(i=f._var,s="let"),i){case f._break:case f._continue:return this.parseBreakContinueStatement(r,i.keyword);case f._debugger:return this.parseDebuggerStatement(r);case f._do:return this.parseDoStatement(r);case f._for:return this.parseForStatement(r);case f._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case f._class:return e&&this.unexpected(),this.parseClass(r,!0);case f._if:return this.parseIfStatement(r);case f._return:return this.parseReturnStatement(r);case f._switch:return this.parseSwitchStatement(r);case f._throw:return this.parseThrowStatement(r);case f._try:return this.parseTryStatement(r);case f._const:case f._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case f._while:return this.parseWhileStatement(r);case f._with:return this.parseWithStatement(r);case f.braceL:return this.parseBlock(!0,r);case f.semi:return this.parseEmptyStatement(r);case f._export:case f._import:if(this.options.ecmaVersion>10&&i===f._import){je.lastIndex=this.pos;var a=je.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(c===40||c===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===f._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var u=this.value,l=this.parseExpression();return i===f.name&&l.type==="Identifier"&&this.eat(f.colon)?this.parseLabeledStatement(r,u,l,e):this.parseExpressionStatement(r,l)}};I.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(f.semi)||this.insertSemicolon()?e.label=null:this.type!==f.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||e.label&&n))break}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};I.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};I.parseDoStatement=function(e){return this.next(),this.labels.push(Qf),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(f._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(f.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};I.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Qf),this.enterScope(0),this.expect(f.parenL),this.type===f.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===f._var||this.type===f._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===f._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===f._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}var s=this.isContextual("let"),a=!1,o=this.containsEsc,c=new Eu,u=this.start,l=t>-1?this.parseExprSubscripts(c,"await"):this.parseExpression(!0,c);return this.type===f._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===f._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(l.start===u&&!o&&l.type==="Identifier"&&l.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,c),this.checkLValPattern(l),this.parseForIn(e,l)):(this.checkExpressionErrors(c,!0),t>-1&&this.unexpected(t),this.parseFor(e,l))};I.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,ga|(n?0:Kl),!1,t)};I.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(f._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};I.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(f.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};I.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(f.braceL),this.labels.push(lD),this.enterScope(0);for(var t,n=!1;this.type!==f.braceR;)if(this.type===f._case||this.type===f._default){var i=this.type===f._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(f.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};I.parseThrowStatement=function(e){return this.next(),Ke.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var hD=[];I.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?Nb:0),this.checkLValPattern(e,t?kb:Ti),this.expect(f.parenR),e};I.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===f._catch){var t=this.startNode();this.next(),this.eat(f.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(f._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};I.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};I.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Qf),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};I.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};I.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};I.parseLabeledStatement=function(e,t,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===f._switch?"switch":null,c=this.labels.length-1;c>=0;c--){var u=this.labels[c];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};I.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};I.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(f.braceL),e&&this.enterScope(0);this.type!==f.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};I.parseFor=function(e,t){return e.init=t,this.expect(f.semi),e.test=this.type===f.semi?null:this.parseExpression(),this.expect(f.semi),e.update=this.type===f.parenR?null:this.parseExpression(),this.expect(f.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};I.parseForIn=function(e,t){var n=this.type===f._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(f.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};I.parseVar=function(e,t,n,i){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(f.eq)?r.init=this.parseMaybeAssign(t):!i&&n==="const"&&!(this.type===f._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!i&&r.id.type!=="Identifier"&&!(t&&(this.type===f._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):r.init=null,e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(f.comma))break}return e};I.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Jf:Ti,!1)};var ga=1,Kl=2,Rb=4;I.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===f.star&&t&Kl&&this.unexpected(),e.generator=this.eat(f.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&ga&&(e.id=t&Rb&&this.type!==f.name?null:this.parseIdent(),e.id&&!(t&Kl)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Jf:Ti:Db));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kf(e.async,e.generator)),t&ga||(e.id=this.type===f.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&ga?"FunctionDeclaration":"FunctionExpression")};I.parseFunctionParams=function(e){this.expect(f.parenL),e.params=this.parseBindingList(f.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};I.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(f.braceL);this.type!==f.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&fD(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};I.parseClassElement=function(e){if(this.eat(f.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(f.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===f.star?o=!0:i="static"}if(n.static=o,!i&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===f.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(t>=9||!s)&&this.eat(f.star)&&(r=!0),!i&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:i=c)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===f.parenL||a!=="method"||r||s){var u=!n.static&&Gc(n,"constructor"),l=u&&e;u&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,r,s,l)}else this.parseClassField(n);return n};I.isClassElementNameStart=function(){return this.type===f.name||this.type===f.privateId||this.type===f.num||this.type===f.string||this.type===f.bracketL||this.type.keyword};I.parseClassElementName=function(e){this.type===f.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};I.parseClassMethod=function(e,t,n,i){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&Gc(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,i);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};I.parseClassField=function(e){if(Gc(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Gc(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(f.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};I.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(io|Gf);this.type!==f.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};I.parseClassId=function(e,t){this.type===f.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Ti,!1)):(t===!0&&this.unexpected(),e.id=null)};I.parseClassSuper=function(e){e.superClass=this.eat(f._extends)?this.parseExprSubscripts(null,!1):null};I.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};I.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];no(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function fD(e,t){var n=t.key.name,i=e[n],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(e[n]="true",!1):i?!0:(e[n]=r,!1)}function Gc(e,t){var n=e.computed,i=e.key;return!n&&(i.type==="Identifier"&&i.name===t||i.type==="Literal"&&i.value===t)}I.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==f.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};I.parseExport=function(e,t){if(this.next(),this.eat(f.star))return this.parseExportAllDeclaration(e,t);if(this.eat(f._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==f.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,i=e.specifiers;n<i.length;n+=1){var r=i[n];this.checkUnreserved(r.local),this.checkLocalExport(r.local),r.local.type==="Literal"&&this.raise(r.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};I.parseExportDeclaration=function(e){return this.parseStatement(null)};I.parseExportDefaultDeclaration=function(){var e;if(this.type===f._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,ga|Rb,!1,e)}else if(this.type===f._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var i=this.parseMaybeAssign();return this.semicolon(),i}};I.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),no(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};I.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(e,c)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};I.checkVariableExport=function(e,t){if(e)for(var n=0,i=t;n<i.length;n+=1){var r=i[n];this.checkPatternExport(e,r.id)}};I.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};I.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};I.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(f.braceL);!this.eat(f.braceR);){if(n)n=!1;else if(this.expect(f.comma),this.afterTrailingComma(f.braceR))break;t.push(this.parseExportSpecifier(e))}return t};I.parseImport=function(e){return this.next(),this.type===f.string?(e.specifiers=hD,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===f.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};I.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Ti),this.finishNode(e,"ImportSpecifier")};I.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Ti),this.finishNode(e,"ImportDefaultSpecifier")};I.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Ti),this.finishNode(e,"ImportNamespaceSpecifier")};I.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===f.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(f.comma)))return e;if(this.type===f.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(f.braceL);!this.eat(f.braceR);){if(t)t=!1;else if(this.expect(f.comma),this.afterTrailingComma(f.braceR))break;e.push(this.parseImportSpecifier())}return e};I.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===f.string){var e=this.parseLiteral(this.value);return aD.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};I.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};I.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Je=Wt.prototype;Je.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Je.toAssignableList=function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];r&&this.toAssignable(r,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Je.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Je.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==f.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Je.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case f.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(f.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case f.braceL:return this.parseObj(!0)}return this.parseIdent()};Je.parseBindingList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(f.comma),t&&this.type===f.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===f.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else r.push(this.parseAssignableListItem(i))}return r};Je.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Je.parseBindingListItem=function(e){return e};Je.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(f.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};Je.checkLValSimple=function(e,t,n){t===void 0&&(t=Yc);var i=t!==Yc;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===Ti&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(no(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==Cb&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}};Je.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Yc),e.type){case"ObjectPattern":for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,t,n)}break;default:this.checkLValSimple(e,t,n)}};Je.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Yc),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Qe=function(t,n,i,r,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},At={b_stat:new Qe("{",!1),b_expr:new Qe("{",!0),b_tmpl:new Qe("${",!1),p_stat:new Qe("(",!1),p_expr:new Qe("(",!0),q_tmpl:new Qe("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Qe("function",!1),f_expr:new Qe("function",!0),f_expr_gen:new Qe("function",!0,!1,null,!0),f_gen:new Qe("function",!1,!1,null,!0)},qs=Wt.prototype;qs.initialContext=function(){return[At.b_stat]};qs.curContext=function(){return this.context[this.context.length-1]};qs.braceIsBlock=function(e){var t=this.curContext();return t===At.f_expr||t===At.f_stat?!0:e===f.colon&&(t===At.b_stat||t===At.b_expr)?!t.isExpr:e===f._return||e===f.name&&this.exprAllowed?Ke.test(this.input.slice(this.lastTokEnd,this.start)):e===f._else||e===f.semi||e===f.eof||e===f.parenR||e===f.arrow?!0:e===f.braceL?t===At.b_stat:e===f._var||e===f._const||e===f.name?!1:!this.exprAllowed};qs.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};qs.updateContext=function(e){var t,n=this.type;n.keyword&&e===f.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};qs.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};f.parenR.updateContext=f.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===At.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};f.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?At.b_stat:At.b_expr),this.exprAllowed=!0};f.dollarBraceL.updateContext=function(){this.context.push(At.b_tmpl),this.exprAllowed=!0};f.parenL.updateContext=function(e){var t=e===f._if||e===f._for||e===f._with||e===f._while;this.context.push(t?At.p_stat:At.p_expr),this.exprAllowed=!0};f.incDec.updateContext=function(){};f._function.updateContext=f._class.updateContext=function(e){e.beforeExpr&&e!==f._else&&!(e===f.semi&&this.curContext()!==At.p_stat)&&!(e===f._return&&Ke.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===f.colon||e===f.braceL)&&this.curContext()===At.b_stat)?this.context.push(At.f_expr):this.context.push(At.f_stat),this.exprAllowed=!1};f.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};f.backQuote.updateContext=function(){this.curContext()===At.q_tmpl?this.context.pop():this.context.push(At.q_tmpl),this.exprAllowed=!1};f.star.updateContext=function(e){if(e===f._function){var t=this.context.length-1;this.context[t]===At.f_expr?this.context[t]=At.f_expr_gen:this.context[t]=At.f_gen}this.exprAllowed=!0};f.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==f.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var M=Wt.prototype;M.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var i=e.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}};M.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===f.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(f.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r};M.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Eu,i=!0);var o=this.start,c=this.startLoc;(this.type===f.parenL||this.type===f.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,c)),this.type.isAssign){var l=this.startNodeAt(o,c);return l.operator=this.value,this.type===f.eq&&(u=this.toAssignable(u,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===f.eq?this.checkLValPattern(u):this.checkLValSimple(u),l.left=u,this.next(),l.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else i&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),u};M.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(f.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(f.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return r};M.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,e)};M.parseExprOp=function(e,t,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==f._in)&&s>i){var a=this.type===f.logicalOR||this.type===f.logicalAND,o=this.type===f.coalesce;o&&(s=f.logicalAND.binop);var c=this.value;this.next();var u=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),u,l,s,r),d=this.buildBinary(t,n,e,h,c,a||o);return(a&&this.type===f.coalesce||o&&(this.type===f.logicalOR||this.type===f.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,i,r)}return e};M.buildBinary=function(e,t,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};M.parseMaybeUnary=function(e,t,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),t=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===f.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(e,!0),c?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&Mb(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&Jl(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===f.privateId)(i||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==f._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(r,s);u.operator=this.value,u.prefix=!1,u.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(f.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function Mb(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&Mb(e.expression)}function Jl(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Jl(e.expression)||e.type==="ParenthesizedExpression"&&Jl(e.expression)}M.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};M.parseSubscripts=function(e,t,n,i,r){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,i,s,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var c=this.startNodeAt(t,n);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}e=o}};M.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(f.arrow)};M.parseSubscriptAsyncArrow=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,i)};M.parseSubscript=function(e,t,n,i,r,s,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(f.questionDot);i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(f.bracketL);if(u||c&&this.type!==f.parenL&&this.type!==f.backQuote||this.eat(f.dot)){var l=this.startNodeAt(t,n);l.object=e,u?(l.property=this.parseExpression(),this.expect(f.bracketR)):this.type===f.privateId&&e.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!u,o&&(l.optional=c),e=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(f.parenL)){var h=new Eu,d=this.yieldPos,p=this.awaitPos,g=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var _=this.parseExprList(f.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=g,this.parseSubscriptAsyncArrow(t,n,_,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=g||this.awaitIdentPos;var b=this.startNodeAt(t,n);b.callee=e,b.arguments=_,o&&(b.optional=c),e=this.finishNode(b,"CallExpression")}else if(this.type===f.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var w=this.startNodeAt(t,n);w.tag=e,w.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(w,"TaggedTemplateExpression")}return e};M.parseExprAtom=function(e,t,n){this.type===f.slash&&this.readRegexp();var i,r=this.potentialArrowAt===this.start;switch(this.type){case f._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type===f.parenL&&!this.allowDirectSuper&&this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==f.dot&&this.type!==f.bracketL&&this.type!==f.parenL&&this.unexpected(),this.finishNode(i,"Super");case f._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case f.name:var s=this.start,a=this.startLoc,o=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&c.name==="async"&&!this.canInsertSemicolon()&&this.eat(f._function))return this.overrideContext(At.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(f.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[c],!1,t);if(this.options.ecmaVersion>=8&&c.name==="async"&&this.type===f.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return c=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(f.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[c],!0,t)}return c;case f.regexp:var u=this.value;return i=this.parseLiteral(u.value),i.regex={pattern:u.pattern,flags:u.flags},i;case f.num:case f.string:return this.parseLiteral(this.value);case f._null:case f._true:case f._false:return i=this.startNode(),i.value=this.type===f._null?null:this.type===f._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case f.parenL:var l=this.start,h=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),h;case f.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(f.bracketR,!0,!0,e),this.finishNode(i,"ArrayExpression");case f.braceL:return this.overrideContext(At.b_expr),this.parseObj(!1,e);case f._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case f._class:return this.parseClass(this.startNode(),!1);case f._new:return this.parseNew();case f.backQuote:return this.parseTemplate();case f._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};M.parseExprAtomDefault=function(){this.unexpected()};M.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===f.parenL&&!e)return this.parseDynamicImport(t);if(this.type===f.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};M.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(f.parenR)){var t=this.start;this.eat(f.comma)&&this.eat(f.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};M.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};M.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};M.parseParenExpression=function(){this.expect(f.parenL);var e=this.parseExpression();return this.expect(f.parenR),e};M.shouldParseArrow=function(e){return!this.canInsertSemicolon()};M.parseParenAndDistinguishExpression=function(e,t){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,c=[],u=!0,l=!1,h=new Eu,d=this.yieldPos,p=this.awaitPos,g;for(this.yieldPos=0,this.awaitPos=0;this.type!==f.parenR;)if(u?u=!1:this.expect(f.comma),s&&this.afterTrailingComma(f.parenR,!0)){l=!0;break}else if(this.type===f.ellipsis){g=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else c.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var _=this.lastTokEnd,b=this.lastTokEndLoc;if(this.expect(f.parenR),e&&this.shouldParseArrow(c)&&this.eat(f.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(n,i,c,t);(!c.length||l)&&this.unexpected(this.lastTokStart),g&&this.unexpected(g),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,c.length>1?(r=this.startNodeAt(a,o),r.expressions=c,this.finishNodeAt(r,"SequenceExpression",_,b)):r=c[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var w=this.startNodeAt(n,i);return w.expression=r,this.finishNode(w,"ParenthesizedExpression")}else return r};M.parseParenItem=function(e){return e};M.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};var dD=[];M.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===f.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var i=this.start,r=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),i,r,!0,!1),this.eat(f.parenL)?e.arguments=this.parseExprList(f.parenR,this.options.ecmaVersion>=8,!1):e.arguments=dD,this.finishNode(e,"NewExpression")};M.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===f.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===f.backQuote,this.finishNode(n,"TemplateElement")};M.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:t});for(n.quasis=[i];!i.tail;)this.type===f.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(f.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(f.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};M.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===f.name||this.type===f.num||this.type===f.string||this.type===f.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===f.star)&&!Ke.test(this.input.slice(this.lastTokEnd,this.start))};M.parseObj=function(e,t){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(f.braceR);){if(i)i=!1;else if(this.expect(f.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(f.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};M.parseProperty=function(e,t){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(f.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===f.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,a=this.startLoc),e||(i=this.eat(f.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(f.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,i,r,s,a,t,o),this.finishNode(n,"Property")};M.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};M.parsePropertyValue=function(e,t,n,i,r,s,a,o){(n||i)&&this.type===f.colon&&this.unexpected(),this.eat(f.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===f.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i)):!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==f.comma&&this.type!==f.braceR&&this.type!==f.eq?((n||i)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===f.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};M.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(f.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(f.bracketR),e.key;e.computed=!1}return e.key=this.type===f.num||this.type===f.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};M.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};M.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kf(t,i.generator)|Gf|(n?Fb:0)),this.expect(f.parenL),i.params=this.parseBindingList(f.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};M.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Kf(n,!1)|Bb),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};M.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==f.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,Cb),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=c}this.exitScope()};M.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var i=n[t];if(i.type!=="Identifier")return!1}return!0};M.checkParams=function(e,t){for(var n=Object.create(null),i=0,r=e.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,Jf,t?null:n)}};M.parseExprList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(f.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===f.comma?a=null:this.type===f.ellipsis?(a=this.parseSpread(i),i&&this.type===f.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};M.checkUnreserved=function(e){var t=e.start,n=e.end,i=e.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(t,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(t,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+i+"' is reserved"))}};M.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};M.parseIdentNode=function(){var e=this.startNode();return this.type===f.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=f.name):this.unexpected(),e};M.parsePrivateIdent=function(){var e=this.startNode();return this.type===f.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};M.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===f.semi||this.canInsertSemicolon()||this.type!==f.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(f.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};M.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Hc=Wt.prototype;Hc.raise=function(e,t){var n=Tb(this.input,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i};Hc.raiseRecoverable=Hc.raise;Hc.curPosition=function(){if(this.options.locations)return new Ua(this.curLine,this.pos-this.lineStart)};var ar=Wt.prototype,pD=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};ar.enterScope=function(e){this.scopeStack.push(new pD(e))};ar.exitScope=function(){this.scopeStack.pop()};ar.treatFunctionsAsVarInScope=function(e){return e.flags&Ws||!this.inModule&&e.flags&Pa};ar.declareName=function(e,t,n){var i=!1;if(t===Ti){var r=this.currentScope();i=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&Pa&&delete this.undefinedExports[e]}else if(t===kb){var s=this.currentScope();s.lexical.push(e)}else if(t===Db){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(e)>-1:i=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var c=this.scopeStack[o];if(c.lexical.indexOf(e)>-1&&!(c.flags&Nb&&c.lexical[0]===e)||!this.treatFunctionsAsVarInScope(c)&&c.functions.indexOf(e)>-1){i=!0;break}if(c.var.push(e),this.inModule&&c.flags&Pa&&delete this.undefinedExports[e],c.flags&Hf)break}i&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};ar.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};ar.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};ar.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Hf)return t}};ar.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Hf&&!(t.flags&Bb))return t}};var Tu=function(t,n,i){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new Au(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},ro=Wt.prototype;ro.startNode=function(){return new Tu(this,this.start,this.startLoc)};ro.startNodeAt=function(e,t){return new Tu(this,e,t)};function Lb(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}ro.finishNode=function(e,t){return Lb.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};ro.finishNodeAt=function(e,t,n,i){return Lb.call(this,e,t,n,i)};ro.copyNode=function(e){var t=new Tu(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Ub="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Pb=Ub+" Extended_Pictographic",$b=Pb,Vb=$b+" EBase EComp EMod EPres ExtPict",jb=Vb,yD=jb,mD={9:Ub,10:Pb,11:$b,12:Vb,13:jb,14:yD},gD="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",_D={9:"",10:"",11:"",12:"",13:"",14:gD},Yp="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",zb="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Wb=zb+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",qb=Wb+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Yb=qb+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Gb=Yb+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",bD=Gb+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",vD={9:zb,10:Wb,11:qb,12:Yb,13:Gb,14:bD},Hb={};function wD(e){var t=Hb[e]={binary:Mi(mD[e]+" "+Yp),binaryOfStrings:Mi(_D[e]),nonBinary:{General_Category:Mi(Yp),Script:Mi(vD[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var al=0,Gp=[9,10,11,12,13,14];al<Gp.length;al+=1){var SD=Gp[al];wD(SD)}var S=Wt.prototype,Kc=function(t,n){this.parent=t,this.base=n||this};Kc.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var i=t;i;i=i.parent)if(n.base===i.base&&n!==i)return!0;return!1};Kc.prototype.sibling=function(){return new Kc(this.parent,this.base)};var Kn=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Hb[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Kn.prototype.reset=function(t,n,i){var r=i.indexOf("v")!==-1,s=i.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=i,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Kn.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Kn.prototype.at=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return-1;var s=i.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var a=i.charCodeAt(t+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};Kn.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return r;var s=i.charCodeAt(t),a;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=r||(a=i.charCodeAt(t+1))<56320||a>57343?t+1:t+2};Kn.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Kn.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Kn.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Kn.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Kn.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var i=this.pos,r=0,s=t;r<s.length;r+=1){var a=s[r],o=this.at(i,n);if(o===-1||o!==a)return!1;i=this.nextIndex(i,n)}return this.pos=i,!0};S.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,i=!1,r=!1,s=0;s<n.length;s++){var a=n.charAt(s);t.indexOf(a)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),a==="u"&&(i=!0),a==="v"&&(r=!0)}this.options.ecmaVersion>=15&&i&&r&&this.raise(e.start,"Invalid regular expression flag")};function ID(e){for(var t in e)return!0;return!1}S.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&ID(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};S.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var i=n[t];e.groupNames[i]||e.raise("Invalid named capture referenced")}};S.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new Kc(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};S.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};S.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};S.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};S.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};S.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};S.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};S.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};S.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};S.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};S.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};S.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};S.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};S.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Kb(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Kb(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}S.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!Kb(n);)e.advance();return e.pos!==t};S.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};S.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var i=0,r=n;i<r.length;i+=1){var s=r[i];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};S.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};S.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Xi(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Xi(e.lastIntValue);return!0}return!1};S.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),xD(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function xD(e){return _i(e,!0)||e===36||e===95}S.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),AD(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function AD(e){return ks(e,!0)||e===36||e===95||e===8204||e===8205}S.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};S.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};S.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};S.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};S.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};S.regexp_eatZero=function(e){return e.current()===48&&!Ou(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};S.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};S.regexp_eatControlLetter=function(e){var t=e.current();return Jb(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function Jb(e){return e>=65&&e<=90||e>=97&&e<=122}S.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(i&&r>=55296&&r<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=r}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&ED(e.lastIntValue))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function ED(e){return e>=0&&e<=1114111}S.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};S.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var Qb=0,bi=1,ze=2;S.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(TD(t))return e.lastIntValue=-1,e.advance(),bi;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var i;if(e.eat(123)&&(i=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&i===ze&&e.raise("Invalid property name"),i;e.raise("Invalid property name")}return Qb};function TD(e){return e===100||e===68||e===115||e===83||e===119||e===87}S.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,i),bi}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r)}return Qb};S.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){no(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};S.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return bi;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return ze;e.raise("Invalid property name")};S.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Xb(t=e.current());)e.lastStringValue+=Xi(t),e.advance();return e.lastStringValue!==""};function Xb(e){return Jb(e)||e===95}S.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";OD(t=e.current());)e.lastStringValue+=Xi(t),e.advance();return e.lastStringValue!==""};function OD(e){return Xb(e)||Ou(e)}S.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};S.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===ze&&e.raise("Negated character class may contain strings"),!0}return!1};S.regexp_classContents=function(e){return e.current()===93?bi:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),bi)};S.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};S.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||ev(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var i=e.current();return i!==93?(e.lastIntValue=i,e.advance(),!0):!1};S.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};S.regexp_classSetExpression=function(e){var t=bi,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===ze&&(t=ze);for(var i=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==ze&&(t=bi);continue}e.raise("Invalid character in character class")}if(i!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(i!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===ze&&(t=ze)}};S.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var i=e.lastIntValue;return n!==-1&&i!==-1&&n>i&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};S.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?bi:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};S.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),i=this.regexp_classContents(e);if(e.eat(93))return n&&i===ze&&e.raise("Negated character class may contain strings"),i;e.pos=t}if(e.eat(92)){var r=this.regexp_eatCharacterClassEscape(e);if(r)return r;e.pos=t}return null};S.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};S.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===ze&&(t=ze);return t};S.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?bi:ze};S.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&BD(n)||ND(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function BD(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function ND(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}S.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return FD(t)?(e.lastIntValue=t,e.advance(),!0):!1};function FD(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}S.regexp_eatClassControlLetter=function(e){var t=e.current();return Ou(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};S.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};S.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ou(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Ou(e){return e>=48&&e<=57}S.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Zb(n=e.current());)e.lastIntValue=16*e.lastIntValue+tv(n),e.advance();return e.pos!==t};function Zb(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function tv(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}S.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};S.regexp_eatOctalDigit=function(e){var t=e.current();return ev(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function ev(e){return e>=48&&e<=55}S.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var i=0;i<t;++i){var r=e.current();if(!Zb(r))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+tv(r),e.advance()}return!0};var Xf=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Au(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},tt=Wt.prototype;tt.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Xf(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};tt.getToken=function(){return this.next(),new Xf(this)};typeof Symbol<"u"&&(tt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===f.eof,value:t}}}});tt.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(f.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};tt.readToken=function(e){return _i(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};tt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};tt.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=t;(i=xb(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};tt.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!zs(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};tt.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&Ab.test(String.fromCharCode(e)))++this.pos;else break t}}};tt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};tt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(f.ellipsis)):(++this.pos,this.finishToken(f.dot))};tt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(f.assign,2):this.finishOp(f.slash,1)};tt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=e===42?f.star:f.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,i=f.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(f.assign,n+1):this.finishOp(i,n)};tt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(f.assign,3)}return this.finishOp(e===124?f.logicalOR:f.logicalAND,2)}return t===61?this.finishOp(f.assign,2):this.finishOp(e===124?f.bitwiseOR:f.bitwiseAND,1)};tt.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(f.assign,2):this.finishOp(f.bitwiseXOR,1)};tt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ke.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(f.incDec,2):t===61?this.finishOp(f.assign,2):this.finishOp(f.plusMin,1)};tt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(f.assign,n+1):this.finishOp(f.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(f.relational,n))};tt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(f.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(f.arrow)):this.finishOp(e===61?f.eq:f.prefix,1)};tt.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(f.questionDot,2)}if(t===63){if(e>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(f.assign,3)}return this.finishOp(f.coalesce,2)}}return this.finishOp(f.question,1)};tt.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),_i(t,!0)||t===92))return this.finishToken(f.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Xi(t)+"'")};tt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(f.parenL);case 41:return++this.pos,this.finishToken(f.parenR);case 59:return++this.pos,this.finishToken(f.semi);case 44:return++this.pos,this.finishToken(f.comma);case 91:return++this.pos,this.finishToken(f.bracketL);case 93:return++this.pos,this.finishToken(f.bracketR);case 123:return++this.pos,this.finishToken(f.braceL);case 125:return++this.pos,this.finishToken(f.braceR);case 58:return++this.pos,this.finishToken(f.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(f.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(f.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Xi(e)+"'")};tt.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};tt.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(Ke.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(i==="[")t=!0;else if(i==="]"&&t)t=!1;else if(i==="/"&&!t)break;e=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Kn(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(r,a)}catch{}return this.finishToken(f.regexp,{pattern:r,flags:a,value:c})};tt.readInt=function(e,t,n){for(var i=this.options.ecmaVersion>=12&&t===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,c=0,u=t??1/0;c<u;++c,++this.pos){var l=this.input.charCodeAt(this.pos),h=void 0;if(i&&l===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),c===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?h=l-97+10:l>=65?h=l-65+10:l>=48&&l<=57?h=l-48:h=1/0,h>=e)break;o=l,a=a*e+h}return i&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:a};function DD(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function nv(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}tt.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=nv(this.input.slice(t,this.pos)),++this.pos):_i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(f.num,n)};tt.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&i===110){var r=nv(this.input.slice(t,this.pos));return++this.pos,_i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(f.num,r)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),_i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=DD(this.input.slice(t,this.pos),n);return this.finishToken(f.num,s)};tt.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};tt.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;i===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(zs(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(f.string,t)};var iv={};tt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===iv)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};tt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw iv;this.raise(e,t)};tt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===f.template||this.type===f.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(f.dollarBraceL)):(++this.pos,this.finishToken(f.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(f.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(zs(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};tt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(f.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};tt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Xi(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,t=this.input.charCodeAt(this.pos),(i!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-i.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return zs(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};tt.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};tt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(ks(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?_i:ks)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Xi(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};tt.readWord=function(){var e=this.readWord1(),t=f.name;return this.keywords.test(e)&&(t=qf[e]),this.finishToken(t,e)};var kD="8.12.0";Wt.acorn={Parser:Wt,version:kD,defaultOptions:Hl,Position:Ua,SourceLocation:Au,getLineInfo:Tb,Node:Tu,TokenType:at,tokTypes:f,keywordTypes:qf,TokContext:Qe,tokContexts:At,isIdentifierChar:ks,isIdentifierStart:_i,Token:Xf,isNewLine:zs,lineBreak:Ke,lineBreakG:iD,nonASCIIwhitespace:Ab};function CD(e,t){return Wt.parse(e,t)}const Zf={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},RD={ecmaVersion:11},Hp="$",MD="d",LD="d1",UD="d2",Kt=e=>(t,n)=>n.error(t,e+" not allowed"),PD=Kt("Aggregate function"),$D=Kt("Window function"),VD="Invalid argument",td="Invalid column reference",jD=td+" (must be input to an aggregate function)",rv="Invalid function call",zD="Invalid member expression",WD="Invalid operator parameter",qD="Invalid param reference",YD="Invalid variable reference",GD="Variable not accessible in operator call",HD="Unsupported variable declaration",KD="Unsupported destructuring pattern",sv="Table expressions do not support closures",av="Use aq.escape(fn) to use a function as-is (including closures)",JD="use table.params({ name: value }) to define dynamic parameters",QD="use aq.addFunction(name, fn) to add new op functions",XD=`
Note: ${sv}. ${av}, or ${JD}.`,ov=`
Note: ${sv}. ${av}, or ${QD}.`,ZD=`The ${lg} method is not valid in multi-table expressions.`;function tk(e,t){const n=ek(t);let i=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,GF(i)?(ik(i,e),i=i.body):e.join?(e.scope.add(e.tuple1=LD),e.scope.add(e.tuple2=UD),e.scope.add(e.$param=Hp)):(e.scope.add(e.tuple=MD),e.scope.add(e.$param=Hp)),st(i,e,ed),e.root}function ek(e){try{const t=e.field?nk(e):ct(e)?$n(e):e;return CD(`expr=(${t})`,RD).body[0].expression.right}catch{J(`Expression parse error: ${e+""}`)}}function nk(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const ed={FunctionDeclaration:Kt("Function definitions"),ForStatement:Kt("For loops"),ForOfStatement:Kt("For-of loops"),ForInStatement:Kt("For-in loops"),WhileStatement:Kt("While loops"),DoWhileStatement:Kt("Do-while loops"),AwaitExpression:Kt("Await expressions"),ArrowFunctionExpression:Kt("Function definitions"),AssignmentExpression:Kt("Assignments"),FunctionExpression:Kt("Function definitions"),NewExpression:Kt('Use of "new"'),UpdateExpression:Kt("Update expressions"),VariableDeclarator(e,t){Zl(e.id,t)},Identifier(e,t,n){lv(e,t,n)&&!t.scope.has(e.name)&&t.error(e,YD,XD)},CallExpression(e,t){const n=cv(e.callee),i=og(n)||cg(n);if(i){if((t.join||t.aggregate===!1)&&zh(n)&&PD(e,t),(t.join||t.window===!1)&&Wh(n)&&$D(e,t),t.$op=1,t.ast)Xl(e,n,t),e.arguments.forEach(r=>st(r,t,Ql));else{const r=t.op(rk(t,i,n,e.arguments));Object.assign(e,{type:ng,name:r.id})}return t.$op=0,!1}else ag(n)?Xl(e,n,t):t.error(e,rv,ov)},MemberExpression(e,t,n){const{object:i,property:r}=e;if(!zt(Li,i))return;const{name:s}=i;if(uv(e)&&zt(Li,r)&&un(Zf,r.name)){dv(e,r.name);return}const a=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(a>=0)return Kp(e,a,t,hv,n);if(s===t.$param)return Kp(e,a,t,ak);t.paramsRef.has(s)?$a(e,t.paramsRef.get(s)):t.columnRef.has(s)?fv(i,s,t,e):un(t.params,s)&&$a(i,s)}};function Kp(e,t,n,i,r){const{property:s,computed:a}=e;let o;if(!a)o=s.name;else if(zt(Us,s))o=s.value;else try{st(s,n,ed,e),o=n.param(s)}catch{n.error(e,zD)}return i(e,o,t,n,r),!1}const Ql={...ed,VariableDeclarator:Kt("Variable declaration in operator call"),Identifier(e,t,n){lv(e,t,n)&&t.error(e,GD)},CallExpression(e,t){const n=cv(e.callee);ag(n)?Xl(e,n,t):t.error(e,rv,ov)}};function ik(e,t){e.generator&&Kt("Generator functions")(e,t),e.async&&Kt("Async functions")(e,t);const{params:n}=e,i=n.length,r=a=>(o,c)=>t.columnRef.set(o,[c,a]),s=(a,o)=>t.paramsRef.set(a,o);i&&(t.join?(ta(t,n[0],"tuple1",r(1)),i>1&&ta(t,n[1],"tuple2",r(2)),i>2&&ta(t,n[2],"$param",s)):(ta(t,n[0],"tuple",r(0)),i>1&&ta(t,n[1],"$param",s))),t.root=e.body}function ta(e,t,n,i){zt(Li,t)?(e.scope.add(t.name),e[n]=t.name):zt(tg,t)&&t.properties.forEach(r=>{const s=zt(Li,r.key)?r.key.name:zt(Us,r.key)?r.key.value:e.error(r,VD);zt(Li,r.value)||e.error(r.value,KD),i(r.value.name,s)})}function rk(e,t,n,i){const r=[],s=[],a=t.param[0]||0,o=a+(t.param[1]||0);return i.forEach((c,u)=>{u<a?(st(c,e,Ql),r.push(e.field(c))):u<o?(st(c,e,Ql),s.push(e.param(c))):e.error(c,WD)}),{name:n,fields:r,params:s,...e.spec.window||{}}}function cv(e){return zt(Li,e)?e.name:zt(Z0,e)?uv(e)?sk(e.property.name):e.property.name:null}function uv(e){return zt(Li,e.object)&&e.object.name==="Math"}function sk(e){return e==="max"?"greatest":e==="min"?"least":e}function lv(e,t,n){const{name:i}=e;if(!(zt(Z0,n)&&n.property===e)){if(!(zt(eg,n)&&n.key===e))if(t.paramsRef.has(i))$a(e,t.paramsRef.get(i));else if(t.columnRef.has(i))fv(e,i,t,n);else if(un(t.params,i))$a(e,i);else if(un(Zf,i))dv(e,i);else return!0}}function hv(e,t,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(t);s&&!a&&i.error(e,td),i.aggronly&&!i.$op&&i.error(e,jD),ug(e,t,n,a,r)}function fv(e,t,n,i){const[r,s]=n.columnRef.get(t);hv(e,r,s,n,i)}function ak(e,t,n,i){i.params&&!un(i.params,t)&&i.error(e,qD),$a(e,t)}function $a(e,t){e.type=HT,e.name=t}function dv(e,t){e.type=qT,e.name=t,e.raw=Zf[t]}function Xl(e,t,n){if(t===lg){const i=n.table;i||n.error(e,ZD),hg(e,e.arguments.length?e.arguments.map(r=>{const s=n.param(r),a=re(s)?i.columnName(s):s;return i.column(a)||n.error(r,td),a}):i.columnNames())}else e.callee={type:GT,name:t}}function Zl(e,t){zt(Li,e)?t.scope.add(e.name):zt(VT,e)?e.elements.forEach(n=>Zl(n,t)):zt(tg,e)?e.properties.forEach(n=>Zl(n.value,t)):t.error(e.id,HD)}const ok={[Ja]:1,[ng]:1};function Se(e,t={}){const n=t.generate||Tc,i=t.compiler||qh,r=uk(t),s={},a={},o=[],c=[];let u=0,l=-1;const h=t.join?i.join:t.index==1?i.expr2:i.expr,d={op(_){const b=ck(_);return a[b]||(_.id=++l,a[b]=_)},field(_){const b=n(_);return s[b]||(s[b]=++u)},param(_){return zt(Us,_)?_.value:i.param(n(_),r)},value(_,b){o.push(_);const w=b.escape||(t.ast?YF(b):h(n(b),r));c.push(w),ok[b.type]&&w!==b&&ee(w)&&(w.field=b.name)},error(_,b,w=""){const L=_.start-6,lt=_.end-6,E=String(d.spec).slice(L,lt);J(`${b}: "${E}"${w}`)}};Object.assign(d,t,{params:r});for(const[_,b]of hu(e))d.value(_+"",b.escape?JF(d,b,r):tk(d,b));if(t.ast)return{names:o,exprs:c};const p=[];for(const _ in s)p[s[_]]=i.expr(_,r);const g=Object.values(a);return g.forEach(_=>_.fields=_.fields.map(b=>p[b])),{names:o,exprs:c,ops:g}}function ck(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1);t+=`[${n},${!!e.peers}]`}return t}function uk(e){return(e.table?ol(e.table):e.join?{...ol(e.join[1]),...ol(e.join[0])}:{})||{}}function ol(e){return e&&It(e.params)?e.params():{}}const pv="Expr",Xe="ExprList",yv="ExprNumber",pa="ExprObject",ns="JoinKeys",Jc="JoinValues",Ue="Options",nd="OrderKeys",Di="SelectionList",br="TableRef",is="TableRefList",lk="Descending",hk="Query",fk="Selection",dk="Verb",pk="Window";function id(e,t){return e&&e.expr?new Jp({...e,...t}):new Jp(t,e)}class Jp{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...It(this.expr)?{func:!0}:{}}}}function yk(e){return id(e,{desc:!0})}function kr(e,t,n=0){const i=n?{field:!0,table:n}:{field:!0};return id(e,t?{expr:t,...i}:i)}function mk(e,t,n){return id(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function gk(e){const t=n=>n;return t.toString=()=>e,t}function Qp(e,t){return t=t&&It(t.query)?t.query():t,t&&It(t.evaluate)?t.evaluate(null,e):e(t)}function mv(e){return ee(e)&&(ct(e.all)||ct(e.matches)||ct(e.not)||ct(e.range))}function Va(e){return e&&It(e.toObject)?e.toObject():It(e)?{expr:String(e),func:!0}:ct(e)?e.map(Va):ee(e)?Iu(e,t=>Va(t)):e}function rd(e){return ct(e)?e.map(rd):ee(e)?ct(e.verbs)?so.from(e):ct(e.all)?Ds():ct(e.range)?VF(...e.range):ct(e.match)?jF(RegExp(...e.match)):ct(e.not)?vb(e.not.map(Va)):_k(e):e}function _k(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=kr(n):e.func===!0&&(t=n=gk(n)),ee(e.window)){const{frame:i,peers:r}=e.window;t=n=mk(n,i,r)}e.desc===!0&&(t=yk(n))}return e===t?Iu(e,i=>rd(i)):t}function bk(e){return ct(e)?e.map(vk):e}function vk(e){const t=[];return be(e).forEach(n=>{re(n)?t.push(n):Xt(n)?t.push(kr(n,null)):ee(n)&&n.expr||It(n)?t.push(n):J(`Invalid key value: ${n+""}`)}),t}function wk(e){return ct(e)?e.map(Sk):e}function Sk(e,t){return t<2?be(e):e}function Ik(e){const t=[];return e.forEach(n=>{const i=n.expr!=null?n.expr:n;if(ee(i)&&!It(i))for(const r in i)t.push(i[r]);else n=re(i)?i:Xt(i)?kr(n):It(i)?n:J(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const xk={[pv]:vv,[Xe]:Cs,[yv]:Nk,[pa]:Zi,[ns]:Fk,[Jc]:Dk,[nd]:Cs,[Di]:Ok};function Ak(e,t,n){return t===br?Xp(e):t===is?e.map(Xp):gv(Va(e),t,n)}function gv(e,t,n){return t===Ue?e&&Ek(e,n):xk[t](e)}function Ek(e,t={}){const n={};for(const i in e){const r=e[i];n[i]=t[i]?gv(r,t[i]):r}return n}function Tk(e,t){return Se({expr:e},{...t,ast:!0}).exprs[0]}function sd(e){return{type:Ja,name:e}}function _v(e){return{type:Ja,index:e}}function Zi(e,t){if(Xt(e))return Tk(e,t);if(e.expr){let n;if(e.field===!0?n=sd(e.expr):e.func===!0&&(n=Zi(e.expr,t)),n)return e.desc&&(n={type:lk,expr:n}),e.window&&(n={type:pk,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Zi(e[n],t),as:n}))}function bv(e){const t=fk;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Cs(e.not)}:e.range?{type:t,operator:"range",arguments:Cs(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:J("Invalid input")}function Ok(e){return be(e).map(Bk).flat()}function Bk(e){return mv(e)?bv(e):re(e)?_v(e):Xt(e)?sd(e):ee(e)?Object.keys(e).map(t=>({type:Ja,name:t,as:e[t]})):J("Invalid input")}function vv(e){return mv(e)?bv(e):re(e)?_v(e):Xt(e)?sd(e):ee(e)?Zi(e):J("Invalid input")}function Cs(e){return be(e).map(vv).flat()}function Nk(e){return re(e)?e:Zi(e)}function Fk(e){return ct(e)?e.map(Cs):Zi(e,{join:!0})}function Dk(e){return ct(e)?e.map((t,n)=>n<2?Cs(t):Zi(t,{join:!0})):Zi(e,{join:!0})}function Xp(e){return e&&It(e.toAST)?e.toAST():e}class wv{constructor(t,n=[],i=[]){this.verb=t,this.schema=n,n.forEach((r,s)=>{const a=r.type,o=i[s],c=a===ns?bk(o):a===Jc?wk(o):a===nd?Ik(o):o;this[r.name]=c!==void 0?c:r.default})}static from(t){const n=th[t.verb],i=(n.schema||[]).map(({name:r})=>rd(t[r]));return n(...i)}evaluate(t,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===br?Qp(n,a):s===is?a.map(o=>Qp(n,o)):a});return t[this.verb](...i)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=Va(this[n])}),t}toAST(){const t={type:dk,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{t[n]=Ak(this[n],i,r)}),t}}function bt(e,t){return Object.assign((...n)=>new wv(e,t,n),{schema:t})}const th={count:bt("count",[{name:"options",type:Ue}]),derive:bt("derive",[{name:"values",type:pa},{name:"options",type:Ue,props:{before:Di,after:Di}}]),filter:bt("filter",[{name:"criteria",type:pa}]),groupby:bt("groupby",[{name:"keys",type:Xe}]),orderby:bt("orderby",[{name:"keys",type:nd}]),relocate:bt("relocate",[{name:"columns",type:Di},{name:"options",type:Ue,props:{before:Di,after:Di}}]),rename:bt("rename",[{name:"columns",type:Di}]),rollup:bt("rollup",[{name:"values",type:pa}]),sample:bt("sample",[{name:"size",type:yv},{name:"options",type:Ue,props:{weight:pv}}]),select:bt("select",[{name:"columns",type:Di}]),ungroup:bt("ungroup"),unorder:bt("unorder"),reify:bt("reify"),dedupe:bt("dedupe",[{name:"keys",type:Xe,default:[]}]),impute:bt("impute",[{name:"values",type:pa},{name:"options",type:Ue,props:{expand:Xe}}]),fold:bt("fold",[{name:"values",type:Xe},{name:"options",type:Ue}]),pivot:bt("pivot",[{name:"keys",type:Xe},{name:"values",type:Xe},{name:"options",type:Ue}]),spread:bt("spread",[{name:"values",type:Xe},{name:"options",type:Ue}]),unroll:bt("unroll",[{name:"values",type:Xe},{name:"options",type:Ue,props:{drop:Xe}}]),lookup:bt("lookup",[{name:"table",type:br},{name:"on",type:ns},{name:"values",type:Xe}]),join:bt("join",[{name:"table",type:br},{name:"on",type:ns},{name:"values",type:Jc},{name:"options",type:Ue}]),cross:bt("cross",[{name:"table",type:br},{name:"values",type:Jc},{name:"options",type:Ue}]),semijoin:bt("semijoin",[{name:"table",type:br},{name:"on",type:ns}]),antijoin:bt("antijoin",[{name:"table",type:br},{name:"on",type:ns}]),concat:bt("concat",[{name:"tables",type:is}]),union:bt("union",[{name:"tables",type:is}]),intersect:bt("intersect",[{name:"tables",type:is}]),except:bt("except",[{name:"tables",type:is}])};class so extends $0{constructor(t,n,i){super(n),this._verbs=t||[],this._table=i}static from({verbs:t,table:n,params:i}){return new so(t.map(wv.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const i of this._verbs)t=i.evaluate(t.params(this._params),n);return t}toObject(){return Zp(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Zp(this,"toAST",{type:hk})}}function Zp(e,t,n){return{...n,verbs:e._verbs.map(i=>i[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function kk(e,t){return new so(e._verbs.concat(t),e._params,e._table)}for(const e in th){const t=th[e];so.prototype["__"+e]=function(n,...i){return kk(n,t(...i))}}function Ys(e,t,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((o,c)=>`${i[a]}${c} = ${i[a]}[${c}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...r)(...n)}function Ck(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function ad(e,t){const n=ke();return t.forEach((i,r)=>{const s=Xt(i)?i:r;if(s){const a=e.column(r)||J(`Unrecognized column: ${r}`);n.add(s,a)}}),e.create(n)}function Sv(e,t,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||J("relocate requires a before or after option."),r&&s&&J("relocate accepts only one of the before or after options."),t=gi(e,t);const a=[...gi(e,r?n:i).keys()],o=r?a[0]:a.pop(),c=new Map;return e.columnNames().forEach(u=>{const l=!t.has(u);if(u===o){s&&l&&c.set(u,u);for(const[h,d]of t)c.set(h,d);if(s)return}l&&c.set(u,u)}),ad(e,c)}function ao(e,t=i=>i,n=""){const i=e.length;if(!i)return"";let r=t(e[0],0);for(let s=1;s<i;++s)r+=n+t(e[s],s);return r}function od(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Rk(e,t=0,n=e.length){let i=n?e[t++]:ot;for(let r=t;r<n;++r)i>e[r]&&(i=e[r]);return i}function Mk(e,t=0,n=e.length){let i=n?e[t++]:ot;for(let r=t;r<n;++r)i<e[r]&&(i=e[r]);return i}function _o(e){return Fa(e)?e:+e}function Lk(e,t){const n=e.length;if(!n)return ot;if((t=+t)<=0||n<2)return _o(e[0]);if(t>=1)return _o(e[n-1]);const i=(n-1)*t,r=Math.floor(i),s=_o(e[r]);return Fa(s)?s:s+(_o(e[r+1])-s)*(i-r)}class Uk{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Rk(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Mk(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(od)),Lk(this._sorted,t)}}const Qc=(e,t,n)=>Ys(t,"{"+ao(e,(i,r)=>`_${r}.${n}(${t});`)+"}",e);function Pk(e,t){const{ops:n,output:i}=$k(e,t),r=e[0].fields,s=r.length,a=s===0?cd:s===1?Vk:s===2?jk:J("Unsupported field count: "+s);return new a(r,n,i,t)}function $k(e,t){const n={},i=[];function r(a,o=[]){const c=a+":"+o;if(n[c])return n[c];const u=og(a),l=u.create(...o);return t<0&&u.stream&&u.stream.forEach(h=>r(h,[])),u.req&&u.req.forEach(h=>r(h,[])),n[c]=l,i.push(l),l}const s=e.map(a=>{const o=r(a.name,a.params);return o.output=a.id,o});return{ops:i,output:s}}class cd extends WF{constructor(t,n,i,r){super(i),this._op=n,this._fields=t,this._stream=!!r}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Uk),t}write(t,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Vk extends cd{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Qc(n,s,"add"),this._rem=Qc(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i);++t.count,rn(r)&&(++t.valid,t.list&&t.list.add(r),this._add(t,r))}rem(t,n,i){const r=this._fields[0](n,i);--t.count,rn(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r))}}class jk extends cd{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Qc(n,s,"add"),this._rem=Qc(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++t.count,rn(r)&&rn(s)&&(++t.valid,t.list&&t.list.add([r,s]),this._add(t,r,s))}rem(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--t.count,rn(r)&&rn(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r,s))}}function Rr(e,t,n){if(t.length){const i=e.data(),{keys:r}=e.groups()||{},s=Gs(e,t),a=r?(o,c)=>s[o][r[c]]:o=>s[o][0];n=n.map(o=>c=>o(c,i,a))}return n}function Gs(e,t,n){if(!t.length)return n;const i=Iv(t),r=e.groups(),s=r?r.size:1;return n=n||uu(t.length,()=>Array(s)),s>1?i.forEach(a=>{const o=Av(e,a,r);for(let c=0;c<s;++c)a.write(o[c],n,c)}):i.forEach(a=>{const o=xv(e,a);a.write(o,n,0)}),n}function Iv(e,t){const n=[],i={};for(const r of e){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(Pk(i[r],t));return n}function xv(e,t){const n=t.init(),i=e.totalRows(),r=e.data(),s=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<i;++o)t.add(n,a[o],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))t.add(n,a,r);else for(let a=0;a<i;++a)t.add(n,a,r);return n}function Av(e,t,n){const{keys:i,size:r}=n,s=uu(r,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),c=o.length;for(let u=0;u<c;++u){const l=o[u];t.add(s[i[l]],l,a)}}else if(e.isFiltered()){const o=e.mask();for(let c=o.next(0);c>=0;c=o.next(c+1))t.add(s[i[c]],c,a)}else{const o=e.totalRows();for(let c=0;c<o;++c)t.add(s[i[c]],c,a)}return s}function Ev(e,t){const{get:n,names:i,rows:r,size:s}=t,a=i.length;for(let o=0;o<a;++o){const c=e.add(i[o],Array(s)),u=n[o];for(let l=0;l<s;++l)c[l]=u(r[l])}}function Tv(e){return{left(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}const ty=Tv(od);function zk(e,t,n,i,r){let s,a,o,c,u;const l=_=>a[_-1]===a[_],h=i.length,d=r.length,p=i.length?Ys(["w","r","k"],"{"+ao(i,(_,b)=>`r[_${b}.id][k]=_${b}.value(w,_${b}.get);`)+"}",i):()=>{},g={i0:0,i1:0,index:0,size:0,peer:l,init(_,b,w,L){g.index=g.i0=g.i1=0,g.size=b.length,s=_,a=b,c=w,u=L,o=r?r.map(lt=>lt.init()):null;for(let lt=0;lt<h;++lt)i[lt].init();return g},value(_,b){return b(s[_],e)},step(_){const[b,w]=t,L=g.size,lt=g.i0,E=g.i1;g.i0=b!=null?Math.max(0,_-Math.abs(b)):0,g.i1=w!=null?Math.min(L,_+Math.abs(w)+1):L,g.index=_,n&&(g.i0>0&&l(g.i0)&&(g.i0=ty.left(a,a[g.i0])),g.i1<L&&l(g.i1)&&(g.i1=ty.right(a,a[g.i1-1])));for(let St=0;St<d;++St){const Z=r[St],Ht=o[St];for(let mt=lt;mt<g.i0;++mt)Z.rem(Ht,s[mt],e);for(let mt=E;mt<g.i1;++mt)Z.add(Ht,s[mt],e);Z.write(Ht,c,u)}return p(g,c,u),c}};return g}const Wk=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),qk=e=>!!e.peers;function Yk(e){const{id:t,name:n,fields:i=[],params:r=[]}=e,s=cg(n).create(...r);return i.length&&(s.get=i[0]),s.id=t,s}function Gk(e,t,n,i={},r){const s=e.data(),a=Hk(r,s),o=a.length,c=Ys(["r","d","op"],"{"+ao(t,(u,l)=>`_${l}[r] = $${l}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,l)=>{const h=u.length,d=Kk(e,u);for(let g=0;g<o;++g)a[g].init(u,d,i,l);const p=g=>i[g][l];for(let g=0;g<h;++g){for(let _=0;_<o;++_)a[_].step(g);c(u[g],s,p)}})}function Hk(e,t){const n={};return e.forEach(i=>{const r=Wk(i),s=qk(i),a=`${r},${s}`,{aggOps:o,winOps:c}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});zh(i.name)?o.push(i):c.push(Yk(i))}),Object.values(n).map(i=>zk(t,i.frame,i.peers,i.winOps,Iv(i.aggOps,i.frame[0]!=null?-1:1)))}function Kk(e,t){if(e.isOrdered()){const n=e.comparator(),i=e.data(),r=t.length,s=new Uint32Array(r);for(let a=1,o=0;a<r;++a)s[a]=n(t[a-1],t[a],i)?++o:o;return s}else return t}function Jk(e){return Wh(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function ud(e,{names:t,exprs:n,ops:i},r={}){const s=e.totalRows(),a=ke(r.drop?null:e),o=t.map(d=>a.add(d,Array(s))),[c,u]=Qk(i),l=e.isGrouped()?e.groups().size:1,h=Gs(e,c,uu(i.length,()=>Array(l)));return u.length?Gk(e,o,n,h,u):Xk(e,o,n,h),e.create(a)}function Qk(e){const t=[],n=[],i=e.length;for(let r=0;r<i;++r){const s=e[r];s.id=r,(Jk(s)?n:t).push(s)}return[t,n]}function Xk(e,t,n,i){const r=e.mask(),s=e.data(),{keys:a}=e.groups()||{},o=a?(u,l)=>i[u][a[l]]:u=>i[u][0],c=t.length;for(let u=0;u<c;++u){const l=n[u],h=t[u];if(r)for(let d=r.next(0);d>=0;d=r.next(d+1))h[d]=l(d,s,o);else{const d=e.totalRows();for(let p=0;p<d;++p)h[p]=l(p,s,o)}}}function Zk(e,t,n={}){const i=ud(e,Se(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?i:Sv(i,Object.keys(t).filter(r=>!e.column(r)),n)}function tC(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((i,r)=>i.antijoin(r.select(n)),e).dedupe()}const bo=2147483648,eC=4294967295;class Ov{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let i=0;i<t;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(t){return this._bits[t>>5]&bo>>>t}set(t){this._bits[t>>5]|=bo>>>t}clear(t){this._bits[t>>5]&=~(bo>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,i=n.length;let r=t>>5,s=n[r]&eC>>>t;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let r=0;r<n;++r)t[r]=~t[r];const i=this._size%32;return i&&(t[n-1]&=bo>>i-1),this}and(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function nC(e,t){const n=e.totalRows(),i=e.mask(),r=e.data(),s=new Ov(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))t(a,r)&&s.set(a);else for(let a=0;a<n;++a)t(a,r)&&s.set(a);return e.create({filter:s})}function iC(e,t){const n=Se({p:t},{table:e});let i=n.exprs[0];if(n.ops.length){const{data:r}=ud(e,n,{drop:!0}).column("p");i=s=>r[s]}return nC(e,i)}function Bv(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(!t.length)return e;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,o=new Set(r.drop),c=Rr(e,i,n),u=ke(),l=new Set(t),h=[],d=[],p=[];e.columnNames().forEach(E=>{if(!o.has(E)){const St=u.add(E,[]);l.has(E)||(h.push(e.column(E)),d.push(St))}}),t.forEach(E=>{o.has(E)||(u.has(E)||u.add(E,[]),p.push(u.data[E]))});const g=a?u.add(a,[]):null;let _=0;const b=h.length,w=p.length,L=(E,St)=>{for(let Z=0;Z<b;++Z)d[Z].length=_+St,d[Z].fill(h[Z].get(E),_,_+St)},lt=g?(E,St)=>{for(let Z=0;Z<St;++Z)g[E+Z]=Z}:()=>{};if(w===1){const E=c[0],St=p[0];e.scan((Z,Ht)=>{const mt=be(E(Z,Ht)),Ae=Math.min(mt.length,s);L(Z,Ae);for(let yn=0;yn<Ae;++yn)St[_+yn]=mt[yn];lt(_,Ae),_+=Ae})}else e.scan((E,St)=>{let Z=0;const Ht=c.map(mt=>{const Ae=be(mt(E,St));return Z=Math.min(Math.max(Z,Ae.length),s),Ae});L(E,Z);for(let mt=0;mt<w;++mt){const Ae=p[mt],yn=Ht[mt];for(let or=0;or<Z;++or)Ae[_+or]=yn[or]}lt(_,Z),_+=Z});return e.create(u.new())}function rC(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(t.length===0)return e;const[s="key",a="value"]=r.as||[],o=Rr(e,i,n);return Bv(e,{names:[s,a],exprs:[()=>t,(c,u)=>o.map(l=>l(c,u))]},{...r,drop:t})}function hn(e,t,n,i={window:!1}){const r=new Map,s=a=>{a=re(a)?t.columnName(a):a,Xt(a)?r.set(a,kr(a)):It(a)?gi(t,a).forEach(s):ee(a)?_b(r,a):J(`Invalid ${e} value: ${a+""}`)};return be(n).forEach(s),i.preparse&&i.preparse(r),Se(r,{table:t,...i})}function sC(e,t,n){return rC(e,hn("fold",e,t),n)}function ey(e,t,n,i){const r=n&&n.length;return aC(r?oC(e,n,i):e,t,r)}function aC(e,{names:t,exprs:n,ops:i},r){const s=Rr(e,i,n),a=r?null:ke(e),o=e.totalRows();return t.forEach((c,u)=>{const l=e.column(c),h=r?l.data:a.add(c,Array(o)),d=s[u];e.scan(p=>{const g=l.get(p);h[p]=rn(g)?g:d(p)})}),r?e:e.create(a)}function oC(e,t,n){const i=e.groups(),r=e.data(),s=(i?i.names:[]).concat(t),a=(i?i.get:[]).concat(t.map(g=>e.getter(g))),o=new Set,c=Oc(a);e.scan((g,_)=>o.add(c(g,_)));const u=e.columnNames(),l=ke(),h=u.map(g=>l.add(g,[]));u.forEach((g,_)=>{const b=r[g],w=h[_];e.scan(L=>w.push(b.get(L)))});const d=Oc(a.map((g,_)=>b=>b[_])),p=Ys("v","{"+h.map((g,_)=>`_${_}.push(v[$${_}]);`).join("")+"}",h,u.map(g=>s.indexOf(g)));if(i){let g=i.keys.length;const _=n.reduce((w,L)=>w*L.length,i.size),b=new Uint32Array(_+(g-o.size));b.set(i.keys),ny(i,n,(w,L)=>{o.has(d(w))||(p(w),b[g++]=L[0])}),l.groupby({...i,keys:b})}else ny(i,n,g=>{o.has(d(g))||p(g)});return e.create(l.new())}function ny(e,t,n){const i=e?e.get.length:0,r=e?1:0,s=r+t.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(e){const{get:l,rows:h,size:d}=e;a[0]=d,c.push((p,g)=>{const _=h[g];for(let b=0;b<i;++b)p[b]=l[b](_)})}t.forEach((l,h)=>{const d=h+i;a[h+r]=l.length,c.push((p,g)=>p[d]=l[g])});const u=Array(i+t.length);for(let l=0;l<s;++l)c[l](u,0);n(u,o);for(let l=s-1;l>=0;){const h=++o[l];h<a[l]?(c[l](u,h),n(u,o),l=s-1):(o[l]=0,c[l](u,0),--l)}}function ld(e,{names:t,exprs:n,ops:i}){const r=ke(),s=e.groups();return s&&Ev(r,s),cC(t,n,s,Gs(e,i),r),e.create(r.new())}function cC(e,t,n,i=[],r){if(!t.length)return;const s=n?n.size:1,a=(c,u)=>i[c][u],o=e.length;for(let c=0;c<o;++c){const u=t[c];if(u.field!=null)r.add(e[c],i[u.field]);else if(s>1){const l=r.add(e[c],Array(s));for(let h=0;h<s;++h)l[h]=u(h,null,a)}else r.add(e[c],[u(0,null,a)])}}function uC(e,t,n={}){if(t=Se(t,{table:e}),t.names.forEach(i=>e.column(i)?0:J(`Invalid impute column ${$n(i)}`)),n.expand){const i={preparse:lC,aggronly:!0},r=hn("impute",e,n.expand,i),s=ld(e.ungroup(),r);return ey(e,t,r.names,r.names.map(a=>s.get(a,0)))}else return ey(e,t)}function lC(e){e.forEach((t,n)=>t.field?e.set(n,K0(t+"")):0)}function hC(e,t){const n=e.columnNames();return t.length?t.reduce((i,r)=>i.semijoin(r.select(n)),e).dedupe():e.reify([])}function Nv(e,t){const n=new Map;return e.scan((i,r)=>{const s=t(i,r);s!=null&&s===s&&n.set(s,i)}),n}function fC(e,t,n){const i=new Map,r=e.length;for(let s=0;s<r;++s){const a=e[s],o=n(a,t);o!=null&&o===o&&(i.has(o)?i.get(o).push(s):i.set(o,[s]))}return i}function dC(e,t){const n=["i","a","j","b"];return Ys(n,"{"+ao(e,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",e,t)}function pC(e,t,n,{names:i,exprs:r},s={}){const a=e.data(),o=e.indices(!1),c=o.length,u=new Int32Array(c),l=t.data(),h=t.indices(!1),d=h.length,p=new Int32Array(d),g=i.length,_=ke(),b=Array(g),w=Array(g);for(let E=0;E<i.length;++E)b[E]=_.add(i[E],[]),w[E]=r[E];const L=dC(b,w);if((ct(n)?mC:yC)(L,n,a,l,o,h,u,p,c,d),s.left)for(let E=0;E<c;++E)u[E]||L(o[E],a,-1,l);if(s.right)for(let E=0;E<d;++E)p[E]||L(-1,a,h[E],l);return e.create(_.new())}function yC(e,t,n,i,r,s,a,o,c,u){for(let l=0;l<c;++l){const h=r[l];for(let d=0;d<u;++d){const p=s[d];t(h,n,p,i)&&(e(h,n,p,i),a[l]=1,o[d]=1)}}}function mC(e,[t,n],i,r,s,a,o,c,u,l){let h,d,p,g,_,b,w,L,lt=e;u>=l?(h=i,d=t,p=o,g=s,_=r,b=n,w=c,L=a):(h=r,d=n,p=c,g=a,_=i,b=t,w=o,L=s,lt=(Z,Ht,mt,Ae)=>e(mt,Ae,Z,Ht));const E=fC(L,_,b),St=g.length;for(let Z=0;Z<St;++Z){const Ht=g[Z],mt=E.get(d(Ht,h));if(mt){const Ae=mt.length;for(let yn=0;yn<Ae;++yn){const or=mt[yn];lt(Ht,h,L[or],_),w[or]=1}p[Z]=1}}}function Xc(e,t,n){const i=new Map;be(n).forEach((s,a)=>{s=re(s)?t.columnName(s):s,Xt(s)?i.set(a,kr(s)):It(s)||ee(s)&&s.expr?i.set(a,s):J(`Invalid ${e} key value: ${s+""}`)});const r=Se(i,{table:t,aggregate:!1,window:!1});return Oc(r.exprs,!0)}function gC(e,t){const n=new Set(t);return e.filter(i=>n.has(i))}function hd(e,t,n){if(n)Xt(n)?n=[n,n]:ct(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=gC(e.columnNames(),t.columnNames());i.length||J("Natural join requires shared column names."),n=[i,i]}return n}function Fv(e,t,n,i){return n.length!==i.length&&J("Mismatched number of join keys"),[Xc("join",e,n),Xc("join",t,i)]}const _C={aggregate:!1,window:!1},bC={..._C,index:1};function iy(e,t,n,i,r={}){n=hd(e,t,n);const s={join:[e,t]};let a;if(ct(n)){const[o,c]=n.map(be);a=Fv(e,t,o,c),i||(i=vC(e,o,c,r))}else a=Se({on:n},s).exprs[0],i||(i=[Ds(),Ds()]);return pC(e,t,a,wC(e,t,i,s,r&&r.suffix),r)}function vC(e,t,n,i){const r=[];t.forEach((a,o)=>Xt(a)&&a===n[o]?r.push(a):0);const s=vb(r);if(i.left&&i.right){const a=new Set(r);return[e.columnNames().map(o=>{const c=`[${$n(o)}]`;return a.has(o)?{[o]:`(a, b) => a${c} == null ? b${c} : a${c}`}:o}),s]}return i.right?[s,Ds()]:[Ds(),s]}function wC(e,t,n,i,r=[]){if(ct(n)){let s,a,o,c=n.length;s=a=o={names:[],exprs:[]},c--&&(s=hn("join",e,n[0],i)),c--&&(a=hn("join",t,n[1],bC)),c--&&(o=Se(n[2],i));const u=new Set,l=new Set(s.names);return a.names.forEach(h=>{l.has(h)&&u.add(h)}),u.size&&(r[0]!==""&&ry(s.names,u,r[0]||"_1"),r[1]!==""&&ry(a.names,u,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}else return Se(n,i)}function ry(e,t,n){e.forEach((i,r)=>t.has(i)?e[r]=i+n:0)}function SC(e,t,n,i={}){const r=new Ov(e.totalRows());return(ct(n)?IC:xC)(r,e,t,n),i.anti&&r.not().and(e.mask()),e.create({filter:r})}function IC(e,t,n,[i,r]){const s=Nv(n,r);t.scan((a,o)=>{s.get(i(a,o))>=0&&e.set(a)})}function xC(e,t,n,i){const r=t.numRows(),s=n.numRows(),a=t.data(),o=n.data();if(t.isFiltered()||n.isFiltered()){const c=t.indices(!1),u=n.indices(!1);for(let l=0;l<r;++l){const h=c[l];for(let d=0;d<s;++d)if(i(h,a,u[d],o)){e.set(h);break}}}else for(let c=0;c<r;++c)for(let u=0;u<s;++u)if(i(c,a,u,o)){e.set(c);break}}function sy(e,t,n,i){n=hd(e,t,n);const r=ct(n)?Fv(e,t,...n.map(be)):Se({on:n},{join:[e,t]}).exprs[0];return SC(e,t,r,i)}function AC(e,t,[n,i],{names:r,exprs:s,ops:a}){const o=ke(e),c=e.totalRows();r.forEach(d=>o.add(d,Array(c).fill(ot)));const u=Nv(t,i),l=Ys(["lr","rr","data"],"{"+ao(r,(d,p)=>`_[${p}][lr] = $[${p}](rr, data);`)+"}",r.map(d=>o.data[d]),Rr(t,a,s)),h=t.data();return e.scan((d,p)=>{const g=u.get(n(d,p));g>=0&&l(d,g,h)}),e.create(o)}function EC(e,t,n,i){return n=hd(e,t,n),AC(e,t,[Xc("lookup",e,n[0]),Xc("lookup",t,n[1])],hn("lookup",t,i))}const eh=(e,t)=>e??t;function TC(e,t,n,i={}){const{keys:r,keyColumn:s}=OC(e,t,i),a=eh(i.valueSeparator,"_"),o=n.names.length>1?(u,l)=>l+a+r[u]:u=>r[u],c=r.map(u=>Gs(e,n.ops.map(l=>{if(l.name==="count"){const d=p=>u===s[p]?1:NaN;return d.toString=()=>u+":1",{...l,name:"sum",fields:[d]}}const h=l.fields.map(d=>{const p=(g,_)=>u===s[g]?d(g,_):NaN;return p.toString=()=>u+":"+d,p});return{...l,fields:h}})));return e.create(BC(n,o,e.groups(),c))}function OC(e,t,n){const i=n.limit>0?+n.limit:1/0,r=eh(n.sort,!0),s=eh(n.keySeparator,"_"),a=Rr(e,t.ops,t.exprs),o=a.length===1?a[0]:(h,d)=>a.map(p=>p(h,d)).join(s),c=Array(e.totalRows());e.scan((h,d)=>c[h]=o(h,d));const u=Gs(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>c[h]],params:[]}])[0][0],l=r?u.sort():u;return{keys:Number.isFinite(i)?l.slice(0,i):l,keyColumn:c}}function BC({names:e,exprs:t},n,i,r){const s=i?i.size:1,a=ke(),o=r.length,c=e.length;let u;const l=(h,d)=>u[h][d];i&&Ev(a,i);for(let h=0;h<c;++h){const d=t[h];if(d.field!=null)for(let p=0;p<o;++p)a.add(n(p,e[h]),r[p][d.field]);else if(s>1)for(let p=0;p<o;++p){u=r[p];const g=a.add(n(p,e[h]),Array(s));for(let _=0;_<s;++_)g[_]=d(_,null,l)}else for(let p=0;p<o;++p)u=r[p],a.add(n(p,e[h]),[d(0,null,l)])}return a.new()}function NC(e,t,n,i){return TC(e,hn("fold",e,t),hn("fold",e,n,{preparse:FC,aggronly:!0}),i)}function FC(e){e.forEach((t,n)=>t.field?e.set(n,Y0(t+"")):0)}function DC(e,t){const n=new Map;return e.columnNames(i=>(n.set(i,i),0)),ad(e,gi(e,t,n))}function ay(e,t){return ld(e,Se(t,{table:e,aggronly:!0,window:!1}))}function kC(e,t,n,i){return(t?i?RC:CC:i?LC:MC)(e.length,e,n,i)}function CC(e,t,n){const i=n.length;for(let r=0;r<e;++r)t[r]=n[i*Ls()|0];return t}function RC(e,t,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let c=0;c<r;++c)s[c]=a+=i(n[c]);const o=Tv(od).right;for(let c=0;c<e;++c)t[c]=n[o(s,a*Ls())];return t}function MC(e,t,n){const i=n.length;if(e>=i)return n;for(let r=0;r<e;++r)t[r]=n[r];for(let r=e;r<i;++r){const s=r*Ls();s<e&&(t[s|0]=n[r])}return t}function LC(e,t,n,i){const r=n.length;if(e>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(Ls())/i(n[o]);a.sort((o,c)=>s[o]-s[c]);for(let o=0;o<e;++o)t[o]=n[a[o]];return t}function UC(e,t=0,n=e.length){let i=n-(t=+t);for(;i;){const r=Ls()*i--|0,s=e[i+t];e[i+t]=e[r+t],e[r+t]=s}return e}function PC(e,t,n,i={}){const{replace:r,shuffle:s}=i,a=e.partitions(!1);let o=0;t=a.map((l,h)=>{let d=t(h);return o+=d=r?d:Math.min(l.length,d),d});const c=new Uint32Array(o);let u=0;return a.forEach((l,h)=>{const d=t[h],p=c.subarray(u,u+=d);!r&&d===l.length?p.set(l):kC(p,r,l,n)}),s!==!1&&(a.length>1||!r)&&UC(c),e.reify(c)}function $C(e,t,n={}){return PC(e,VC(e,t),jC(e,n.weight),n)}const Dv=e=>t=>e.get(t)||0;function VC(e,t){return re(t)?()=>t:Dv(ld(e,Se({size:t},{table:e,window:!1})).column("size"))}function jC(e,t){return t==null?null:(t=re(t)?e.columnName(t):t,Dv(Xt(t)?e.column(t):ud(e,Se({w:t},{table:e}),{drop:!0}).column("w")))}function zC(e,t){return ad(e,gi(e,t))}function WC(e,{names:t,exprs:n,ops:i=[]},r={}){if(t.length===0)return e;const s=t.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,o=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),c=Rr(e,i,n),u=ke(),l=t.reduce((d,p,g)=>d.set(p,g),new Map),h=(d,p)=>{const g=qC(e,c[d],o),_=g.length;for(let b=0;b<_;++b)u.add(s[b]||`${p}_${b+1}`,g[b])};return e.columnNames().forEach(d=>{l.has(d)?(a||u.add(d,e.column(d)),h(l.get(d),d),l.delete(d)):u.add(d,e.column(d))}),l.forEach(h),e.create(u)}function qC(e,t,n){const i=e.totalRows(),r=[];return e.scan((s,a)=>{const o=be(t(s,a)),c=Math.min(o.length,n);for(;r.length<c;)r.push(Array(i).fill(ot));for(let u=0;u<c;++u)r[u][s]=o[u]}),r}function YC(e,t,n){return WC(e,hn("spread",e,t),n)}function GC(e,t){return e.concat(t).dedupe()}function HC(e,t,n){return Bv(e,hn("unroll",e,t),n&&n.drop?{...n,drop:hn("unroll",e,n.drop).names}:n)}function KC(e,t){return e.create({groups:JC(e,t)})}function JC(e,{names:t=[],exprs:n=[],ops:i=[]}){const r=t.length;if(r===0)return null;if(r===1&&!e.isFiltered()&&n[0].field){const p=e.column(n[0].field);if(p.groups)return p.groups(t)}let s=Rr(e,i,n);const a=Oc(s),o=e.totalRows(),c=new Uint32Array(o),u={},l=[],h=e.data(),d=e.mask();if(d)for(let p=d.next(0);p>=0;p=d.next(p+1)){const g=a(p,h)+"",_=u[g];c[p]=_??(u[g]=l.push(p)-1)}else for(let p=0;p<o;++p){const g=a(p,h)+"",_=u[g];c[p]=_??(u[g]=l.push(p)-1)}return i.length||(s=s.map(p=>g=>p(g,h))),{keys:c,get:s,names:t,rows:l,size:l.length}}function QC(e,t){return KC(e,hn("groupby",e,t))}function XC(e,t){return e.create({order:t})}const ZC=(e,t,n,i)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function tR(e,t){const n=[],i=[],r=[];let s=null,a="0",o="0";e.isGrouped()&&(s=e.groups().keys,a="ka",o="kb");const{ops:c}=Se(t,{table:e,value:(p,g)=>{if(n.push(p),g.escape){const _=b=>`fn[${r.length}](${b}, data)`;i.push([_("a"),_("b")]),r.push(g.escape)}else i.push([Tc(g,{index:"a",op:a}),Tc(g,{index:"b",op:o})])},window:!1}),u=Gs(e,c),l=(p,g)=>u[p][g],h=n.length;let d="return (a, b) => {"+(l&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let p=0;p<h;++p){const g=t.get(n[p]).desc?-1:1,[_,b]=i[p];d+=ZC(_,b,-g,g)}return d+="0;};",Function("op","keys","fn","data",d)(l,s,r,e.data())}function eR(e,t){return XC(e,nR(e,t))}function nR(e,t){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return t.forEach(s=>{const a=s.expr!=null?s.expr:s;if(ee(a)&&!It(a))for(const o in a)r(a[o]);else r(re(a)?kr(s,e.columnName(a)):Xt(a)?kr(s):It(a)?s:J(`Invalid orderby field: ${s+""}`))}),tR(e,i)}function iR(e,t){const n=e.numRows(),i=n+t.reduce((a,o)=>a+o.numRows(),0);if(n===i)return e;const r=[e,...t],s=ke();return e.columnNames().forEach(a=>{const o=Array(i);let c=0;r.forEach(u=>{const l=u.column(a)||{get:()=>ot};u.scan(h=>o[c++]=l.get(h))}),s.add(a,o)}),e.create(s.new())}function rR(e,t){const n=ke(),i=e.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},c=new Uint32Array(o+1);s.forEach(d=>n.add(d,null));const u=i?Av(e,t,i):[xv(e,t)];t.outputs().map(d=>n.add(d,[]));const l=c.length-1;let h=0;for(let d=0;d<l;++d)h+=c[d+1]=t.write(u[d],n.data,c[d]);if(i){const d=e.data();s.forEach((p,g)=>{const _=n.data[p]=Array(h),b=r[g];for(let w=0,L=0;w<o;++w)_.fill(b(a[w],d),L,L+=c[w+1])})}return e.create(n.new())}function sR(e){return e.isGrouped()?e.create({groups:null}):e}function aR(e){return e.isOrdered()?e.create({order:null}):e}const oR={__antijoin:(e,t,n)=>sy(e,t,n,{anti:!0}),__count:(e,t={})=>ay(e,{[t.as||"count"]:G0()}),__cross:(e,t,n,i)=>iy(e,t,()=>!0,n,{...i,left:!0,right:!0}),__concat:iR,__dedupe:Ck,__derive:Zk,__except:tC,__filter:iC,__fold:sC,__impute:uC,__intersect:hC,__join:iy,__lookup:EC,__pivot:NC,__relocate:Sv,__rename:DC,__rollup:ay,__sample:$C,__select:zC,__semijoin:sy,__spread:YC,__union:GC,__unroll:HC,__groupby:QC,__orderby:eR,__ungroup:sR,__unorder:aR,__reduce:rR};Object.assign(ui.prototype,oR);function cR(e,t){return ui.from(e,t)}ui.prototype;class uR extends Gn{constructor(t){super(),this.function_store=t.matching,this.func_elected=t.default_func,this.ignore_cols=t.ignore_cols,this.backend=t.backend,this.params=t.defaults??{}}snapshot(){return{params:zo(this.params),func_elected:zo(this.func_elected)}}restoreSnapshot(t){this.params=t.params,this.func_elected=t.func_elected}async _execute(t=null){if(jo(t))return;t.length==1&&A1("func_elected",t[0])?this.func_elected=t[0].func_elected:F1(t)||t.forEach(c=>{this.params=ah(this.params,c)});let n=await this.backend.execute(this.params),i=cR(n),r=i.columnNames();r=m1(r,this.ignore_cols);let s=q1(r,r),a=this.function_store[0][this.func_elected],o=[];s.forEach(([c,u])=>{let l=a(c,i.array(c),u,i.array(u));o.push({x:c,y:u,value:l})}),this.emit("data",o,"matching_table")}}class lR extends Gn{constructor(){super(),this.overlays={}}snapshot(){return zo(this.overlays)}restoreSnapshot(t){this.overlays=t}async _execute(t,n){t.forEach(r=>{this.overlays=R1(this.overlays,r)});let i=[];my(({left:r,right:s},a)=>{i.push({key:a,left:r,right:s})},this.overlays),this.emit("data",i,"overlay")}}class hR extends Gn{constructor(t){super(),this.backend=t.backend,this.name=t.name,this.params=t.params}async execute(t){this.params=t??this.params;const n=await this.backend.execute(this.params);let i=[];for(const s of n){let a=JSON.parse(s.feature);i.push(a)}const r={type:"FeatureCollection",name:this.name,features:i};return this.emit("data",r,this.name),r}}let oy={array:Ax,url:Ex,duckdb:ZE,cdt:eT,identity:nT,random:iT,query:rT,matching:uR,overlay:lR,map:hR},fR=0;class N3 extends Map{get backends(){return fy(this)}registerClass(t,n){oy[t]=n}createBackends(t){for(const n of t)this.createBackend(n)}createBackend(t){t.id=t.id??`_backendid_${fR++}`;let n=oy[t.type];if(!n)throw new Error(`Backend type ${t.type} not found`);let i=new n(t);return i.id=t.id,this[t.id]=i,console.info("createBackend",t.id,i),i}}export{_y as $,li as A,N3 as B,Zc as C,p1 as D,u1 as E,m1 as F,ES as G,uh as H,Ny as I,za as J,LS as K,Yo as L,uR as M,ba as N,lR as O,lh as P,rT as Q,ye as R,on as S,ki as T,wa as U,kd as V,GS as W,PS as X,ky as Y,yR as Z,Pt as _,_R as a,sI as a0,mR as a1,Go as a2,by as a3,xd as a4,Gn as a5,zo as a6,z1 as a7,Sx as b,Mt as c,sh as d,F1 as e,my as f,L1 as g,fy as h,s1 as i,d1 as j,_a as k,jo as l,ah as m,Ot as n,ih as o,fd as p,Lv as q,ly as r,cy as s,Rv as t,Yv as u,gR as v,tu as w,uy as x,Kv as y,ul as z};
